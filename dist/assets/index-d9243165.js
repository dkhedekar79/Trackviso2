(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function _k(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var g_={exports:{}},Vd={},y_={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gl=Symbol.for("react.element"),bk=Symbol.for("react.portal"),Sk=Symbol.for("react.fragment"),Tk=Symbol.for("react.strict_mode"),Ek=Symbol.for("react.profiler"),Nk=Symbol.for("react.provider"),kk=Symbol.for("react.context"),jk=Symbol.for("react.forward_ref"),Ck=Symbol.for("react.suspense"),Ik=Symbol.for("react.memo"),Pk=Symbol.for("react.lazy"),Yy=Symbol.iterator;function Ak(t){return t===null||typeof t!="object"?null:(t=Yy&&t[Yy]||t["@@iterator"],typeof t=="function"?t:null)}var x_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v_=Object.assign,w_={};function Vo(t,e,n){this.props=t,this.context=e,this.refs=w_,this.updater=n||x_}Vo.prototype.isReactComponent={};Vo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Vo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function __(){}__.prototype=Vo.prototype;function Rp(t,e,n){this.props=t,this.context=e,this.refs=w_,this.updater=n||x_}var Dp=Rp.prototype=new __;Dp.constructor=Rp;v_(Dp,Vo.prototype);Dp.isPureReactComponent=!0;var Jy=Array.isArray,b_=Object.prototype.hasOwnProperty,Mp={current:null},S_={key:!0,ref:!0,__self:!0,__source:!0};function T_(t,e,n){var s,r={},i=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)b_.call(e,s)&&!S_.hasOwnProperty(s)&&(r[s]=e[s]);var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];r.children=c}if(t&&t.defaultProps)for(s in l=t.defaultProps,l)r[s]===void 0&&(r[s]=l[s]);return{$$typeof:Gl,type:t,key:i,ref:o,props:r,_owner:Mp.current}}function Rk(t,e){return{$$typeof:Gl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Vp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Gl}function Dk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Zy=/\/+/g;function $h(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Dk(""+t.key):e.toString(36)}function uu(t,e,n,s,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Gl:case bk:o=!0}}if(o)return o=t,r=r(o),t=s===""?"."+$h(o,0):s,Jy(r)?(n="",t!=null&&(n=t.replace(Zy,"$&/")+"/"),uu(r,e,n,"",function(d){return d})):r!=null&&(Vp(r)&&(r=Rk(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(Zy,"$&/")+"/")+t)),e.push(r)),1;if(o=0,s=s===""?".":s+":",Jy(t))for(var l=0;l<t.length;l++){i=t[l];var c=s+$h(i,l);o+=uu(i,e,n,c,r)}else if(c=Ak(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=s+$h(i,l++),o+=uu(i,e,n,c,r);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Dc(t,e,n){if(t==null)return t;var s=[],r=0;return uu(t,s,"","",function(i){return e.call(n,i,r++)}),s}function Mk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Gt={current:null},du={transition:null},Vk={ReactCurrentDispatcher:Gt,ReactCurrentBatchConfig:du,ReactCurrentOwner:Mp};function E_(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:Dc,forEach:function(t,e,n){Dc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Dc(t,function(){e++}),e},toArray:function(t){return Dc(t,function(e){return e})||[]},only:function(t){if(!Vp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};me.Component=Vo;me.Fragment=Sk;me.Profiler=Ek;me.PureComponent=Rp;me.StrictMode=Tk;me.Suspense=Ck;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vk;me.act=E_;me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=v_({},t.props),r=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Mp.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)b_.call(e,c)&&!S_.hasOwnProperty(c)&&(s[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:Gl,type:t.type,key:r,ref:i,props:s,_owner:o}};me.createContext=function(t){return t={$$typeof:kk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Nk,_context:t},t.Consumer=t};me.createElement=T_;me.createFactory=function(t){var e=T_.bind(null,t);return e.type=t,e};me.createRef=function(){return{current:null}};me.forwardRef=function(t){return{$$typeof:jk,render:t}};me.isValidElement=Vp;me.lazy=function(t){return{$$typeof:Pk,_payload:{_status:-1,_result:t},_init:Mk}};me.memo=function(t,e){return{$$typeof:Ik,type:t,compare:e===void 0?null:e}};me.startTransition=function(t){var e=du.transition;du.transition={};try{t()}finally{du.transition=e}};me.unstable_act=E_;me.useCallback=function(t,e){return Gt.current.useCallback(t,e)};me.useContext=function(t){return Gt.current.useContext(t)};me.useDebugValue=function(){};me.useDeferredValue=function(t){return Gt.current.useDeferredValue(t)};me.useEffect=function(t,e){return Gt.current.useEffect(t,e)};me.useId=function(){return Gt.current.useId()};me.useImperativeHandle=function(t,e,n){return Gt.current.useImperativeHandle(t,e,n)};me.useInsertionEffect=function(t,e){return Gt.current.useInsertionEffect(t,e)};me.useLayoutEffect=function(t,e){return Gt.current.useLayoutEffect(t,e)};me.useMemo=function(t,e){return Gt.current.useMemo(t,e)};me.useReducer=function(t,e,n){return Gt.current.useReducer(t,e,n)};me.useRef=function(t){return Gt.current.useRef(t)};me.useState=function(t){return Gt.current.useState(t)};me.useSyncExternalStore=function(t,e,n){return Gt.current.useSyncExternalStore(t,e,n)};me.useTransition=function(){return Gt.current.useTransition()};me.version="18.3.1";y_.exports=me;var S=y_.exports;const Lk=_k(S);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ok=S,Fk=Symbol.for("react.element"),Uk=Symbol.for("react.fragment"),$k=Object.prototype.hasOwnProperty,Bk=Ok.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zk={key:!0,ref:!0,__self:!0,__source:!0};function N_(t,e,n){var s,r={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)$k.call(e,s)&&!zk.hasOwnProperty(s)&&(r[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:Fk,type:t,key:i,ref:o,props:r,_owner:Bk.current}}Vd.Fragment=Uk;Vd.jsx=N_;Vd.jsxs=N_;g_.exports=Vd;var a=g_.exports,zf={},k_={exports:{}},hn={},j_={exports:{}},C_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,W){var Y=F.length;F.push(W);e:for(;0<Y;){var te=Y-1>>>1,ce=F[te];if(0<r(ce,W))F[te]=W,F[Y]=ce,Y=te;else break e}}function n(F){return F.length===0?null:F[0]}function s(F){if(F.length===0)return null;var W=F[0],Y=F.pop();if(Y!==W){F[0]=Y;e:for(var te=0,ce=F.length,ye=ce>>>1;te<ye;){var Ft=2*(te+1)-1,B=F[Ft],q=Ft+1,Z=F[q];if(0>r(B,Y))q<ce&&0>r(Z,B)?(F[te]=Z,F[q]=Y,te=q):(F[te]=B,F[Ft]=Y,te=Ft);else if(q<ce&&0>r(Z,Y))F[te]=Z,F[q]=Y,te=q;else break e}}return W}function r(F,W){var Y=F.sortIndex-W.sortIndex;return Y!==0?Y:F.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],h=1,f=null,m=3,y=!1,b=!1,C=!1,I=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(F){for(var W=n(d);W!==null;){if(W.callback===null)s(d);else if(W.startTime<=F)s(d),W.sortIndex=W.expirationTime,e(c,W);else break;W=n(d)}}function P(F){if(C=!1,_(F),!b)if(n(c)!==null)b=!0,Q(D);else{var W=n(d);W!==null&&z(P,W.startTime-F)}}function D(F,W){b=!1,C&&(C=!1,x(w),w=-1),y=!0;var Y=m;try{for(_(W),f=n(c);f!==null&&(!(f.expirationTime>W)||F&&!R());){var te=f.callback;if(typeof te=="function"){f.callback=null,m=f.priorityLevel;var ce=te(f.expirationTime<=W);W=t.unstable_now(),typeof ce=="function"?f.callback=ce:f===n(c)&&s(c),_(W)}else s(c);f=n(c)}if(f!==null)var ye=!0;else{var Ft=n(d);Ft!==null&&z(P,Ft.startTime-W),ye=!1}return ye}finally{f=null,m=Y,y=!1}}var A=!1,T=null,w=-1,j=5,k=-1;function R(){return!(t.unstable_now()-k<j)}function M(){if(T!==null){var F=t.unstable_now();k=F;var W=!0;try{W=T(!0,F)}finally{W?E():(A=!1,T=null)}}else A=!1}var E;if(typeof v=="function")E=function(){v(M)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,$=V.port2;V.port1.onmessage=M,E=function(){$.postMessage(null)}}else E=function(){I(M,0)};function Q(F){T=F,A||(A=!0,E())}function z(F,W){w=I(function(){F(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){b||y||(b=!0,Q(D))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(F){switch(m){case 1:case 2:case 3:var W=3;break;default:W=m}var Y=m;m=W;try{return F()}finally{m=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,W){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var Y=m;m=F;try{return W()}finally{m=Y}},t.unstable_scheduleCallback=function(F,W,Y){var te=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?te+Y:te):Y=te,F){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=Y+ce,F={id:h++,callback:W,priorityLevel:F,startTime:Y,expirationTime:ce,sortIndex:-1},Y>te?(F.sortIndex=Y,e(d,F),n(c)===null&&F===n(d)&&(C?(x(w),w=-1):C=!0,z(P,Y-te))):(F.sortIndex=ce,e(c,F),b||y||(b=!0,Q(D))),F},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(F){var W=m;return function(){var Y=m;m=W;try{return F.apply(this,arguments)}finally{m=Y}}}})(C_);j_.exports=C_;var Hk=j_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wk=S,un=Hk;function X(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var I_=new Set,ll={};function Ei(t,e){xo(t,e),xo(t+"Capture",e)}function xo(t,e){for(ll[t]=e,t=0;t<e.length;t++)I_.add(e[t])}var Cs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hf=Object.prototype.hasOwnProperty,Gk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ex={},tx={};function Kk(t){return Hf.call(tx,t)?!0:Hf.call(ex,t)?!1:Gk.test(t)?tx[t]=!0:(ex[t]=!0,!1)}function qk(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Xk(t,e,n,s){if(e===null||typeof e>"u"||qk(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Kt(t,e,n,s,r,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Tt[t]=new Kt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Tt[e]=new Kt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Tt[t]=new Kt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Tt[t]=new Kt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Tt[t]=new Kt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Tt[t]=new Kt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Tt[t]=new Kt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Tt[t]=new Kt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Tt[t]=new Kt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Lp=/[\-:]([a-z])/g;function Op(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Lp,Op);Tt[e]=new Kt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Lp,Op);Tt[e]=new Kt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Lp,Op);Tt[e]=new Kt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Tt[t]=new Kt(t,1,!1,t.toLowerCase(),null,!1,!1)});Tt.xlinkHref=new Kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Tt[t]=new Kt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Fp(t,e,n,s){var r=Tt.hasOwnProperty(e)?Tt[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Xk(e,n,r,s)&&(n=null),s||r===null?Kk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,s=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var Us=Wk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Mc=Symbol.for("react.element"),Bi=Symbol.for("react.portal"),zi=Symbol.for("react.fragment"),Up=Symbol.for("react.strict_mode"),Wf=Symbol.for("react.profiler"),P_=Symbol.for("react.provider"),A_=Symbol.for("react.context"),$p=Symbol.for("react.forward_ref"),Gf=Symbol.for("react.suspense"),Kf=Symbol.for("react.suspense_list"),Bp=Symbol.for("react.memo"),tr=Symbol.for("react.lazy"),R_=Symbol.for("react.offscreen"),nx=Symbol.iterator;function ga(t){return t===null||typeof t!="object"?null:(t=nx&&t[nx]||t["@@iterator"],typeof t=="function"?t:null)}var ze=Object.assign,Bh;function Ca(t){if(Bh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Bh=e&&e[1]||""}return`
`+Bh+t}var zh=!1;function Hh(t,e){if(!t||zh)return"";zh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var s=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){s=d}t.call(e.prototype)}else{try{throw Error()}catch(d){s=d}t()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var r=d.stack.split(`
`),i=s.stack.split(`
`),o=r.length-1,l=i.length-1;1<=o&&0<=l&&r[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(r[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||r[o]!==i[l]){var c=`
`+r[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{zh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ca(t):""}function Qk(t){switch(t.tag){case 5:return Ca(t.type);case 16:return Ca("Lazy");case 13:return Ca("Suspense");case 19:return Ca("SuspenseList");case 0:case 2:case 15:return t=Hh(t.type,!1),t;case 11:return t=Hh(t.type.render,!1),t;case 1:return t=Hh(t.type,!0),t;default:return""}}function qf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case zi:return"Fragment";case Bi:return"Portal";case Wf:return"Profiler";case Up:return"StrictMode";case Gf:return"Suspense";case Kf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case A_:return(t.displayName||"Context")+".Consumer";case P_:return(t._context.displayName||"Context")+".Provider";case $p:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Bp:return e=t.displayName||null,e!==null?e:qf(t.type)||"Memo";case tr:e=t._payload,t=t._init;try{return qf(t(e))}catch{}}return null}function Yk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qf(e);case 8:return e===Up?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Nr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function D_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Jk(t){var e=D_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Vc(t){t._valueTracker||(t._valueTracker=Jk(t))}function M_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=D_(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function Uu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Xf(t,e){var n=e.checked;return ze({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function sx(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=Nr(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function V_(t,e){e=e.checked,e!=null&&Fp(t,"checked",e,!1)}function Qf(t,e){V_(t,e);var n=Nr(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Yf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Yf(t,e.type,Nr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function rx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Yf(t,e,n){(e!=="number"||Uu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ia=Array.isArray;function oo(t,e,n,s){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&s&&(t[n].defaultSelected=!0)}else{for(n=""+Nr(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,s&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Jf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return ze({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ix(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(X(92));if(Ia(n)){if(1<n.length)throw Error(X(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Nr(n)}}function L_(t,e){var n=Nr(e.value),s=Nr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function ox(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function O_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?O_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Lc,F_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Lc=Lc||document.createElement("div"),Lc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Lc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function cl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ua={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zk=["Webkit","ms","Moz","O"];Object.keys(Ua).forEach(function(t){Zk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ua[e]=Ua[t]})});function U_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ua.hasOwnProperty(t)&&Ua[t]?(""+e).trim():e+"px"}function $_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,r=U_(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,r):t[n]=r}}var ej=ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function em(t,e){if(e){if(ej[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function tm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nm=null;function zp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var sm=null,ao=null,lo=null;function ax(t){if(t=Xl(t)){if(typeof sm!="function")throw Error(X(280));var e=t.stateNode;e&&(e=$d(e),sm(t.stateNode,t.type,e))}}function B_(t){ao?lo?lo.push(t):lo=[t]:ao=t}function z_(){if(ao){var t=ao,e=lo;if(lo=ao=null,ax(t),e)for(t=0;t<e.length;t++)ax(e[t])}}function H_(t,e){return t(e)}function W_(){}var Wh=!1;function G_(t,e,n){if(Wh)return t(e,n);Wh=!0;try{return H_(t,e,n)}finally{Wh=!1,(ao!==null||lo!==null)&&(W_(),z_())}}function ul(t,e){var n=t.stateNode;if(n===null)return null;var s=$d(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(X(231,e,typeof n));return n}var rm=!1;if(Cs)try{var ya={};Object.defineProperty(ya,"passive",{get:function(){rm=!0}}),window.addEventListener("test",ya,ya),window.removeEventListener("test",ya,ya)}catch{rm=!1}function tj(t,e,n,s,r,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var $a=!1,$u=null,Bu=!1,im=null,nj={onError:function(t){$a=!0,$u=t}};function sj(t,e,n,s,r,i,o,l,c){$a=!1,$u=null,tj.apply(nj,arguments)}function rj(t,e,n,s,r,i,o,l,c){if(sj.apply(this,arguments),$a){if($a){var d=$u;$a=!1,$u=null}else throw Error(X(198));Bu||(Bu=!0,im=d)}}function Ni(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function K_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function lx(t){if(Ni(t)!==t)throw Error(X(188))}function ij(t){var e=t.alternate;if(!e){if(e=Ni(t),e===null)throw Error(X(188));return e!==t?null:t}for(var n=t,s=e;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return lx(r),t;if(i===s)return lx(r),e;i=i.sibling}throw Error(X(188))}if(n.return!==s.return)n=r,s=i;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,s=i;break}if(l===s){o=!0,s=r,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,s=r;break}if(l===s){o=!0,s=i,n=r;break}l=l.sibling}if(!o)throw Error(X(189))}}if(n.alternate!==s)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?t:e}function q_(t){return t=ij(t),t!==null?X_(t):null}function X_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=X_(t);if(e!==null)return e;t=t.sibling}return null}var Q_=un.unstable_scheduleCallback,cx=un.unstable_cancelCallback,oj=un.unstable_shouldYield,aj=un.unstable_requestPaint,Qe=un.unstable_now,lj=un.unstable_getCurrentPriorityLevel,Hp=un.unstable_ImmediatePriority,Y_=un.unstable_UserBlockingPriority,zu=un.unstable_NormalPriority,cj=un.unstable_LowPriority,J_=un.unstable_IdlePriority,Ld=null,Zn=null;function uj(t){if(Zn&&typeof Zn.onCommitFiberRoot=="function")try{Zn.onCommitFiberRoot(Ld,t,void 0,(t.current.flags&128)===128)}catch{}}var Fn=Math.clz32?Math.clz32:fj,dj=Math.log,hj=Math.LN2;function fj(t){return t>>>=0,t===0?32:31-(dj(t)/hj|0)|0}var Oc=64,Fc=4194304;function Pa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Hu(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,r=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~r;l!==0?s=Pa(l):(i&=o,i!==0&&(s=Pa(i)))}else o=n&~r,o!==0?s=Pa(o):i!==0&&(s=Pa(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-Fn(e),r=1<<n,s|=t[n],e&=~r;return s}function mj(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pj(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Fn(i),l=1<<o,c=r[o];c===-1?(!(l&n)||l&s)&&(r[o]=mj(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function om(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Z_(){var t=Oc;return Oc<<=1,!(Oc&4194240)&&(Oc=64),t}function Gh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Kl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Fn(e),t[e]=n}function gj(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Fn(n),i=1<<r;e[r]=0,s[r]=-1,t[r]=-1,n&=~i}}function Wp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-Fn(n),r=1<<s;r&e|t[s]&e&&(t[s]|=e),n&=~r}}var ke=0;function eb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var tb,Gp,nb,sb,rb,am=!1,Uc=[],hr=null,fr=null,mr=null,dl=new Map,hl=new Map,sr=[],yj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ux(t,e){switch(t){case"focusin":case"focusout":hr=null;break;case"dragenter":case"dragleave":fr=null;break;case"mouseover":case"mouseout":mr=null;break;case"pointerover":case"pointerout":dl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":hl.delete(e.pointerId)}}function xa(t,e,n,s,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},e!==null&&(e=Xl(e),e!==null&&Gp(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function xj(t,e,n,s,r){switch(e){case"focusin":return hr=xa(hr,t,e,n,s,r),!0;case"dragenter":return fr=xa(fr,t,e,n,s,r),!0;case"mouseover":return mr=xa(mr,t,e,n,s,r),!0;case"pointerover":var i=r.pointerId;return dl.set(i,xa(dl.get(i)||null,t,e,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,hl.set(i,xa(hl.get(i)||null,t,e,n,s,r)),!0}return!1}function ib(t){var e=si(t.target);if(e!==null){var n=Ni(e);if(n!==null){if(e=n.tag,e===13){if(e=K_(n),e!==null){t.blockedOn=e,rb(t.priority,function(){nb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function hu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=lm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);nm=s,n.target.dispatchEvent(s),nm=null}else return e=Xl(n),e!==null&&Gp(e),t.blockedOn=n,!1;e.shift()}return!0}function dx(t,e,n){hu(t)&&n.delete(e)}function vj(){am=!1,hr!==null&&hu(hr)&&(hr=null),fr!==null&&hu(fr)&&(fr=null),mr!==null&&hu(mr)&&(mr=null),dl.forEach(dx),hl.forEach(dx)}function va(t,e){t.blockedOn===e&&(t.blockedOn=null,am||(am=!0,un.unstable_scheduleCallback(un.unstable_NormalPriority,vj)))}function fl(t){function e(r){return va(r,t)}if(0<Uc.length){va(Uc[0],t);for(var n=1;n<Uc.length;n++){var s=Uc[n];s.blockedOn===t&&(s.blockedOn=null)}}for(hr!==null&&va(hr,t),fr!==null&&va(fr,t),mr!==null&&va(mr,t),dl.forEach(e),hl.forEach(e),n=0;n<sr.length;n++)s=sr[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<sr.length&&(n=sr[0],n.blockedOn===null);)ib(n),n.blockedOn===null&&sr.shift()}var co=Us.ReactCurrentBatchConfig,Wu=!0;function wj(t,e,n,s){var r=ke,i=co.transition;co.transition=null;try{ke=1,Kp(t,e,n,s)}finally{ke=r,co.transition=i}}function _j(t,e,n,s){var r=ke,i=co.transition;co.transition=null;try{ke=4,Kp(t,e,n,s)}finally{ke=r,co.transition=i}}function Kp(t,e,n,s){if(Wu){var r=lm(t,e,n,s);if(r===null)nf(t,e,s,Gu,n),ux(t,s);else if(xj(r,t,e,n,s))s.stopPropagation();else if(ux(t,s),e&4&&-1<yj.indexOf(t)){for(;r!==null;){var i=Xl(r);if(i!==null&&tb(i),i=lm(t,e,n,s),i===null&&nf(t,e,s,Gu,n),i===r)break;r=i}r!==null&&s.stopPropagation()}else nf(t,e,s,null,n)}}var Gu=null;function lm(t,e,n,s){if(Gu=null,t=zp(s),t=si(t),t!==null)if(e=Ni(t),e===null)t=null;else if(n=e.tag,n===13){if(t=K_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Gu=t,null}function ob(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lj()){case Hp:return 1;case Y_:return 4;case zu:case cj:return 16;case J_:return 536870912;default:return 16}default:return 16}}var cr=null,qp=null,fu=null;function ab(){if(fu)return fu;var t,e=qp,n=e.length,s,r="value"in cr?cr.value:cr.textContent,i=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(s=1;s<=o&&e[n-s]===r[i-s];s++);return fu=r.slice(t,1<s?1-s:void 0)}function mu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function $c(){return!0}function hx(){return!1}function fn(t){function e(n,s,r,i,o){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?$c:hx,this.isPropagationStopped=hx,this}return ze(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$c)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$c)},persist:function(){},isPersistent:$c}),e}var Lo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xp=fn(Lo),ql=ze({},Lo,{view:0,detail:0}),bj=fn(ql),Kh,qh,wa,Od=ze({},ql,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wa&&(wa&&t.type==="mousemove"?(Kh=t.screenX-wa.screenX,qh=t.screenY-wa.screenY):qh=Kh=0,wa=t),Kh)},movementY:function(t){return"movementY"in t?t.movementY:qh}}),fx=fn(Od),Sj=ze({},Od,{dataTransfer:0}),Tj=fn(Sj),Ej=ze({},ql,{relatedTarget:0}),Xh=fn(Ej),Nj=ze({},Lo,{animationName:0,elapsedTime:0,pseudoElement:0}),kj=fn(Nj),jj=ze({},Lo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Cj=fn(jj),Ij=ze({},Lo,{data:0}),mx=fn(Ij),Pj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Aj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dj(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Rj[t])?!!e[t]:!1}function Qp(){return Dj}var Mj=ze({},ql,{key:function(t){if(t.key){var e=Pj[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=mu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Aj[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qp,charCode:function(t){return t.type==="keypress"?mu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?mu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Vj=fn(Mj),Lj=ze({},Od,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),px=fn(Lj),Oj=ze({},ql,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qp}),Fj=fn(Oj),Uj=ze({},Lo,{propertyName:0,elapsedTime:0,pseudoElement:0}),$j=fn(Uj),Bj=ze({},Od,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),zj=fn(Bj),Hj=[9,13,27,32],Yp=Cs&&"CompositionEvent"in window,Ba=null;Cs&&"documentMode"in document&&(Ba=document.documentMode);var Wj=Cs&&"TextEvent"in window&&!Ba,lb=Cs&&(!Yp||Ba&&8<Ba&&11>=Ba),gx=String.fromCharCode(32),yx=!1;function cb(t,e){switch(t){case"keyup":return Hj.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ub(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Hi=!1;function Gj(t,e){switch(t){case"compositionend":return ub(e);case"keypress":return e.which!==32?null:(yx=!0,gx);case"textInput":return t=e.data,t===gx&&yx?null:t;default:return null}}function Kj(t,e){if(Hi)return t==="compositionend"||!Yp&&cb(t,e)?(t=ab(),fu=qp=cr=null,Hi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return lb&&e.locale!=="ko"?null:e.data;default:return null}}var qj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!qj[t.type]:e==="textarea"}function db(t,e,n,s){B_(s),e=Ku(e,"onChange"),0<e.length&&(n=new Xp("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var za=null,ml=null;function Xj(t){bb(t,0)}function Fd(t){var e=Ki(t);if(M_(e))return t}function Qj(t,e){if(t==="change")return e}var hb=!1;if(Cs){var Qh;if(Cs){var Yh="oninput"in document;if(!Yh){var vx=document.createElement("div");vx.setAttribute("oninput","return;"),Yh=typeof vx.oninput=="function"}Qh=Yh}else Qh=!1;hb=Qh&&(!document.documentMode||9<document.documentMode)}function wx(){za&&(za.detachEvent("onpropertychange",fb),ml=za=null)}function fb(t){if(t.propertyName==="value"&&Fd(ml)){var e=[];db(e,ml,t,zp(t)),G_(Xj,e)}}function Yj(t,e,n){t==="focusin"?(wx(),za=e,ml=n,za.attachEvent("onpropertychange",fb)):t==="focusout"&&wx()}function Jj(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fd(ml)}function Zj(t,e){if(t==="click")return Fd(e)}function eC(t,e){if(t==="input"||t==="change")return Fd(e)}function tC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Bn=typeof Object.is=="function"?Object.is:tC;function pl(t,e){if(Bn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!Hf.call(e,r)||!Bn(t[r],e[r]))return!1}return!0}function _x(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function bx(t,e){var n=_x(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=_x(n)}}function mb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?mb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function pb(){for(var t=window,e=Uu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Uu(t.document)}return e}function Jp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function nC(t){var e=pb(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&mb(n.ownerDocument.documentElement,n)){if(s!==null&&Jp(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!t.extend&&i>s&&(r=s,s=i,i=r),r=bx(n,i);var o=bx(n,s);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),i>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var sC=Cs&&"documentMode"in document&&11>=document.documentMode,Wi=null,cm=null,Ha=null,um=!1;function Sx(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;um||Wi==null||Wi!==Uu(s)||(s=Wi,"selectionStart"in s&&Jp(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ha&&pl(Ha,s)||(Ha=s,s=Ku(cm,"onSelect"),0<s.length&&(e=new Xp("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=Wi)))}function Bc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Gi={animationend:Bc("Animation","AnimationEnd"),animationiteration:Bc("Animation","AnimationIteration"),animationstart:Bc("Animation","AnimationStart"),transitionend:Bc("Transition","TransitionEnd")},Jh={},gb={};Cs&&(gb=document.createElement("div").style,"AnimationEvent"in window||(delete Gi.animationend.animation,delete Gi.animationiteration.animation,delete Gi.animationstart.animation),"TransitionEvent"in window||delete Gi.transitionend.transition);function Ud(t){if(Jh[t])return Jh[t];if(!Gi[t])return t;var e=Gi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in gb)return Jh[t]=e[n];return t}var yb=Ud("animationend"),xb=Ud("animationiteration"),vb=Ud("animationstart"),wb=Ud("transitionend"),_b=new Map,Tx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(t,e){_b.set(t,e),Ei(e,[t])}for(var Zh=0;Zh<Tx.length;Zh++){var ef=Tx[Zh],rC=ef.toLowerCase(),iC=ef[0].toUpperCase()+ef.slice(1);Or(rC,"on"+iC)}Or(yb,"onAnimationEnd");Or(xb,"onAnimationIteration");Or(vb,"onAnimationStart");Or("dblclick","onDoubleClick");Or("focusin","onFocus");Or("focusout","onBlur");Or(wb,"onTransitionEnd");xo("onMouseEnter",["mouseout","mouseover"]);xo("onMouseLeave",["mouseout","mouseover"]);xo("onPointerEnter",["pointerout","pointerover"]);xo("onPointerLeave",["pointerout","pointerover"]);Ei("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ei("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ei("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ei("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ei("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ei("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Aa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Aa));function Ex(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,rj(s,e,void 0,t),t.currentTarget=null}function bb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],r=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&r.isPropagationStopped())break e;Ex(r,l,d),i=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&r.isPropagationStopped())break e;Ex(r,l,d),i=c}}}if(Bu)throw t=im,Bu=!1,im=null,t}function Ae(t,e){var n=e[pm];n===void 0&&(n=e[pm]=new Set);var s=t+"__bubble";n.has(s)||(Sb(e,t,2,!1),n.add(s))}function tf(t,e,n){var s=0;e&&(s|=4),Sb(n,t,s,e)}var zc="_reactListening"+Math.random().toString(36).slice(2);function gl(t){if(!t[zc]){t[zc]=!0,I_.forEach(function(n){n!=="selectionchange"&&(oC.has(n)||tf(n,!1,t),tf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[zc]||(e[zc]=!0,tf("selectionchange",!1,e))}}function Sb(t,e,n,s){switch(ob(e)){case 1:var r=wj;break;case 4:r=_j;break;default:r=Kp}n=r.bind(null,e,n,t),r=void 0,!rm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function nf(t,e,n,s,r){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;o=o.return}for(;l!==null;){if(o=si(l),o===null)return;if(c=o.tag,c===5||c===6){s=i=o;continue e}l=l.parentNode}}s=s.return}G_(function(){var d=i,h=zp(n),f=[];e:{var m=_b.get(t);if(m!==void 0){var y=Xp,b=t;switch(t){case"keypress":if(mu(n)===0)break e;case"keydown":case"keyup":y=Vj;break;case"focusin":b="focus",y=Xh;break;case"focusout":b="blur",y=Xh;break;case"beforeblur":case"afterblur":y=Xh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=fx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Tj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Fj;break;case yb:case xb:case vb:y=kj;break;case wb:y=$j;break;case"scroll":y=bj;break;case"wheel":y=zj;break;case"copy":case"cut":case"paste":y=Cj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=px}var C=(e&4)!==0,I=!C&&t==="scroll",x=C?m!==null?m+"Capture":null:m;C=[];for(var v=d,_;v!==null;){_=v;var P=_.stateNode;if(_.tag===5&&P!==null&&(_=P,x!==null&&(P=ul(v,x),P!=null&&C.push(yl(v,P,_)))),I)break;v=v.return}0<C.length&&(m=new y(m,b,null,n,h),f.push({event:m,listeners:C}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==nm&&(b=n.relatedTarget||n.fromElement)&&(si(b)||b[Is]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(b=n.relatedTarget||n.toElement,y=d,b=b?si(b):null,b!==null&&(I=Ni(b),b!==I||b.tag!==5&&b.tag!==6)&&(b=null)):(y=null,b=d),y!==b)){if(C=fx,P="onMouseLeave",x="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(C=px,P="onPointerLeave",x="onPointerEnter",v="pointer"),I=y==null?m:Ki(y),_=b==null?m:Ki(b),m=new C(P,v+"leave",y,n,h),m.target=I,m.relatedTarget=_,P=null,si(h)===d&&(C=new C(x,v+"enter",b,n,h),C.target=_,C.relatedTarget=I,P=C),I=P,y&&b)t:{for(C=y,x=b,v=0,_=C;_;_=Li(_))v++;for(_=0,P=x;P;P=Li(P))_++;for(;0<v-_;)C=Li(C),v--;for(;0<_-v;)x=Li(x),_--;for(;v--;){if(C===x||x!==null&&C===x.alternate)break t;C=Li(C),x=Li(x)}C=null}else C=null;y!==null&&Nx(f,m,y,C,!1),b!==null&&I!==null&&Nx(f,I,b,C,!0)}}e:{if(m=d?Ki(d):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var D=Qj;else if(xx(m))if(hb)D=eC;else{D=Jj;var A=Yj}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(D=Zj);if(D&&(D=D(t,d))){db(f,D,n,h);break e}A&&A(t,m,d),t==="focusout"&&(A=m._wrapperState)&&A.controlled&&m.type==="number"&&Yf(m,"number",m.value)}switch(A=d?Ki(d):window,t){case"focusin":(xx(A)||A.contentEditable==="true")&&(Wi=A,cm=d,Ha=null);break;case"focusout":Ha=cm=Wi=null;break;case"mousedown":um=!0;break;case"contextmenu":case"mouseup":case"dragend":um=!1,Sx(f,n,h);break;case"selectionchange":if(sC)break;case"keydown":case"keyup":Sx(f,n,h)}var T;if(Yp)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Hi?cb(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(lb&&n.locale!=="ko"&&(Hi||w!=="onCompositionStart"?w==="onCompositionEnd"&&Hi&&(T=ab()):(cr=h,qp="value"in cr?cr.value:cr.textContent,Hi=!0)),A=Ku(d,w),0<A.length&&(w=new mx(w,t,null,n,h),f.push({event:w,listeners:A}),T?w.data=T:(T=ub(n),T!==null&&(w.data=T)))),(T=Wj?Gj(t,n):Kj(t,n))&&(d=Ku(d,"onBeforeInput"),0<d.length&&(h=new mx("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:d}),h.data=T))}bb(f,e)})}function yl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ku(t,e){for(var n=e+"Capture",s=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=ul(t,n),i!=null&&s.unshift(yl(t,i,r)),i=ul(t,e),i!=null&&s.push(yl(t,i,r))),t=t.return}return s}function Li(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Nx(t,e,n,s,r){for(var i=e._reactName,o=[];n!==null&&n!==s;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&d!==null&&(l=d,r?(c=ul(n,i),c!=null&&o.unshift(yl(n,c,l))):r||(c=ul(n,i),c!=null&&o.push(yl(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var aC=/\r\n?/g,lC=/\u0000|\uFFFD/g;function kx(t){return(typeof t=="string"?t:""+t).replace(aC,`
`).replace(lC,"")}function Hc(t,e,n){if(e=kx(e),kx(t)!==e&&n)throw Error(X(425))}function qu(){}var dm=null,hm=null;function fm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var mm=typeof setTimeout=="function"?setTimeout:void 0,cC=typeof clearTimeout=="function"?clearTimeout:void 0,jx=typeof Promise=="function"?Promise:void 0,uC=typeof queueMicrotask=="function"?queueMicrotask:typeof jx<"u"?function(t){return jx.resolve(null).then(t).catch(dC)}:mm;function dC(t){setTimeout(function(){throw t})}function sf(t,e){var n=e,s=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(s===0){t.removeChild(r),fl(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=r}while(n);fl(e)}function pr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Cx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Oo=Math.random().toString(36).slice(2),Jn="__reactFiber$"+Oo,xl="__reactProps$"+Oo,Is="__reactContainer$"+Oo,pm="__reactEvents$"+Oo,hC="__reactListeners$"+Oo,fC="__reactHandles$"+Oo;function si(t){var e=t[Jn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Is]||n[Jn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Cx(t);t!==null;){if(n=t[Jn])return n;t=Cx(t)}return e}t=n,n=t.parentNode}return null}function Xl(t){return t=t[Jn]||t[Is],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ki(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(X(33))}function $d(t){return t[xl]||null}var gm=[],qi=-1;function Fr(t){return{current:t}}function De(t){0>qi||(t.current=gm[qi],gm[qi]=null,qi--)}function Ie(t,e){qi++,gm[qi]=t.current,t.current=e}var kr={},Lt=Fr(kr),Zt=Fr(!1),mi=kr;function vo(t,e){var n=t.type.contextTypes;if(!n)return kr;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=e[i];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function en(t){return t=t.childContextTypes,t!=null}function Xu(){De(Zt),De(Lt)}function Ix(t,e,n){if(Lt.current!==kr)throw Error(X(168));Ie(Lt,e),Ie(Zt,n)}function Tb(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(X(108,Yk(t)||"Unknown",r));return ze({},n,s)}function Qu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||kr,mi=Lt.current,Ie(Lt,t),Ie(Zt,Zt.current),!0}function Px(t,e,n){var s=t.stateNode;if(!s)throw Error(X(169));n?(t=Tb(t,e,mi),s.__reactInternalMemoizedMergedChildContext=t,De(Zt),De(Lt),Ie(Lt,t)):De(Zt),Ie(Zt,n)}var _s=null,Bd=!1,rf=!1;function Eb(t){_s===null?_s=[t]:_s.push(t)}function mC(t){Bd=!0,Eb(t)}function Ur(){if(!rf&&_s!==null){rf=!0;var t=0,e=ke;try{var n=_s;for(ke=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}_s=null,Bd=!1}catch(r){throw _s!==null&&(_s=_s.slice(t+1)),Q_(Hp,Ur),r}finally{ke=e,rf=!1}}return null}var Xi=[],Qi=0,Yu=null,Ju=0,yn=[],xn=0,pi=null,bs=1,Ss="";function Zr(t,e){Xi[Qi++]=Ju,Xi[Qi++]=Yu,Yu=t,Ju=e}function Nb(t,e,n){yn[xn++]=bs,yn[xn++]=Ss,yn[xn++]=pi,pi=t;var s=bs;t=Ss;var r=32-Fn(s)-1;s&=~(1<<r),n+=1;var i=32-Fn(e)+r;if(30<i){var o=r-r%5;i=(s&(1<<o)-1).toString(32),s>>=o,r-=o,bs=1<<32-Fn(e)+r|n<<r|s,Ss=i+t}else bs=1<<i|n<<r|s,Ss=t}function Zp(t){t.return!==null&&(Zr(t,1),Nb(t,1,0))}function eg(t){for(;t===Yu;)Yu=Xi[--Qi],Xi[Qi]=null,Ju=Xi[--Qi],Xi[Qi]=null;for(;t===pi;)pi=yn[--xn],yn[xn]=null,Ss=yn[--xn],yn[xn]=null,bs=yn[--xn],yn[xn]=null}var cn=null,an=null,Ve=!1,Ln=null;function kb(t,e){var n=_n(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ax(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,cn=t,an=pr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,cn=t,an=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=pi!==null?{id:bs,overflow:Ss}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=_n(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,cn=t,an=null,!0):!1;default:return!1}}function ym(t){return(t.mode&1)!==0&&(t.flags&128)===0}function xm(t){if(Ve){var e=an;if(e){var n=e;if(!Ax(t,e)){if(ym(t))throw Error(X(418));e=pr(n.nextSibling);var s=cn;e&&Ax(t,e)?kb(s,n):(t.flags=t.flags&-4097|2,Ve=!1,cn=t)}}else{if(ym(t))throw Error(X(418));t.flags=t.flags&-4097|2,Ve=!1,cn=t}}}function Rx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;cn=t}function Wc(t){if(t!==cn)return!1;if(!Ve)return Rx(t),Ve=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!fm(t.type,t.memoizedProps)),e&&(e=an)){if(ym(t))throw jb(),Error(X(418));for(;e;)kb(t,e),e=pr(e.nextSibling)}if(Rx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){an=pr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}an=null}}else an=cn?pr(t.stateNode.nextSibling):null;return!0}function jb(){for(var t=an;t;)t=pr(t.nextSibling)}function wo(){an=cn=null,Ve=!1}function tg(t){Ln===null?Ln=[t]:Ln.push(t)}var pC=Us.ReactCurrentBatchConfig;function _a(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var s=n.stateNode}if(!s)throw Error(X(147,t));var r=s,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=r.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,t))}return t}function Gc(t,e){throw t=Object.prototype.toString.call(e),Error(X(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Dx(t){var e=t._init;return e(t._payload)}function Cb(t){function e(x,v){if(t){var _=x.deletions;_===null?(x.deletions=[v],x.flags|=16):_.push(v)}}function n(x,v){if(!t)return null;for(;v!==null;)e(x,v),v=v.sibling;return null}function s(x,v){for(x=new Map;v!==null;)v.key!==null?x.set(v.key,v):x.set(v.index,v),v=v.sibling;return x}function r(x,v){return x=vr(x,v),x.index=0,x.sibling=null,x}function i(x,v,_){return x.index=_,t?(_=x.alternate,_!==null?(_=_.index,_<v?(x.flags|=2,v):_):(x.flags|=2,v)):(x.flags|=1048576,v)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,v,_,P){return v===null||v.tag!==6?(v=hf(_,x.mode,P),v.return=x,v):(v=r(v,_),v.return=x,v)}function c(x,v,_,P){var D=_.type;return D===zi?h(x,v,_.props.children,P,_.key):v!==null&&(v.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===tr&&Dx(D)===v.type)?(P=r(v,_.props),P.ref=_a(x,v,_),P.return=x,P):(P=_u(_.type,_.key,_.props,null,x.mode,P),P.ref=_a(x,v,_),P.return=x,P)}function d(x,v,_,P){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=ff(_,x.mode,P),v.return=x,v):(v=r(v,_.children||[]),v.return=x,v)}function h(x,v,_,P,D){return v===null||v.tag!==7?(v=ui(_,x.mode,P,D),v.return=x,v):(v=r(v,_),v.return=x,v)}function f(x,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return v=hf(""+v,x.mode,_),v.return=x,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Mc:return _=_u(v.type,v.key,v.props,null,x.mode,_),_.ref=_a(x,null,v),_.return=x,_;case Bi:return v=ff(v,x.mode,_),v.return=x,v;case tr:var P=v._init;return f(x,P(v._payload),_)}if(Ia(v)||ga(v))return v=ui(v,x.mode,_,null),v.return=x,v;Gc(x,v)}return null}function m(x,v,_,P){var D=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return D!==null?null:l(x,v,""+_,P);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Mc:return _.key===D?c(x,v,_,P):null;case Bi:return _.key===D?d(x,v,_,P):null;case tr:return D=_._init,m(x,v,D(_._payload),P)}if(Ia(_)||ga(_))return D!==null?null:h(x,v,_,P,null);Gc(x,_)}return null}function y(x,v,_,P,D){if(typeof P=="string"&&P!==""||typeof P=="number")return x=x.get(_)||null,l(v,x,""+P,D);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Mc:return x=x.get(P.key===null?_:P.key)||null,c(v,x,P,D);case Bi:return x=x.get(P.key===null?_:P.key)||null,d(v,x,P,D);case tr:var A=P._init;return y(x,v,_,A(P._payload),D)}if(Ia(P)||ga(P))return x=x.get(_)||null,h(v,x,P,D,null);Gc(v,P)}return null}function b(x,v,_,P){for(var D=null,A=null,T=v,w=v=0,j=null;T!==null&&w<_.length;w++){T.index>w?(j=T,T=null):j=T.sibling;var k=m(x,T,_[w],P);if(k===null){T===null&&(T=j);break}t&&T&&k.alternate===null&&e(x,T),v=i(k,v,w),A===null?D=k:A.sibling=k,A=k,T=j}if(w===_.length)return n(x,T),Ve&&Zr(x,w),D;if(T===null){for(;w<_.length;w++)T=f(x,_[w],P),T!==null&&(v=i(T,v,w),A===null?D=T:A.sibling=T,A=T);return Ve&&Zr(x,w),D}for(T=s(x,T);w<_.length;w++)j=y(T,x,w,_[w],P),j!==null&&(t&&j.alternate!==null&&T.delete(j.key===null?w:j.key),v=i(j,v,w),A===null?D=j:A.sibling=j,A=j);return t&&T.forEach(function(R){return e(x,R)}),Ve&&Zr(x,w),D}function C(x,v,_,P){var D=ga(_);if(typeof D!="function")throw Error(X(150));if(_=D.call(_),_==null)throw Error(X(151));for(var A=D=null,T=v,w=v=0,j=null,k=_.next();T!==null&&!k.done;w++,k=_.next()){T.index>w?(j=T,T=null):j=T.sibling;var R=m(x,T,k.value,P);if(R===null){T===null&&(T=j);break}t&&T&&R.alternate===null&&e(x,T),v=i(R,v,w),A===null?D=R:A.sibling=R,A=R,T=j}if(k.done)return n(x,T),Ve&&Zr(x,w),D;if(T===null){for(;!k.done;w++,k=_.next())k=f(x,k.value,P),k!==null&&(v=i(k,v,w),A===null?D=k:A.sibling=k,A=k);return Ve&&Zr(x,w),D}for(T=s(x,T);!k.done;w++,k=_.next())k=y(T,x,w,k.value,P),k!==null&&(t&&k.alternate!==null&&T.delete(k.key===null?w:k.key),v=i(k,v,w),A===null?D=k:A.sibling=k,A=k);return t&&T.forEach(function(M){return e(x,M)}),Ve&&Zr(x,w),D}function I(x,v,_,P){if(typeof _=="object"&&_!==null&&_.type===zi&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Mc:e:{for(var D=_.key,A=v;A!==null;){if(A.key===D){if(D=_.type,D===zi){if(A.tag===7){n(x,A.sibling),v=r(A,_.props.children),v.return=x,x=v;break e}}else if(A.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===tr&&Dx(D)===A.type){n(x,A.sibling),v=r(A,_.props),v.ref=_a(x,A,_),v.return=x,x=v;break e}n(x,A);break}else e(x,A);A=A.sibling}_.type===zi?(v=ui(_.props.children,x.mode,P,_.key),v.return=x,x=v):(P=_u(_.type,_.key,_.props,null,x.mode,P),P.ref=_a(x,v,_),P.return=x,x=P)}return o(x);case Bi:e:{for(A=_.key;v!==null;){if(v.key===A)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){n(x,v.sibling),v=r(v,_.children||[]),v.return=x,x=v;break e}else{n(x,v);break}else e(x,v);v=v.sibling}v=ff(_,x.mode,P),v.return=x,x=v}return o(x);case tr:return A=_._init,I(x,v,A(_._payload),P)}if(Ia(_))return b(x,v,_,P);if(ga(_))return C(x,v,_,P);Gc(x,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,v!==null&&v.tag===6?(n(x,v.sibling),v=r(v,_),v.return=x,x=v):(n(x,v),v=hf(_,x.mode,P),v.return=x,x=v),o(x)):n(x,v)}return I}var _o=Cb(!0),Ib=Cb(!1),Zu=Fr(null),ed=null,Yi=null,ng=null;function sg(){ng=Yi=ed=null}function rg(t){var e=Zu.current;De(Zu),t._currentValue=e}function vm(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function uo(t,e){ed=t,ng=Yi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Yt=!0),t.firstContext=null)}function Nn(t){var e=t._currentValue;if(ng!==t)if(t={context:t,memoizedValue:e,next:null},Yi===null){if(ed===null)throw Error(X(308));Yi=t,ed.dependencies={lanes:0,firstContext:t}}else Yi=Yi.next=t;return e}var ri=null;function ig(t){ri===null?ri=[t]:ri.push(t)}function Pb(t,e,n,s){var r=e.interleaved;return r===null?(n.next=n,ig(e)):(n.next=r.next,r.next=n),e.interleaved=n,Ps(t,s)}function Ps(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var nr=!1;function og(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ab(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ns(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function gr(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,_e&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,Ps(t,n)}return r=s.interleaved,r===null?(e.next=e,ig(s)):(e.next=r.next,r.next=e),s.interleaved=e,Ps(t,n)}function pu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Wp(t,n)}}function Mx(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?r=i=e:i=i.next=e}else r=i=e;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function td(t,e,n,s){var r=t.updateQueue;nr=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(i!==null){var f=r.baseState;o=0,h=d=c=null,l=i;do{var m=l.lane,y=l.eventTime;if((s&m)===m){h!==null&&(h=h.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=t,C=l;switch(m=e,y=n,C.tag){case 1:if(b=C.payload,typeof b=="function"){f=b.call(y,f,m);break e}f=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=C.payload,m=typeof b=="function"?b.call(y,f,m):b,m==null)break e;f=ze({},f,m);break e;case 2:nr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=r.effects,m===null?r.effects=[l]:m.push(l))}else y={eventTime:y,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=y,c=f):h=h.next=y,o|=m;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;m=l,l=m.next,m.next=null,r.lastBaseUpdate=m,r.shared.pending=null}}while(1);if(h===null&&(c=f),r.baseState=c,r.firstBaseUpdate=d,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);yi|=o,t.lanes=o,t.memoizedState=f}}function Vx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],r=s.callback;if(r!==null){if(s.callback=null,s=n,typeof r!="function")throw Error(X(191,r));r.call(s)}}}var Ql={},es=Fr(Ql),vl=Fr(Ql),wl=Fr(Ql);function ii(t){if(t===Ql)throw Error(X(174));return t}function ag(t,e){switch(Ie(wl,e),Ie(vl,t),Ie(es,Ql),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Zf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Zf(e,t)}De(es),Ie(es,e)}function bo(){De(es),De(vl),De(wl)}function Rb(t){ii(wl.current);var e=ii(es.current),n=Zf(e,t.type);e!==n&&(Ie(vl,t),Ie(es,n))}function lg(t){vl.current===t&&(De(es),De(vl))}var Fe=Fr(0);function nd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var of=[];function cg(){for(var t=0;t<of.length;t++)of[t]._workInProgressVersionPrimary=null;of.length=0}var gu=Us.ReactCurrentDispatcher,af=Us.ReactCurrentBatchConfig,gi=0,Be=null,st=null,ht=null,sd=!1,Wa=!1,_l=0,gC=0;function It(){throw Error(X(321))}function ug(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Bn(t[n],e[n]))return!1;return!0}function dg(t,e,n,s,r,i){if(gi=i,Be=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,gu.current=t===null||t.memoizedState===null?wC:_C,t=n(s,r),Wa){i=0;do{if(Wa=!1,_l=0,25<=i)throw Error(X(301));i+=1,ht=st=null,e.updateQueue=null,gu.current=bC,t=n(s,r)}while(Wa)}if(gu.current=rd,e=st!==null&&st.next!==null,gi=0,ht=st=Be=null,sd=!1,e)throw Error(X(300));return t}function hg(){var t=_l!==0;return _l=0,t}function Qn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?Be.memoizedState=ht=t:ht=ht.next=t,ht}function kn(){if(st===null){var t=Be.alternate;t=t!==null?t.memoizedState:null}else t=st.next;var e=ht===null?Be.memoizedState:ht.next;if(e!==null)ht=e,st=t;else{if(t===null)throw Error(X(310));st=t,t={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},ht===null?Be.memoizedState=ht=t:ht=ht.next=t}return ht}function bl(t,e){return typeof e=="function"?e(t):e}function lf(t){var e=kn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var s=st,r=s.baseQueue,i=n.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}s.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,s=s.baseState;var l=o=null,c=null,d=i;do{var h=d.lane;if((gi&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:t(s,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=f,o=s):c=c.next=f,Be.lanes|=h,yi|=h}d=d.next}while(d!==null&&d!==i);c===null?o=s:c.next=l,Bn(s,e.memoizedState)||(Yt=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=c,n.lastRenderedState=s}if(t=n.interleaved,t!==null){r=t;do i=r.lane,Be.lanes|=i,yi|=i,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function cf(t){var e=kn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var s=n.dispatch,r=n.pending,i=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do i=t(i,o.action),o=o.next;while(o!==r);Bn(i,e.memoizedState)||(Yt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,s]}function Db(){}function Mb(t,e){var n=Be,s=kn(),r=e(),i=!Bn(s.memoizedState,r);if(i&&(s.memoizedState=r,Yt=!0),s=s.queue,fg(Ob.bind(null,n,s,t),[t]),s.getSnapshot!==e||i||ht!==null&&ht.memoizedState.tag&1){if(n.flags|=2048,Sl(9,Lb.bind(null,n,s,r,e),void 0,null),mt===null)throw Error(X(349));gi&30||Vb(n,e,r)}return r}function Vb(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Be.updateQueue,e===null?(e={lastEffect:null,stores:null},Be.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Lb(t,e,n,s){e.value=n,e.getSnapshot=s,Fb(e)&&Ub(t)}function Ob(t,e,n){return n(function(){Fb(e)&&Ub(t)})}function Fb(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Bn(t,n)}catch{return!0}}function Ub(t){var e=Ps(t,1);e!==null&&Un(e,t,1,-1)}function Lx(t){var e=Qn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bl,lastRenderedState:t},e.queue=t,t=t.dispatch=vC.bind(null,Be,t),[e.memoizedState,t]}function Sl(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=Be.updateQueue,e===null?(e={lastEffect:null,stores:null},Be.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function $b(){return kn().memoizedState}function yu(t,e,n,s){var r=Qn();Be.flags|=t,r.memoizedState=Sl(1|e,n,void 0,s===void 0?null:s)}function zd(t,e,n,s){var r=kn();s=s===void 0?null:s;var i=void 0;if(st!==null){var o=st.memoizedState;if(i=o.destroy,s!==null&&ug(s,o.deps)){r.memoizedState=Sl(e,n,i,s);return}}Be.flags|=t,r.memoizedState=Sl(1|e,n,i,s)}function Ox(t,e){return yu(8390656,8,t,e)}function fg(t,e){return zd(2048,8,t,e)}function Bb(t,e){return zd(4,2,t,e)}function zb(t,e){return zd(4,4,t,e)}function Hb(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Wb(t,e,n){return n=n!=null?n.concat([t]):null,zd(4,4,Hb.bind(null,e,t),n)}function mg(){}function Gb(t,e){var n=kn();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&ug(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function Kb(t,e){var n=kn();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&ug(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function qb(t,e,n){return gi&21?(Bn(n,e)||(n=Z_(),Be.lanes|=n,yi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Yt=!0),t.memoizedState=n)}function yC(t,e){var n=ke;ke=n!==0&&4>n?n:4,t(!0);var s=af.transition;af.transition={};try{t(!1),e()}finally{ke=n,af.transition=s}}function Xb(){return kn().memoizedState}function xC(t,e,n){var s=xr(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Qb(t))Yb(e,n);else if(n=Pb(t,e,n,s),n!==null){var r=Ht();Un(n,t,s,r),Jb(n,e,s)}}function vC(t,e,n){var s=xr(t),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qb(t))Yb(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(r.hasEagerState=!0,r.eagerState=l,Bn(l,o)){var c=e.interleaved;c===null?(r.next=r,ig(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}n=Pb(t,e,r,s),n!==null&&(r=Ht(),Un(n,t,s,r),Jb(n,e,s))}}function Qb(t){var e=t.alternate;return t===Be||e!==null&&e===Be}function Yb(t,e){Wa=sd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Jb(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Wp(t,n)}}var rd={readContext:Nn,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useInsertionEffect:It,useLayoutEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useMutableSource:It,useSyncExternalStore:It,useId:It,unstable_isNewReconciler:!1},wC={readContext:Nn,useCallback:function(t,e){return Qn().memoizedState=[t,e===void 0?null:e],t},useContext:Nn,useEffect:Ox,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,yu(4194308,4,Hb.bind(null,e,t),n)},useLayoutEffect:function(t,e){return yu(4194308,4,t,e)},useInsertionEffect:function(t,e){return yu(4,2,t,e)},useMemo:function(t,e){var n=Qn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=Qn();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=xC.bind(null,Be,t),[s.memoizedState,t]},useRef:function(t){var e=Qn();return t={current:t},e.memoizedState=t},useState:Lx,useDebugValue:mg,useDeferredValue:function(t){return Qn().memoizedState=t},useTransition:function(){var t=Lx(!1),e=t[0];return t=yC.bind(null,t[1]),Qn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=Be,r=Qn();if(Ve){if(n===void 0)throw Error(X(407));n=n()}else{if(n=e(),mt===null)throw Error(X(349));gi&30||Vb(s,e,n)}r.memoizedState=n;var i={value:n,getSnapshot:e};return r.queue=i,Ox(Ob.bind(null,s,i,t),[t]),s.flags|=2048,Sl(9,Lb.bind(null,s,i,n,e),void 0,null),n},useId:function(){var t=Qn(),e=mt.identifierPrefix;if(Ve){var n=Ss,s=bs;n=(s&~(1<<32-Fn(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=_l++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=gC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},_C={readContext:Nn,useCallback:Gb,useContext:Nn,useEffect:fg,useImperativeHandle:Wb,useInsertionEffect:Bb,useLayoutEffect:zb,useMemo:Kb,useReducer:lf,useRef:$b,useState:function(){return lf(bl)},useDebugValue:mg,useDeferredValue:function(t){var e=kn();return qb(e,st.memoizedState,t)},useTransition:function(){var t=lf(bl)[0],e=kn().memoizedState;return[t,e]},useMutableSource:Db,useSyncExternalStore:Mb,useId:Xb,unstable_isNewReconciler:!1},bC={readContext:Nn,useCallback:Gb,useContext:Nn,useEffect:fg,useImperativeHandle:Wb,useInsertionEffect:Bb,useLayoutEffect:zb,useMemo:Kb,useReducer:cf,useRef:$b,useState:function(){return cf(bl)},useDebugValue:mg,useDeferredValue:function(t){var e=kn();return st===null?e.memoizedState=t:qb(e,st.memoizedState,t)},useTransition:function(){var t=cf(bl)[0],e=kn().memoizedState;return[t,e]},useMutableSource:Db,useSyncExternalStore:Mb,useId:Xb,unstable_isNewReconciler:!1};function Mn(t,e){if(t&&t.defaultProps){e=ze({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function wm(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:ze({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Hd={isMounted:function(t){return(t=t._reactInternals)?Ni(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=Ht(),r=xr(t),i=Ns(s,r);i.payload=e,n!=null&&(i.callback=n),e=gr(t,i,r),e!==null&&(Un(e,t,r,s),pu(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=Ht(),r=xr(t),i=Ns(s,r);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=gr(t,i,r),e!==null&&(Un(e,t,r,s),pu(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ht(),s=xr(t),r=Ns(n,s);r.tag=2,e!=null&&(r.callback=e),e=gr(t,r,s),e!==null&&(Un(e,t,s,n),pu(e,t,s))}};function Fx(t,e,n,s,r,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,i,o):e.prototype&&e.prototype.isPureReactComponent?!pl(n,s)||!pl(r,i):!0}function Zb(t,e,n){var s=!1,r=kr,i=e.contextType;return typeof i=="object"&&i!==null?i=Nn(i):(r=en(e)?mi:Lt.current,s=e.contextTypes,i=(s=s!=null)?vo(t,r):kr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Hd,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function Ux(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&Hd.enqueueReplaceState(e,e.state,null)}function _m(t,e,n,s){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},og(t);var i=e.contextType;typeof i=="object"&&i!==null?r.context=Nn(i):(i=en(e)?mi:Lt.current,r.context=vo(t,i)),r.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(wm(t,e,i,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Hd.enqueueReplaceState(r,r.state,null),td(t,n,r,s),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function So(t,e){try{var n="",s=e;do n+=Qk(s),s=s.return;while(s);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:r,digest:null}}function uf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function bm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var SC=typeof WeakMap=="function"?WeakMap:Map;function eS(t,e,n){n=Ns(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){od||(od=!0,Am=s),bm(t,e)},n}function tS(t,e,n){n=Ns(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;n.payload=function(){return s(r)},n.callback=function(){bm(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){bm(t,e),typeof s!="function"&&(yr===null?yr=new Set([this]):yr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function $x(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new SC;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(n)||(r.add(n),t=LC.bind(null,t,e,n),e.then(t,t))}function Bx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function zx(t,e,n,s,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ns(-1,1),e.tag=2,gr(n,e,1))),n.lanes|=1),t)}var TC=Us.ReactCurrentOwner,Yt=!1;function $t(t,e,n,s){e.child=t===null?Ib(e,null,n,s):_o(e,t.child,n,s)}function Hx(t,e,n,s,r){n=n.render;var i=e.ref;return uo(e,r),s=dg(t,e,n,s,i,r),n=hg(),t!==null&&!Yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,As(t,e,r)):(Ve&&n&&Zp(e),e.flags|=1,$t(t,e,s,r),e.child)}function Wx(t,e,n,s,r){if(t===null){var i=n.type;return typeof i=="function"&&!bg(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,nS(t,e,i,s,r)):(t=_u(n.type,null,s,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&r)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:pl,n(o,s)&&t.ref===e.ref)return As(t,e,r)}return e.flags|=1,t=vr(i,s),t.ref=e.ref,t.return=e,e.child=t}function nS(t,e,n,s,r){if(t!==null){var i=t.memoizedProps;if(pl(i,s)&&t.ref===e.ref)if(Yt=!1,e.pendingProps=s=i,(t.lanes&r)!==0)t.flags&131072&&(Yt=!0);else return e.lanes=t.lanes,As(t,e,r)}return Sm(t,e,n,s,r)}function sS(t,e,n){var s=e.pendingProps,r=s.children,i=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(Zi,on),on|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ie(Zi,on),on|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,Ie(Zi,on),on|=s}else i!==null?(s=i.baseLanes|n,e.memoizedState=null):s=n,Ie(Zi,on),on|=s;return $t(t,e,r,n),e.child}function rS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Sm(t,e,n,s,r){var i=en(n)?mi:Lt.current;return i=vo(e,i),uo(e,r),n=dg(t,e,n,s,i,r),s=hg(),t!==null&&!Yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,As(t,e,r)):(Ve&&s&&Zp(e),e.flags|=1,$t(t,e,n,r),e.child)}function Gx(t,e,n,s,r){if(en(n)){var i=!0;Qu(e)}else i=!1;if(uo(e,r),e.stateNode===null)xu(t,e),Zb(e,n,s),_m(e,n,s,r),s=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Nn(d):(d=en(n)?mi:Lt.current,d=vo(e,d));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==s||c!==d)&&Ux(e,o,s,d),nr=!1;var m=e.memoizedState;o.state=m,td(e,s,o,r),c=e.memoizedState,l!==s||m!==c||Zt.current||nr?(typeof h=="function"&&(wm(e,n,h,s),c=e.memoizedState),(l=nr||Fx(e,n,l,s,m,c,d))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),o.props=s,o.state=c,o.context=d,s=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,Ab(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Mn(e.type,l),o.props=d,f=e.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Nn(c):(c=en(n)?mi:Lt.current,c=vo(e,c));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||m!==c)&&Ux(e,o,s,c),nr=!1,m=e.memoizedState,o.state=m,td(e,s,o,r);var b=e.memoizedState;l!==f||m!==b||Zt.current||nr?(typeof y=="function"&&(wm(e,n,y,s),b=e.memoizedState),(d=nr||Fx(e,n,d,s,m,b,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,b,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,b,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=b),o.props=s,o.state=b,o.context=c,s=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),s=!1)}return Tm(t,e,n,s,i,r)}function Tm(t,e,n,s,r,i){rS(t,e);var o=(e.flags&128)!==0;if(!s&&!o)return r&&Px(e,n,!1),As(t,e,i);s=e.stateNode,TC.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&o?(e.child=_o(e,t.child,null,i),e.child=_o(e,null,l,i)):$t(t,e,l,i),e.memoizedState=s.state,r&&Px(e,n,!0),e.child}function iS(t){var e=t.stateNode;e.pendingContext?Ix(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ix(t,e.context,!1),ag(t,e.containerInfo)}function Kx(t,e,n,s,r){return wo(),tg(r),e.flags|=256,$t(t,e,n,s),e.child}var Em={dehydrated:null,treeContext:null,retryLane:0};function Nm(t){return{baseLanes:t,cachePool:null,transitions:null}}function oS(t,e,n){var s=e.pendingProps,r=Fe.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(r&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Ie(Fe,r&1),t===null)return xm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,t=s.fallback,i?(s=e.mode,i=e.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Kd(o,s,0,null),t=ui(t,s,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Nm(n),e.memoizedState=Em,t):pg(e,o));if(r=t.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return EC(t,e,o,s,l,r,n);if(i){i=s.fallback,o=e.mode,r=t.child,l=r.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=c,e.deletions=null):(s=vr(r,c),s.subtreeFlags=r.subtreeFlags&14680064),l!==null?i=vr(l,i):(i=ui(i,o,n,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,o=t.child.memoizedState,o=o===null?Nm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Em,s}return i=t.child,t=i.sibling,s=vr(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function pg(t,e){return e=Kd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Kc(t,e,n,s){return s!==null&&tg(s),_o(e,t.child,null,n),t=pg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function EC(t,e,n,s,r,i,o){if(n)return e.flags&256?(e.flags&=-257,s=uf(Error(X(422))),Kc(t,e,o,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=s.fallback,r=e.mode,s=Kd({mode:"visible",children:s.children},r,0,null),i=ui(i,r,o,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&_o(e,t.child,null,o),e.child.memoizedState=Nm(o),e.memoizedState=Em,i);if(!(e.mode&1))return Kc(t,e,o,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var l=s.dgst;return s=l,i=Error(X(419)),s=uf(i,s,void 0),Kc(t,e,o,s)}if(l=(o&t.childLanes)!==0,Yt||l){if(s=mt,s!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,Ps(t,r),Un(s,t,r,-1))}return _g(),s=uf(Error(X(421))),Kc(t,e,o,s)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=OC.bind(null,t),r._reactRetry=e,null):(t=i.treeContext,an=pr(r.nextSibling),cn=e,Ve=!0,Ln=null,t!==null&&(yn[xn++]=bs,yn[xn++]=Ss,yn[xn++]=pi,bs=t.id,Ss=t.overflow,pi=e),e=pg(e,s.children),e.flags|=4096,e)}function qx(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),vm(t.return,e,n)}function df(t,e,n,s,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function aS(t,e,n){var s=e.pendingProps,r=s.revealOrder,i=s.tail;if($t(t,e,s.children,n),s=Fe.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&qx(t,n,e);else if(t.tag===19)qx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(Ie(Fe,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&nd(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),df(e,!1,r,n,i);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&nd(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}df(e,!0,n,null,i);break;case"together":df(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function xu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function As(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),yi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,n=vr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=vr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function NC(t,e,n){switch(e.tag){case 3:iS(e),wo();break;case 5:Rb(e);break;case 1:en(e.type)&&Qu(e);break;case 4:ag(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;Ie(Zu,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(Ie(Fe,Fe.current&1),e.flags|=128,null):n&e.child.childLanes?oS(t,e,n):(Ie(Fe,Fe.current&1),t=As(t,e,n),t!==null?t.sibling:null);Ie(Fe,Fe.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return aS(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ie(Fe,Fe.current),s)break;return null;case 22:case 23:return e.lanes=0,sS(t,e,n)}return As(t,e,n)}var lS,km,cS,uS;lS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};km=function(){};cS=function(t,e,n,s){var r=t.memoizedProps;if(r!==s){t=e.stateNode,ii(es.current);var i=null;switch(n){case"input":r=Xf(t,r),s=Xf(t,s),i=[];break;case"select":r=ze({},r,{value:void 0}),s=ze({},s,{value:void 0}),i=[];break;case"textarea":r=Jf(t,r),s=Jf(t,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=qu)}em(n,s);var o;n=null;for(d in r)if(!s.hasOwnProperty(d)&&r.hasOwnProperty(d)&&r[d]!=null)if(d==="style"){var l=r[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ll.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in s){var c=s[d];if(l=r!=null?r[d]:void 0,s.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ll.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ae("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};uS=function(t,e,n,s){n!==s&&(e.flags|=4)};function ba(t,e){if(!Ve)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Pt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function kC(t,e,n){var s=e.pendingProps;switch(eg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(e),null;case 1:return en(e.type)&&Xu(),Pt(e),null;case 3:return s=e.stateNode,bo(),De(Zt),De(Lt),cg(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Wc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ln!==null&&(Mm(Ln),Ln=null))),km(t,e),Pt(e),null;case 5:lg(e);var r=ii(wl.current);if(n=e.type,t!==null&&e.stateNode!=null)cS(t,e,n,s,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(X(166));return Pt(e),null}if(t=ii(es.current),Wc(e)){s=e.stateNode,n=e.type;var i=e.memoizedProps;switch(s[Jn]=e,s[xl]=i,t=(e.mode&1)!==0,n){case"dialog":Ae("cancel",s),Ae("close",s);break;case"iframe":case"object":case"embed":Ae("load",s);break;case"video":case"audio":for(r=0;r<Aa.length;r++)Ae(Aa[r],s);break;case"source":Ae("error",s);break;case"img":case"image":case"link":Ae("error",s),Ae("load",s);break;case"details":Ae("toggle",s);break;case"input":sx(s,i),Ae("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Ae("invalid",s);break;case"textarea":ix(s,i),Ae("invalid",s)}em(n,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?s.textContent!==l&&(i.suppressHydrationWarning!==!0&&Hc(s.textContent,l,t),r=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Hc(s.textContent,l,t),r=["children",""+l]):ll.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ae("scroll",s)}switch(n){case"input":Vc(s),rx(s,i,!0);break;case"textarea":Vc(s),ox(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=qu)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=O_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=o.createElement(n,{is:s.is}):(t=o.createElement(n),n==="select"&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,n),t[Jn]=e,t[xl]=s,lS(t,e,!1,!1),e.stateNode=t;e:{switch(o=tm(n,s),n){case"dialog":Ae("cancel",t),Ae("close",t),r=s;break;case"iframe":case"object":case"embed":Ae("load",t),r=s;break;case"video":case"audio":for(r=0;r<Aa.length;r++)Ae(Aa[r],t);r=s;break;case"source":Ae("error",t),r=s;break;case"img":case"image":case"link":Ae("error",t),Ae("load",t),r=s;break;case"details":Ae("toggle",t),r=s;break;case"input":sx(t,s),r=Xf(t,s),Ae("invalid",t);break;case"option":r=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},r=ze({},s,{value:void 0}),Ae("invalid",t);break;case"textarea":ix(t,s),r=Jf(t,s),Ae("invalid",t);break;default:r=s}em(n,r),l=r;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?$_(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&F_(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&cl(t,c):typeof c=="number"&&cl(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ll.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ae("scroll",t):c!=null&&Fp(t,i,c,o))}switch(n){case"input":Vc(t),rx(t,s,!1);break;case"textarea":Vc(t),ox(t);break;case"option":s.value!=null&&t.setAttribute("value",""+Nr(s.value));break;case"select":t.multiple=!!s.multiple,i=s.value,i!=null?oo(t,!!s.multiple,i,!1):s.defaultValue!=null&&oo(t,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=qu)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Pt(e),null;case 6:if(t&&e.stateNode!=null)uS(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(X(166));if(n=ii(wl.current),ii(es.current),Wc(e)){if(s=e.stateNode,n=e.memoizedProps,s[Jn]=e,(i=s.nodeValue!==n)&&(t=cn,t!==null))switch(t.tag){case 3:Hc(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Hc(s.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[Jn]=e,e.stateNode=s}return Pt(e),null;case 13:if(De(Fe),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ve&&an!==null&&e.mode&1&&!(e.flags&128))jb(),wo(),e.flags|=98560,i=!1;else if(i=Wc(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(X(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(X(317));i[Jn]=e}else wo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Pt(e),i=!1}else Ln!==null&&(Mm(Ln),Ln=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||Fe.current&1?it===0&&(it=3):_g())),e.updateQueue!==null&&(e.flags|=4),Pt(e),null);case 4:return bo(),km(t,e),t===null&&gl(e.stateNode.containerInfo),Pt(e),null;case 10:return rg(e.type._context),Pt(e),null;case 17:return en(e.type)&&Xu(),Pt(e),null;case 19:if(De(Fe),i=e.memoizedState,i===null)return Pt(e),null;if(s=(e.flags&128)!==0,o=i.rendering,o===null)if(s)ba(i,!1);else{if(it!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=nd(t),o!==null){for(e.flags|=128,ba(i,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)i=n,t=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ie(Fe,Fe.current&1|2),e.child}t=t.sibling}i.tail!==null&&Qe()>To&&(e.flags|=128,s=!0,ba(i,!1),e.lanes=4194304)}else{if(!s)if(t=nd(o),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ba(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ve)return Pt(e),null}else 2*Qe()-i.renderingStartTime>To&&n!==1073741824&&(e.flags|=128,s=!0,ba(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Qe(),e.sibling=null,n=Fe.current,Ie(Fe,s?n&1|2:n&1),e):(Pt(e),null);case 22:case 23:return wg(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?on&1073741824&&(Pt(e),e.subtreeFlags&6&&(e.flags|=8192)):Pt(e),null;case 24:return null;case 25:return null}throw Error(X(156,e.tag))}function jC(t,e){switch(eg(e),e.tag){case 1:return en(e.type)&&Xu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return bo(),De(Zt),De(Lt),cg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return lg(e),null;case 13:if(De(Fe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(X(340));wo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return De(Fe),null;case 4:return bo(),null;case 10:return rg(e.type._context),null;case 22:case 23:return wg(),null;case 24:return null;default:return null}}var qc=!1,Dt=!1,CC=typeof WeakSet=="function"?WeakSet:Set,ne=null;function Ji(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Ke(t,e,s)}else n.current=null}function jm(t,e,n){try{n()}catch(s){Ke(t,e,s)}}var Xx=!1;function IC(t,e){if(dm=Wu,t=pb(),Jp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,h=0,f=t,m=null;t:for(;;){for(var y;f!==n||r!==0&&f.nodeType!==3||(l=o+r),f!==i||s!==0&&f.nodeType!==3||(c=o+s),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)m=f,f=y;for(;;){if(f===t)break t;if(m===n&&++d===r&&(l=o),m===i&&++h===s&&(c=o),(y=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=y}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(hm={focusedElem:t,selectionRange:n},Wu=!1,ne=e;ne!==null;)if(e=ne,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ne=t;else for(;ne!==null;){e=ne;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var C=b.memoizedProps,I=b.memoizedState,x=e.stateNode,v=x.getSnapshotBeforeUpdate(e.elementType===e.type?C:Mn(e.type,C),I);x.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(P){Ke(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,ne=t;break}ne=e.return}return b=Xx,Xx=!1,b}function Ga(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&jm(e,n,i)}r=r.next}while(r!==s)}}function Wd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function Cm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function dS(t){var e=t.alternate;e!==null&&(t.alternate=null,dS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Jn],delete e[xl],delete e[pm],delete e[hC],delete e[fC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function hS(t){return t.tag===5||t.tag===3||t.tag===4}function Qx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||hS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Im(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=qu));else if(s!==4&&(t=t.child,t!==null))for(Im(t,e,n),t=t.sibling;t!==null;)Im(t,e,n),t=t.sibling}function Pm(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(Pm(t,e,n),t=t.sibling;t!==null;)Pm(t,e,n),t=t.sibling}var yt=null,Vn=!1;function Qs(t,e,n){for(n=n.child;n!==null;)fS(t,e,n),n=n.sibling}function fS(t,e,n){if(Zn&&typeof Zn.onCommitFiberUnmount=="function")try{Zn.onCommitFiberUnmount(Ld,n)}catch{}switch(n.tag){case 5:Dt||Ji(n,e);case 6:var s=yt,r=Vn;yt=null,Qs(t,e,n),yt=s,Vn=r,yt!==null&&(Vn?(t=yt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):yt.removeChild(n.stateNode));break;case 18:yt!==null&&(Vn?(t=yt,n=n.stateNode,t.nodeType===8?sf(t.parentNode,n):t.nodeType===1&&sf(t,n),fl(t)):sf(yt,n.stateNode));break;case 4:s=yt,r=Vn,yt=n.stateNode.containerInfo,Vn=!0,Qs(t,e,n),yt=s,Vn=r;break;case 0:case 11:case 14:case 15:if(!Dt&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&jm(n,e,o),r=r.next}while(r!==s)}Qs(t,e,n);break;case 1:if(!Dt&&(Ji(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(l){Ke(n,e,l)}Qs(t,e,n);break;case 21:Qs(t,e,n);break;case 22:n.mode&1?(Dt=(s=Dt)||n.memoizedState!==null,Qs(t,e,n),Dt=s):Qs(t,e,n);break;default:Qs(t,e,n)}}function Yx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new CC),e.forEach(function(s){var r=FC.bind(null,t,s);n.has(s)||(n.add(s),s.then(r,r))})}}function Rn(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:yt=l.stateNode,Vn=!1;break e;case 3:yt=l.stateNode.containerInfo,Vn=!0;break e;case 4:yt=l.stateNode.containerInfo,Vn=!0;break e}l=l.return}if(yt===null)throw Error(X(160));fS(i,o,r),yt=null,Vn=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(d){Ke(r,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)mS(e,t),e=e.sibling}function mS(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Rn(e,t),Xn(t),s&4){try{Ga(3,t,t.return),Wd(3,t)}catch(C){Ke(t,t.return,C)}try{Ga(5,t,t.return)}catch(C){Ke(t,t.return,C)}}break;case 1:Rn(e,t),Xn(t),s&512&&n!==null&&Ji(n,n.return);break;case 5:if(Rn(e,t),Xn(t),s&512&&n!==null&&Ji(n,n.return),t.flags&32){var r=t.stateNode;try{cl(r,"")}catch(C){Ke(t,t.return,C)}}if(s&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&V_(r,i),tm(l,o);var d=tm(l,i);for(o=0;o<c.length;o+=2){var h=c[o],f=c[o+1];h==="style"?$_(r,f):h==="dangerouslySetInnerHTML"?F_(r,f):h==="children"?cl(r,f):Fp(r,h,f,d)}switch(l){case"input":Qf(r,i);break;case"textarea":L_(r,i);break;case"select":var m=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?oo(r,!!i.multiple,y,!1):m!==!!i.multiple&&(i.defaultValue!=null?oo(r,!!i.multiple,i.defaultValue,!0):oo(r,!!i.multiple,i.multiple?[]:"",!1))}r[xl]=i}catch(C){Ke(t,t.return,C)}}break;case 6:if(Rn(e,t),Xn(t),s&4){if(t.stateNode===null)throw Error(X(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(C){Ke(t,t.return,C)}}break;case 3:if(Rn(e,t),Xn(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{fl(e.containerInfo)}catch(C){Ke(t,t.return,C)}break;case 4:Rn(e,t),Xn(t);break;case 13:Rn(e,t),Xn(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(xg=Qe())),s&4&&Yx(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Dt=(d=Dt)||h,Rn(e,t),Dt=d):Rn(e,t),Xn(t),s&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(ne=t,h=t.child;h!==null;){for(f=ne=h;ne!==null;){switch(m=ne,y=m.child,m.tag){case 0:case 11:case 14:case 15:Ga(4,m,m.return);break;case 1:Ji(m,m.return);var b=m.stateNode;if(typeof b.componentWillUnmount=="function"){s=m,n=m.return;try{e=s,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(C){Ke(s,n,C)}}break;case 5:Ji(m,m.return);break;case 22:if(m.memoizedState!==null){Zx(f);continue}}y!==null?(y.return=m,ne=y):Zx(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{r=f.stateNode,d?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=U_("display",o))}catch(C){Ke(t,t.return,C)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(C){Ke(t,t.return,C)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Rn(e,t),Xn(t),s&4&&Yx(t);break;case 21:break;default:Rn(e,t),Xn(t)}}function Xn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(hS(n)){var s=n;break e}n=n.return}throw Error(X(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(cl(r,""),s.flags&=-33);var i=Qx(t);Pm(t,i,r);break;case 3:case 4:var o=s.stateNode.containerInfo,l=Qx(t);Im(t,l,o);break;default:throw Error(X(161))}}catch(c){Ke(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function PC(t,e,n){ne=t,pS(t)}function pS(t,e,n){for(var s=(t.mode&1)!==0;ne!==null;){var r=ne,i=r.child;if(r.tag===22&&s){var o=r.memoizedState!==null||qc;if(!o){var l=r.alternate,c=l!==null&&l.memoizedState!==null||Dt;l=qc;var d=Dt;if(qc=o,(Dt=c)&&!d)for(ne=r;ne!==null;)o=ne,c=o.child,o.tag===22&&o.memoizedState!==null?ev(r):c!==null?(c.return=o,ne=c):ev(r);for(;i!==null;)ne=i,pS(i),i=i.sibling;ne=r,qc=l,Dt=d}Jx(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,ne=i):Jx(t)}}function Jx(t){for(;ne!==null;){var e=ne;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Dt||Wd(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Dt)if(n===null)s.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Mn(e.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Vx(e,i,s);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Vx(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&fl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}Dt||e.flags&512&&Cm(e)}catch(m){Ke(e,e.return,m)}}if(e===t){ne=null;break}if(n=e.sibling,n!==null){n.return=e.return,ne=n;break}ne=e.return}}function Zx(t){for(;ne!==null;){var e=ne;if(e===t){ne=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ne=n;break}ne=e.return}}function ev(t){for(;ne!==null;){var e=ne;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Wd(4,e)}catch(c){Ke(e,n,c)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(c){Ke(e,r,c)}}var i=e.return;try{Cm(e)}catch(c){Ke(e,i,c)}break;case 5:var o=e.return;try{Cm(e)}catch(c){Ke(e,o,c)}}}catch(c){Ke(e,e.return,c)}if(e===t){ne=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ne=l;break}ne=e.return}}var AC=Math.ceil,id=Us.ReactCurrentDispatcher,gg=Us.ReactCurrentOwner,bn=Us.ReactCurrentBatchConfig,_e=0,mt=null,tt=null,St=0,on=0,Zi=Fr(0),it=0,Tl=null,yi=0,Gd=0,yg=0,Ka=null,Xt=null,xg=0,To=1/0,ws=null,od=!1,Am=null,yr=null,Xc=!1,ur=null,ad=0,qa=0,Rm=null,vu=-1,wu=0;function Ht(){return _e&6?Qe():vu!==-1?vu:vu=Qe()}function xr(t){return t.mode&1?_e&2&&St!==0?St&-St:pC.transition!==null?(wu===0&&(wu=Z_()),wu):(t=ke,t!==0||(t=window.event,t=t===void 0?16:ob(t.type)),t):1}function Un(t,e,n,s){if(50<qa)throw qa=0,Rm=null,Error(X(185));Kl(t,n,s),(!(_e&2)||t!==mt)&&(t===mt&&(!(_e&2)&&(Gd|=n),it===4&&rr(t,St)),tn(t,s),n===1&&_e===0&&!(e.mode&1)&&(To=Qe()+500,Bd&&Ur()))}function tn(t,e){var n=t.callbackNode;pj(t,e);var s=Hu(t,t===mt?St:0);if(s===0)n!==null&&cx(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&cx(n),e===1)t.tag===0?mC(tv.bind(null,t)):Eb(tv.bind(null,t)),uC(function(){!(_e&6)&&Ur()}),n=null;else{switch(eb(s)){case 1:n=Hp;break;case 4:n=Y_;break;case 16:n=zu;break;case 536870912:n=J_;break;default:n=zu}n=SS(n,gS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function gS(t,e){if(vu=-1,wu=0,_e&6)throw Error(X(327));var n=t.callbackNode;if(ho()&&t.callbackNode!==n)return null;var s=Hu(t,t===mt?St:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=ld(t,s);else{e=s;var r=_e;_e|=2;var i=xS();(mt!==t||St!==e)&&(ws=null,To=Qe()+500,ci(t,e));do try{MC();break}catch(l){yS(t,l)}while(1);sg(),id.current=i,_e=r,tt!==null?e=0:(mt=null,St=0,e=it)}if(e!==0){if(e===2&&(r=om(t),r!==0&&(s=r,e=Dm(t,r))),e===1)throw n=Tl,ci(t,0),rr(t,s),tn(t,Qe()),n;if(e===6)rr(t,s);else{if(r=t.current.alternate,!(s&30)&&!RC(r)&&(e=ld(t,s),e===2&&(i=om(t),i!==0&&(s=i,e=Dm(t,i))),e===1))throw n=Tl,ci(t,0),rr(t,s),tn(t,Qe()),n;switch(t.finishedWork=r,t.finishedLanes=s,e){case 0:case 1:throw Error(X(345));case 2:ei(t,Xt,ws);break;case 3:if(rr(t,s),(s&130023424)===s&&(e=xg+500-Qe(),10<e)){if(Hu(t,0)!==0)break;if(r=t.suspendedLanes,(r&s)!==s){Ht(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=mm(ei.bind(null,t,Xt,ws),e);break}ei(t,Xt,ws);break;case 4:if(rr(t,s),(s&4194240)===s)break;for(e=t.eventTimes,r=-1;0<s;){var o=31-Fn(s);i=1<<o,o=e[o],o>r&&(r=o),s&=~i}if(s=r,s=Qe()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*AC(s/1960))-s,10<s){t.timeoutHandle=mm(ei.bind(null,t,Xt,ws),s);break}ei(t,Xt,ws);break;case 5:ei(t,Xt,ws);break;default:throw Error(X(329))}}}return tn(t,Qe()),t.callbackNode===n?gS.bind(null,t):null}function Dm(t,e){var n=Ka;return t.current.memoizedState.isDehydrated&&(ci(t,e).flags|=256),t=ld(t,e),t!==2&&(e=Xt,Xt=n,e!==null&&Mm(e)),t}function Mm(t){Xt===null?Xt=t:Xt.push.apply(Xt,t)}function RC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!Bn(i(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function rr(t,e){for(e&=~yg,e&=~Gd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Fn(e),s=1<<n;t[n]=-1,e&=~s}}function tv(t){if(_e&6)throw Error(X(327));ho();var e=Hu(t,0);if(!(e&1))return tn(t,Qe()),null;var n=ld(t,e);if(t.tag!==0&&n===2){var s=om(t);s!==0&&(e=s,n=Dm(t,s))}if(n===1)throw n=Tl,ci(t,0),rr(t,e),tn(t,Qe()),n;if(n===6)throw Error(X(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ei(t,Xt,ws),tn(t,Qe()),null}function vg(t,e){var n=_e;_e|=1;try{return t(e)}finally{_e=n,_e===0&&(To=Qe()+500,Bd&&Ur())}}function xi(t){ur!==null&&ur.tag===0&&!(_e&6)&&ho();var e=_e;_e|=1;var n=bn.transition,s=ke;try{if(bn.transition=null,ke=1,t)return t()}finally{ke=s,bn.transition=n,_e=e,!(_e&6)&&Ur()}}function wg(){on=Zi.current,De(Zi)}function ci(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,cC(n)),tt!==null)for(n=tt.return;n!==null;){var s=n;switch(eg(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Xu();break;case 3:bo(),De(Zt),De(Lt),cg();break;case 5:lg(s);break;case 4:bo();break;case 13:De(Fe);break;case 19:De(Fe);break;case 10:rg(s.type._context);break;case 22:case 23:wg()}n=n.return}if(mt=t,tt=t=vr(t.current,null),St=on=e,it=0,Tl=null,yg=Gd=yi=0,Xt=Ka=null,ri!==null){for(e=0;e<ri.length;e++)if(n=ri[e],s=n.interleaved,s!==null){n.interleaved=null;var r=s.next,i=n.pending;if(i!==null){var o=i.next;i.next=r,s.next=o}n.pending=s}ri=null}return t}function yS(t,e){do{var n=tt;try{if(sg(),gu.current=rd,sd){for(var s=Be.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}sd=!1}if(gi=0,ht=st=Be=null,Wa=!1,_l=0,gg.current=null,n===null||n.return===null){it=1,Tl=e,tt=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=St,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=Bx(o);if(y!==null){y.flags&=-257,zx(y,o,l,i,e),y.mode&1&&$x(i,d,e),e=y,c=d;var b=e.updateQueue;if(b===null){var C=new Set;C.add(c),e.updateQueue=C}else b.add(c);break e}else{if(!(e&1)){$x(i,d,e),_g();break e}c=Error(X(426))}}else if(Ve&&l.mode&1){var I=Bx(o);if(I!==null){!(I.flags&65536)&&(I.flags|=256),zx(I,o,l,i,e),tg(So(c,l));break e}}i=c=So(c,l),it!==4&&(it=2),Ka===null?Ka=[i]:Ka.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=eS(i,c,e);Mx(i,x);break e;case 1:l=c;var v=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(yr===null||!yr.has(_)))){i.flags|=65536,e&=-e,i.lanes|=e;var P=tS(i,l,e);Mx(i,P);break e}}i=i.return}while(i!==null)}wS(n)}catch(D){e=D,tt===n&&n!==null&&(tt=n=n.return);continue}break}while(1)}function xS(){var t=id.current;return id.current=rd,t===null?rd:t}function _g(){(it===0||it===3||it===2)&&(it=4),mt===null||!(yi&268435455)&&!(Gd&268435455)||rr(mt,St)}function ld(t,e){var n=_e;_e|=2;var s=xS();(mt!==t||St!==e)&&(ws=null,ci(t,e));do try{DC();break}catch(r){yS(t,r)}while(1);if(sg(),_e=n,id.current=s,tt!==null)throw Error(X(261));return mt=null,St=0,it}function DC(){for(;tt!==null;)vS(tt)}function MC(){for(;tt!==null&&!oj();)vS(tt)}function vS(t){var e=bS(t.alternate,t,on);t.memoizedProps=t.pendingProps,e===null?wS(t):tt=e,gg.current=null}function wS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=jC(n,e),n!==null){n.flags&=32767,tt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{it=6,tt=null;return}}else if(n=kC(n,e,on),n!==null){tt=n;return}if(e=e.sibling,e!==null){tt=e;return}tt=e=t}while(e!==null);it===0&&(it=5)}function ei(t,e,n){var s=ke,r=bn.transition;try{bn.transition=null,ke=1,VC(t,e,n,s)}finally{bn.transition=r,ke=s}return null}function VC(t,e,n,s){do ho();while(ur!==null);if(_e&6)throw Error(X(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(X(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(gj(t,i),t===mt&&(tt=mt=null,St=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Xc||(Xc=!0,SS(zu,function(){return ho(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=bn.transition,bn.transition=null;var o=ke;ke=1;var l=_e;_e|=4,gg.current=null,IC(t,n),mS(n,t),nC(hm),Wu=!!dm,hm=dm=null,t.current=n,PC(n),aj(),_e=l,ke=o,bn.transition=i}else t.current=n;if(Xc&&(Xc=!1,ur=t,ad=r),i=t.pendingLanes,i===0&&(yr=null),uj(n.stateNode),tn(t,Qe()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(od)throw od=!1,t=Am,Am=null,t;return ad&1&&t.tag!==0&&ho(),i=t.pendingLanes,i&1?t===Rm?qa++:(qa=0,Rm=t):qa=0,Ur(),null}function ho(){if(ur!==null){var t=eb(ad),e=bn.transition,n=ke;try{if(bn.transition=null,ke=16>t?16:t,ur===null)var s=!1;else{if(t=ur,ur=null,ad=0,_e&6)throw Error(X(331));var r=_e;for(_e|=4,ne=t.current;ne!==null;){var i=ne,o=i.child;if(ne.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(ne=d;ne!==null;){var h=ne;switch(h.tag){case 0:case 11:case 15:Ga(8,h,i)}var f=h.child;if(f!==null)f.return=h,ne=f;else for(;ne!==null;){h=ne;var m=h.sibling,y=h.return;if(dS(h),h===d){ne=null;break}if(m!==null){m.return=y,ne=m;break}ne=y}}}var b=i.alternate;if(b!==null){var C=b.child;if(C!==null){b.child=null;do{var I=C.sibling;C.sibling=null,C=I}while(C!==null)}}ne=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ne=o;else e:for(;ne!==null;){if(i=ne,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ga(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,ne=x;break e}ne=i.return}}var v=t.current;for(ne=v;ne!==null;){o=ne;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,ne=_;else e:for(o=v;ne!==null;){if(l=ne,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Wd(9,l)}}catch(D){Ke(l,l.return,D)}if(l===o){ne=null;break e}var P=l.sibling;if(P!==null){P.return=l.return,ne=P;break e}ne=l.return}}if(_e=r,Ur(),Zn&&typeof Zn.onPostCommitFiberRoot=="function")try{Zn.onPostCommitFiberRoot(Ld,t)}catch{}s=!0}return s}finally{ke=n,bn.transition=e}}return!1}function nv(t,e,n){e=So(n,e),e=eS(t,e,1),t=gr(t,e,1),e=Ht(),t!==null&&(Kl(t,1,e),tn(t,e))}function Ke(t,e,n){if(t.tag===3)nv(t,t,n);else for(;e!==null;){if(e.tag===3){nv(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(yr===null||!yr.has(s))){t=So(n,t),t=tS(e,t,1),e=gr(e,t,1),t=Ht(),e!==null&&(Kl(e,1,t),tn(e,t));break}}e=e.return}}function LC(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=Ht(),t.pingedLanes|=t.suspendedLanes&n,mt===t&&(St&n)===n&&(it===4||it===3&&(St&130023424)===St&&500>Qe()-xg?ci(t,0):yg|=n),tn(t,e)}function _S(t,e){e===0&&(t.mode&1?(e=Fc,Fc<<=1,!(Fc&130023424)&&(Fc=4194304)):e=1);var n=Ht();t=Ps(t,e),t!==null&&(Kl(t,e,n),tn(t,n))}function OC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),_S(t,n)}function FC(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(X(314))}s!==null&&s.delete(e),_S(t,n)}var bS;bS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Zt.current)Yt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Yt=!1,NC(t,e,n);Yt=!!(t.flags&131072)}else Yt=!1,Ve&&e.flags&1048576&&Nb(e,Ju,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;xu(t,e),t=e.pendingProps;var r=vo(e,Lt.current);uo(e,n),r=dg(null,e,s,t,r,n);var i=hg();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,en(s)?(i=!0,Qu(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,og(e),r.updater=Hd,e.stateNode=r,r._reactInternals=e,_m(e,s,t,n),e=Tm(null,e,s,!0,i,n)):(e.tag=0,Ve&&i&&Zp(e),$t(null,e,r,n),e=e.child),e;case 16:s=e.elementType;e:{switch(xu(t,e),t=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=$C(s),t=Mn(s,t),r){case 0:e=Sm(null,e,s,t,n);break e;case 1:e=Gx(null,e,s,t,n);break e;case 11:e=Hx(null,e,s,t,n);break e;case 14:e=Wx(null,e,s,Mn(s.type,t),n);break e}throw Error(X(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Mn(s,r),Sm(t,e,s,r,n);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Mn(s,r),Gx(t,e,s,r,n);case 3:e:{if(iS(e),t===null)throw Error(X(387));s=e.pendingProps,i=e.memoizedState,r=i.element,Ab(t,e),td(e,s,null,n);var o=e.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=So(Error(X(423)),e),e=Kx(t,e,s,n,r);break e}else if(s!==r){r=So(Error(X(424)),e),e=Kx(t,e,s,n,r);break e}else for(an=pr(e.stateNode.containerInfo.firstChild),cn=e,Ve=!0,Ln=null,n=Ib(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(wo(),s===r){e=As(t,e,n);break e}$t(t,e,s,n)}e=e.child}return e;case 5:return Rb(e),t===null&&xm(e),s=e.type,r=e.pendingProps,i=t!==null?t.memoizedProps:null,o=r.children,fm(s,r)?o=null:i!==null&&fm(s,i)&&(e.flags|=32),rS(t,e),$t(t,e,o,n),e.child;case 6:return t===null&&xm(e),null;case 13:return oS(t,e,n);case 4:return ag(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=_o(e,null,s,n):$t(t,e,s,n),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Mn(s,r),Hx(t,e,s,r,n);case 7:return $t(t,e,e.pendingProps,n),e.child;case 8:return $t(t,e,e.pendingProps.children,n),e.child;case 12:return $t(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,i=e.memoizedProps,o=r.value,Ie(Zu,s._currentValue),s._currentValue=o,i!==null)if(Bn(i.value,o)){if(i.children===r.children&&!Zt.current){e=As(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=Ns(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),vm(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(X(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),vm(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}$t(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,uo(e,n),r=Nn(r),s=s(r),e.flags|=1,$t(t,e,s,n),e.child;case 14:return s=e.type,r=Mn(s,e.pendingProps),r=Mn(s.type,r),Wx(t,e,s,r,n);case 15:return nS(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Mn(s,r),xu(t,e),e.tag=1,en(s)?(t=!0,Qu(e)):t=!1,uo(e,n),Zb(e,s,r),_m(e,s,r,n),Tm(null,e,s,!0,t,n);case 19:return aS(t,e,n);case 22:return sS(t,e,n)}throw Error(X(156,e.tag))};function SS(t,e){return Q_(t,e)}function UC(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _n(t,e,n,s){return new UC(t,e,n,s)}function bg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $C(t){if(typeof t=="function")return bg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===$p)return 11;if(t===Bp)return 14}return 2}function vr(t,e){var n=t.alternate;return n===null?(n=_n(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function _u(t,e,n,s,r,i){var o=2;if(s=t,typeof t=="function")bg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case zi:return ui(n.children,r,i,e);case Up:o=8,r|=8;break;case Wf:return t=_n(12,n,e,r|2),t.elementType=Wf,t.lanes=i,t;case Gf:return t=_n(13,n,e,r),t.elementType=Gf,t.lanes=i,t;case Kf:return t=_n(19,n,e,r),t.elementType=Kf,t.lanes=i,t;case R_:return Kd(n,r,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case P_:o=10;break e;case A_:o=9;break e;case $p:o=11;break e;case Bp:o=14;break e;case tr:o=16,s=null;break e}throw Error(X(130,t==null?t:typeof t,""))}return e=_n(o,n,e,r),e.elementType=t,e.type=s,e.lanes=i,e}function ui(t,e,n,s){return t=_n(7,t,s,e),t.lanes=n,t}function Kd(t,e,n,s){return t=_n(22,t,s,e),t.elementType=R_,t.lanes=n,t.stateNode={isHidden:!1},t}function hf(t,e,n){return t=_n(6,t,null,e),t.lanes=n,t}function ff(t,e,n){return e=_n(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function BC(t,e,n,s,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gh(0),this.expirationTimes=Gh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gh(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Sg(t,e,n,s,r,i,o,l,c){return t=new BC(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=_n(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},og(i),t}function zC(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bi,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function TS(t){if(!t)return kr;t=t._reactInternals;e:{if(Ni(t)!==t||t.tag!==1)throw Error(X(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(en(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(X(171))}if(t.tag===1){var n=t.type;if(en(n))return Tb(t,n,e)}return e}function ES(t,e,n,s,r,i,o,l,c){return t=Sg(n,s,!0,t,r,i,o,l,c),t.context=TS(null),n=t.current,s=Ht(),r=xr(n),i=Ns(s,r),i.callback=e??null,gr(n,i,r),t.current.lanes=r,Kl(t,r,s),tn(t,s),t}function qd(t,e,n,s){var r=e.current,i=Ht(),o=xr(r);return n=TS(n),e.context===null?e.context=n:e.pendingContext=n,e=Ns(i,o),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=gr(r,e,o),t!==null&&(Un(t,r,o,i),pu(t,r,o)),o}function cd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function sv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Tg(t,e){sv(t,e),(t=t.alternate)&&sv(t,e)}function HC(){return null}var NS=typeof reportError=="function"?reportError:function(t){console.error(t)};function Eg(t){this._internalRoot=t}Xd.prototype.render=Eg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(X(409));qd(t,e,null,null)};Xd.prototype.unmount=Eg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xi(function(){qd(null,t,null,null)}),e[Is]=null}};function Xd(t){this._internalRoot=t}Xd.prototype.unstable_scheduleHydration=function(t){if(t){var e=sb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<sr.length&&e!==0&&e<sr[n].priority;n++);sr.splice(n,0,t),n===0&&ib(t)}};function Ng(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Qd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function rv(){}function WC(t,e,n,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var d=cd(o);i.call(d)}}var o=ES(e,s,t,0,null,!1,!1,"",rv);return t._reactRootContainer=o,t[Is]=o.current,gl(t.nodeType===8?t.parentNode:t),xi(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof s=="function"){var l=s;s=function(){var d=cd(c);l.call(d)}}var c=Sg(t,0,!1,null,null,!1,!1,"",rv);return t._reactRootContainer=c,t[Is]=c.current,gl(t.nodeType===8?t.parentNode:t),xi(function(){qd(e,c,n,s)}),c}function Yd(t,e,n,s,r){var i=n._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var l=r;r=function(){var c=cd(o);l.call(c)}}qd(e,o,t,r)}else o=WC(n,e,t,r,s);return cd(o)}tb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Pa(e.pendingLanes);n!==0&&(Wp(e,n|1),tn(e,Qe()),!(_e&6)&&(To=Qe()+500,Ur()))}break;case 13:xi(function(){var s=Ps(t,1);if(s!==null){var r=Ht();Un(s,t,1,r)}}),Tg(t,1)}};Gp=function(t){if(t.tag===13){var e=Ps(t,134217728);if(e!==null){var n=Ht();Un(e,t,134217728,n)}Tg(t,134217728)}};nb=function(t){if(t.tag===13){var e=xr(t),n=Ps(t,e);if(n!==null){var s=Ht();Un(n,t,e,s)}Tg(t,e)}};sb=function(){return ke};rb=function(t,e){var n=ke;try{return ke=t,e()}finally{ke=n}};sm=function(t,e,n){switch(e){case"input":if(Qf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var r=$d(s);if(!r)throw Error(X(90));M_(s),Qf(s,r)}}}break;case"textarea":L_(t,n);break;case"select":e=n.value,e!=null&&oo(t,!!n.multiple,e,!1)}};H_=vg;W_=xi;var GC={usingClientEntryPoint:!1,Events:[Xl,Ki,$d,B_,z_,vg]},Sa={findFiberByHostInstance:si,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},KC={bundleType:Sa.bundleType,version:Sa.version,rendererPackageName:Sa.rendererPackageName,rendererConfig:Sa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Us.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=q_(t),t===null?null:t.stateNode},findFiberByHostInstance:Sa.findFiberByHostInstance||HC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qc.isDisabled&&Qc.supportsFiber)try{Ld=Qc.inject(KC),Zn=Qc}catch{}}hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GC;hn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ng(e))throw Error(X(200));return zC(t,e,null,n)};hn.createRoot=function(t,e){if(!Ng(t))throw Error(X(299));var n=!1,s="",r=NS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Sg(t,1,!1,null,null,n,!1,s,r),t[Is]=e.current,gl(t.nodeType===8?t.parentNode:t),new Eg(e)};hn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):(t=Object.keys(t).join(","),Error(X(268,t)));return t=q_(e),t=t===null?null:t.stateNode,t};hn.flushSync=function(t){return xi(t)};hn.hydrate=function(t,e,n){if(!Qd(e))throw Error(X(200));return Yd(null,t,e,!0,n)};hn.hydrateRoot=function(t,e,n){if(!Ng(t))throw Error(X(405));var s=n!=null&&n.hydratedSources||null,r=!1,i="",o=NS;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=ES(e,null,t,1,n??null,r,!1,i,o),t[Is]=e.current,gl(t),s)for(t=0;t<s.length;t++)n=s[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Xd(e)};hn.render=function(t,e,n){if(!Qd(e))throw Error(X(200));return Yd(null,t,e,!1,n)};hn.unmountComponentAtNode=function(t){if(!Qd(t))throw Error(X(40));return t._reactRootContainer?(xi(function(){Yd(null,null,t,!1,function(){t._reactRootContainer=null,t[Is]=null})}),!0):!1};hn.unstable_batchedUpdates=vg;hn.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!Qd(n))throw Error(X(200));if(t==null||t._reactInternals===void 0)throw Error(X(38));return Yd(t,e,n,!1,s)};hn.version="18.3.1-next-f1338f8080-20240426";function kS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kS)}catch(t){console.error(t)}}kS(),k_.exports=hn;var qC=k_.exports,iv=qC;zf.createRoot=iv.createRoot,zf.hydrateRoot=iv.hydrateRoot;const XC="modulepreload",QC=function(t){return"/"+t},ov={},YC=function(e,n,s){if(!n||n.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=QC(i),i in ov)return;ov[i]=!0;const o=i.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!s)for(let h=r.length-1;h>=0;h--){const f=r[h];if(f.href===i&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const d=document.createElement("link");if(d.rel=o?"stylesheet":XC,o||(d.as="script",d.crossOrigin=""),d.href=i,document.head.appendChild(d),o)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};var kg={};Object.defineProperty(kg,"__esModule",{value:!0});kg.parse=rI;kg.serialize=iI;const JC=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,ZC=/^[\u0021-\u003A\u003C-\u007E]*$/,eI=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,tI=/^[\u0020-\u003A\u003D-\u007E]*$/,nI=Object.prototype.toString,sI=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function rI(t,e){const n=new sI,s=t.length;if(s<2)return n;const r=(e==null?void 0:e.decode)||oI;let i=0;do{const o=t.indexOf("=",i);if(o===-1)break;const l=t.indexOf(";",i),c=l===-1?s:l;if(o>c){i=t.lastIndexOf(";",o-1)+1;continue}const d=av(t,i,o),h=lv(t,o,d),f=t.slice(d,h);if(n[f]===void 0){let m=av(t,o+1,c),y=lv(t,c,m);const b=r(t.slice(m,y));n[f]=b}i=c+1}while(i<s);return n}function av(t,e,n){do{const s=t.charCodeAt(e);if(s!==32&&s!==9)return e}while(++e<n);return n}function lv(t,e,n){for(;e>n;){const s=t.charCodeAt(--e);if(s!==32&&s!==9)return e+1}return n}function iI(t,e,n){const s=(n==null?void 0:n.encode)||encodeURIComponent;if(!JC.test(t))throw new TypeError(`argument name is invalid: ${t}`);const r=s(e);if(!ZC.test(r))throw new TypeError(`argument val is invalid: ${e}`);let i=t+"="+r;if(!n)return i;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);i+="; Max-Age="+n.maxAge}if(n.domain){if(!eI.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);i+="; Domain="+n.domain}if(n.path){if(!tI.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);i+="; Path="+n.path}if(n.expires){if(!aI(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);i+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(i+="; HttpOnly"),n.secure&&(i+="; Secure"),n.partitioned&&(i+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":i+="; Priority=Low";break;case"medium":i+="; Priority=Medium";break;case"high":i+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"none":i+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return i}function oI(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function aI(t){return nI.call(t)==="[object Date]"}var cv="popstate";function lI(t={}){function e(s,r){let{pathname:i,search:o,hash:l}=s.location;return Vm("",{pathname:i,search:o,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(s,r){return typeof r=="string"?r:El(r)}return uI(e,n,null,t)}function Oe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function zn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function cI(){return Math.random().toString(36).substring(2,10)}function uv(t,e){return{usr:t.state,key:t.key,idx:e}}function Vm(t,e,n=null,s){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Fo(e):e,state:n,key:e&&e.key||s||cI()}}function El({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Fo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substring(s),t=t.substring(0,s)),t&&(e.pathname=t)}return e}function uI(t,e,n,s={}){let{window:r=document.defaultView,v5Compat:i=!1}=s,o=r.history,l="POP",c=null,d=h();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function h(){return(o.state||{idx:null}).idx}function f(){l="POP";let I=h(),x=I==null?null:I-d;d=I,c&&c({action:l,location:C.location,delta:x})}function m(I,x){l="PUSH";let v=Vm(C.location,I,x);n&&n(v,I),d=h()+1;let _=uv(v,d),P=C.createHref(v);try{o.pushState(_,"",P)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;r.location.assign(P)}i&&c&&c({action:l,location:C.location,delta:1})}function y(I,x){l="REPLACE";let v=Vm(C.location,I,x);n&&n(v,I),d=h();let _=uv(v,d),P=C.createHref(v);o.replaceState(_,"",P),i&&c&&c({action:l,location:C.location,delta:0})}function b(I){return dI(I)}let C={get action(){return l},get location(){return t(r,o)},listen(I){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(cv,f),c=I,()=>{r.removeEventListener(cv,f),c=null}},createHref(I){return e(r,I)},createURL:b,encodeLocation(I){let x=b(I);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:y,go(I){return o.go(I)}};return C}function dI(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Oe(n,"No window.location.(origin|href) available to create URL");let s=typeof t=="string"?t:El(t);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function jS(t,e,n="/"){return hI(t,e,n,!1)}function hI(t,e,n,s){let r=typeof e=="string"?Fo(e):e,i=Rs(r.pathname||"/",n);if(i==null)return null;let o=CS(t);fI(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=TI(i);l=bI(o[c],d,s)}return l}function CS(t,e=[],n=[],s=""){let r=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Oe(c.relativePath.startsWith(s),`Absolute route path "${c.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(s.length));let d=ks([s,c.relativePath]),h=n.concat(c);i.children&&i.children.length>0&&(Oe(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),CS(i.children,e,h,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:wI(d,i.index),routesMeta:h})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))r(i,o);else for(let c of IS(i.path))r(i,o,c)}),e}function IS(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,r=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let o=IS(s.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),r&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function fI(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:_I(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var mI=/^:[\w-]+$/,pI=3,gI=2,yI=1,xI=10,vI=-2,dv=t=>t==="*";function wI(t,e){let n=t.split("/"),s=n.length;return n.some(dv)&&(s+=vI),e&&(s+=gI),n.filter(r=>!dv(r)).reduce((r,i)=>r+(mI.test(i)?pI:i===""?yI:xI),s)}function _I(t,e){return t.length===e.length&&t.slice(0,-1).every((s,r)=>s===e[r])?t[t.length-1]-e[e.length-1]:0}function bI(t,e,n=!1){let{routesMeta:s}=t,r={},i="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],d=l===s.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=ud({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),m=c.route;if(!f&&d&&n&&!s[s.length-1].route.index&&(f=ud({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!f)return null;Object.assign(r,f.params),o.push({params:r,pathname:ks([i,f.pathname]),pathnameBase:jI(ks([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=ks([i,f.pathnameBase]))}return o}function ud(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=SI(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let i=r[0],o=i.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:s.reduce((d,{paramName:h,isOptional:f},m)=>{if(h==="*"){let b=l[m]||"";o=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const y=l[m];return f&&!y?d[h]=void 0:d[h]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function SI(t,e=!1,n=!0){zn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let s=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),s]}function TI(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return zn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Rs(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function EI(t,e="/"){let{pathname:n,search:s="",hash:r=""}=typeof t=="string"?Fo(t):t;return{pathname:n?n.startsWith("/")?n:NI(n,e):e,search:CI(s),hash:II(r)}}function NI(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function mf(t,e,n,s){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function kI(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function jg(t){let e=kI(t);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function Cg(t,e,n,s=!1){let r;typeof t=="string"?r=Fo(t):(r={...t},Oe(!r.pathname||!r.pathname.includes("?"),mf("?","pathname","search",r)),Oe(!r.pathname||!r.pathname.includes("#"),mf("#","pathname","hash",r)),Oe(!r.search||!r.search.includes("#"),mf("#","search","hash",r)));let i=t===""||r.pathname==="",o=i?"/":r.pathname,l;if(o==null)l=n;else{let f=e.length-1;if(!s&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;r.pathname=m.join("/")}l=f>=0?e[f]:"/"}let c=EI(r,l),d=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}var ks=t=>t.join("/").replace(/\/\/+/g,"/"),jI=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),CI=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,II=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function PI(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var PS=["POST","PUT","PATCH","DELETE"];new Set(PS);var AI=["GET",...PS];new Set(AI);var Uo=S.createContext(null);Uo.displayName="DataRouter";var Jd=S.createContext(null);Jd.displayName="DataRouterState";var AS=S.createContext({isTransitioning:!1});AS.displayName="ViewTransition";var RI=S.createContext(new Map);RI.displayName="Fetchers";var DI=S.createContext(null);DI.displayName="Await";var Gn=S.createContext(null);Gn.displayName="Navigation";var Yl=S.createContext(null);Yl.displayName="Location";var fs=S.createContext({outlet:null,matches:[],isDataRoute:!1});fs.displayName="Route";var Ig=S.createContext(null);Ig.displayName="RouteError";function MI(t,{relative:e}={}){Oe($o(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=S.useContext(Gn),{hash:r,pathname:i,search:o}=Jl(t,{relative:e}),l=i;return n!=="/"&&(l=i==="/"?n:ks([n,i])),s.createHref({pathname:l,search:o,hash:r})}function $o(){return S.useContext(Yl)!=null}function ms(){return Oe($o(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(Yl).location}var RS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function DS(t){S.useContext(Gn).static||S.useLayoutEffect(t)}function $s(){let{isDataRoute:t}=S.useContext(fs);return t?qI():VI()}function VI(){Oe($o(),"useNavigate() may be used only in the context of a <Router> component.");let t=S.useContext(Uo),{basename:e,navigator:n}=S.useContext(Gn),{matches:s}=S.useContext(fs),{pathname:r}=ms(),i=JSON.stringify(jg(s)),o=S.useRef(!1);return DS(()=>{o.current=!0}),S.useCallback((c,d={})=>{if(zn(o.current,RS),!o.current)return;if(typeof c=="number"){n.go(c);return}let h=Cg(c,JSON.parse(i),r,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ks([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,i,r,t])}S.createContext(null);function Jl(t,{relative:e}={}){let{matches:n}=S.useContext(fs),{pathname:s}=ms(),r=JSON.stringify(jg(n));return S.useMemo(()=>Cg(t,JSON.parse(r),s,e==="path"),[t,r,s,e])}function LI(t,e){return MS(t,e)}function MS(t,e,n,s){var x;Oe($o(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=S.useContext(Gn),{matches:i}=S.useContext(fs),o=i[i.length-1],l=o?o.params:{},c=o?o.pathname:"/",d=o?o.pathnameBase:"/",h=o&&o.route;{let v=h&&h.path||"";VS(c,!h||v.endsWith("*")||v.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${v}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${v}"> to <Route path="${v==="/"?"*":`${v}/*`}">.`)}let f=ms(),m;if(e){let v=typeof e=="string"?Fo(e):e;Oe(d==="/"||((x=v.pathname)==null?void 0:x.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${v.pathname}" was given in the \`location\` prop.`),m=v}else m=f;let y=m.pathname||"/",b=y;if(d!=="/"){let v=d.replace(/^\//,"").split("/");b="/"+y.replace(/^\//,"").split("/").slice(v.length).join("/")}let C=jS(t,{pathname:b});zn(h||C!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),zn(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let I=BI(C&&C.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:ks([d,r.encodeLocation?r.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?d:ks([d,r.encodeLocation?r.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,n,s);return e&&I?S.createElement(Yl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},I):I}function OI(){let t=KI(),e=PI(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=S.createElement(S.Fragment,null,S.createElement("p",null," Hey developer "),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:i},"ErrorBoundary")," or"," ",S.createElement("code",{style:i},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),n?S.createElement("pre",{style:r},n):null,o)}var FI=S.createElement(OI,null),UI=class extends S.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?S.createElement(fs.Provider,{value:this.props.routeContext},S.createElement(Ig.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function $I({routeContext:t,match:e,children:n}){let s=S.useContext(Uo);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),S.createElement(fs.Provider,{value:t},n)}function BI(t,e=[],n=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let r=t,i=n==null?void 0:n.errors;if(i!=null){let c=r.findIndex(d=>d.route.id&&(i==null?void 0:i[d.route.id])!==void 0);Oe(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),r=r.slice(0,Math.min(r.length,c+1))}let o=!1,l=-1;if(n)for(let c=0;c<r.length;c++){let d=r[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=c),d.route.id){let{loaderData:h,errors:f}=n,m=d.route.loader&&!h.hasOwnProperty(d.route.id)&&(!f||f[d.route.id]===void 0);if(d.route.lazy||m){o=!0,l>=0?r=r.slice(0,l+1):r=[r[0]];break}}}return r.reduceRight((c,d,h)=>{let f,m=!1,y=null,b=null;n&&(f=i&&d.route.id?i[d.route.id]:void 0,y=d.route.errorElement||FI,o&&(l<0&&h===0?(VS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,b=null):l===h&&(m=!0,b=d.route.hydrateFallbackElement||null)));let C=e.concat(r.slice(0,h+1)),I=()=>{let x;return f?x=y:m?x=b:d.route.Component?x=S.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=c,S.createElement($I,{match:d,routeContext:{outlet:c,matches:C,isDataRoute:n!=null},children:x})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?S.createElement(UI,{location:n.location,revalidation:n.revalidation,component:y,error:f,children:I(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):I()},null)}function Pg(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zI(t){let e=S.useContext(Uo);return Oe(e,Pg(t)),e}function HI(t){let e=S.useContext(Jd);return Oe(e,Pg(t)),e}function WI(t){let e=S.useContext(fs);return Oe(e,Pg(t)),e}function Ag(t){let e=WI(t),n=e.matches[e.matches.length-1];return Oe(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function GI(){return Ag("useRouteId")}function KI(){var s;let t=S.useContext(Ig),e=HI("useRouteError"),n=Ag("useRouteError");return t!==void 0?t:(s=e.errors)==null?void 0:s[n]}function qI(){let{router:t}=zI("useNavigate"),e=Ag("useNavigate"),n=S.useRef(!1);return DS(()=>{n.current=!0}),S.useCallback(async(r,i={})=>{zn(n.current,RS),n.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:e,...i}))},[t,e])}var hv={};function VS(t,e,n){!e&&!hv[t]&&(hv[t]=!0,zn(!1,n))}S.memo(XI);function XI({routes:t,future:e,state:n}){return MS(t,void 0,n,e)}function QI({to:t,replace:e,state:n,relative:s}){Oe($o(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=S.useContext(Gn);zn(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=S.useContext(fs),{pathname:o}=ms(),l=$s(),c=Cg(t,jg(i),o,s==="path"),d=JSON.stringify(c);return S.useEffect(()=>{l(JSON.parse(d),{replace:e,state:n,relative:s})},[l,d,s,e,n]),null}function pn(t){Oe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function YI({basename:t="/",children:e=null,location:n,navigationType:s="POP",navigator:r,static:i=!1}){Oe(!$o(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=S.useMemo(()=>({basename:o,navigator:r,static:i,future:{}}),[o,r,i]);typeof n=="string"&&(n=Fo(n));let{pathname:c="/",search:d="",hash:h="",state:f=null,key:m="default"}=n,y=S.useMemo(()=>{let b=Rs(c,o);return b==null?null:{location:{pathname:b,search:d,hash:h,state:f,key:m},navigationType:s}},[o,c,d,h,f,m,s]);return zn(y!=null,`<Router basename="${o}"> is not able to match the URL "${c}${d}${h}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:S.createElement(Gn.Provider,{value:l},S.createElement(Yl.Provider,{children:e,value:y}))}function JI({children:t,location:e}){return LI(Lm(t),e)}function Lm(t,e=[]){let n=[];return S.Children.forEach(t,(s,r)=>{if(!S.isValidElement(s))return;let i=[...e,r];if(s.type===S.Fragment){n.push.apply(n,Lm(s.props.children,i));return}Oe(s.type===pn,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Oe(!s.props.index||!s.props.children,"An index route cannot have child routes.");let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=Lm(s.props.children,i)),n.push(o)}),n}var bu="get",Su="application/x-www-form-urlencoded";function Zd(t){return t!=null&&typeof t.tagName=="string"}function ZI(t){return Zd(t)&&t.tagName.toLowerCase()==="button"}function eP(t){return Zd(t)&&t.tagName.toLowerCase()==="form"}function tP(t){return Zd(t)&&t.tagName.toLowerCase()==="input"}function nP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function sP(t,e){return t.button===0&&(!e||e==="_self")&&!nP(t)}var Yc=null;function rP(){if(Yc===null)try{new FormData(document.createElement("form"),0),Yc=!1}catch{Yc=!0}return Yc}var iP=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function pf(t){return t!=null&&!iP.has(t)?(zn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Su}"`),null):t}function oP(t,e){let n,s,r,i,o;if(eP(t)){let l=t.getAttribute("action");s=l?Rs(l,e):null,n=t.getAttribute("method")||bu,r=pf(t.getAttribute("enctype"))||Su,i=new FormData(t)}else if(ZI(t)||tP(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(s=c?Rs(c,e):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||bu,r=pf(t.getAttribute("formenctype"))||pf(l.getAttribute("enctype"))||Su,i=new FormData(l,t),!rP()){let{name:d,type:h,value:f}=t;if(h==="image"){let m=d?`${d}.`:"";i.append(`${m}x`,"0"),i.append(`${m}y`,"0")}else d&&i.append(d,f)}}else{if(Zd(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=bu,s=null,r=Su,o=t}return i&&r==="text/plain"&&(o=i,i=void 0),{action:s,method:n.toLowerCase(),encType:r,formData:i,body:o}}function Rg(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function aP(t,e){if(t.id in e)return e[t.id];try{let n=await YC(()=>import(t.module),[]);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function lP(t){return t!=null&&typeof t.page=="string"}function cP(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function uP(t,e,n){let s=await Promise.all(t.map(async r=>{let i=e.routes[r.route.id];if(i){let o=await aP(i,n);return o.links?o.links():[]}return[]}));return mP(s.flat(1).filter(cP).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function fv(t,e,n,s,r,i){let o=(c,d)=>n[d]?c.route.id!==n[d].route.id:!0,l=(c,d)=>{var h;return n[d].pathname!==c.pathname||((h=n[d].route.path)==null?void 0:h.endsWith("*"))&&n[d].params["*"]!==c.params["*"]};return i==="assets"?e.filter((c,d)=>o(c,d)||l(c,d)):i==="data"?e.filter((c,d)=>{var f;let h=s.routes[c.route.id];if(!h||!h.hasLoader)return!1;if(o(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let m=c.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function dP(t,e,{includeHydrateFallback:n}={}){return hP(t.map(s=>{let r=e.routes[s.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function hP(t){return[...new Set(t)]}function fP(t){let e={},n=Object.keys(t).sort();for(let s of n)e[s]=t[s];return e}function mP(t,e){let n=new Set,s=new Set(e);return t.reduce((r,i)=>{if(e&&!lP(i)&&i.as==="script"&&i.href&&s.has(i.href))return r;let l=JSON.stringify(fP(i));return n.has(l)||(n.add(l),r.push({key:l,link:i})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var pP=new Set([100,101,204,205]);function gP(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Rs(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function LS(){let t=S.useContext(Uo);return Rg(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function yP(){let t=S.useContext(Jd);return Rg(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Dg=S.createContext(void 0);Dg.displayName="FrameworkContext";function OS(){let t=S.useContext(Dg);return Rg(t,"You must render this element inside a <HydratedRouter> element"),t}function xP(t,e){let n=S.useContext(Dg),[s,r]=S.useState(!1),[i,o]=S.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:h,onTouchStart:f}=e,m=S.useRef(null);S.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let C=x=>{x.forEach(v=>{o(v.isIntersecting)})},I=new IntersectionObserver(C,{threshold:.5});return m.current&&I.observe(m.current),()=>{I.disconnect()}}},[t]),S.useEffect(()=>{if(s){let C=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(C)}}},[s]);let y=()=>{r(!0)},b=()=>{r(!1),o(!1)};return n?t!=="intent"?[i,m,{}]:[i,m,{onFocus:Ta(l,y),onBlur:Ta(c,b),onMouseEnter:Ta(d,y),onMouseLeave:Ta(h,b),onTouchStart:Ta(f,y)}]:[!1,m,{}]}function Ta(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function vP({page:t,...e}){let{router:n}=LS(),s=S.useMemo(()=>jS(n.routes,t,n.basename),[n.routes,t,n.basename]);return s?S.createElement(_P,{page:t,matches:s,...e}):null}function wP(t){let{manifest:e,routeModules:n}=OS(),[s,r]=S.useState([]);return S.useEffect(()=>{let i=!1;return uP(t,e,n).then(o=>{i||r(o)}),()=>{i=!0}},[t,e,n]),s}function _P({page:t,matches:e,...n}){let s=ms(),{manifest:r,routeModules:i}=OS(),{basename:o}=LS(),{loaderData:l,matches:c}=yP(),d=S.useMemo(()=>fv(t,e,c,r,s,"data"),[t,e,c,r,s]),h=S.useMemo(()=>fv(t,e,c,r,s,"assets"),[t,e,c,r,s]),f=S.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let b=new Set,C=!1;if(e.forEach(x=>{var _;let v=r.routes[x.route.id];!v||!v.hasLoader||(!d.some(P=>P.route.id===x.route.id)&&x.route.id in l&&((_=i[x.route.id])!=null&&_.shouldRevalidate)||v.hasClientLoader?C=!0:b.add(x.route.id))}),b.size===0)return[];let I=gP(t,o);return C&&b.size>0&&I.searchParams.set("_routes",e.filter(x=>b.has(x.route.id)).map(x=>x.route.id).join(",")),[I.pathname+I.search]},[o,l,s,r,d,e,t,i]),m=S.useMemo(()=>dP(h,r),[h,r]),y=wP(h);return S.createElement(S.Fragment,null,f.map(b=>S.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...n})),m.map(b=>S.createElement("link",{key:b,rel:"modulepreload",href:b,...n})),y.map(({key:b,link:C})=>S.createElement("link",{key:b,...C})))}function bP(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var FS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{FS&&(window.__reactRouterVersion="7.6.3")}catch{}function SP({basename:t,children:e,window:n}){let s=S.useRef();s.current==null&&(s.current=lI({window:n,v5Compat:!0}));let r=s.current,[i,o]=S.useState({action:r.action,location:r.location}),l=S.useCallback(c=>{S.startTransition(()=>o(c))},[o]);return S.useLayoutEffect(()=>r.listen(l),[r,l]),S.createElement(YI,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:r})}var US=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ft=S.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:r,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:h,viewTransition:f,...m},y){let{basename:b}=S.useContext(Gn),C=typeof d=="string"&&US.test(d),I,x=!1;if(typeof d=="string"&&C&&(I=d,FS))try{let j=new URL(window.location.href),k=d.startsWith("//")?new URL(j.protocol+d):new URL(d),R=Rs(k.pathname,b);k.origin===j.origin&&R!=null?d=R+k.search+k.hash:x=!0}catch{zn(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=MI(d,{relative:r}),[_,P,D]=xP(s,m),A=kP(d,{replace:o,state:l,target:c,preventScrollReset:h,relative:r,viewTransition:f});function T(j){e&&e(j),j.defaultPrevented||A(j)}let w=S.createElement("a",{...m,...D,href:I||v,onClick:x||i?e:T,ref:bP(y,P),target:c,"data-discover":!C&&n==="render"?"true":void 0});return _&&!C?S.createElement(S.Fragment,null,w,S.createElement(vP,{page:v})):w});ft.displayName="Link";var TP=S.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:r=!1,style:i,to:o,viewTransition:l,children:c,...d},h){let f=Jl(o,{relative:d.relative}),m=ms(),y=S.useContext(Jd),{navigator:b,basename:C}=S.useContext(Gn),I=y!=null&&AP(f)&&l===!0,x=b.encodeLocation?b.encodeLocation(f).pathname:f.pathname,v=m.pathname,_=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;n||(v=v.toLowerCase(),_=_?_.toLowerCase():null,x=x.toLowerCase()),_&&C&&(_=Rs(_,C)||_);const P=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let D=v===x||!r&&v.startsWith(x)&&v.charAt(P)==="/",A=_!=null&&(_===x||!r&&_.startsWith(x)&&_.charAt(x.length)==="/"),T={isActive:D,isPending:A,isTransitioning:I},w=D?e:void 0,j;typeof s=="function"?j=s(T):j=[s,D?"active":null,A?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let k=typeof i=="function"?i(T):i;return S.createElement(ft,{...d,"aria-current":w,className:j,ref:h,style:k,to:o,viewTransition:l},typeof c=="function"?c(T):c)});TP.displayName="NavLink";var EP=S.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:r,state:i,method:o=bu,action:l,onSubmit:c,relative:d,preventScrollReset:h,viewTransition:f,...m},y)=>{let b=IP(),C=PP(l,{relative:d}),I=o.toLowerCase()==="get"?"get":"post",x=typeof l=="string"&&US.test(l),v=_=>{if(c&&c(_),_.defaultPrevented)return;_.preventDefault();let P=_.nativeEvent.submitter,D=(P==null?void 0:P.getAttribute("formmethod"))||o;b(P||_.currentTarget,{fetcherKey:e,method:D,navigate:n,replace:r,state:i,relative:d,preventScrollReset:h,viewTransition:f})};return S.createElement("form",{ref:y,method:I,action:C,onSubmit:s?c:v,...m,"data-discover":!x&&t==="render"?"true":void 0})});EP.displayName="Form";function NP(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $S(t){let e=S.useContext(Uo);return Oe(e,NP(t)),e}function kP(t,{target:e,replace:n,state:s,preventScrollReset:r,relative:i,viewTransition:o}={}){let l=$s(),c=ms(),d=Jl(t,{relative:i});return S.useCallback(h=>{if(sP(h,e)){h.preventDefault();let f=n!==void 0?n:El(c)===El(d);l(t,{replace:f,state:s,preventScrollReset:r,relative:i,viewTransition:o})}},[c,l,d,n,s,e,t,r,i,o])}var jP=0,CP=()=>`__${String(++jP)}__`;function IP(){let{router:t}=$S("useSubmit"),{basename:e}=S.useContext(Gn),n=GI();return S.useCallback(async(s,r={})=>{let{action:i,method:o,encType:l,formData:c,body:d}=oP(s,e);if(r.navigate===!1){let h=r.fetcherKey||CP();await t.fetch(h,n,r.action||i,{preventScrollReset:r.preventScrollReset,formData:c,body:d,formMethod:r.method||o,formEncType:r.encType||l,flushSync:r.flushSync})}else await t.navigate(r.action||i,{preventScrollReset:r.preventScrollReset,formData:c,body:d,formMethod:r.method||o,formEncType:r.encType||l,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,n])}function PP(t,{relative:e}={}){let{basename:n}=S.useContext(Gn),s=S.useContext(fs);Oe(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),i={...Jl(t||".",{relative:e})},o=ms();if(t==null){i.search=o.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(h=>h==="")){l.delete("index"),c.filter(f=>f).forEach(f=>l.append("index",f));let h=l.toString();i.search=h?`?${h}`:""}}return(!t||t===".")&&r.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:ks([n,i.pathname])),El(i)}function AP(t,e={}){let n=S.useContext(AS);Oe(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=$S("useViewTransitionState"),r=Jl(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=Rs(n.currentLocation.pathname,s)||n.currentLocation.pathname,o=Rs(n.nextLocation.pathname,s)||n.nextLocation.pathname;return ud(r.pathname,o)!=null||ud(r.pathname,i)!=null}[...pP];const RP=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},DP=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],l=t[n++],c=((r&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},zS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,l=o?t[r+1]:0,c=r+2<t.length,d=c?t[r+2]:0,h=i>>2,f=(i&3)<<4|l>>4;let m=(l&15)<<2|d>>6,y=d&63;c||(y=64,o||(m=64)),s.push(n[h],n[f],n[m],n[y])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(BS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):DP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],l=r<t.length?n[t.charAt(r)]:0;++r;const d=r<t.length?n[t.charAt(r)]:64;++r;const f=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||l==null||d==null||f==null)throw new MP;const m=i<<2|l>>4;if(s.push(m),d!==64){const y=l<<4&240|d>>2;if(s.push(y),f!==64){const b=d<<6&192|f;s.push(b)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class MP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VP=function(t){const e=BS(t);return zS.encodeByteArray(e,!0)},dd=function(t){return VP(t).replace(/\./g,"")},HS=function(t){try{return zS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP=()=>LP().__FIREBASE_DEFAULTS__,FP=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},UP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&HS(t[1]);return e&&JSON.parse(e)},eh=()=>{try{return RP()||OP()||FP()||UP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},WS=t=>{var e,n;return(n=(e=eh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},$P=t=>{const e=WS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},GS=()=>{var t;return(t=eh())===null||t===void 0?void 0:t.config},KS=t=>{var e;return(e=eh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function qS(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),l="";return[dd(JSON.stringify(n)),dd(JSON.stringify(o)),l].join(".")}const Xa={};function HP(){const t={prod:[],emulator:[]};for(const e of Object.keys(Xa))Xa[e]?t.emulator.push(e):t.prod.push(e);return t}function WP(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let mv=!1;function XS(t,e){if(typeof window>"u"||typeof document>"u"||!Bo(window.location.host)||Xa[t]===e||Xa[t]||mv)return;Xa[t]=e;function n(m){return`__firebase__banner__${m}`}const s="__firebase__banner",i=HP().prod.length>0;function o(){const m=document.getElementById(s);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{mv=!0,o()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=WP(s),y=n("text"),b=document.getElementById(y)||document.createElement("span"),C=n("learnmore"),I=document.getElementById(C)||document.createElement("a"),x=n("preprendIcon"),v=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const _=m.element;l(_),h(I,C);const P=d();c(v,x),_.append(v,b,I,P),document.body.appendChild(_)}i?(b.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function GP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ot())}function KP(){var t;const e=(t=eh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function XP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function QP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YP(){const t=Ot();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function JP(){return!KP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ZP(){try{return typeof indexedDB=="object"}catch{return!1}}function eA(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var i;e(((i=r.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="FirebaseError";class Bs extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=tA,Object.setPrototypeOf(this,Bs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zl.prototype.create)}}class Zl{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?nA(i,s):"Error",l=`${this.serviceName}: ${o} (${r}).`;return new Bs(r,l,s)}}function nA(t,e){return t.replace(sA,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const sA=/\{\$([^}]+)}/g;function rA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function vi(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(pv(i)&&pv(o)){if(!vi(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function pv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ec(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Ra(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,i]=s.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function Da(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function iA(t,e){const n=new oA(t,e);return n.subscribe.bind(n)}class oA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");aA(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=gf),r.error===void 0&&(r.error=gf),r.complete===void 0&&(r.complete=gf);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function gf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(t){return t&&t._delegate?t._delegate:t}class wi{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new BP;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uA(e))try{this.getOrInitializeService({instanceIdentifier:ti})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=ti){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ti){return this.instances.has(e)}getOptions(e=ti){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);s===l&&o.resolve(r)}return r}onInit(e,n){var s;const r=this.normalizeInstanceIdentifier(n),i=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:cA(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ti){return this.component?this.component.multipleInstances?e:ti:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cA(t){return t===ti?void 0:t}function uA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new lA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pe||(pe={}));const hA={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},fA=pe.INFO,mA={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},pA=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=mA[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Mg{constructor(e){this.name=e,this._logLevel=fA,this._logHandler=pA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}}const gA=(t,e)=>e.some(n=>t instanceof n);let gv,yv;function yA(){return gv||(gv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xA(){return yv||(yv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const QS=new WeakMap,Om=new WeakMap,YS=new WeakMap,yf=new WeakMap,Vg=new WeakMap;function vA(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(wr(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&QS.set(n,t)}).catch(()=>{}),Vg.set(e,t),e}function wA(t){if(Om.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Om.set(t,e)}let Fm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Om.get(t);if(e==="objectStoreNames")return t.objectStoreNames||YS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function _A(t){Fm=t(Fm)}function bA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(xf(this),e,...n);return YS.set(s,e.sort?e.sort():[e]),wr(s)}:xA().includes(t)?function(...e){return t.apply(xf(this),e),wr(QS.get(this))}:function(...e){return wr(t.apply(xf(this),e))}}function SA(t){return typeof t=="function"?bA(t):(t instanceof IDBTransaction&&wA(t),gA(t,yA())?new Proxy(t,Fm):t)}function wr(t){if(t instanceof IDBRequest)return vA(t);if(yf.has(t))return yf.get(t);const e=SA(t);return e!==t&&(yf.set(t,e),Vg.set(e,t)),e}const xf=t=>Vg.get(t);function TA(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),l=wr(o);return s&&o.addEventListener("upgradeneeded",c=>{s(wr(o.result),c.oldVersion,c.newVersion,wr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const EA=["get","getKey","getAll","getAllKeys","count"],NA=["put","add","delete","clear"],vf=new Map;function xv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(vf.get(e))return vf.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=NA.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||EA.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,r?"readwrite":"readonly");let d=c.store;return s&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),r&&c.done]))[0]};return vf.set(e,i),i}_A(t=>({...t,get:(e,n,s)=>xv(e,n)||t.get(e,n,s),has:(e,n)=>!!xv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(jA(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function jA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Um="@firebase/app",vv="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds=new Mg("@firebase/app"),CA="@firebase/app-compat",IA="@firebase/analytics-compat",PA="@firebase/analytics",AA="@firebase/app-check-compat",RA="@firebase/app-check",DA="@firebase/auth",MA="@firebase/auth-compat",VA="@firebase/database",LA="@firebase/data-connect",OA="@firebase/database-compat",FA="@firebase/functions",UA="@firebase/functions-compat",$A="@firebase/installations",BA="@firebase/installations-compat",zA="@firebase/messaging",HA="@firebase/messaging-compat",WA="@firebase/performance",GA="@firebase/performance-compat",KA="@firebase/remote-config",qA="@firebase/remote-config-compat",XA="@firebase/storage",QA="@firebase/storage-compat",YA="@firebase/firestore",JA="@firebase/ai",ZA="@firebase/firestore-compat",eR="firebase",tR="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m="[DEFAULT]",nR={[Um]:"fire-core",[CA]:"fire-core-compat",[PA]:"fire-analytics",[IA]:"fire-analytics-compat",[RA]:"fire-app-check",[AA]:"fire-app-check-compat",[DA]:"fire-auth",[MA]:"fire-auth-compat",[VA]:"fire-rtdb",[LA]:"fire-data-connect",[OA]:"fire-rtdb-compat",[FA]:"fire-fn",[UA]:"fire-fn-compat",[$A]:"fire-iid",[BA]:"fire-iid-compat",[zA]:"fire-fcm",[HA]:"fire-fcm-compat",[WA]:"fire-perf",[GA]:"fire-perf-compat",[KA]:"fire-rc",[qA]:"fire-rc-compat",[XA]:"fire-gcs",[QA]:"fire-gcs-compat",[YA]:"fire-fst",[ZA]:"fire-fst-compat",[JA]:"fire-vertex","fire-js":"fire-js",[eR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hd=new Map,sR=new Map,Bm=new Map;function wv(t,e){try{t.container.addComponent(e)}catch(n){Ds.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Eo(t){const e=t.name;if(Bm.has(e))return Ds.debug(`There were multiple attempts to register component ${e}.`),!1;Bm.set(e,t);for(const n of hd.values())wv(n,t);for(const n of sR.values())wv(n,t);return!0}function Lg(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function vn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_r=new Zl("app","Firebase",rR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new wi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _r.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo=tR;function JS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:$m,automaticDataCollectionEnabled:!0},e),r=s.name;if(typeof r!="string"||!r)throw _r.create("bad-app-name",{appName:String(r)});if(n||(n=GS()),!n)throw _r.create("no-options");const i=hd.get(r);if(i){if(vi(n,i.options)&&vi(s,i.config))return i;throw _r.create("duplicate-app",{appName:r})}const o=new dA(r);for(const c of Bm.values())o.addComponent(c);const l=new iR(n,s,o);return hd.set(r,l),l}function ZS(t=$m){const e=hd.get(t);if(!e&&t===$m&&GS())return JS();if(!e)throw _r.create("no-app",{appName:t});return e}function br(t,e,n){var s;let r=(s=nR[t])!==null&&s!==void 0?s:t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${r}" with version "${e}":`];i&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ds.warn(l.join(" "));return}Eo(new wi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR="firebase-heartbeat-database",aR=1,Nl="firebase-heartbeat-store";let wf=null;function eT(){return wf||(wf=TA(oR,aR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Nl)}catch(n){console.warn(n)}}}}).catch(t=>{throw _r.create("idb-open",{originalErrorMessage:t.message})})),wf}async function lR(t){try{const n=(await eT()).transaction(Nl),s=await n.objectStore(Nl).get(tT(t));return await n.done,s}catch(e){if(e instanceof Bs)Ds.warn(e.message);else{const n=_r.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ds.warn(n.message)}}}async function _v(t,e){try{const s=(await eT()).transaction(Nl,"readwrite");await s.objectStore(Nl).put(e,tT(t)),await s.done}catch(n){if(n instanceof Bs)Ds.warn(n.message);else{const s=_r.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ds.warn(s.message)}}}function tT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR=1024,uR=30;class dR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new fR(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=bv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats.length>uR){const o=mR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Ds.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=bv(),{heartbeatsToSend:s,unsentEntries:r}=hR(this._heartbeatsCache.heartbeats),i=dd(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Ds.warn(n),""}}}function bv(){return new Date().toISOString().substring(0,10)}function hR(t,e=cR){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),Sv(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Sv(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class fR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ZP()?eA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await lR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return _v(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return _v(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Sv(t){return dd(JSON.stringify({version:2,heartbeats:t})).length}function mR(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pR(t){Eo(new wi("platform-logger",e=>new kA(e),"PRIVATE")),Eo(new wi("heartbeat",e=>new dR(e),"PRIVATE")),br(Um,vv,t),br(Um,vv,"esm2017"),br("fire-js","")}pR("");var gR="firebase",yR="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */br(gR,yR,"app");function Og(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n}function nT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const xR=nT,sT=new Zl("auth","Firebase",nT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd=new Mg("@firebase/auth");function vR(t,...e){fd.logLevel<=pe.WARN&&fd.warn(`Auth (${zo}): ${t}`,...e)}function Tu(t,...e){fd.logLevel<=pe.ERROR&&fd.error(`Auth (${zo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(t,...e){throw Fg(t,...e)}function ts(t,...e){return Fg(t,...e)}function rT(t,e,n){const s=Object.assign(Object.assign({},xR()),{[e]:n});return new Zl("auth","Firebase",s).create(e,{appName:t.name})}function js(t){return rT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Fg(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return sT.create(t,...e)}function oe(t,e,...n){if(!t)throw Fg(e,...n)}function Ts(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Tu(e),new Error(e)}function Ms(t,e){t||Ts(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function wR(){return Tv()==="http:"||Tv()==="https:"}function Tv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wR()||XP()||"connection"in navigator)?navigator.onLine:!0}function bR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ms(n>e,"Short delay should be less than long delay!"),this.isMobile=GP()||QP()}get(){return _R()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(t,e){Ms(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ts("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ts("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ts("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ER=new tc(3e4,6e4);function $r(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Br(t,e,n,s,r={}){return oT(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const l=ec(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},i);return qP()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Bo(t.emulatorConfig.host)&&(d.credentials="include"),iT.fetch()(await aT(t,t.config.apiHost,n,l),d)})}async function oT(t,e,n){t._canInitEmulator=!1;const s=Object.assign(Object.assign({},SR),e);try{const r=new kR(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Jc(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jc(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Jc(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Jc(t,"user-disabled",o);const h=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw rT(t,h,d);Hn(t,h)}}catch(r){if(r instanceof Bs)throw r;Hn(t,"network-request-failed",{message:String(r)})}}async function nc(t,e,n,s,r={}){const i=await Br(t,e,n,s,r);return"mfaPendingCredential"in i&&Hn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function aT(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?Ug(t.config,r):`${t.config.apiScheme}://${r}`;return TR.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function NR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class kR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(ts(this.auth,"network-request-failed")),ER.get())})}}function Jc(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=ts(t,e,s);return r.customData._tokenResponse=n,r}function Ev(t){return t!==void 0&&t.enterprise!==void 0}class jR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return NR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function CR(t,e){return Br(t,"GET","/v2/recaptchaConfig",$r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IR(t,e){return Br(t,"POST","/v1/accounts:delete",e)}async function md(t,e){return Br(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function PR(t,e=!1){const n=Et(t),s=await n.getIdToken(e),r=$g(s);oe(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:r,token:s,authTime:Qa(_f(r.auth_time)),issuedAtTime:Qa(_f(r.iat)),expirationTime:Qa(_f(r.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function _f(t){return Number(t)*1e3}function $g(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Tu("JWT malformed, contained fewer than 3 sections"),null;try{const r=HS(n);return r?JSON.parse(r):(Tu("Failed to decode base64 JWT payload"),null)}catch(r){return Tu("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Nv(t){const e=$g(t);return oe(e,"internal-error"),oe(typeof e.exp<"u","internal-error"),oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kl(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Bs&&AR(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function AR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qa(this.lastLoginAt),this.creationTime=Qa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pd(t){var e;const n=t.auth,s=await t.getIdToken(),r=await kl(t,md(n,{idToken:s}));oe(r==null?void 0:r.users.length,n,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?lT(i.providerUserInfo):[],l=MR(t.providerData,o),c=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),h=c?d:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Hm(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function DR(t){const e=Et(t);await pd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function MR(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function lT(t){return t.map(e=>{var{providerId:n}=e,s=Og(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VR(t,e){const n=await oT(t,{},async()=>{const s=ec({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await aT(t,r,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:s};return t.emulatorConfig&&Bo(t.emulatorConfig.host)&&(c.credentials="include"),iT.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function LR(t,e){return Br(t,"POST","/v2/accounts:revokeToken",$r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken<"u","internal-error"),oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Nv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){oe(e.length!==0,"internal-error");const n=Nv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await VR(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new fo;return s&&(oe(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(oe(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(oe(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fo,this.toJSON())}_performRefresh(){return Ts("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ys(t,e){oe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class On{constructor(e){var{uid:n,auth:s,stsTokenManager:r}=e,i=Og(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new RR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Hm(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await kl(this,this.stsTokenManager.getToken(this.auth,e));return oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return PR(this,e)}reload(){return DR(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new On(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await pd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vn(this.auth.app))return Promise.reject(js(this.auth));const e=await this.getIdToken();return await kl(this,IR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,r,i,o,l,c,d,h;const f=(s=n.displayName)!==null&&s!==void 0?s:void 0,m=(r=n.email)!==null&&r!==void 0?r:void 0,y=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,b=(o=n.photoURL)!==null&&o!==void 0?o:void 0,C=(l=n.tenantId)!==null&&l!==void 0?l:void 0,I=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,x=(d=n.createdAt)!==null&&d!==void 0?d:void 0,v=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:_,emailVerified:P,isAnonymous:D,providerData:A,stsTokenManager:T}=n;oe(_&&T,e,"internal-error");const w=fo.fromJSON(this.name,T);oe(typeof _=="string",e,"internal-error"),Ys(f,e.name),Ys(m,e.name),oe(typeof P=="boolean",e,"internal-error"),oe(typeof D=="boolean",e,"internal-error"),Ys(y,e.name),Ys(b,e.name),Ys(C,e.name),Ys(I,e.name),Ys(x,e.name),Ys(v,e.name);const j=new On({uid:_,auth:e,email:m,emailVerified:P,displayName:f,isAnonymous:D,photoURL:b,phoneNumber:y,tenantId:C,stsTokenManager:w,createdAt:x,lastLoginAt:v});return A&&Array.isArray(A)&&(j.providerData=A.map(k=>Object.assign({},k))),I&&(j._redirectEventId=I),j}static async _fromIdTokenResponse(e,n,s=!1){const r=new fo;r.updateFromServerResponse(n);const i=new On({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await pd(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];oe(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?lT(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(i!=null&&i.length),l=new fo;l.updateFromIdToken(s);const c=new On({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Hm(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv=new Map;function Es(t){Ms(t instanceof Function,"Expected a class definition");let e=kv.get(t);return e?(Ms(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,kv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}cT.type="NONE";const jv=cT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(t,e,n){return`firebase:${t}:${e}:${n}`}class mo{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=Eu(this.userKey,r.apiKey,i),this.fullPersistenceKey=Eu("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await md(this.auth,{idToken:e}).catch(()=>{});return n?On._fromGetAccountInfoResponse(this.auth,n,e):null}return On._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new mo(Es(jv),e,s);const r=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=r[0]||Es(jv);const o=Eu(s,e.config.apiKey,e.name);let l=null;for(const d of n)try{const h=await d._get(o);if(h){let f;if(typeof h=="string"){const m=await md(e,{idToken:h}).catch(()=>{});if(!m)break;f=await On._fromGetAccountInfoResponse(e,m,h)}else f=On._fromJSON(e,h);d!==i&&(l=f),i=d;break}}catch{}const c=r.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new mo(i,e,s):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new mo(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pT(e))return"Blackberry";if(gT(e))return"Webos";if(dT(e))return"Safari";if((e.includes("chrome/")||hT(e))&&!e.includes("edge/"))return"Chrome";if(mT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function uT(t=Ot()){return/firefox\//i.test(t)}function dT(t=Ot()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hT(t=Ot()){return/crios\//i.test(t)}function fT(t=Ot()){return/iemobile/i.test(t)}function mT(t=Ot()){return/android/i.test(t)}function pT(t=Ot()){return/blackberry/i.test(t)}function gT(t=Ot()){return/webos/i.test(t)}function Bg(t=Ot()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function OR(t=Ot()){var e;return Bg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function FR(){return YP()&&document.documentMode===10}function yT(t=Ot()){return Bg(t)||mT(t)||gT(t)||pT(t)||/windows phone/i.test(t)||fT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(t,e=[]){let n;switch(t){case"Browser":n=Cv(Ot());break;case"Worker":n=`${Cv(Ot())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${zo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $R(t,e={}){return Br(t,"GET","/v2/passwordPolicy",$r(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR=6;class zR{constructor(e){var n,s,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:BR,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,r,i,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(s=c.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Iv(this),this.idTokenSubscription=new Iv(this),this.beforeStateQueue=new UR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Es(n)),this._initializationPromise=this.queue(async()=>{var s,r,i;if(!this._deleted&&(this.persistenceManager=await mo.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await md(this,{idToken:e}),s=await On._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(vn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let r=s,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await pd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=bR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vn(this.app))return Promise.reject(js(this));const n=e?Et(e):null;return n&&oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vn(this.app)?Promise.reject(js(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vn(this.app)?Promise.reject(js(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Es(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await $R(this),n=new zR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Zl("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await LR(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Es(e)||this._popupRedirectResolver;oe(n,this,"argument-error"),this.redirectPersistenceManager=await mo.create(this,[Es(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,s,r);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;if(vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&vR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ki(t){return Et(t)}class Iv{constructor(e){this.auth=e,this.observer=null,this.addObserver=iA(n=>this.observer=n)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let th={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function WR(t){th=t}function vT(t){return th.loadJS(t)}function GR(){return th.recaptchaEnterpriseScript}function KR(){return th.gapiScript}function qR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class XR{constructor(){this.enterprise=new QR}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class QR{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const YR="recaptcha-enterprise",wT="NO_RECAPTCHA";class JR{constructor(e){this.type=YR,this.auth=ki(e)}async verify(e="verify",n=!1){async function s(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{CR(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new jR(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(c=>{l(c)})})}function r(i,o,l){const c=window.grecaptcha;Ev(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(wT)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new XR().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{s(this.auth).then(l=>{if(!n&&Ev(window.grecaptcha))r(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=GR();c.length!==0&&(c+=l),vT(c).then(()=>{r(l,i,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function Ea(t,e,n,s=!1,r=!1){const i=new JR(t);let o;if(r)o=wT;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return s?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Wm(t,e,n,s,r){var i,o;if(r==="EMAIL_PASSWORD_PROVIDER")if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Ea(t,e,n,n==="getOobCode");return s(t,l)}else return s(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Ea(t,e,n,n==="getOobCode");return s(t,c)}else return Promise.reject(l)});else if(r==="PHONE_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){const l=await Ea(t,e,n);return s(t,l).catch(async c=>{var d;if(((d=t._getRecaptchaConfig())===null||d===void 0?void 0:d.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const h=await Ea(t,e,n,!1,!0);return s(t,h)}return Promise.reject(c)})}else{const l=await Ea(t,e,n,!1,!0);return s(t,l)}else return Promise.reject(r+" provider is not supported.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZR(t,e){const n=Lg(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(vi(i,e??{}))return r;Hn(r,"already-initialized")}return n.initialize({options:e})}function eD(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Es);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function tD(t,e,n){const s=ki(t);oe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!!(n!=null&&n.disableWarnings),i=_T(e),{host:o,port:l}=nD(e),c=l===null?"":`:${l}`,d={url:`${i}//${o}${c}/`},h=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){oe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),oe(vi(d,s.config.emulator)&&vi(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=d,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,Bo(o)?(qS(`${i}//${o}${c}`),XS("Auth",!0)):r||sD()}function _T(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function nD(t){const e=_T(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:Pv(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:Pv(o)}}}function Pv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function sD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ts("not implemented")}_getIdTokenResponse(e){return Ts("not implemented")}_linkToIdToken(e,n){return Ts("not implemented")}_getReauthenticationResolver(e){return Ts("not implemented")}}async function rD(t,e){return Br(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iD(t,e){return nc(t,"POST","/v1/accounts:signInWithPassword",$r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oD(t,e){return nc(t,"POST","/v1/accounts:signInWithEmailLink",$r(t,e))}async function aD(t,e){return nc(t,"POST","/v1/accounts:signInWithEmailLink",$r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl extends zg{constructor(e,n,s,r=null){super("password",s),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new jl(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new jl(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wm(e,n,"signInWithPassword",iD,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return oD(e,{email:this._email,oobCode:this._password});default:Hn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wm(e,s,"signUpPassword",rD,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return aD(e,{idToken:n,email:this._email,oobCode:this._password});default:Hn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function po(t,e){return nc(t,"POST","/v1/accounts:signInWithIdp",$r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD="http://localhost";class _i extends zg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new _i(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Hn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r}=n,i=Og(n,["providerId","signInMethod"]);if(!s||!r)return null;const o=new _i(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return po(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,po(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,po(e,n)}buildRequest(){const e={requestUri:lD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ec(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function uD(t){const e=Ra(Da(t)).link,n=e?Ra(Da(e)).deep_link_id:null,s=Ra(Da(t)).deep_link_id;return(s?Ra(Da(s)).link:null)||s||n||e||t}class Hg{constructor(e){var n,s,r,i,o,l;const c=Ra(Da(e)),d=(n=c.apiKey)!==null&&n!==void 0?n:null,h=(s=c.oobCode)!==null&&s!==void 0?s:null,f=cD((r=c.mode)!==null&&r!==void 0?r:null);oe(d&&h&&f,"argument-error"),this.apiKey=d,this.operation=f,this.code=h,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.lang)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=uD(e);try{return new Hg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(){this.providerId=Ho.PROVIDER_ID}static credential(e,n){return jl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Hg.parseLink(n);return oe(s,"argument-error"),jl._fromEmailAndCode(e,s.code,s.tenantId)}}Ho.PROVIDER_ID="password";Ho.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ho.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc extends bT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends sc{constructor(){super("facebook.com")}static credential(e){return _i._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ir.credential(e.oauthAccessToken)}catch{return null}}}ir.FACEBOOK_SIGN_IN_METHOD="facebook.com";ir.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends sc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return _i._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return or.credential(n,s)}catch{return null}}}or.GOOGLE_SIGN_IN_METHOD="google.com";or.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends sc{constructor(){super("github.com")}static credential(e){return _i._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ar.credential(e.oauthAccessToken)}catch{return null}}}ar.GITHUB_SIGN_IN_METHOD="github.com";ar.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends sc{constructor(){super("twitter.com")}static credential(e,n){return _i._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return lr.credential(n,s)}catch{return null}}}lr.TWITTER_SIGN_IN_METHOD="twitter.com";lr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dD(t,e){return nc(t,"POST","/v1/accounts:signUp",$r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await On._fromIdTokenResponse(e,s,r),o=Av(s);return new bi({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=Av(s);return new bi({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function Av(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd extends Bs{constructor(e,n,s,r){var i;super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,gd.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new gd(e,n,s,r)}}function ST(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?gd._fromErrorAndOperation(t,i,e,s):i})}async function hD(t,e,n=!1){const s=await kl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return bi._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fD(t,e,n=!1){const{auth:s}=t;if(vn(s.app))return Promise.reject(js(s));const r="reauthenticate";try{const i=await kl(t,ST(s,r,e,t),n);oe(i.idToken,s,"internal-error");const o=$g(i.idToken);oe(o,s,"internal-error");const{sub:l}=o;return oe(t.uid===l,s,"user-mismatch"),bi._forOperation(t,r,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Hn(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TT(t,e,n=!1){if(vn(t.app))return Promise.reject(js(t));const s="signIn",r=await ST(t,s,e),i=await bi._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}async function mD(t,e){return TT(ki(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ET(t){const e=ki(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function pD(t,e,n){if(vn(t.app))return Promise.reject(js(t));const s=ki(t),o=await Wm(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",dD,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&ET(t),c}),l=await bi._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(l.user),l}function gD(t,e,n){return vn(t.app)?Promise.reject(js(t)):mD(Et(t),Ho.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&ET(t),s})}function yD(t,e,n,s){return Et(t).onIdTokenChanged(e,n,s)}function xD(t,e,n){return Et(t).beforeAuthStateChanged(e,n)}function vD(t,e,n,s){return Et(t).onAuthStateChanged(e,n,s)}function wD(t){return Et(t).signOut()}async function _D(t){return Et(t).delete()}const yd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(yd,"1"),this.storage.removeItem(yd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD=1e3,SD=10;class kT extends NT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);FR()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,SD):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},bD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}kT.type="LOCAL";const TD=kT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT extends NT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}jT.type="SESSION";const CT=jT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ED(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new nh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const l=Array.from(o).map(async d=>d(n.origin,i)),c=await ED(l);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wg(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const d=Wg("",20);r.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(f){const m=f;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(){return window}function kD(t){ns().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(){return typeof ns().WorkerGlobalScope<"u"&&typeof ns().importScripts=="function"}async function jD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function CD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function ID(){return IT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT="firebaseLocalStorageDb",PD=1,xd="firebaseLocalStorage",AT="fbase_key";class rc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function sh(t,e){return t.transaction([xd],e?"readwrite":"readonly").objectStore(xd)}function AD(){const t=indexedDB.deleteDatabase(PT);return new rc(t).toPromise()}function Gm(){const t=indexedDB.open(PT,PD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(xd,{keyPath:AT})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(xd)?e(s):(s.close(),await AD(),e(await Gm()))})})}async function Rv(t,e,n){const s=sh(t,!0).put({[AT]:e,value:n});return new rc(s).toPromise()}async function RD(t,e){const n=sh(t,!1).get(e),s=await new rc(n).toPromise();return s===void 0?null:s.value}function Dv(t,e){const n=sh(t,!0).delete(e);return new rc(n).toPromise()}const DD=800,MD=3;class RT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>MD)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return IT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nh._getInstance(ID()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await jD(),!this.activeServiceWorker)return;this.sender=new ND(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||CD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gm();return await Rv(e,yd,"1"),await Dv(e,yd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Rv(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>RD(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Dv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=sh(r,!1).getAll();return new rc(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),DD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}RT.type="LOCAL";const VD=RT;new tc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(t,e){return e?Es(e):(oe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg extends zg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return po(e,this._buildIdpRequest())}_linkToIdToken(e,n){return po(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return po(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function OD(t){return TT(t.auth,new Gg(t),t.bypassAuthState)}function FD(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),fD(n,new Gg(t),t.bypassAuthState)}async function UD(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),hD(n,new Gg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return OD;case"linkViaPopup":case"linkViaRedirect":return UD;case"reauthViaPopup":case"reauthViaRedirect":return FD;default:Hn(this.auth,"internal-error")}}resolve(e){Ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D=new tc(2e3,1e4);class eo extends DT{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,eo.currentPopupAction&&eo.currentPopupAction.cancel(),eo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return oe(e,this.auth,"internal-error"),e}async onExecution(){Ms(this.filter.length===1,"Popup operations only handle one event");const e=Wg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ts(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ts(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,eo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ts(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$D.get())};e()}}eo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD="pendingRedirect",Nu=new Map;class zD extends DT{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Nu.get(this.auth._key());if(!e){try{const s=await HD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Nu.set(this.auth._key(),e)}return this.bypassAuthState||Nu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HD(t,e){const n=KD(e),s=GD(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function WD(t,e){Nu.set(t._key(),e)}function GD(t){return Es(t._redirectPersistence)}function KD(t){return Eu(BD,t.config.apiKey,t.name)}async function qD(t,e,n=!1){if(vn(t.app))return Promise.reject(js(t));const s=ki(t),r=LD(s,e),o=await new zD(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD=10*60*1e3;class QD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!YD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!MT(e)){const r=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(ts(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=XD&&this.cachedEventUids.clear(),this.cachedEventUids.has(Mv(e))}saveEventToCache(e){this.cachedEventUids.add(Mv(e)),this.lastProcessedEventTime=Date.now()}}function Mv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function MT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function YD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return MT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JD(t,e={}){return Br(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,e5=/^https?/;async function t5(t){if(t.config.emulator)return;const{authorizedDomains:e}=await JD(t);for(const n of e)try{if(n5(n))return}catch{}Hn(t,"unauthorized-domain")}function n5(t){const e=zm(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!e5.test(n))return!1;if(ZD.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s5=new tc(3e4,6e4);function Vv(){const t=ns().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function r5(t){return new Promise((e,n)=>{var s,r,i;function o(){Vv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Vv(),n(ts(t,"network-request-failed"))},timeout:s5.get()})}if(!((r=(s=ns().gapi)===null||s===void 0?void 0:s.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((i=ns().gapi)===null||i===void 0)&&i.load)o();else{const l=qR("iframefcb");return ns()[l]=()=>{gapi.load?o():n(ts(t,"network-request-failed"))},vT(`${KR()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw ku=null,e})}let ku=null;function i5(t){return ku=ku||r5(t),ku}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o5=new tc(5e3,15e3),a5="__/auth/iframe",l5="emulator/auth/iframe",c5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},u5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function d5(t){const e=t.config;oe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ug(e,l5):`https://${t.config.authDomain}/${a5}`,s={apiKey:e.apiKey,appName:t.name,v:zo},r=u5.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${ec(s).slice(1)}`}async function h5(t){const e=await i5(t),n=ns().gapi;return oe(n,t,"internal-error"),e.open({where:document.body,url:d5(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:c5,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=ts(t,"network-request-failed"),l=ns().setTimeout(()=>{i(o)},o5.get());function c(){ns().clearTimeout(l),r(s)}s.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},m5=500,p5=600,g5="_blank",y5="http://localhost";class Lv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function x5(t,e,n,s=m5,r=p5){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const c=Object.assign(Object.assign({},f5),{width:s.toString(),height:r.toString(),top:i,left:o}),d=Ot().toLowerCase();n&&(l=hT(d)?g5:n),uT(d)&&(e=e||y5,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[y,b])=>`${m}${y}=${b},`,"");if(OR(d)&&l!=="_self")return v5(e||"",l),new Lv(null);const f=window.open(e||"",l,h);oe(f,t,"popup-blocked");try{f.focus()}catch{}return new Lv(f)}function v5(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w5="__/auth/handler",_5="emulator/auth/handler",b5=encodeURIComponent("fac");async function Ov(t,e,n,s,r,i){oe(t.config.authDomain,t,"auth-domain-config-required"),oe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:zo,eventId:r};if(e instanceof bT){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",rA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries(i||{}))o[h]=f}if(e instanceof sc){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),d=c?`#${b5}=${encodeURIComponent(c)}`:"";return`${S5(t)}?${ec(l).slice(1)}${d}`}function S5({config:t}){return t.emulator?Ug(t,_5):`https://${t.authDomain}/${w5}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bf="webStorageSupport";class T5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=CT,this._completeRedirectFn=qD,this._overrideRedirectResult=WD}async _openPopup(e,n,s,r){var i;Ms((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Ov(e,n,s,zm(),r);return x5(e,o,Wg())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await Ov(e,n,s,zm(),r);return kD(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(Ms(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await h5(e),s=new QD(e);return n.register("authEvent",r=>(oe(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(bf,{type:bf},r=>{var i;const o=(i=r==null?void 0:r[0])===null||i===void 0?void 0:i[bf];o!==void 0&&n(!!o),Hn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=t5(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return yT()||dT()||Bg()}}const E5=T5;var Fv="@firebase/auth",Uv="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k5(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function j5(t){Eo(new wi("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=s.options;oe(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xT(t)},d=new HR(s,r,i,c);return eD(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Eo(new wi("auth-internal",e=>{const n=ki(e.getProvider("auth").getImmediate());return(s=>new N5(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),br(Fv,Uv,k5(t)),br(Fv,Uv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C5=5*60,I5=KS("authIdTokenMaxAge")||C5;let $v=null;const P5=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>I5)return;const r=n==null?void 0:n.token;$v!==r&&($v=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function A5(t=ZS()){const e=Lg(t,"auth");if(e.isInitialized())return e.getImmediate();const n=ZR(t,{popupRedirectResolver:E5,persistence:[VD,TD,CT]}),s=KS("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=P5(i.toString());xD(n,o,()=>o(n.currentUser)),yD(n,l=>o(l))}}const r=WS("auth");return r&&tD(n,`http://${r}`),n}function R5(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}WR({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=ts("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",R5().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});j5("Browser");var Bv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Sr,VT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,w){function j(){}j.prototype=w.prototype,T.D=w.prototype,T.prototype=new j,T.prototype.constructor=T,T.C=function(k,R,M){for(var E=Array(arguments.length-2),V=2;V<arguments.length;V++)E[V-2]=arguments[V];return w.prototype[R].apply(k,E)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(T,w,j){j||(j=0);var k=Array(16);if(typeof w=="string")for(var R=0;16>R;++R)k[R]=w.charCodeAt(j++)|w.charCodeAt(j++)<<8|w.charCodeAt(j++)<<16|w.charCodeAt(j++)<<24;else for(R=0;16>R;++R)k[R]=w[j++]|w[j++]<<8|w[j++]<<16|w[j++]<<24;w=T.g[0],j=T.g[1],R=T.g[2];var M=T.g[3],E=w+(M^j&(R^M))+k[0]+3614090360&4294967295;w=j+(E<<7&4294967295|E>>>25),E=M+(R^w&(j^R))+k[1]+3905402710&4294967295,M=w+(E<<12&4294967295|E>>>20),E=R+(j^M&(w^j))+k[2]+606105819&4294967295,R=M+(E<<17&4294967295|E>>>15),E=j+(w^R&(M^w))+k[3]+3250441966&4294967295,j=R+(E<<22&4294967295|E>>>10),E=w+(M^j&(R^M))+k[4]+4118548399&4294967295,w=j+(E<<7&4294967295|E>>>25),E=M+(R^w&(j^R))+k[5]+1200080426&4294967295,M=w+(E<<12&4294967295|E>>>20),E=R+(j^M&(w^j))+k[6]+2821735955&4294967295,R=M+(E<<17&4294967295|E>>>15),E=j+(w^R&(M^w))+k[7]+4249261313&4294967295,j=R+(E<<22&4294967295|E>>>10),E=w+(M^j&(R^M))+k[8]+1770035416&4294967295,w=j+(E<<7&4294967295|E>>>25),E=M+(R^w&(j^R))+k[9]+2336552879&4294967295,M=w+(E<<12&4294967295|E>>>20),E=R+(j^M&(w^j))+k[10]+4294925233&4294967295,R=M+(E<<17&4294967295|E>>>15),E=j+(w^R&(M^w))+k[11]+2304563134&4294967295,j=R+(E<<22&4294967295|E>>>10),E=w+(M^j&(R^M))+k[12]+1804603682&4294967295,w=j+(E<<7&4294967295|E>>>25),E=M+(R^w&(j^R))+k[13]+4254626195&4294967295,M=w+(E<<12&4294967295|E>>>20),E=R+(j^M&(w^j))+k[14]+2792965006&4294967295,R=M+(E<<17&4294967295|E>>>15),E=j+(w^R&(M^w))+k[15]+1236535329&4294967295,j=R+(E<<22&4294967295|E>>>10),E=w+(R^M&(j^R))+k[1]+4129170786&4294967295,w=j+(E<<5&4294967295|E>>>27),E=M+(j^R&(w^j))+k[6]+3225465664&4294967295,M=w+(E<<9&4294967295|E>>>23),E=R+(w^j&(M^w))+k[11]+643717713&4294967295,R=M+(E<<14&4294967295|E>>>18),E=j+(M^w&(R^M))+k[0]+3921069994&4294967295,j=R+(E<<20&4294967295|E>>>12),E=w+(R^M&(j^R))+k[5]+3593408605&4294967295,w=j+(E<<5&4294967295|E>>>27),E=M+(j^R&(w^j))+k[10]+38016083&4294967295,M=w+(E<<9&4294967295|E>>>23),E=R+(w^j&(M^w))+k[15]+3634488961&4294967295,R=M+(E<<14&4294967295|E>>>18),E=j+(M^w&(R^M))+k[4]+3889429448&4294967295,j=R+(E<<20&4294967295|E>>>12),E=w+(R^M&(j^R))+k[9]+568446438&4294967295,w=j+(E<<5&4294967295|E>>>27),E=M+(j^R&(w^j))+k[14]+3275163606&4294967295,M=w+(E<<9&4294967295|E>>>23),E=R+(w^j&(M^w))+k[3]+4107603335&4294967295,R=M+(E<<14&4294967295|E>>>18),E=j+(M^w&(R^M))+k[8]+1163531501&4294967295,j=R+(E<<20&4294967295|E>>>12),E=w+(R^M&(j^R))+k[13]+2850285829&4294967295,w=j+(E<<5&4294967295|E>>>27),E=M+(j^R&(w^j))+k[2]+4243563512&4294967295,M=w+(E<<9&4294967295|E>>>23),E=R+(w^j&(M^w))+k[7]+1735328473&4294967295,R=M+(E<<14&4294967295|E>>>18),E=j+(M^w&(R^M))+k[12]+2368359562&4294967295,j=R+(E<<20&4294967295|E>>>12),E=w+(j^R^M)+k[5]+4294588738&4294967295,w=j+(E<<4&4294967295|E>>>28),E=M+(w^j^R)+k[8]+2272392833&4294967295,M=w+(E<<11&4294967295|E>>>21),E=R+(M^w^j)+k[11]+1839030562&4294967295,R=M+(E<<16&4294967295|E>>>16),E=j+(R^M^w)+k[14]+4259657740&4294967295,j=R+(E<<23&4294967295|E>>>9),E=w+(j^R^M)+k[1]+2763975236&4294967295,w=j+(E<<4&4294967295|E>>>28),E=M+(w^j^R)+k[4]+1272893353&4294967295,M=w+(E<<11&4294967295|E>>>21),E=R+(M^w^j)+k[7]+4139469664&4294967295,R=M+(E<<16&4294967295|E>>>16),E=j+(R^M^w)+k[10]+3200236656&4294967295,j=R+(E<<23&4294967295|E>>>9),E=w+(j^R^M)+k[13]+681279174&4294967295,w=j+(E<<4&4294967295|E>>>28),E=M+(w^j^R)+k[0]+3936430074&4294967295,M=w+(E<<11&4294967295|E>>>21),E=R+(M^w^j)+k[3]+3572445317&4294967295,R=M+(E<<16&4294967295|E>>>16),E=j+(R^M^w)+k[6]+76029189&4294967295,j=R+(E<<23&4294967295|E>>>9),E=w+(j^R^M)+k[9]+3654602809&4294967295,w=j+(E<<4&4294967295|E>>>28),E=M+(w^j^R)+k[12]+3873151461&4294967295,M=w+(E<<11&4294967295|E>>>21),E=R+(M^w^j)+k[15]+530742520&4294967295,R=M+(E<<16&4294967295|E>>>16),E=j+(R^M^w)+k[2]+3299628645&4294967295,j=R+(E<<23&4294967295|E>>>9),E=w+(R^(j|~M))+k[0]+4096336452&4294967295,w=j+(E<<6&4294967295|E>>>26),E=M+(j^(w|~R))+k[7]+1126891415&4294967295,M=w+(E<<10&4294967295|E>>>22),E=R+(w^(M|~j))+k[14]+2878612391&4294967295,R=M+(E<<15&4294967295|E>>>17),E=j+(M^(R|~w))+k[5]+4237533241&4294967295,j=R+(E<<21&4294967295|E>>>11),E=w+(R^(j|~M))+k[12]+1700485571&4294967295,w=j+(E<<6&4294967295|E>>>26),E=M+(j^(w|~R))+k[3]+2399980690&4294967295,M=w+(E<<10&4294967295|E>>>22),E=R+(w^(M|~j))+k[10]+4293915773&4294967295,R=M+(E<<15&4294967295|E>>>17),E=j+(M^(R|~w))+k[1]+2240044497&4294967295,j=R+(E<<21&4294967295|E>>>11),E=w+(R^(j|~M))+k[8]+1873313359&4294967295,w=j+(E<<6&4294967295|E>>>26),E=M+(j^(w|~R))+k[15]+4264355552&4294967295,M=w+(E<<10&4294967295|E>>>22),E=R+(w^(M|~j))+k[6]+2734768916&4294967295,R=M+(E<<15&4294967295|E>>>17),E=j+(M^(R|~w))+k[13]+1309151649&4294967295,j=R+(E<<21&4294967295|E>>>11),E=w+(R^(j|~M))+k[4]+4149444226&4294967295,w=j+(E<<6&4294967295|E>>>26),E=M+(j^(w|~R))+k[11]+3174756917&4294967295,M=w+(E<<10&4294967295|E>>>22),E=R+(w^(M|~j))+k[2]+718787259&4294967295,R=M+(E<<15&4294967295|E>>>17),E=j+(M^(R|~w))+k[9]+3951481745&4294967295,T.g[0]=T.g[0]+w&4294967295,T.g[1]=T.g[1]+(R+(E<<21&4294967295|E>>>11))&4294967295,T.g[2]=T.g[2]+R&4294967295,T.g[3]=T.g[3]+M&4294967295}s.prototype.u=function(T,w){w===void 0&&(w=T.length);for(var j=w-this.blockSize,k=this.B,R=this.h,M=0;M<w;){if(R==0)for(;M<=j;)r(this,T,M),M+=this.blockSize;if(typeof T=="string"){for(;M<w;)if(k[R++]=T.charCodeAt(M++),R==this.blockSize){r(this,k),R=0;break}}else for(;M<w;)if(k[R++]=T[M++],R==this.blockSize){r(this,k),R=0;break}}this.h=R,this.o+=w},s.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var w=1;w<T.length-8;++w)T[w]=0;var j=8*this.o;for(w=T.length-8;w<T.length;++w)T[w]=j&255,j/=256;for(this.u(T),T=Array(16),w=j=0;4>w;++w)for(var k=0;32>k;k+=8)T[j++]=this.g[w]>>>k&255;return T};function i(T,w){var j=l;return Object.prototype.hasOwnProperty.call(j,T)?j[T]:j[T]=w(T)}function o(T,w){this.h=w;for(var j=[],k=!0,R=T.length-1;0<=R;R--){var M=T[R]|0;k&&M==w||(j[R]=M,k=!1)}this.g=j}var l={};function c(T){return-128<=T&&128>T?i(T,function(w){return new o([w|0],0>w?-1:0)}):new o([T|0],0>T?-1:0)}function d(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return I(d(-T));for(var w=[],j=1,k=0;T>=j;k++)w[k]=T/j|0,j*=4294967296;return new o(w,0)}function h(T,w){if(T.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(T.charAt(0)=="-")return I(h(T.substring(1),w));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var j=d(Math.pow(w,8)),k=f,R=0;R<T.length;R+=8){var M=Math.min(8,T.length-R),E=parseInt(T.substring(R,R+M),w);8>M?(M=d(Math.pow(w,M)),k=k.j(M).add(d(E))):(k=k.j(j),k=k.add(d(E)))}return k}var f=c(0),m=c(1),y=c(16777216);t=o.prototype,t.m=function(){if(C(this))return-I(this).m();for(var T=0,w=1,j=0;j<this.g.length;j++){var k=this.i(j);T+=(0<=k?k:4294967296+k)*w,w*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(b(this))return"0";if(C(this))return"-"+I(this).toString(T);for(var w=d(Math.pow(T,6)),j=this,k="";;){var R=P(j,w).g;j=x(j,R.j(w));var M=((0<j.g.length?j.g[0]:j.h)>>>0).toString(T);if(j=R,b(j))return M+k;for(;6>M.length;)M="0"+M;k=M+k}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function b(T){if(T.h!=0)return!1;for(var w=0;w<T.g.length;w++)if(T.g[w]!=0)return!1;return!0}function C(T){return T.h==-1}t.l=function(T){return T=x(this,T),C(T)?-1:b(T)?0:1};function I(T){for(var w=T.g.length,j=[],k=0;k<w;k++)j[k]=~T.g[k];return new o(j,~T.h).add(m)}t.abs=function(){return C(this)?I(this):this},t.add=function(T){for(var w=Math.max(this.g.length,T.g.length),j=[],k=0,R=0;R<=w;R++){var M=k+(this.i(R)&65535)+(T.i(R)&65535),E=(M>>>16)+(this.i(R)>>>16)+(T.i(R)>>>16);k=E>>>16,M&=65535,E&=65535,j[R]=E<<16|M}return new o(j,j[j.length-1]&-2147483648?-1:0)};function x(T,w){return T.add(I(w))}t.j=function(T){if(b(this)||b(T))return f;if(C(this))return C(T)?I(this).j(I(T)):I(I(this).j(T));if(C(T))return I(this.j(I(T)));if(0>this.l(y)&&0>T.l(y))return d(this.m()*T.m());for(var w=this.g.length+T.g.length,j=[],k=0;k<2*w;k++)j[k]=0;for(k=0;k<this.g.length;k++)for(var R=0;R<T.g.length;R++){var M=this.i(k)>>>16,E=this.i(k)&65535,V=T.i(R)>>>16,$=T.i(R)&65535;j[2*k+2*R]+=E*$,v(j,2*k+2*R),j[2*k+2*R+1]+=M*$,v(j,2*k+2*R+1),j[2*k+2*R+1]+=E*V,v(j,2*k+2*R+1),j[2*k+2*R+2]+=M*V,v(j,2*k+2*R+2)}for(k=0;k<w;k++)j[k]=j[2*k+1]<<16|j[2*k];for(k=w;k<2*w;k++)j[k]=0;return new o(j,0)};function v(T,w){for(;(T[w]&65535)!=T[w];)T[w+1]+=T[w]>>>16,T[w]&=65535,w++}function _(T,w){this.g=T,this.h=w}function P(T,w){if(b(w))throw Error("division by zero");if(b(T))return new _(f,f);if(C(T))return w=P(I(T),w),new _(I(w.g),I(w.h));if(C(w))return w=P(T,I(w)),new _(I(w.g),w.h);if(30<T.g.length){if(C(T)||C(w))throw Error("slowDivide_ only works with positive integers.");for(var j=m,k=w;0>=k.l(T);)j=D(j),k=D(k);var R=A(j,1),M=A(k,1);for(k=A(k,2),j=A(j,2);!b(k);){var E=M.add(k);0>=E.l(T)&&(R=R.add(j),M=E),k=A(k,1),j=A(j,1)}return w=x(T,R.j(w)),new _(R,w)}for(R=f;0<=T.l(w);){for(j=Math.max(1,Math.floor(T.m()/w.m())),k=Math.ceil(Math.log(j)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),M=d(j),E=M.j(w);C(E)||0<E.l(T);)j-=k,M=d(j),E=M.j(w);b(M)&&(M=m),R=R.add(M),T=x(T,E)}return new _(R,T)}t.A=function(T){return P(this,T).h},t.and=function(T){for(var w=Math.max(this.g.length,T.g.length),j=[],k=0;k<w;k++)j[k]=this.i(k)&T.i(k);return new o(j,this.h&T.h)},t.or=function(T){for(var w=Math.max(this.g.length,T.g.length),j=[],k=0;k<w;k++)j[k]=this.i(k)|T.i(k);return new o(j,this.h|T.h)},t.xor=function(T){for(var w=Math.max(this.g.length,T.g.length),j=[],k=0;k<w;k++)j[k]=this.i(k)^T.i(k);return new o(j,this.h^T.h)};function D(T){for(var w=T.g.length+1,j=[],k=0;k<w;k++)j[k]=T.i(k)<<1|T.i(k-1)>>>31;return new o(j,T.h)}function A(T,w){var j=w>>5;w%=32;for(var k=T.g.length-j,R=[],M=0;M<k;M++)R[M]=0<w?T.i(M+j)>>>w|T.i(M+j+1)<<32-w:T.i(M+j);return new o(R,T.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,VT=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Sr=o}).apply(typeof Bv<"u"?Bv:typeof self<"u"?self:typeof window<"u"?window:{});var Zc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var LT,Ma,OT,ju,Km,FT,UT,$T;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,g){return u==Array.prototype||u==Object.prototype||(u[p]=g.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zc=="object"&&Zc];for(var p=0;p<u.length;++p){var g=u[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var s=n(this);function r(u,p){if(p)e:{var g=s;u=u.split(".");for(var N=0;N<u.length-1;N++){var L=u[N];if(!(L in g))break e;g=g[L]}u=u[u.length-1],N=g[u],p=p(N),p!=N&&p!=null&&e(g,u,{configurable:!0,writable:!0,value:p})}}function i(u,p){u instanceof String&&(u+="");var g=0,N=!1,L={next:function(){if(!N&&g<u.length){var O=g++;return{value:p(O,u[O]),done:!1}}return N=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}r("Array.prototype.values",function(u){return u||function(){return i(this,function(p,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function d(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function h(u,p,g){return u.call.apply(u.bind,arguments)}function f(u,p,g){if(!u)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,N),u.apply(p,L)}}return function(){return u.apply(p,arguments)}}function m(u,p,g){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function y(u,p){var g=Array.prototype.slice.call(arguments,1);return function(){var N=g.slice();return N.push.apply(N,arguments),u.apply(this,N)}}function b(u,p){function g(){}g.prototype=p.prototype,u.aa=p.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(N,L,O){for(var J=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)J[Ce-2]=arguments[Ce];return p.prototype[L].apply(N,J)}}function C(u){const p=u.length;if(0<p){const g=Array(p);for(let N=0;N<p;N++)g[N]=u[N];return g}return[]}function I(u,p){for(let g=1;g<arguments.length;g++){const N=arguments[g];if(c(N)){const L=u.length||0,O=N.length||0;u.length=L+O;for(let J=0;J<O;J++)u[L+J]=N[J]}else u.push(N)}}class x{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function v(u){return/^[\s\xa0]*$/.test(u)}function _(){var u=l.navigator;return u&&(u=u.userAgent)?u:""}function P(u){return P[" "](u),u}P[" "]=function(){};var D=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function A(u,p,g){for(const N in u)p.call(g,u[N],N,u)}function T(u,p){for(const g in u)p.call(void 0,u[g],g,u)}function w(u){const p={};for(const g in u)p[g]=u[g];return p}const j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,p){let g,N;for(let L=1;L<arguments.length;L++){N=arguments[L];for(g in N)u[g]=N[g];for(let O=0;O<j.length;O++)g=j[O],Object.prototype.hasOwnProperty.call(N,g)&&(u[g]=N[g])}}function R(u){var p=1;u=u.split(":");const g=[];for(;0<p&&u.length;)g.push(u.shift()),p--;return u.length&&g.push(u.join(":")),g}function M(u){l.setTimeout(()=>{throw u},0)}function E(){var u=W;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class V{constructor(){this.h=this.g=null}add(p,g){const N=$.get();N.set(p,g),this.h?this.h.next=N:this.g=N,this.h=N}}var $=new x(()=>new Q,u=>u.reset());class Q{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let z,F=!1,W=new V,Y=()=>{const u=l.Promise.resolve(void 0);z=()=>{u.then(te)}};var te=()=>{for(var u;u=E();){try{u.h.call(u.g)}catch(g){M(g)}var p=$;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}F=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ye(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}ye.prototype.h=function(){this.defaultPrevented=!0};var Ft=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};l.addEventListener("test",g,p),l.removeEventListener("test",g,p)}catch{}return u}();function B(u,p){if(ye.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,N=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(D){e:{try{P(p.nodeName);var L=!0;break e}catch{}L=!1}L||(p=null)}}else g=="mouseover"?p=u.fromElement:g=="mouseout"&&(p=u.toElement);this.relatedTarget=p,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:q[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&B.aa.h.call(this)}}b(B,ye);var q={2:"touch",3:"pen",4:"mouse"};B.prototype.h=function(){B.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Z="closure_listenable_"+(1e6*Math.random()|0),he=0;function lt(u,p,g,N,L){this.listener=u,this.proxy=null,this.src=p,this.type=g,this.capture=!!N,this.ha=L,this.key=++he,this.da=this.fa=!1}function Me(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function sn(u){this.src=u,this.g={},this.h=0}sn.prototype.add=function(u,p,g,N,L){var O=u.toString();u=this.g[O],u||(u=this.g[O]=[],this.h++);var J=Gr(u,p,N,L);return-1<J?(p=u[J],g||(p.fa=!1)):(p=new lt(p,this.src,O,!!N,L),p.fa=g,u.push(p)),p};function Ut(u,p){var g=p.type;if(g in u.g){var N=u.g[g],L=Array.prototype.indexOf.call(N,p,void 0),O;(O=0<=L)&&Array.prototype.splice.call(N,L,1),O&&(Me(p),u.g[g].length==0&&(delete u.g[g],u.h--))}}function Gr(u,p,g,N){for(var L=0;L<u.length;++L){var O=u[L];if(!O.da&&O.listener==p&&O.capture==!!g&&O.ha==N)return L}return-1}var ps="closure_lm_"+(1e6*Math.random()|0),Ee={};function Cn(u,p,g,N,L){if(N&&N.once)return Pi(u,p,g,N,L);if(Array.isArray(p)){for(var O=0;O<p.length;O++)Cn(u,p[O],g,N,L);return null}return g=Zo(g),u&&u[Z]?u.K(p,g,d(N)?!!N.capture:!!N,L):pc(u,p,g,!1,N,L)}function pc(u,p,g,N,L,O){if(!p)throw Error("Invalid event type");var J=d(L)?!!L.capture:!!L,Ce=Kr(u);if(Ce||(u[ps]=Ce=new sn(u)),g=Ce.add(p,g,N,J,O),g.proxy)return g;if(N=Nh(),g.proxy=N,N.src=u,N.listener=g,u.addEventListener)Ft||(L=J),L===void 0&&(L=!1),u.addEventListener(p.toString(),N,L);else if(u.attachEvent)u.attachEvent(In(p.toString()),N);else if(u.addListener&&u.removeListener)u.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Nh(){function u(g){return p.call(u.src,u.listener,g)}const p=gc;return u}function Pi(u,p,g,N,L){if(Array.isArray(p)){for(var O=0;O<p.length;O++)Pi(u,p[O],g,N,L);return null}return g=Zo(g),u&&u[Z]?u.L(p,g,d(N)?!!N.capture:!!N,L):pc(u,p,g,!0,N,L)}function kh(u,p,g,N,L){if(Array.isArray(p))for(var O=0;O<p.length;O++)kh(u,p[O],g,N,L);else N=d(N)?!!N.capture:!!N,g=Zo(g),u&&u[Z]?(u=u.i,p=String(p).toString(),p in u.g&&(O=u.g[p],g=Gr(O,g,N,L),-1<g&&(Me(O[g]),Array.prototype.splice.call(O,g,1),O.length==0&&(delete u.g[p],u.h--)))):u&&(u=Kr(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Gr(p,g,N,L)),(g=-1<u?p[u]:null)&&Kn(g))}function Kn(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Z])Ut(p.i,u);else{var g=u.type,N=u.proxy;p.removeEventListener?p.removeEventListener(g,N,u.capture):p.detachEvent?p.detachEvent(In(g),N):p.addListener&&p.removeListener&&p.removeListener(N),(g=Kr(p))?(Ut(g,u),g.h==0&&(g.src=null,p[ps]=null)):Me(u)}}}function In(u){return u in Ee?Ee[u]:Ee[u]="on"+u}function gc(u,p){if(u.da)u=!0;else{p=new B(p,this);var g=u.listener,N=u.ha||u.src;u.fa&&Kn(u),u=g.call(N,p)}return u}function Kr(u){return u=u[ps],u instanceof sn?u:null}var gs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zo(u){return typeof u=="function"?u:(u[gs]||(u[gs]=function(p){return u.handleEvent(p)}),u[gs])}function pt(){ce.call(this),this.i=new sn(this),this.M=this,this.F=null}b(pt,ce),pt.prototype[Z]=!0,pt.prototype.removeEventListener=function(u,p,g,N){kh(this,u,p,g,N)};function xe(u,p){var g,N=u.F;if(N)for(g=[];N;N=N.F)g.push(N);if(u=u.M,N=p.type||p,typeof p=="string")p=new ye(p,u);else if(p instanceof ye)p.target=p.target||u;else{var L=p;p=new ye(N,u),k(p,L)}if(L=!0,g)for(var O=g.length-1;0<=O;O--){var J=p.g=g[O];L=ea(J,N,!0,p)&&L}if(J=p.g=u,L=ea(J,N,!0,p)&&L,L=ea(J,N,!1,p)&&L,g)for(O=0;O<g.length;O++)J=p.g=g[O],L=ea(J,N,!1,p)&&L}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var g=u.g[p],N=0;N<g.length;N++)Me(g[N]);delete u.g[p],u.h--}}this.F=null},pt.prototype.K=function(u,p,g,N){return this.i.add(String(u),p,!1,g,N)},pt.prototype.L=function(u,p,g,N){return this.i.add(String(u),p,!0,g,N)};function ea(u,p,g,N){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var L=!0,O=0;O<p.length;++O){var J=p[O];if(J&&!J.da&&J.capture==g){var Ce=J.listener,gt=J.ha||J.src;J.fa&&Ut(u.i,J),L=Ce.call(gt,N)!==!1&&L}}return L&&!N.defaultPrevented}function ta(u,p,g){if(typeof u=="function")g&&(u=m(u,g));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:l.setTimeout(u,p||0)}function na(u){u.g=ta(()=>{u.g=null,u.i&&(u.i=!1,na(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class yc extends ce{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:na(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hs(u){ce.call(this),this.h=u,this.g={}}b(Hs,ce);var sa=[];function xc(u){A(u.g,function(p,g){this.g.hasOwnProperty(g)&&Kn(p)},u),u.g={}}Hs.prototype.N=function(){Hs.aa.N.call(this),xc(this)},Hs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ra=l.JSON.stringify,jh=l.JSON.parse,Ai=class{stringify(u){return l.JSON.stringify(u,void 0)}parse(u){return l.JSON.parse(u,void 0)}};function Ws(){}Ws.prototype.h=null;function Pn(u){return u.h||(u.h=u.i())}function ia(){}var qr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function oa(){ye.call(this,"d")}b(oa,ye);function aa(){ye.call(this,"c")}b(aa,ye);var qn={},vc=null;function U(){return vc=vc||new pt}qn.La="serverreachability";function be(u){ye.call(this,qn.La,u)}b(be,ye);function we(u){const p=U();xe(p,new be(p))}qn.STAT_EVENT="statevent";function je(u,p){ye.call(this,qn.STAT_EVENT,u),this.stat=p}b(je,ye);function Te(u){const p=U();xe(p,new je(p,u))}qn.Ma="timingevent";function kt(u,p){ye.call(this,qn.Ma,u),this.size=p}b(kt,ye);function ct(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){u()},p)}function Gs(){this.g=!0}Gs.prototype.xa=function(){this.g=!1};function J2(u,p,g,N,L,O){u.info(function(){if(u.g)if(O)for(var J="",Ce=O.split("&"),gt=0;gt<Ce.length;gt++){var Se=Ce[gt].split("=");if(1<Se.length){var jt=Se[0];Se=Se[1];var Ct=jt.split("_");J=2<=Ct.length&&Ct[1]=="type"?J+(jt+"="+Se+"&"):J+(jt+"=redacted&")}}else J=null;else J=O;return"XMLHTTP REQ ("+N+") [attempt "+L+"]: "+p+`
`+g+`
`+J})}function Z2(u,p,g,N,L,O,J){u.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+L+"]: "+p+`
`+g+`
`+O+" "+J})}function Ri(u,p,g,N){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+tk(u,g)+(N?" "+N:"")})}function ek(u,p){u.info(function(){return"TIMEOUT: "+p})}Gs.prototype.info=function(){};function tk(u,p){if(!u.g)return p;if(!p)return null;try{var g=JSON.parse(p);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var N=g[u];if(!(2>N.length)){var L=N[1];if(Array.isArray(L)&&!(1>L.length)){var O=L[0];if(O!="noop"&&O!="stop"&&O!="close")for(var J=1;J<L.length;J++)L[J]=""}}}}return ra(g)}catch{return p}}var wc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ch;function _c(){}b(_c,Ws),_c.prototype.g=function(){return new XMLHttpRequest},_c.prototype.i=function(){return{}},Ch=new _c;function Ks(u,p,g,N){this.j=u,this.i=p,this.l=g,this.R=N||1,this.U=new Hs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fy}function fy(){this.i=null,this.g="",this.h=!1}var my={},Ih={};function Ph(u,p,g){u.L=1,u.v=Ec(ys(p)),u.m=g,u.P=!0,py(u,null)}function py(u,p){u.F=Date.now(),bc(u),u.A=ys(u.v);var g=u.A,N=u.R;Array.isArray(N)||(N=[String(N)]),Cy(g.i,"t",N),u.C=0,g=u.j.J,u.h=new fy,u.g=Ky(u.j,g?p:null,!u.m),0<u.O&&(u.M=new yc(m(u.Y,u,u.g),u.O)),p=u.U,g=u.g,N=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(sa[0]=L.toString()),L=sa);for(var O=0;O<L.length;O++){var J=Cn(g,L[O],N||p.handleEvent,!1,p.h||p);if(!J)break;p.g[J.key]=J}p=u.H?w(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),we(),J2(u.i,u.u,u.A,u.l,u.R,u.m)}Ks.prototype.ca=function(u){u=u.target;const p=this.M;p&&xs(u)==3?p.j():this.Y(u)},Ks.prototype.Y=function(u){try{if(u==this.g)e:{const Ct=xs(this.g);var p=this.g.Ba();const Vi=this.g.Z();if(!(3>Ct)&&(Ct!=3||this.g&&(this.h.h||this.g.oa()||Vy(this.g)))){this.J||Ct!=4||p==7||(p==8||0>=Vi?we(3):we(2)),Ah(this);var g=this.g.Z();this.X=g;t:if(gy(this)){var N=Vy(this.g);u="";var L=N.length,O=xs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xr(this),la(this);var J="";break t}this.h.i=new l.TextDecoder}for(p=0;p<L;p++)this.h.h=!0,u+=this.h.i.decode(N[p],{stream:!(O&&p==L-1)});N.length=0,this.h.g+=u,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=g==200,Z2(this.i,this.u,this.A,this.l,this.R,Ct,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Ce,gt=this.g;if((Ce=gt.g?gt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Ce)){var Se=Ce;break t}}Se=null}if(g=Se)Ri(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Rh(this,g);else{this.o=!1,this.s=3,Te(12),Xr(this),la(this);break e}}if(this.P){g=!0;let An;for(;!this.J&&this.C<J.length;)if(An=nk(this,J),An==Ih){Ct==4&&(this.s=4,Te(14),g=!1),Ri(this.i,this.l,null,"[Incomplete Response]");break}else if(An==my){this.s=4,Te(15),Ri(this.i,this.l,J,"[Invalid Chunk]"),g=!1;break}else Ri(this.i,this.l,An,null),Rh(this,An);if(gy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ct!=4||J.length!=0||this.h.h||(this.s=1,Te(16),g=!1),this.o=this.o&&g,!g)Ri(this.i,this.l,J,"[Invalid Chunked Response]"),Xr(this),la(this);else if(0<J.length&&!this.W){this.W=!0;var jt=this.j;jt.g==this&&jt.ba&&!jt.M&&(jt.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),Fh(jt),jt.M=!0,Te(11))}}else Ri(this.i,this.l,J,null),Rh(this,J);Ct==4&&Xr(this),this.o&&!this.J&&(Ct==4?zy(this.j,this):(this.o=!1,bc(this)))}else vk(this.g),g==400&&0<J.indexOf("Unknown SID")?(this.s=3,Te(12)):(this.s=0,Te(13)),Xr(this),la(this)}}}catch{}finally{}};function gy(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function nk(u,p){var g=u.C,N=p.indexOf(`
`,g);return N==-1?Ih:(g=Number(p.substring(g,N)),isNaN(g)?my:(N+=1,N+g>p.length?Ih:(p=p.slice(N,N+g),u.C=N+g,p)))}Ks.prototype.cancel=function(){this.J=!0,Xr(this)};function bc(u){u.S=Date.now()+u.I,yy(u,u.I)}function yy(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ct(m(u.ba,u),p)}function Ah(u){u.B&&(l.clearTimeout(u.B),u.B=null)}Ks.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ek(this.i,this.A),this.L!=2&&(we(),Te(17)),Xr(this),this.s=2,la(this)):yy(this,this.S-u)};function la(u){u.j.G==0||u.J||zy(u.j,u)}function Xr(u){Ah(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,xc(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function Rh(u,p){try{var g=u.j;if(g.G!=0&&(g.g==u||Dh(g.h,u))){if(!u.K&&Dh(g.h,u)&&g.G==3){try{var N=g.Da.g.parse(p)}catch{N=null}if(Array.isArray(N)&&N.length==3){var L=N;if(L[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)Pc(g),Cc(g);else break e;Oh(g),Te(18)}}else g.za=L[1],0<g.za-g.T&&37500>L[2]&&g.F&&g.v==0&&!g.C&&(g.C=ct(m(g.Za,g),6e3));if(1>=wy(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else Yr(g,11)}else if((u.K||g.g==u)&&Pc(g),!v(p))for(L=g.Da.g.parse(p),p=0;p<L.length;p++){let Se=L[p];if(g.T=Se[0],Se=Se[1],g.G==2)if(Se[0]=="c"){g.K=Se[1],g.ia=Se[2];const jt=Se[3];jt!=null&&(g.la=jt,g.j.info("VER="+g.la));const Ct=Se[4];Ct!=null&&(g.Aa=Ct,g.j.info("SVER="+g.Aa));const Vi=Se[5];Vi!=null&&typeof Vi=="number"&&0<Vi&&(N=1.5*Vi,g.L=N,g.j.info("backChannelRequestTimeoutMs_="+N)),N=g;const An=u.g;if(An){const Rc=An.g?An.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Rc){var O=N.h;O.g||Rc.indexOf("spdy")==-1&&Rc.indexOf("quic")==-1&&Rc.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Mh(O,O.h),O.h=null))}if(N.D){const Uh=An.g?An.g.getResponseHeader("X-HTTP-Session-Id"):null;Uh&&(N.ya=Uh,Pe(N.I,N.D,Uh))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),N=g;var J=u;if(N.qa=Gy(N,N.J?N.ia:null,N.W),J.K){_y(N.h,J);var Ce=J,gt=N.L;gt&&(Ce.I=gt),Ce.B&&(Ah(Ce),bc(Ce)),N.g=J}else $y(N);0<g.i.length&&Ic(g)}else Se[0]!="stop"&&Se[0]!="close"||Yr(g,7);else g.G==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?Yr(g,7):Lh(g):Se[0]!="noop"&&g.l&&g.l.ta(Se),g.v=0)}}we(4)}catch{}}var sk=class{constructor(u,p){this.g=u,this.map=p}};function xy(u){this.l=u||10,l.PerformanceNavigationTiming?(u=l.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function vy(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function wy(u){return u.h?1:u.g?u.g.size:0}function Dh(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Mh(u,p){u.g?u.g.add(p):u.h=p}function _y(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}xy.prototype.cancel=function(){if(this.i=by(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function by(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const g of u.g.values())p=p.concat(g.D);return p}return C(u.i)}function rk(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var p=[],g=u.length,N=0;N<g;N++)p.push(u[N]);return p}p=[],g=0;for(N in u)p[g++]=u[N];return p}function ik(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var p=[];u=u.length;for(var g=0;g<u;g++)p.push(g);return p}p=[],g=0;for(const N in u)p[g++]=N;return p}}}function Sy(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var g=ik(u),N=rk(u),L=N.length,O=0;O<L;O++)p.call(void 0,N[O],g&&g[O],u)}var Ty=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ok(u,p){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var N=u[g].indexOf("="),L=null;if(0<=N){var O=u[g].substring(0,N);L=u[g].substring(N+1)}else O=u[g];p(O,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Qr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Qr){this.h=u.h,Sc(this,u.j),this.o=u.o,this.g=u.g,Tc(this,u.s),this.l=u.l;var p=u.i,g=new da;g.i=p.i,p.g&&(g.g=new Map(p.g),g.h=p.h),Ey(this,g),this.m=u.m}else u&&(p=String(u).match(Ty))?(this.h=!1,Sc(this,p[1]||"",!0),this.o=ca(p[2]||""),this.g=ca(p[3]||"",!0),Tc(this,p[4]),this.l=ca(p[5]||"",!0),Ey(this,p[6]||"",!0),this.m=ca(p[7]||"")):(this.h=!1,this.i=new da(null,this.h))}Qr.prototype.toString=function(){var u=[],p=this.j;p&&u.push(ua(p,Ny,!0),":");var g=this.g;return(g||p=="file")&&(u.push("//"),(p=this.o)&&u.push(ua(p,Ny,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(ua(g,g.charAt(0)=="/"?ck:lk,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",ua(g,dk)),u.join("")};function ys(u){return new Qr(u)}function Sc(u,p,g){u.j=g?ca(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Tc(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function Ey(u,p,g){p instanceof da?(u.i=p,hk(u.i,u.h)):(g||(p=ua(p,uk)),u.i=new da(p,u.h))}function Pe(u,p,g){u.i.set(p,g)}function Ec(u){return Pe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ca(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ua(u,p,g){return typeof u=="string"?(u=encodeURI(u).replace(p,ak),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function ak(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ny=/[#\/\?@]/g,lk=/[#\?:]/g,ck=/[#\?]/g,uk=/[#\?@]/g,dk=/#/g;function da(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function qs(u){u.g||(u.g=new Map,u.h=0,u.i&&ok(u.i,function(p,g){u.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=da.prototype,t.add=function(u,p){qs(this),this.i=null,u=Di(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(p),this.h+=1,this};function ky(u,p){qs(u),p=Di(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function jy(u,p){return qs(u),p=Di(u,p),u.g.has(p)}t.forEach=function(u,p){qs(this),this.g.forEach(function(g,N){g.forEach(function(L){u.call(p,L,N,this)},this)},this)},t.na=function(){qs(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),g=[];for(let N=0;N<p.length;N++){const L=u[N];for(let O=0;O<L.length;O++)g.push(p[N])}return g},t.V=function(u){qs(this);let p=[];if(typeof u=="string")jy(this,u)&&(p=p.concat(this.g.get(Di(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)p=p.concat(u[g])}return p},t.set=function(u,p){return qs(this),this.i=null,u=Di(this,u),jy(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function Cy(u,p,g){ky(u,p),0<g.length&&(u.i=null,u.g.set(Di(u,p),C(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var g=0;g<p.length;g++){var N=p[g];const O=encodeURIComponent(String(N)),J=this.V(N);for(N=0;N<J.length;N++){var L=O;J[N]!==""&&(L+="="+encodeURIComponent(String(J[N]))),u.push(L)}}return this.i=u.join("&")};function Di(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function hk(u,p){p&&!u.j&&(qs(u),u.i=null,u.g.forEach(function(g,N){var L=N.toLowerCase();N!=L&&(ky(this,N),Cy(this,L,g))},u)),u.j=p}function fk(u,p){const g=new Gs;if(l.Image){const N=new Image;N.onload=y(Xs,g,"TestLoadImage: loaded",!0,p,N),N.onerror=y(Xs,g,"TestLoadImage: error",!1,p,N),N.onabort=y(Xs,g,"TestLoadImage: abort",!1,p,N),N.ontimeout=y(Xs,g,"TestLoadImage: timeout",!1,p,N),l.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=u}else p(!1)}function mk(u,p){const g=new Gs,N=new AbortController,L=setTimeout(()=>{N.abort(),Xs(g,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:N.signal}).then(O=>{clearTimeout(L),O.ok?Xs(g,"TestPingServer: ok",!0,p):Xs(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),Xs(g,"TestPingServer: error",!1,p)})}function Xs(u,p,g,N,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),N(g)}catch{}}function pk(){this.g=new Ai}function gk(u,p,g){const N=g||"";try{Sy(u,function(L,O){let J=L;d(L)&&(J=ra(L)),p.push(N+O+"="+encodeURIComponent(J))})}catch(L){throw p.push(N+"type="+encodeURIComponent("_badmap")),L}}function Nc(u){this.l=u.Ub||null,this.j=u.eb||!1}b(Nc,Ws),Nc.prototype.g=function(){return new kc(this.l,this.j)},Nc.prototype.i=function(u){return function(){return u}}({});function kc(u,p){pt.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(kc,pt),t=kc.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,fa(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||l).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ha(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,fa(this)),this.g&&(this.readyState=3,fa(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Iy(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Iy(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?ha(this):fa(this),this.readyState==3&&Iy(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,ha(this))},t.Qa=function(u){this.g&&(this.response=u,ha(this))},t.ga=function(){this.g&&ha(this)};function ha(u){u.readyState=4,u.l=null,u.j=null,u.v=null,fa(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=p.next();return u.join(`\r
`)};function fa(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(kc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Py(u){let p="";return A(u,function(g,N){p+=N,p+=":",p+=g,p+=`\r
`}),p}function Vh(u,p,g){e:{for(N in g){var N=!1;break e}N=!0}N||(g=Py(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):Pe(u,p,g))}function We(u){pt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(We,pt);var yk=/^https?$/i,xk=["POST","PUT"];t=We.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,g,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ch.g(),this.v=this.o?Pn(this.o):Pn(Ch),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(O){Ay(this,O);return}if(u=g||"",g=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var L in N)g.set(L,N[L]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const O of N.keys())g.set(O,N.get(O));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(g.keys()).find(O=>O.toLowerCase()=="content-type"),L=l.FormData&&u instanceof l.FormData,!(0<=Array.prototype.indexOf.call(xk,p,void 0))||N||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,J]of g)this.g.setRequestHeader(O,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{My(this),this.u=!0,this.g.send(u),this.u=!1}catch(O){Ay(this,O)}};function Ay(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,Ry(u),jc(u)}function Ry(u){u.A||(u.A=!0,xe(u,"complete"),xe(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,xe(this,"complete"),xe(this,"abort"),jc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jc(this,!0)),We.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Dy(this):this.bb())},t.bb=function(){Dy(this)};function Dy(u){if(u.h&&typeof o<"u"&&(!u.v[1]||xs(u)!=4||u.Z()!=2)){if(u.u&&xs(u)==4)ta(u.Ea,0,u);else if(xe(u,"readystatechange"),xs(u)==4){u.h=!1;try{const J=u.Z();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var N;if(N=J===0){var L=String(u.D).match(Ty)[1]||null;!L&&l.self&&l.self.location&&(L=l.self.location.protocol.slice(0,-1)),N=!yk.test(L?L.toLowerCase():"")}g=N}if(g)xe(u,"complete"),xe(u,"success");else{u.m=6;try{var O=2<xs(u)?u.g.statusText:""}catch{O=""}u.l=O+" ["+u.Z()+"]",Ry(u)}}finally{jc(u)}}}}function jc(u,p){if(u.g){My(u);const g=u.g,N=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||xe(u,"ready");try{g.onreadystatechange=N}catch{}}}function My(u){u.I&&(l.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function xs(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<xs(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),jh(p)}};function Vy(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function vk(u){const p={};u=(u.g&&2<=xs(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<u.length;N++){if(v(u[N]))continue;var g=R(u[N]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const O=p[L]||[];p[L]=O,O.push(g)}T(p,function(N){return N.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ma(u,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||p}function Ly(u){this.Aa=0,this.i=[],this.j=new Gs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ma("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ma("baseRetryDelayMs",5e3,u),this.cb=ma("retryDelaySeedMs",1e4,u),this.Wa=ma("forwardChannelMaxRetries",2,u),this.wa=ma("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new xy(u&&u.concurrentRequestLimit),this.Da=new pk,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ly.prototype,t.la=8,t.G=1,t.connect=function(u,p,g,N){Te(0),this.W=u,this.H=p||{},g&&N!==void 0&&(this.H.OSID=g,this.H.OAID=N),this.F=this.X,this.I=Gy(this,null,this.W),Ic(this)};function Lh(u){if(Oy(u),u.G==3){var p=u.U++,g=ys(u.I);if(Pe(g,"SID",u.K),Pe(g,"RID",p),Pe(g,"TYPE","terminate"),pa(u,g),p=new Ks(u,u.j,p),p.L=2,p.v=Ec(ys(g)),g=!1,l.navigator&&l.navigator.sendBeacon)try{g=l.navigator.sendBeacon(p.v.toString(),"")}catch{}!g&&l.Image&&(new Image().src=p.v,g=!0),g||(p.g=Ky(p.j,null),p.g.ea(p.v)),p.F=Date.now(),bc(p)}Wy(u)}function Cc(u){u.g&&(Fh(u),u.g.cancel(),u.g=null)}function Oy(u){Cc(u),u.u&&(l.clearTimeout(u.u),u.u=null),Pc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&l.clearTimeout(u.s),u.s=null)}function Ic(u){if(!vy(u.h)&&!u.s){u.s=!0;var p=u.Ga;z||Y(),F||(z(),F=!0),W.add(p,u),u.B=0}}function wk(u,p){return wy(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ct(m(u.Ga,u,p),Hy(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const L=new Ks(this,this.j,u);let O=this.o;if(this.S&&(O?(O=w(O),k(O,this.S)):O=this.S),this.m!==null||this.O||(L.H=O,O=null),this.P)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var N=this.i[g];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(p+=N,4096<p){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=Uy(this,L,p),g=ys(this.I),Pe(g,"RID",u),Pe(g,"CVER",22),this.D&&Pe(g,"X-HTTP-Session-Id",this.D),pa(this,g),O&&(this.O?p="headers="+encodeURIComponent(String(Py(O)))+"&"+p:this.m&&Vh(g,this.m,O)),Mh(this.h,L),this.Ua&&Pe(g,"TYPE","init"),this.P?(Pe(g,"$req",p),Pe(g,"SID","null"),L.T=!0,Ph(L,g,null)):Ph(L,g,p),this.G=2}}else this.G==3&&(u?Fy(this,u):this.i.length==0||vy(this.h)||Fy(this))};function Fy(u,p){var g;p?g=p.l:g=u.U++;const N=ys(u.I);Pe(N,"SID",u.K),Pe(N,"RID",g),Pe(N,"AID",u.T),pa(u,N),u.m&&u.o&&Vh(N,u.m,u.o),g=new Ks(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),p&&(u.i=p.D.concat(u.i)),p=Uy(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Mh(u.h,g),Ph(g,N,p)}function pa(u,p){u.H&&A(u.H,function(g,N){Pe(p,N,g)}),u.l&&Sy({},function(g,N){Pe(p,N,g)})}function Uy(u,p,g){g=Math.min(u.i.length,g);var N=u.l?m(u.l.Na,u.l,u):null;e:{var L=u.i;let O=-1;for(;;){const J=["count="+g];O==-1?0<g?(O=L[0].g,J.push("ofs="+O)):O=0:J.push("ofs="+O);let Ce=!0;for(let gt=0;gt<g;gt++){let Se=L[gt].g;const jt=L[gt].map;if(Se-=O,0>Se)O=Math.max(0,L[gt].g-100),Ce=!1;else try{gk(jt,J,"req"+Se+"_")}catch{N&&N(jt)}}if(Ce){N=J.join("&");break e}}}return u=u.i.splice(0,g),p.D=u,N}function $y(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;z||Y(),F||(z(),F=!0),W.add(p,u),u.v=0}}function Oh(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ct(m(u.Fa,u),Hy(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,By(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ct(m(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Te(10),Cc(this),By(this))};function Fh(u){u.A!=null&&(l.clearTimeout(u.A),u.A=null)}function By(u){u.g=new Ks(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=ys(u.qa);Pe(p,"RID","rpc"),Pe(p,"SID",u.K),Pe(p,"AID",u.T),Pe(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&Pe(p,"TO",u.ja),Pe(p,"TYPE","xmlhttp"),pa(u,p),u.m&&u.o&&Vh(p,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=Ec(ys(p)),g.m=null,g.P=!0,py(g,u)}t.Za=function(){this.C!=null&&(this.C=null,Cc(this),Oh(this),Te(19))};function Pc(u){u.C!=null&&(l.clearTimeout(u.C),u.C=null)}function zy(u,p){var g=null;if(u.g==p){Pc(u),Fh(u),u.g=null;var N=2}else if(Dh(u.h,p))g=p.D,_y(u.h,p),N=1;else return;if(u.G!=0){if(p.o)if(N==1){g=p.m?p.m.length:0,p=Date.now()-p.F;var L=u.B;N=U(),xe(N,new kt(N,g)),Ic(u)}else $y(u);else if(L=p.s,L==3||L==0&&0<p.X||!(N==1&&wk(u,p)||N==2&&Oh(u)))switch(g&&0<g.length&&(p=u.h,p.i=p.i.concat(g)),L){case 1:Yr(u,5);break;case 4:Yr(u,10);break;case 3:Yr(u,6);break;default:Yr(u,2)}}}function Hy(u,p){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*p}function Yr(u,p){if(u.j.info("Error code "+p),p==2){var g=m(u.fb,u),N=u.Xa;const L=!N;N=new Qr(N||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Sc(N,"https"),Ec(N),L?fk(N.toString(),g):mk(N.toString(),g)}else Te(2);u.G=0,u.l&&u.l.sa(p),Wy(u),Oy(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Te(2)):(this.j.info("Failed to ping google.com"),Te(1))};function Wy(u){if(u.G=0,u.ka=[],u.l){const p=by(u.h);(p.length!=0||u.i.length!=0)&&(I(u.ka,p),I(u.ka,u.i),u.h.i.length=0,C(u.i),u.i.length=0),u.l.ra()}}function Gy(u,p,g){var N=g instanceof Qr?ys(g):new Qr(g);if(N.g!="")p&&(N.g=p+"."+N.g),Tc(N,N.s);else{var L=l.location;N=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;var O=new Qr(null);N&&Sc(O,N),p&&(O.g=p),L&&Tc(O,L),g&&(O.l=g),N=O}return g=u.D,p=u.ya,g&&p&&Pe(N,g,p),Pe(N,"VER",u.la),pa(u,N),N}function Ky(u,p,g){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new We(new Nc({eb:g})):new We(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function qy(){}t=qy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ac(){}Ac.prototype.g=function(u,p){return new rn(u,p)};function rn(u,p){pt.call(this),this.g=new Ly(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!v(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!v(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Mi(this)}b(rn,pt),rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},rn.prototype.close=function(){Lh(this.g)},rn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=ra(u),u=g);p.i.push(new sk(p.Ya++,u)),p.G==3&&Ic(p)},rn.prototype.N=function(){this.g.l=null,delete this.j,Lh(this.g),delete this.g,rn.aa.N.call(this)};function Xy(u){oa.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const g in p){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}b(Xy,oa);function Qy(){aa.call(this),this.status=1}b(Qy,aa);function Mi(u){this.g=u}b(Mi,qy),Mi.prototype.ua=function(){xe(this.g,"a")},Mi.prototype.ta=function(u){xe(this.g,new Xy(u))},Mi.prototype.sa=function(u){xe(this.g,new Qy)},Mi.prototype.ra=function(){xe(this.g,"b")},Ac.prototype.createWebChannel=Ac.prototype.g,rn.prototype.send=rn.prototype.o,rn.prototype.open=rn.prototype.m,rn.prototype.close=rn.prototype.close,$T=function(){return new Ac},UT=function(){return U()},FT=qn,Km={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},wc.NO_ERROR=0,wc.TIMEOUT=8,wc.HTTP_ERROR=6,ju=wc,hy.COMPLETE="complete",OT=hy,ia.EventType=qr,qr.OPEN="a",qr.CLOSE="b",qr.ERROR="c",qr.MESSAGE="d",pt.prototype.listen=pt.prototype.K,Ma=ia,We.prototype.listenOnce=We.prototype.L,We.prototype.getLastError=We.prototype.Ka,We.prototype.getLastErrorCode=We.prototype.Ba,We.prototype.getStatus=We.prototype.Z,We.prototype.getResponseJson=We.prototype.Oa,We.prototype.getResponseText=We.prototype.oa,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Ha,LT=We}).apply(typeof Zc<"u"?Zc:typeof self<"u"?self:typeof window<"u"?window:{});const zv="@firebase/firestore",Hv="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Rt.UNAUTHENTICATED=new Rt(null),Rt.GOOGLE_CREDENTIALS=new Rt("google-credentials-uid"),Rt.FIRST_PARTY=new Rt("first-party-uid"),Rt.MOCK_USER=new Rt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wo="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si=new Mg("@firebase/firestore");function Oi(){return Si.logLevel}function ee(t,...e){if(Si.logLevel<=pe.DEBUG){const n=e.map(Kg);Si.debug(`Firestore (${Wo}): ${t}`,...n)}}function Vs(t,...e){if(Si.logLevel<=pe.ERROR){const n=e.map(Kg);Si.error(`Firestore (${Wo}): ${t}`,...n)}}function jr(t,...e){if(Si.logLevel<=pe.WARN){const n=e.map(Kg);Si.warn(`Firestore (${Wo}): ${t}`,...n)}}function Kg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,BT(t,s,n)}function BT(t,e,n){let s=`FIRESTORE (${Wo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Vs(s),new Error(s)}function Ne(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||BT(e,r,s)}function de(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends Bs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class D5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Rt.UNAUTHENTICATED))}shutdown(){}}class M5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class V5{constructor(e){this.t=e,this.currentUser=Rt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ne(this.o===void 0,42304);let s=this.i;const r=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let i=new Tr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Tr,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},l=c=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Tr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ne(typeof s.accessToken=="string",31837,{l:s}),new zT(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ne(e===null||typeof e=="string",2055,{h:e}),new Rt(e)}}class L5{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Rt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class O5{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new L5(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Rt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Wv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class F5{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ne(this.o===void 0,3512);const s=i=>{i.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Wv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ne(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Wv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U5(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=U5(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function fe(t,e){return t<e?-1:t>e?1:0}function qm(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=t.codePointAt(n),r=e.codePointAt(n);if(s!==r){if(s<128&&r<128)return fe(s,r);{const i=HT(),o=$5(i.encode(Gv(t,n)),i.encode(Gv(e,n)));return o!==0?o:fe(s,r)}}n+=s>65535?2:1}return fe(t.length,e.length)}function Gv(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function $5(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return fe(t[n],e[n]);return fe(t.length,e.length)}function No(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv="__name__";class Yn{constructor(e,n,s){n===void 0?n=0:n>e.length&&ae(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&ae(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Yn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Yn?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=Yn.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return fe(e.length,n.length)}static compareSegments(e,n){const s=Yn.isNumericId(e),r=Yn.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?Yn.extractNumericId(e).compare(Yn.extractNumericId(n)):qm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Sr.fromString(e.substring(4,e.length-2))}}class Ue extends Yn{construct(e,n,s){return new Ue(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new re(K.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new Ue(n)}static emptyPath(){return new Ue([])}}const B5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _t extends Yn{construct(e,n,s){return new _t(e,n,s)}static isValidIdentifier(e){return B5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Kv}static keyField(){return new _t([Kv])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new re(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const l=e[r];if(l==="\\"){if(r+1===e.length)throw new re(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new re(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,r+=2}else l==="`"?(o=!o,r++):l!=="."||o?(s+=l,r++):(i(),r++)}if(i(),o)throw new re(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _t(n)}static emptyPath(){return new _t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.path=e}static fromPath(e){return new ie(Ue.fromString(e))}static fromName(e){return new ie(Ue.fromString(e).popFirst(5))}static empty(){return new ie(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new Ue(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z5(t,e,n){if(!n)throw new re(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function H5(t,e,n,s){if(e===!0&&s===!0)throw new re(K.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function qv(t){if(!ie.isDocumentKey(t))throw new re(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function WT(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Xg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ae(12329,{type:typeof t})}function Cr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new re(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Xg(t);throw new re(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nt(t,e){const n={typeString:t};return e&&(n.value=e),n}function ic(t,e){if(!WT(t))throw new re(K.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new re(K.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv=-62135596800,Qv=1e6;class Re{static now(){return Re.fromMillis(Date.now())}static fromDate(e){return Re.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Qv);return new Re(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new re(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new re(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Xv)throw new re(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Qv}_compareTo(e){return this.seconds===e.seconds?fe(this.nanoseconds,e.nanoseconds):fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Re._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ic(e,Re._jsonSchema))return new Re(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Xv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Re._jsonSchemaVersion="firestore/timestamp/1.0",Re._jsonSchema={type:nt("string",Re._jsonSchemaVersion),seconds:nt("number"),nanoseconds:nt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{static fromTimestamp(e){return new ue(e)}static min(){return new ue(new Re(0,0))}static max(){return new ue(new Re(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl=-1;function W5(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=ue.fromTimestamp(s===1e9?new Re(n+1,0):new Re(n,s));return new Ir(r,ie.empty(),e)}function G5(t){return new Ir(t.readTime,t.key,Cl)}class Ir{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Ir(ue.min(),ie.empty(),Cl)}static max(){return new Ir(ue.max(),ie.empty(),Cl)}}function K5(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:fe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class X5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Go(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==q5)throw t;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new H((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof H?n:H.resolve(n)}catch(n){return H.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):H.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):H.reject(n)}static resolve(e){return new H((n,s)=>{n(e)})}static reject(e){return new H((n,s)=>{s(e)})}static waitFor(e){return new H((n,s)=>{let r=0,i=0,o=!1;e.forEach(l=>{++r,l.next(()=>{++i,o&&i===r&&n()},c=>s(c))}),o=!0,i===r&&n()})}static or(e){let n=H.resolve(!1);for(const s of e)n=n.next(r=>r?H.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new H((s,r)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(h=>{o[d]=h,++l,l===i&&s(o)},h=>r(h))}})}static doWhile(e,n){return new H((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}function Q5(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ko(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this._e(s),this.ae=s=>n.writeSequenceNumber(s))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}rh.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qg=-1;function ih(t){return t==null}function vd(t){return t===0&&1/t==-1/0}function Y5(t){return typeof t=="number"&&Number.isInteger(t)&&!vd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT="";function J5(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Yv(e)),e=Z5(t.get(n),e);return Yv(e)}function Z5(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case GT:n+="";break;default:n+=i}}return n}function Yv(t){return t+GT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function zr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function KT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e,n){this.comparator=e,this.root=n||vt.EMPTY}insert(e,n){return new He(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,vt.BLACK,null,null))}remove(e){return new He(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new eu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new eu(this.root,e,this.comparator,!1)}getReverseIterator(){return new eu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new eu(this.root,e,this.comparator,!0)}}class eu{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vt{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??vt.RED,this.left=r??vt.EMPTY,this.right=i??vt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new vt(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return vt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return vt.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ae(27949);return e+(this.isRed()?0:1)}}vt.EMPTY=null,vt.RED=!0,vt.BLACK=!1;vt.EMPTY=new class{constructor(){this.size=0}get key(){throw ae(57766)}get value(){throw ae(16141)}get color(){throw ae(16727)}get left(){throw ae(29726)}get right(){throw ae(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new vt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.comparator=e,this.data=new He(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Zv(this.data.getIterator())}getIteratorFrom(e){return new Zv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof at)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new at(this.comparator);return n.data=e,n}}class Zv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.fields=e,e.sort(_t.comparator)}static empty(){return new ln([])}unionWith(e){let n=new at(_t.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return No(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new qT("Invalid base64 string: "+i):i}}(e);return new Nt(n)}static fromUint8Array(e){const n=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new Nt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nt.EMPTY_BYTE_STRING=new Nt("");const e3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pr(t){if(Ne(!!t,39018),typeof t=="string"){let e=0;const n=e3.exec(t);if(Ne(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Xe(t.seconds),nanos:Xe(t.nanos)}}function Xe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ar(t){return typeof t=="string"?Nt.fromBase64String(t):Nt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="server_timestamp",QT="__type__",YT="__previous_value__",JT="__local_write_time__";function Yg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[QT])===null||n===void 0?void 0:n.stringValue)===XT}function oh(t){const e=t.mapValue.fields[YT];return Yg(e)?oh(e):e}function Il(t){const e=Pr(t.mapValue.fields[JT].timestampValue);return new Re(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(e,n,s,r,i,o,l,c,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}}const wd="(default)";class Pl{constructor(e,n){this.projectId=e,this.database=n||wd}static empty(){return new Pl("","")}get isDefaultDatabase(){return this.database===wd}isEqual(e){return e instanceof Pl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT="__type__",eE="__max__",tu={mapValue:{fields:{__type__:{stringValue:eE}}}},tE="__vector__",_d="value";function Rr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Yg(t)?4:s3(t)?9007199254740991:n3(t)?10:11:ae(28295,{value:t})}function ds(t,e){if(t===e)return!0;const n=Rr(t);if(n!==Rr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Il(t).isEqual(Il(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Pr(r.timestampValue),l=Pr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Ar(r.bytesValue).isEqual(Ar(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Xe(r.geoPointValue.latitude)===Xe(i.geoPointValue.latitude)&&Xe(r.geoPointValue.longitude)===Xe(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Xe(r.integerValue)===Xe(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Xe(r.doubleValue),l=Xe(i.doubleValue);return o===l?vd(o)===vd(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return No(t.arrayValue.values||[],e.arrayValue.values||[],ds);case 10:case 11:return function(r,i){const o=r.mapValue.fields||{},l=i.mapValue.fields||{};if(Jv(o)!==Jv(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!ds(o[c],l[c])))return!1;return!0}(t,e);default:return ae(52216,{left:t})}}function Al(t,e){return(t.values||[]).find(n=>ds(n,e))!==void 0}function ko(t,e){if(t===e)return 0;const n=Rr(t),s=Rr(e);if(n!==s)return fe(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return fe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Xe(i.integerValue||i.doubleValue),c=Xe(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return ew(t.timestampValue,e.timestampValue);case 4:return ew(Il(t),Il(e));case 5:return qm(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Ar(i),c=Ar(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let d=0;d<l.length&&d<c.length;d++){const h=fe(l[d],c[d]);if(h!==0)return h}return fe(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=fe(Xe(i.latitude),Xe(o.latitude));return l!==0?l:fe(Xe(i.longitude),Xe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return tw(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,c,d,h;const f=i.fields||{},m=o.fields||{},y=(l=f[_d])===null||l===void 0?void 0:l.arrayValue,b=(c=m[_d])===null||c===void 0?void 0:c.arrayValue,C=fe(((d=y==null?void 0:y.values)===null||d===void 0?void 0:d.length)||0,((h=b==null?void 0:b.values)===null||h===void 0?void 0:h.length)||0);return C!==0?C:tw(y,b)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===tu.mapValue&&o===tu.mapValue)return 0;if(i===tu.mapValue)return 1;if(o===tu.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const m=qm(c[f],h[f]);if(m!==0)return m;const y=ko(l[c[f]],d[h[f]]);if(y!==0)return y}return fe(c.length,h.length)}(t.mapValue,e.mapValue);default:throw ae(23264,{le:n})}}function ew(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return fe(t,e);const n=Pr(t),s=Pr(e),r=fe(n.seconds,s.seconds);return r!==0?r:fe(n.nanos,s.nanos)}function tw(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=ko(n[r],s[r]);if(i)return i}return fe(n.length,s.length)}function jo(t){return Xm(t)}function Xm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=Pr(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ar(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=Xm(i);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${Xm(n.fields[o])}`;return r+"}"}(t.mapValue):ae(61005,{value:t})}function Cu(t){switch(Rr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=oh(t);return e?16+Cu(e):16;case 5:return 2*t.stringValue.length;case 6:return Ar(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,i)=>r+Cu(i),0)}(t.arrayValue);case 10:case 11:return function(s){let r=0;return zr(s.fields,(i,o)=>{r+=i.length+Cu(o)}),r}(t.mapValue);default:throw ae(13486,{value:t})}}function Qm(t){return!!t&&"integerValue"in t}function Jg(t){return!!t&&"arrayValue"in t}function nw(t){return!!t&&"nullValue"in t}function sw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Iu(t){return!!t&&"mapValue"in t}function n3(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[ZT])===null||n===void 0?void 0:n.stringValue)===tE}function Ya(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return zr(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Ya(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ya(t.arrayValue.values[n]);return e}return Object.assign({},t)}function s3(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===eE}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.value=e}static empty(){return new Qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Iu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ya(n)}setAll(e){let n=_t.emptyPath(),s={},r=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,s,r),s={},r=[],n=l.popLast()}o?s[l.lastSegment()]=Ya(o):r.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());Iu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ds(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];Iu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){zr(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new Qt(Ya(this.value))}}function nE(t){const e=[];return zr(t.fields,(n,s)=>{const r=new _t([n]);if(Iu(s)){const i=nE(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,n,s,r,i,o,l){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Mt(e,0,ue.min(),ue.min(),ue.min(),Qt.empty(),0)}static newFoundDocument(e,n,s,r){return new Mt(e,1,n,ue.min(),s,r,0)}static newNoDocument(e,n){return new Mt(e,2,n,ue.min(),ue.min(),Qt.empty(),0)}static newUnknownDocument(e,n){return new Mt(e,3,n,ue.min(),ue.min(),Qt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e,n){this.position=e,this.inclusive=n}}function rw(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=ie.comparator(ie.fromName(o.referenceValue),n.key):s=ko(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function iw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ds(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,n="asc"){this.field=e,this.dir=n}}function r3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{}class rt extends sE{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new o3(e,n,s):n==="array-contains"?new c3(e,s):n==="in"?new u3(e,s):n==="not-in"?new d3(e,s):n==="array-contains-any"?new h3(e,s):new rt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new a3(e,s):new l3(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ko(n,this.value)):n!==null&&Rr(this.value)===Rr(n)&&this.matchesComparison(ko(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hs extends sE{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new hs(e,n)}matches(e){return rE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function rE(t){return t.op==="and"}function iE(t){return i3(t)&&rE(t)}function i3(t){for(const e of t.filters)if(e instanceof hs)return!1;return!0}function Ym(t){if(t instanceof rt)return t.field.canonicalString()+t.op.toString()+jo(t.value);if(iE(t))return t.filters.map(e=>Ym(e)).join(",");{const e=t.filters.map(n=>Ym(n)).join(",");return`${t.op}(${e})`}}function oE(t,e){return t instanceof rt?function(s,r){return r instanceof rt&&s.op===r.op&&s.field.isEqual(r.field)&&ds(s.value,r.value)}(t,e):t instanceof hs?function(s,r){return r instanceof hs&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,o,l)=>i&&oE(o,r.filters[l]),!0):!1}(t,e):void ae(19439)}function aE(t){return t instanceof rt?function(n){return`${n.field.canonicalString()} ${n.op} ${jo(n.value)}`}(t):t instanceof hs?function(n){return n.op.toString()+" {"+n.getFilters().map(aE).join(" ,")+"}"}(t):"Filter"}class o3 extends rt{constructor(e,n,s){super(e,n,s),this.key=ie.fromName(s.referenceValue)}matches(e){const n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class a3 extends rt{constructor(e,n){super(e,"in",n),this.keys=lE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class l3 extends rt{constructor(e,n){super(e,"not-in",n),this.keys=lE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function lE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>ie.fromName(s.referenceValue))}class c3 extends rt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Jg(n)&&Al(n.arrayValue,this.value)}}class u3 extends rt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Al(this.value.arrayValue,n)}}class d3 extends rt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Al(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Al(this.value.arrayValue,n)}}class h3 extends rt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Jg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Al(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(e,n=null,s=[],r=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=l,this.Pe=null}}function ow(t,e=null,n=[],s=[],r=null,i=null,o=null){return new f3(t,e,n,s,r,i,o)}function Zg(t){const e=de(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Ym(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),ih(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>jo(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>jo(s)).join(",")),e.Pe=n}return e.Pe}function e0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!r3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!oE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!iw(t.startAt,e.startAt)&&iw(t.endAt,e.endAt)}function Jm(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,n=null,s=[],r=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function m3(t,e,n,s,r,i,o,l){return new ah(t,e,n,s,r,i,o,l)}function t0(t){return new ah(t)}function aw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function p3(t){return t.collectionGroup!==null}function Ja(t){const e=de(t);if(e.Te===null){e.Te=[];const n=new Set;for(const i of e.explicitOrderBy)e.Te.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new at(_t.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Te.push(new Sd(i,s))}),n.has(_t.keyField().canonicalString())||e.Te.push(new Sd(_t.keyField(),s))}return e.Te}function ss(t){const e=de(t);return e.Ie||(e.Ie=g3(e,Ja(t))),e.Ie}function g3(t,e){if(t.limitType==="F")return ow(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new Sd(r.field,i)});const n=t.endAt?new bd(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new bd(t.startAt.position,t.startAt.inclusive):null;return ow(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function Zm(t,e,n){return new ah(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function lh(t,e){return e0(ss(t),ss(e))&&t.limitType===e.limitType}function cE(t){return`${Zg(ss(t))}|lt:${t.limitType}`}function Fi(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(r=>aE(r)).join(", ")}]`),ih(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(r=>jo(r)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(r=>jo(r)).join(",")),`Target(${s})`}(ss(t))}; limitType=${t.limitType})`}function ch(t,e){return e.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):ie.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(t,e)&&function(s,r){for(const i of Ja(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(s,r){return!(s.startAt&&!function(o,l,c){const d=rw(o,l,c);return o.inclusive?d<=0:d<0}(s.startAt,Ja(s),r)||s.endAt&&!function(o,l,c){const d=rw(o,l,c);return o.inclusive?d>=0:d>0}(s.endAt,Ja(s),r))}(t,e)}function y3(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function uE(t){return(e,n)=>{let s=!1;for(const r of Ja(t)){const i=x3(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function x3(t,e,n){const s=t.field.isKeyField()?ie.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),d=l.data.field(i);return c!==null&&d!==null?ko(c,d):ae(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return ae(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){zr(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return KT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v3=new He(ie.comparator);function Ls(){return v3}const dE=new He(ie.comparator);function Va(...t){let e=dE;for(const n of t)e=e.insert(n.key,n);return e}function hE(t){let e=dE;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function oi(){return Za()}function fE(){return Za()}function Za(){return new ji(t=>t.toString(),(t,e)=>t.isEqual(e))}const w3=new He(ie.comparator),_3=new at(ie.comparator);function ge(...t){let e=_3;for(const n of t)e=e.add(n);return e}const b3=new at(fe);function S3(){return b3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vd(e)?"-0":e}}function mE(t){return{integerValue:""+t}}function T3(t,e){return Y5(e)?mE(e):n0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(){this._=void 0}}function E3(t,e,n){return t instanceof Td?function(r,i){const o={fields:{[QT]:{stringValue:XT},[JT]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Yg(i)&&(i=oh(i)),i&&(o.fields[YT]=i),{mapValue:o}}(n,e):t instanceof Rl?gE(t,e):t instanceof Dl?yE(t,e):function(r,i){const o=pE(r,i),l=lw(o)+lw(r.Ee);return Qm(o)&&Qm(r.Ee)?mE(l):n0(r.serializer,l)}(t,e)}function N3(t,e,n){return t instanceof Rl?gE(t,e):t instanceof Dl?yE(t,e):n}function pE(t,e){return t instanceof Ed?function(s){return Qm(s)||function(i){return!!i&&"doubleValue"in i}(s)}(e)?e:{integerValue:0}:null}class Td extends uh{}class Rl extends uh{constructor(e){super(),this.elements=e}}function gE(t,e){const n=xE(e);for(const s of t.elements)n.some(r=>ds(r,s))||n.push(s);return{arrayValue:{values:n}}}class Dl extends uh{constructor(e){super(),this.elements=e}}function yE(t,e){let n=xE(e);for(const s of t.elements)n=n.filter(r=>!ds(r,s));return{arrayValue:{values:n}}}class Ed extends uh{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function lw(t){return Xe(t.integerValue||t.doubleValue)}function xE(t){return Jg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function k3(t,e){return t.field.isEqual(e.field)&&function(s,r){return s instanceof Rl&&r instanceof Rl||s instanceof Dl&&r instanceof Dl?No(s.elements,r.elements,ds):s instanceof Ed&&r instanceof Ed?ds(s.Ee,r.Ee):s instanceof Td&&r instanceof Td}(t.transform,e.transform)}class j3{constructor(e,n){this.version=e,this.transformResults=n}}class $n{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new $n}static exists(e){return new $n(void 0,e)}static updateTime(e){return new $n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class dh{}function vE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new s0(t.key,$n.none()):new oc(t.key,t.data,$n.none());{const n=t.data,s=Qt.empty();let r=new at(_t.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new Hr(t.key,s,new ln(r.toArray()),$n.none())}}function C3(t,e,n){t instanceof oc?function(r,i,o){const l=r.value.clone(),c=uw(r.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Hr?function(r,i,o){if(!Pu(r.precondition,i))return void i.convertToUnknownDocument(o.version);const l=uw(r.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(wE(r)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function el(t,e,n,s){return t instanceof oc?function(i,o,l,c){if(!Pu(i.precondition,o))return l;const d=i.value.clone(),h=dw(i.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,s):t instanceof Hr?function(i,o,l,c){if(!Pu(i.precondition,o))return l;const d=dw(i.fieldTransforms,c,o),h=o.data;return h.setAll(wE(i)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,s):function(i,o,l){return Pu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function I3(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=pE(s.transform,r||null);i!=null&&(n===null&&(n=Qt.empty()),n.set(s.field,i))}return n||null}function cw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&No(s,r,(i,o)=>k3(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class oc extends dh{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Hr extends dh{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function wE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function uw(t,e,n){const s=new Map;Ne(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,l=e.data.field(i.field);s.set(i.field,N3(o,l,n[r]))}return s}function dw(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,E3(i,o,e))}return s}class s0 extends dh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class P3 extends dh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&C3(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=el(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=el(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=fE();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(r.key)?null:l;const c=vE(o,l);c!==null&&s.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(ue.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&No(this.mutations,e.mutations,(n,s)=>cw(n,s))&&No(this.baseMutations,e.baseMutations,(n,s)=>cw(n,s))}}class r0{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){Ne(e.mutations.length===s.length,58842,{Ve:e.mutations.length,me:s.length});let r=function(){return w3}();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new r0(e,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze,ve;function M3(t){switch(t){case K.OK:return ae(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return ae(15467,{code:t})}}function _E(t){if(t===void 0)return Vs("GRPC error has no .code"),K.UNKNOWN;switch(t){case Ze.OK:return K.OK;case Ze.CANCELLED:return K.CANCELLED;case Ze.UNKNOWN:return K.UNKNOWN;case Ze.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case Ze.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case Ze.INTERNAL:return K.INTERNAL;case Ze.UNAVAILABLE:return K.UNAVAILABLE;case Ze.UNAUTHENTICATED:return K.UNAUTHENTICATED;case Ze.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case Ze.NOT_FOUND:return K.NOT_FOUND;case Ze.ALREADY_EXISTS:return K.ALREADY_EXISTS;case Ze.PERMISSION_DENIED:return K.PERMISSION_DENIED;case Ze.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case Ze.ABORTED:return K.ABORTED;case Ze.OUT_OF_RANGE:return K.OUT_OF_RANGE;case Ze.UNIMPLEMENTED:return K.UNIMPLEMENTED;case Ze.DATA_LOSS:return K.DATA_LOSS;default:return ae(39323,{code:t})}}(ve=Ze||(Ze={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V3=new Sr([4294967295,4294967295],0);function hw(t){const e=HT().encode(t),n=new VT;return n.update(e),new Uint8Array(n.digest())}function fw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Sr([n,s],0),new Sr([r,i],0)]}class i0{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new La(`Invalid padding: ${n}`);if(s<0)throw new La(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new La(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new La(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Sr.fromNumber(this.fe)}pe(e,n,s){let r=e.add(n.multiply(Sr.fromNumber(s)));return r.compare(V3)===1&&(r=new Sr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=hw(e),[s,r]=fw(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(s,r,i);if(!this.ye(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new i0(i,r,n);return s.forEach(l=>o.insert(l)),o}insert(e){if(this.fe===0)return;const n=hw(e),[s,r]=fw(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(s,r,i);this.we(o)}}we(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class La extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,ac.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new hh(ue.min(),r,new He(fe),Ls(),ge())}}class ac{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new ac(s,n,ge(),ge(),ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e,n,s,r){this.Se=e,this.removedTargetIds=n,this.key=s,this.be=r}}class bE{constructor(e,n){this.targetId=e,this.De=n}}class SE{constructor(e,n,s=Nt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class mw{constructor(){this.ve=0,this.Ce=pw(),this.Fe=Nt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ge(),n=ge(),s=ge();return this.Ce.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:ae(38017,{changeType:i})}}),new ac(this.Fe,this.Me,e,n,s)}ke(){this.xe=!1,this.Ce=pw()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ne(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class L3{constructor(e){this.We=e,this.Ge=new Map,this.ze=Ls(),this.je=nu(),this.Je=nu(),this.He=new He(fe)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const s=this.tt(n);switch(e.state){case 0:this.nt(n)&&s.Be(e.resumeToken);break;case 1:s.Ue(),s.Oe||s.ke(),s.Be(e.resumeToken);break;case 2:s.Ue(),s.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(s.Ke(),s.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),s.Be(e.resumeToken));break;default:ae(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((s,r)=>{this.nt(r)&&n(r)})}it(e){const n=e.targetId,s=e.De.count,r=this.st(n);if(r){const i=r.target;if(Jm(i))if(s===0){const o=new ie(i.path);this.Xe(n,o,Mt.newNoDocument(o,ue.min()))}else Ne(s===1,20013,{expectedCount:s});else{const o=this.ot(n);if(o!==s){const l=this._t(e),c=l?this.ut(l,e,o):1;if(c!==0){this.rt(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,d)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,l;try{o=Ar(s).toUint8Array()}catch(c){if(c instanceof qT)return jr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new i0(o,r,i)}catch(c){return jr(c instanceof La?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.fe===0?null:l}ut(e,n,s){return n.De.count===s-this.ht(e,n.targetId)?0:2}ht(e,n){const s=this.We.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const o=this.We.lt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Xe(n,i,null),r++)}),r}Pt(e){const n=new Map;this.Ge.forEach((i,o)=>{const l=this.st(o);if(l){if(i.current&&Jm(l.target)){const c=new ie(l.target.path);this.Tt(c).has(o)||this.It(o,c)||this.Xe(o,c,Mt.newNoDocument(c,e))}i.Ne&&(n.set(o,i.Le()),i.ke())}});let s=ge();this.Je.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const d=this.st(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(s=s.add(i))}),this.ze.forEach((i,o)=>o.setReadTime(e));const r=new hh(e,n,this.He,this.ze,s);return this.ze=Ls(),this.je=nu(),this.Je=nu(),this.He=new He(fe),r}Ze(e,n){if(!this.nt(e))return;const s=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,s),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,s){if(!this.nt(e))return;const r=this.tt(e);this.It(e,n)?r.qe(n,1):r.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),s&&(this.ze=this.ze.insert(n,s))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new mw,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new at(fe),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new at(fe),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||ee("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new mw),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function nu(){return new He(ie.comparator)}function pw(){return new He(ie.comparator)}const O3=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),F3=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),U3=(()=>({and:"AND",or:"OR"}))();class $3{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ep(t,e){return t.useProto3Json||ih(e)?e:{value:e}}function Nd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function B3(t,e){return Nd(t,e.toTimestamp())}function rs(t){return Ne(!!t,49232),ue.fromTimestamp(function(n){const s=Pr(n);return new Re(s.seconds,s.nanos)}(t))}function o0(t,e){return tp(t,e).canonicalString()}function tp(t,e){const n=function(r){return new Ue(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function EE(t){const e=Ue.fromString(t);return Ne(IE(e),10190,{key:e.toString()}),e}function np(t,e){return o0(t.databaseId,e.path)}function Sf(t,e){const n=EE(e);if(n.get(1)!==t.databaseId.projectId)throw new re(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new re(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ie(kE(n))}function NE(t,e){return o0(t.databaseId,e)}function z3(t){const e=EE(t);return e.length===4?Ue.emptyPath():kE(e)}function sp(t){return new Ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function kE(t){return Ne(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function gw(t,e,n){return{name:np(t,e),fields:n.value.mapValue.fields}}function H3(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ae(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(d,h){return d.useProto3Json?(Ne(h===void 0||typeof h=="string",58123),Nt.fromBase64String(h||"")):(Ne(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Nt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const h=d.code===void 0?K.UNKNOWN:_E(d.code);return new re(h,d.message||"")}(o);n=new SE(s,r,i,l||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Sf(t,s.document.name),i=rs(s.document.updateTime),o=s.document.createTime?rs(s.document.createTime):ue.min(),l=new Qt({mapValue:{fields:s.document.fields}}),c=Mt.newFoundDocument(r,i,o,l),d=s.targetIds||[],h=s.removedTargetIds||[];n=new Au(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Sf(t,s.document),i=s.readTime?rs(s.readTime):ue.min(),o=Mt.newNoDocument(r,i),l=s.removedTargetIds||[];n=new Au([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Sf(t,s.document),i=s.removedTargetIds||[];n=new Au([],i,r,null)}else{if(!("filter"in e))return ae(11601,{At:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new D3(r,i),l=s.targetId;n=new bE(l,o)}}return n}function W3(t,e){let n;if(e instanceof oc)n={update:gw(t,e.key,e.value)};else if(e instanceof s0)n={delete:np(t,e.key)};else if(e instanceof Hr)n={update:gw(t,e.key,e.data),updateMask:e4(e.fieldMask)};else{if(!(e instanceof P3))return ae(16599,{Rt:e.type});n={verify:np(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(i,o){const l=o.transform;if(l instanceof Td)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Rl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Dl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ed)return{fieldPath:o.field.canonicalString(),increment:l.Ee};throw ae(20930,{transform:o.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:B3(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ae(27497)}(t,e.precondition)),n}function G3(t,e){return t&&t.length>0?(Ne(e!==void 0,14353),t.map(n=>function(r,i){let o=r.updateTime?rs(r.updateTime):rs(i);return o.isEqual(ue.min())&&(o=rs(i)),new j3(o,r.transformResults||[])}(n,e))):[]}function K3(t,e){return{documents:[NE(t,e.path)]}}function q3(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=NE(t,r);const i=function(d){if(d.length!==0)return CE(hs.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(h=>function(m){return{field:Ui(m.field),direction:Y3(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=ep(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{Vt:n,parent:r}}function X3(t){let e=z3(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){Ne(s===1,65062);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const m=jE(f);return m instanceof hs&&iE(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(b){return new Sd($i(b.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(f){let m;return m=typeof f=="object"?f.value:f,ih(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(f){const m=!!f.before,y=f.values||[];return new bd(y,m)}(n.startAt));let d=null;return n.endAt&&(d=function(f){const m=!f.before,y=f.values||[];return new bd(y,m)}(n.endAt)),m3(e,r,o,i,l,"F",c,d)}function Q3(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function jE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=$i(n.unaryFilter.field);return rt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=$i(n.unaryFilter.field);return rt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=$i(n.unaryFilter.field);return rt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=$i(n.unaryFilter.field);return rt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ae(61313);default:return ae(60726)}}(t):t.fieldFilter!==void 0?function(n){return rt.create($i(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ae(58110);default:return ae(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return hs.create(n.compositeFilter.filters.map(s=>jE(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ae(1026)}}(n.compositeFilter.op))}(t):ae(30097,{filter:t})}function Y3(t){return O3[t]}function J3(t){return F3[t]}function Z3(t){return U3[t]}function Ui(t){return{fieldPath:t.canonicalString()}}function $i(t){return _t.fromServerFormat(t.fieldPath)}function CE(t){return t instanceof rt?function(n){if(n.op==="=="){if(sw(n.value))return{unaryFilter:{field:Ui(n.field),op:"IS_NAN"}};if(nw(n.value))return{unaryFilter:{field:Ui(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(sw(n.value))return{unaryFilter:{field:Ui(n.field),op:"IS_NOT_NAN"}};if(nw(n.value))return{unaryFilter:{field:Ui(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ui(n.field),op:J3(n.op),value:n.value}}}(t):t instanceof hs?function(n){const s=n.getFilters().map(r=>CE(r));return s.length===1?s[0]:{compositeFilter:{op:Z3(n.op),filters:s}}}(t):ae(54877,{filter:t})}function e4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function IE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,n,s,r,i=ue.min(),o=ue.min(),l=Nt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new dr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e){this.gt=e}}function n4(t){const e=X3({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Zm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(){this.Dn=new r4}addToCollectionParentIndex(e,n){return this.Dn.add(n),H.resolve()}getCollectionParents(e,n){return H.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return H.resolve()}deleteFieldIndex(e,n){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,n){return H.resolve()}getDocumentsMatchingTarget(e,n){return H.resolve(null)}getIndexType(e,n){return H.resolve(0)}getFieldIndexes(e,n){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,n){return H.resolve(Ir.min())}getMinOffsetFromCollectionGroup(e,n){return H.resolve(Ir.min())}updateCollectionGroup(e,n,s){return H.resolve()}updateIndexEntries(e,n){return H.resolve()}}class r4{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new at(Ue.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new at(Ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},PE=41943040;class qt{static withCacheSize(e){return new qt(e,qt.DEFAULT_COLLECTION_PERCENTILE,qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qt.DEFAULT_COLLECTION_PERCENTILE=10,qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qt.DEFAULT=new qt(PE,qt.DEFAULT_COLLECTION_PERCENTILE,qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qt.DISABLED=new qt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Co(0)}static ur(){return new Co(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw="LruGarbageCollector",i4=1048576;function vw([t,e],[n,s]){const r=fe(t,n);return r===0?fe(e,s):r}class o4{constructor(e){this.Tr=e,this.buffer=new at(vw),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();vw(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class a4{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ee(xw,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ko(n)?ee(xw,"Ignoring IndexedDB error during garbage collection: ",n):await Go(n)}await this.Rr(3e5)})}}class l4{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return H.resolve(rh.ue);const s=new o4(n);return this.Vr.forEachTarget(e,r=>s.Er(r.sequenceNumber)).next(()=>this.Vr.gr(e,r=>s.Er(r))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.Vr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(yw)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yw):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let s,r,i,o,l,c,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),r=this.params.maximumSequenceNumbersToCollect):r=f,o=Date.now(),this.nthSequenceNumber(e,r))).next(f=>(s=f,l=Date.now(),this.removeTargets(e,s,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,s))).next(f=>(d=Date.now(),Oi()<=pe.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${r} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:f})))}}function c4(t,e){return new l4(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(){this.changes=new ji(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Mt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?H.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&el(s.mutation,r,ln.empty(),Re.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,ge()).next(()=>s))}getLocalViewOfDocuments(e,n,s=ge()){const r=oi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=Va();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=oi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,ge()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,s,r){let i=Ls();const o=Za(),l=function(){return Za()}();return n.forEach((c,d)=>{const h=s.get(d.key);r.has(d.key)&&(h===void 0||h.mutation instanceof Hr)?i=i.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),el(h.mutation,d,h.mutation.getFieldMask(),Re.now())):o.set(d.key,ln.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,h)=>o.set(d,h)),n.forEach((d,h)=>{var f;return l.set(d,new d4(h,(f=o.get(d))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,n){const s=Za();let r=new He((o,l)=>o-l),i=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let h=s.get(c)||ln.empty();h=l.applyToLocalView(d,h),s.set(c,h);const f=(r.get(l.batchId)||ge()).add(c);r=r.insert(l.batchId,f)})}).next(()=>{const o=[],l=r.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,h=c.value,f=fE();h.forEach(m=>{if(!i.has(m)){const y=vE(n.get(m),s.get(m));y!==null&&f.set(m,y),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,f))}return H.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(o){return ie.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):p3(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):H.resolve(oi());let l=Cl,c=i;return o.next(d=>H.forEach(d,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(h)?H.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,ge())).next(h=>({batchId:l,changes:hE(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next(s=>{let r=Va();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=Va();return this.indexManager.getCollectionParents(e,i).next(l=>H.forEach(l,c=>{const d=function(f,m){return new ah(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,s,r).next(h=>{h.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(o=>{i.forEach((c,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,Mt.newInvalidDocument(h)))});let l=Va();return o.forEach((c,d)=>{const h=i.get(c);h!==void 0&&el(h.mutation,d,ln.empty(),Re.now()),ch(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return H.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(r){return{id:r.id,version:r.version,createTime:rs(r.createTime)}}(n)),H.resolve()}getNamedQuery(e,n){return H.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(r){return{name:r.name,query:n4(r.bundledQuery),readTime:rs(r.readTime)}}(n)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(){this.overlays=new He(ie.comparator),this.kr=new Map}getOverlay(e,n){return H.resolve(this.overlays.get(n))}getOverlays(e,n){const s=oi();return H.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.wt(e,n,i)}),H.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.kr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.kr.delete(s)),H.resolve()}getOverlaysForCollection(e,n,s){const r=oi(),i=n.length+1,o=new ie(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>s&&r.set(c.getKey(),c)}return H.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new He((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>s){let h=i.get(d.largestBatchId);h===null&&(h=oi(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=oi(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=r)););return H.resolve(l)}wt(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.kr.get(r.largestBatchId).delete(s.key);this.kr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new R3(n,s));let i=this.kr.get(n);i===void 0&&(i=ge(),this.kr.set(n,i)),this.kr.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(){this.sessionToken=Nt.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(){this.qr=new at(dt.Qr),this.$r=new at(dt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const s=new dt(e,n);this.qr=this.qr.add(s),this.$r=this.$r.add(s)}Kr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Wr(new dt(e,n))}Gr(e,n){e.forEach(s=>this.removeReference(s,n))}zr(e){const n=new ie(new Ue([])),s=new dt(n,e),r=new dt(n,e+1),i=[];return this.$r.forEachInRange([s,r],o=>{this.Wr(o),i.push(o.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new ie(new Ue([])),s=new dt(n,e),r=new dt(n,e+1);let i=ge();return this.$r.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new dt(e,0),s=this.qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class dt{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return ie.comparator(e.key,n.key)||fe(e.Hr,n.Hr)}static Ur(e,n){return fe(e.Hr,n.Hr)||ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new at(dt.Qr)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new A3(i,n,s,r);this.mutationQueue.push(o);for(const l of r)this.Yr=this.Yr.add(new dt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return H.resolve(o)}lookupMutationBatch(e,n){return H.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.Xr(s),i=r<0?0:r;return H.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?Qg:this.er-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new dt(n,0),r=new dt(n,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([s,r],o=>{const l=this.Zr(o.Hr);i.push(l)}),H.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new at(fe);return n.forEach(r=>{const i=new dt(r,0),o=new dt(r,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([i,o],l=>{s=s.add(l.Hr)})}),H.resolve(this.ei(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;ie.isDocumentKey(i)||(i=i.child(""));const o=new dt(new ie(i),0);let l=new at(fe);return this.Yr.forEachWhile(c=>{const d=c.key.path;return!!s.isPrefixOf(d)&&(d.length===r&&(l=l.add(c.Hr)),!0)},o),H.resolve(this.ei(l))}ei(e){const n=[];return e.forEach(s=>{const r=this.Zr(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Ne(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Yr;return H.forEach(n.mutations,r=>{const i=new dt(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Yr=s})}rr(e){}containsKey(e,n){const s=new dt(n,0),r=this.Yr.firstAfterOrEqual(s);return H.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e){this.ni=e,this.docs=function(){return new He(ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ni(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return H.resolve(s?s.document.mutableCopy():Mt.newInvalidDocument(n))}getEntries(e,n){let s=Ls();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Mt.newInvalidDocument(r))}),H.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=Ls();const o=n.path,l=new ie(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||K5(G5(h),s)<=0||(r.has(h.key)||ch(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return H.resolve(i)}getAllFromCollectionGroup(e,n,s,r){ae(9500)}ri(e,n){return H.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new x4(this)}getSize(e){return H.resolve(this.size)}}class x4 extends u4{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Or.addEntry(e,r)):this.Or.removeEntry(s)}),H.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(e){this.persistence=e,this.ii=new ji(n=>Zg(n),e0),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.si=0,this.oi=new a0,this.targetCount=0,this._i=Co.ar()}forEachTarget(e,n){return this.ii.forEach((s,r)=>n(r)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.si&&(this.si=n),H.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Co(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,H.resolve()}updateTargetData(e,n){return this.hr(n),H.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.ii.forEach((o,l)=>{l.sequenceNumber<=n&&s.get(l.targetId)===null&&(this.ii.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)}),H.waitFor(i).next(()=>r)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,n){const s=this.ii.get(n)||null;return H.resolve(s)}addMatchingKeys(e,n,s){return this.oi.Kr(n,s),H.resolve()}removeMatchingKeys(e,n,s){this.oi.Gr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),H.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),H.resolve()}getMatchingKeysForTargetId(e,n){const s=this.oi.Jr(n);return H.resolve(s)}containsKey(e,n){return H.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e,n){this.ai={},this.overlays={},this.ui=new rh(0),this.ci=!1,this.ci=!0,this.li=new p4,this.referenceDelegate=e(this),this.hi=new v4(this),this.indexManager=new s4,this.remoteDocumentCache=function(r){return new y4(r)}(s=>this.referenceDelegate.Pi(s)),this.serializer=new t4(n),this.Ti=new f4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new m4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ai[e.toKey()];return s||(s=new g4(n,this.referenceDelegate),this.ai[e.toKey()]=s),s}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,s){ee("MemoryPersistence","Starting transaction:",e);const r=new w4(this.ui.next());return this.referenceDelegate.Ii(),s(r).next(i=>this.referenceDelegate.di(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ei(e,n){return H.or(Object.values(this.ai).map(s=>()=>s.containsKey(e,n)))}}class w4 extends X5{constructor(e){super(),this.currentSequenceNumber=e}}class l0{constructor(e){this.persistence=e,this.Ai=new a0,this.Ri=null}static Vi(e){return new l0(e)}get mi(){if(this.Ri)return this.Ri;throw ae(60996)}addReference(e,n,s){return this.Ai.addReference(s,n),this.mi.delete(s.toString()),H.resolve()}removeReference(e,n,s){return this.Ai.removeReference(s,n),this.mi.add(s.toString()),H.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),H.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(r=>this.mi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.mi.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.mi,s=>{const r=ie.fromPath(s);return this.fi(e,r).next(i=>{i||n.removeEntry(r,ue.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(s=>{s?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return H.or([()=>H.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class kd{constructor(e,n){this.persistence=e,this.gi=new ji(s=>J5(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=c4(this,n)}static Vi(e,n){return new kd(e,n)}Ii(){}di(e){return H.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}yr(e){let n=0;return this.gr(e,s=>{n++}).next(()=>n)}gr(e,n){return H.forEach(this.gi,(s,r)=>this.Sr(e,s,r).next(i=>i?H.resolve():n(r)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ri(e,o=>this.Sr(e,o,n).next(l=>{l||(s++,i.removeEntry(o,ue.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),H.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.gi.set(s,e.currentSequenceNumber),H.resolve()}removeReference(e,n,s){return this.gi.set(s,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),H.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Cu(e.data.value)),n}Sr(e,n,s){return H.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.gi.get(n);return H.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Is=s,this.ds=r}static Es(e,n){let s=ge(),r=ge();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new c0(e,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return JP()?8:Q5(Ot())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ps(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ys(e,n,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new _4;return this.ws(e,n,o).next(l=>{if(i.result=l,this.Rs)return this.Ss(e,n,o,l.size)})}).next(()=>i.result)}Ss(e,n,s,r){return s.documentReadCount<this.Vs?(Oi()<=pe.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",Fi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),H.resolve()):(Oi()<=pe.DEBUG&&ee("QueryEngine","Query:",Fi(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.fs*r?(Oi()<=pe.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",Fi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ss(n))):H.resolve())}ps(e,n){if(aw(n))return H.resolve(null);let s=ss(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Zm(n,null,"F"),s=ss(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=ge(...i);return this.gs.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,s).next(c=>{const d=this.bs(n,l);return this.Ds(n,d,o,c.readTime)?this.ps(e,Zm(n,null,"F")):this.vs(e,d,n,c)}))})))}ys(e,n,s,r){return aw(n)||r.isEqual(ue.min())?H.resolve(null):this.gs.getDocuments(e,s).next(i=>{const o=this.bs(n,i);return this.Ds(n,o,s,r)?H.resolve(null):(Oi()<=pe.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Fi(n)),this.vs(e,o,n,W5(r,Cl)).next(l=>l))})}bs(e,n){let s=new at(uE(e));return n.forEach((r,i)=>{ch(e,i)&&(s=s.add(i))}),s}Ds(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}ws(e,n,s){return Oi()<=pe.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",Fi(n)),this.gs.getDocumentsMatchingQuery(e,n,Ir.min(),s)}vs(e,n,s,r){return this.gs.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0="LocalStore",S4=3e8;class T4{constructor(e,n,s,r){this.persistence=e,this.Cs=n,this.serializer=r,this.Fs=new He(fe),this.Ms=new ji(i=>Zg(i),e0),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(s)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new h4(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function E4(t,e,n,s){return new T4(t,e,n,s)}async function RE(t,e){const n=de(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Ns(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],l=[];let c=ge();for(const d of r){o.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}for(const d of i){l.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(s,c).next(d=>({Bs:d,removedBatchIds:o,addedBatchIds:l}))})})}function N4(t,e){const n=de(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Os.newChangeBuffer({trackRemovals:!0});return function(l,c,d,h){const f=d.batch,m=f.keys();let y=H.resolve();return m.forEach(b=>{y=y.next(()=>h.getEntry(c,b)).next(C=>{const I=d.docVersions.get(b);Ne(I!==null,48541),C.version.compareTo(I)<0&&(f.applyToRemoteDocument(C,d),C.isValidDocument()&&(C.setReadTime(d.commitVersion),h.addEntry(C)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(l){let c=ge();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function DE(t){const e=de(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function k4(t,e){const n=de(t),s=e.snapshotVersion;let r=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});r=n.Fs;const l=[];e.targetChanges.forEach((h,f)=>{const m=r.get(f);if(!m)return;l.push(n.hi.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.hi.addMatchingKeys(i,h.addedDocuments,f)));let y=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(Nt.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,s)),r=r.insert(f,y),function(C,I,x){return C.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=S4?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(m,y,h)&&l.push(n.hi.updateTargetData(i,y))});let c=Ls(),d=ge();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(j4(i,o,e.documentUpdates).next(h=>{c=h.Ls,d=h.ks})),!s.isEqual(ue.min())){const h=n.hi.getLastRemoteSnapshotVersion(i).next(f=>n.hi.setTargetsMetadata(i,i.currentSequenceNumber,s));l.push(h)}return H.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.Fs=r,i))}function j4(t,e,n){let s=ge(),r=ge();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=Ls();return n.forEach((l,c)=>{const d=i.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(l)),c.isNoDocument()&&c.version.isEqual(ue.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):ee(u0,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{Ls:o,ks:r}})}function C4(t,e){const n=de(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Qg),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function I4(t,e){const n=de(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.hi.getTargetData(s,e).next(i=>i?(r=i,H.resolve(r)):n.hi.allocateTargetId(s).next(o=>(r=new dr(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.hi.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Fs.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(s.targetId,s),n.Ms.set(e,s.targetId)),s})}async function rp(t,e,n){const s=de(t),r=s.Fs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Ko(o))throw o;ee(u0,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Fs=s.Fs.remove(e),s.Ms.delete(r.target)}function ww(t,e,n){const s=de(t);let r=ue.min(),i=ge();return s.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,h){const f=de(c),m=f.Ms.get(h);return m!==void 0?H.resolve(f.Fs.get(m)):f.hi.getTargetData(d,h)}(s,o,ss(e)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,s.hi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>s.Cs.getDocumentsMatchingQuery(o,e,n?r:ue.min(),n?i:ge())).next(l=>(P4(s,y3(e),l),{documents:l,qs:i})))}function P4(t,e,n){let s=t.xs.get(e)||ue.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.xs.set(e,s)}class _w{constructor(){this.activeTargetIds=S3()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class A4{constructor(){this.Fo=new _w,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,s){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new _w,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw="ConnectivityMonitor";class Sw{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ee(bw,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ee(bw,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let su=null;function ip(){return su===null?su=function(){return 268435456+Math.round(2147483648*Math.random())}():su++,"0x"+su.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf="RestConnection",D4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class M4{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${s}/databases/${r}`,this.Ko=this.databaseId.database===wd?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Wo(e,n,s,r,i){const o=ip(),l=this.Go(e,n.toUriEncodedString());ee(Tf,`Sending RPC '${e}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,r,i);const{host:d}=new URL(l),h=Bo(d);return this.jo(e,l,c,s,h).then(f=>(ee(Tf,`Received RPC '${e}' ${o}: `,f),f),f=>{throw jr(Tf,`RPC '${e}' ${o} failed with error: `,f,"url: ",l,"request:",s),f})}Jo(e,n,s,r,i,o){return this.Wo(e,n,s,r,i)}zo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Wo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}Go(e,n){const s=D4[e];return`${this.$o}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const At="WebChannelConnection";class L4 extends M4{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,s,r,i){const o=ip();return new Promise((l,c)=>{const d=new LT;d.setWithCredentials(!0),d.listenOnce(OT.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case ju.NO_ERROR:const f=d.getResponseJson();ee(At,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),l(f);break;case ju.TIMEOUT:ee(At,`RPC '${e}' ${o} timed out`),c(new re(K.DEADLINE_EXCEEDED,"Request time out"));break;case ju.HTTP_ERROR:const m=d.getStatus();if(ee(At,`RPC '${e}' ${o} failed with status:`,m,"response text:",d.getResponseText()),m>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const b=y==null?void 0:y.error;if(b&&b.status&&b.message){const C=function(x){const v=x.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(v)>=0?v:K.UNKNOWN}(b.status);c(new re(C,b.message))}else c(new re(K.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new re(K.UNAVAILABLE,"Connection failed."));break;default:ae(9055,{c_:e,streamId:o,l_:d.getLastErrorCode(),h_:d.getLastError()})}}finally{ee(At,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(r);ee(At,`RPC '${e}' ${o} sending request:`,r),d.send(n,"POST",h,s,15)})}P_(e,n,s){const r=ip(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=$T(),l=UT(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,n,s),c.encodeInitMessageHeaders=!0;const h=i.join("");ee(At,`Creating RPC '${e}' stream ${r}: ${h}`,c);const f=o.createWebChannel(h,c);this.T_(f);let m=!1,y=!1;const b=new V4({Ho:I=>{y?ee(At,`Not sending because RPC '${e}' stream ${r} is closed:`,I):(m||(ee(At,`Opening RPC '${e}' stream ${r} transport.`),f.open(),m=!0),ee(At,`RPC '${e}' stream ${r} sending:`,I),f.send(I))},Yo:()=>f.close()}),C=(I,x,v)=>{I.listen(x,_=>{try{v(_)}catch(P){setTimeout(()=>{throw P},0)}})};return C(f,Ma.EventType.OPEN,()=>{y||(ee(At,`RPC '${e}' stream ${r} transport opened.`),b.s_())}),C(f,Ma.EventType.CLOSE,()=>{y||(y=!0,ee(At,`RPC '${e}' stream ${r} transport closed`),b.__(),this.I_(f))}),C(f,Ma.EventType.ERROR,I=>{y||(y=!0,jr(At,`RPC '${e}' stream ${r} transport errored. Name:`,I.name,"Message:",I.message),b.__(new re(K.UNAVAILABLE,"The operation could not be completed")))}),C(f,Ma.EventType.MESSAGE,I=>{var x;if(!y){const v=I.data[0];Ne(!!v,16349);const _=v,P=(_==null?void 0:_.error)||((x=_[0])===null||x===void 0?void 0:x.error);if(P){ee(At,`RPC '${e}' stream ${r} received error:`,P);const D=P.status;let A=function(j){const k=Ze[j];if(k!==void 0)return _E(k)}(D),T=P.message;A===void 0&&(A=K.INTERNAL,T="Unknown error status: "+D+" with message "+P.message),y=!0,b.__(new re(A,T)),f.close()}else ee(At,`RPC '${e}' stream ${r} received:`,v),b.a_(v)}}),C(l,FT.STAT_EVENT,I=>{I.stat===Km.PROXY?ee(At,`RPC '${e}' stream ${r} detected buffering proxy`):I.stat===Km.NOPROXY&&ee(At,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{b.o_()},0),b}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Ef(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fh(t){return new $3(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Fi=e,this.timerId=n,this.d_=s,this.E_=r,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),s=Math.max(0,Date.now()-this.m_),r=Math.max(0,n-s);r>0&&ee("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw="PersistentStream";class VE{constructor(e,n,s,r,i,o,l,c){this.Fi=e,this.w_=s,this.S_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new ME(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(Vs(n.toString()),Vs("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.b_===n&&this.W_(s,r)},s=>{e(()=>{const r=new re(K.UNKNOWN,"Fetching auth token failed: "+s.message);return this.G_(r)})})}W_(e,n){const s=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{s(()=>this.listener.Zo())}),this.stream.e_(()=>{s(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(r=>{s(()=>this.G_(r))}),this.stream.onMessage(r=>{s(()=>++this.C_==1?this.j_(r):this.onNext(r))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return ee(Tw,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(ee(Tw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class O4 extends VE{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=H3(this.serializer,e),s=function(i){if(!("targetChange"in i))return ue.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ue.min():o.readTime?rs(o.readTime):ue.min()}(e);return this.listener.J_(n,s)}H_(e){const n={};n.database=sp(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=Jm(c)?{documents:K3(i,c)}:{query:q3(i,c).Vt},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=TE(i,o.resumeToken);const d=ep(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(ue.min())>0){l.readTime=Nd(i,o.snapshotVersion.toTimestamp());const d=ep(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const s=Q3(this.serializer,e);s&&(n.labels=s),this.k_(n)}Y_(e){const n={};n.database=sp(this.serializer),n.removeTarget=e,this.k_(n)}}class F4 extends VE{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Ne(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ne(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ne(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=G3(e.writeResults,e.commitTime),s=rs(e.commitTime);return this.listener.ta(s,n)}na(){const e={};e.database=sp(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>W3(this.serializer,s))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{}class $4 extends U4{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new re(K.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,s,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,tp(n,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new re(K.UNKNOWN,i.toString())})}Jo(e,n,s,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Jo(e,tp(n,s),r,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new re(K.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class B4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Vs(n),this._a=!1):ee("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti="RemoteStore";class z4{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(o=>{s.enqueueAndForget(async()=>{Ci(this)&&(ee(Ti,"Restarting streams for network reachability change."),await async function(c){const d=de(c);d.Ia.add(4),await lc(d),d.Aa.set("Unknown"),d.Ia.delete(4),await mh(d)}(this))})}),this.Aa=new B4(s,r)}}async function mh(t){if(Ci(t))for(const e of t.da)await e(!0)}async function lc(t){for(const e of t.da)await e(!1)}function LE(t,e){const n=de(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),m0(n)?f0(n):qo(n).x_()&&h0(n,e))}function d0(t,e){const n=de(t),s=qo(n);n.Ta.delete(e),s.x_()&&OE(n,e),n.Ta.size===0&&(s.x_()?s.B_():Ci(n)&&n.Aa.set("Unknown"))}function h0(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}qo(t).H_(e)}function OE(t,e){t.Ra.$e(e),qo(t).Y_(e)}function f0(t){t.Ra=new L3({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),qo(t).start(),t.Aa.aa()}function m0(t){return Ci(t)&&!qo(t).M_()&&t.Ta.size>0}function Ci(t){return de(t).Ia.size===0}function FE(t){t.Ra=void 0}async function H4(t){t.Aa.set("Online")}async function W4(t){t.Ta.forEach((e,n)=>{h0(t,e)})}async function G4(t,e){FE(t),m0(t)?(t.Aa.la(e),f0(t)):t.Aa.set("Unknown")}async function K4(t,e,n){if(t.Aa.set("Online"),e instanceof SE&&e.state===2&&e.cause)try{await async function(r,i){const o=i.cause;for(const l of i.targetIds)r.Ta.has(l)&&(await r.remoteSyncer.rejectListen(l,o),r.Ta.delete(l),r.Ra.removeTarget(l))}(t,e)}catch(s){ee(Ti,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await jd(t,s)}else if(e instanceof Au?t.Ra.Ye(e):e instanceof bE?t.Ra.it(e):t.Ra.et(e),!n.isEqual(ue.min()))try{const s=await DE(t.localStore);n.compareTo(s)>=0&&await function(i,o){const l=i.Ra.Pt(o);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ta.get(d);h&&i.Ta.set(d,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,d)=>{const h=i.Ta.get(c);if(!h)return;i.Ta.set(c,h.withResumeToken(Nt.EMPTY_BYTE_STRING,h.snapshotVersion)),OE(i,c);const f=new dr(h.target,c,d,h.sequenceNumber);h0(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(s){ee(Ti,"Failed to raise snapshot:",s),await jd(t,s)}}async function jd(t,e,n){if(!Ko(e))throw e;t.Ia.add(1),await lc(t),t.Aa.set("Offline"),n||(n=()=>DE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ee(Ti,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await mh(t)})}function UE(t,e){return e().catch(n=>jd(t,n,e))}async function ph(t){const e=de(t),n=Dr(e);let s=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Qg;for(;q4(e);)try{const r=await C4(e.localStore,s);if(r===null){e.Pa.length===0&&n.B_();break}s=r.batchId,X4(e,r)}catch(r){await jd(e,r)}$E(e)&&BE(e)}function q4(t){return Ci(t)&&t.Pa.length<10}function X4(t,e){t.Pa.push(e);const n=Dr(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function $E(t){return Ci(t)&&!Dr(t).M_()&&t.Pa.length>0}function BE(t){Dr(t).start()}async function Q4(t){Dr(t).na()}async function Y4(t){const e=Dr(t);for(const n of t.Pa)e.X_(n.mutations)}async function J4(t,e,n){const s=t.Pa.shift(),r=r0.from(s,e,n);await UE(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await ph(t)}async function Z4(t,e){e&&Dr(t).Z_&&await async function(s,r){if(function(o){return M3(o)&&o!==K.ABORTED}(r.code)){const i=s.Pa.shift();Dr(s).N_(),await UE(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await ph(s)}}(t,e),$E(t)&&BE(t)}async function Ew(t,e){const n=de(t);n.asyncQueue.verifyOperationInProgress(),ee(Ti,"RemoteStore received new credentials");const s=Ci(n);n.Ia.add(3),await lc(n),s&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await mh(n)}async function e6(t,e){const n=de(t);e?(n.Ia.delete(2),await mh(n)):e||(n.Ia.add(2),await lc(n),n.Aa.set("Unknown"))}function qo(t){return t.Va||(t.Va=function(n,s,r){const i=de(n);return i.ia(),new O4(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Zo:H4.bind(null,t),e_:W4.bind(null,t),n_:G4.bind(null,t),J_:K4.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),m0(t)?f0(t):t.Aa.set("Unknown")):(await t.Va.stop(),FE(t))})),t.Va}function Dr(t){return t.ma||(t.ma=function(n,s,r){const i=de(n);return i.ia(),new F4(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:Q4.bind(null,t),n_:Z4.bind(null,t),ea:Y4.bind(null,t),ta:J4.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await ph(t)):(await t.ma.stop(),t.Pa.length>0&&(ee(Ti,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new Tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,l=new p0(e,n,o,r,i);return l.start(s),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function g0(t,e){if(Vs("AsyncQueue",`${e}: ${t}`),Ko(t))return new re(K.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{static emptySet(e){return new go(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ie.comparator(n.key,s.key):(n,s)=>ie.comparator(n.key,s.key),this.keyedMap=Va(),this.sortedSet=new He(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof go)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new go;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(){this.fa=new He(ie.comparator)}track(e){const n=e.doc.key,s=this.fa.get(n);s?e.type!==0&&s.type===3?this.fa=this.fa.insert(n,e):e.type===3&&s.type!==1?this.fa=this.fa.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.fa=this.fa.remove(n):e.type===1&&s.type===2?this.fa=this.fa.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):ae(63341,{At:e,ga:s}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,s)=>{e.push(s)}),e}}class Io{constructor(e,n,s,r,i,o,l,c,d){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Io(e,n,go.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class n6{constructor(){this.queries=kw(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,s){const r=de(n),i=r.queries;r.queries=kw(),i.forEach((o,l)=>{for(const c of l.wa)c.onError(s)})})(this,new re(K.ABORTED,"Firestore shutting down"))}}function kw(){return new ji(t=>cE(t),lh)}async function s6(t,e){const n=de(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.Sa()&&e.ba()&&(s=2):(i=new t6,s=e.ba()?0:1);try{switch(s){case 0:i.ya=await n.onListen(r,!0);break;case 1:i.ya=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const l=g0(o,`Initialization of query '${Fi(e.query)}' failed`);return void e.onError(l)}n.queries.set(r,i),i.wa.push(e),e.va(n.onlineState),i.ya&&e.Ca(i.ya)&&y0(n)}async function r6(t,e){const n=de(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.wa.indexOf(e);o>=0&&(i.wa.splice(o,1),i.wa.length===0?r=e.ba()?0:1:!i.Sa()&&e.ba()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function i6(t,e){const n=de(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const l of o.wa)l.Ca(r)&&(s=!0);o.ya=r}}s&&y0(n)}function o6(t,e,n){const s=de(t),r=s.queries.get(e);if(r)for(const i of r.wa)i.onError(n);s.queries.delete(e)}function y0(t){t.Da.forEach(e=>{e.next()})}var op,jw;(jw=op||(op={})).Fa="default",jw.Cache="cache";class a6{constructor(e,n,s){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=s||{}}Ca(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Io(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const s=n!=="Offline";return(!this.options.ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Io.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==op.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e){this.key=e}}class HE{constructor(e){this.key=e}}class l6{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ge(),this.mutatedKeys=ge(),this.Xa=uE(e),this.eu=new go(this.Xa)}get tu(){return this.Ha}nu(e,n){const s=n?n.ru:new Nw,r=n?n.eu:this.eu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,l=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,f)=>{const m=r.get(h),y=ch(this.query,f)?f:null,b=!!m&&this.mutatedKeys.has(m.key),C=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let I=!1;m&&y?m.data.isEqual(y.data)?b!==C&&(s.track({type:3,doc:y}),I=!0):this.iu(m,y)||(s.track({type:2,doc:y}),I=!0,(c&&this.Xa(y,c)>0||d&&this.Xa(y,d)<0)&&(l=!0)):!m&&y?(s.track({type:0,doc:y}),I=!0):m&&!y&&(s.track({type:1,doc:m}),I=!0,(c||d)&&(l=!0)),I&&(y?(o=o.add(y),i=C?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),s.track({type:1,doc:h})}return{eu:o,ru:s,Ds:l,mutatedKeys:i}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((h,f)=>function(y,b){const C=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae(20277,{At:I})}};return C(y)-C(b)}(h.type,f.type)||this.Xa(h.doc,f.doc)),this.su(s),r=r!=null&&r;const l=n&&!r?this.ou():[],c=this.Za.size===0&&this.current&&!r?1:0,d=c!==this.Ya;return this.Ya=c,o.length!==0||d?{snapshot:new Io(this.query,e.eu,i,o,e.mutatedKeys,c===0,d,!1,!!s&&s.resumeToken.approximateByteSize()>0),_u:l}:{_u:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Nw,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ge(),this.eu.forEach(s=>{this.au(s.key)&&(this.Za=this.Za.add(s.key))});const n=[];return e.forEach(s=>{this.Za.has(s)||n.push(new HE(s))}),this.Za.forEach(s=>{e.has(s)||n.push(new zE(s))}),n}uu(e){this.Ha=e.qs,this.Za=ge();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Io.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const x0="SyncEngine";class c6{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class u6{constructor(e){this.key=e,this.lu=!1}}class d6{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new ji(l=>cE(l),lh),this.Tu=new Map,this.Iu=new Set,this.du=new He(ie.comparator),this.Eu=new Map,this.Au=new a0,this.Ru={},this.Vu=new Map,this.mu=Co.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function h6(t,e,n=!0){const s=QE(t);let r;const i=s.Pu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.cu()):r=await WE(s,e,n,!0),r}async function f6(t,e){const n=QE(t);await WE(n,e,!0,!1)}async function WE(t,e,n,s){const r=await I4(t.localStore,ss(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return s&&(l=await m6(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&LE(t.remoteStore,r),l}async function m6(t,e,n,s,r){t.gu=(f,m,y)=>async function(C,I,x,v){let _=I.view.nu(x);_.Ds&&(_=await ww(C.localStore,I.query,!1).then(({documents:T})=>I.view.nu(T,_)));const P=v&&v.targetChanges.get(I.targetId),D=v&&v.targetMismatches.get(I.targetId)!=null,A=I.view.applyChanges(_,C.isPrimaryClient,P,D);return Iw(C,I.targetId,A._u),A.snapshot}(t,f,m,y);const i=await ww(t.localStore,e,!0),o=new l6(e,i.qs),l=o.nu(i.documents),c=ac.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),d=o.applyChanges(l,t.isPrimaryClient,c);Iw(t,n,d._u);const h=new c6(e,n,o);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),d.snapshot}async function p6(t,e,n){const s=de(t),r=s.Pu.get(e),i=s.Tu.get(r.targetId);if(i.length>1)return s.Tu.set(r.targetId,i.filter(o=>!lh(o,e))),void s.Pu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await rp(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&d0(s.remoteStore,r.targetId),ap(s,r.targetId)}).catch(Go)):(ap(s,r.targetId),await rp(s.localStore,r.targetId,!0))}async function g6(t,e){const n=de(t),s=n.Pu.get(e),r=n.Tu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),d0(n.remoteStore,s.targetId))}async function y6(t,e,n){const s=T6(t);try{const r=await function(o,l){const c=de(o),d=Re.now(),h=l.reduce((y,b)=>y.add(b.key),ge());let f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let b=Ls(),C=ge();return c.Os.getEntries(y,h).next(I=>{b=I,b.forEach((x,v)=>{v.isValidDocument()||(C=C.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,b)).next(I=>{f=I;const x=[];for(const v of l){const _=I3(v,f.get(v.key).overlayedDocument);_!=null&&x.push(new Hr(v.key,_,nE(_.value.mapValue),$n.exists(!0)))}return c.mutationQueue.addMutationBatch(y,d,x,l)}).next(I=>{m=I;const x=I.applyToLocalDocumentSet(f,C);return c.documentOverlayCache.saveOverlays(y,I.batchId,x)})}).then(()=>({batchId:m.batchId,changes:hE(f)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(o,l,c){let d=o.Ru[o.currentUser.toKey()];d||(d=new He(fe)),d=d.insert(l,c),o.Ru[o.currentUser.toKey()]=d}(s,r.batchId,n),await cc(s,r.changes),await ph(s.remoteStore)}catch(r){const i=g0(r,"Failed to persist write");n.reject(i)}}async function GE(t,e){const n=de(t);try{const s=await k4(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.Eu.get(i);o&&(Ne(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.lu=!0:r.modifiedDocuments.size>0?Ne(o.lu,14607):r.removedDocuments.size>0&&(Ne(o.lu,42227),o.lu=!1))}),await cc(n,s,e)}catch(s){await Go(s)}}function Cw(t,e,n){const s=de(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Pu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&r.push(l.snapshot)}),function(o,l){const c=de(o);c.onlineState=l;let d=!1;c.queries.forEach((h,f)=>{for(const m of f.wa)m.va(l)&&(d=!0)}),d&&y0(c)}(s.eventManager,e),r.length&&s.hu.J_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function x6(t,e,n){const s=de(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Eu.get(e),i=r&&r.key;if(i){let o=new He(ie.comparator);o=o.insert(i,Mt.newNoDocument(i,ue.min()));const l=ge().add(i),c=new hh(ue.min(),new Map,new He(fe),o,l);await GE(s,c),s.du=s.du.remove(i),s.Eu.delete(e),v0(s)}else await rp(s.localStore,e,!1).then(()=>ap(s,e,n)).catch(Go)}async function v6(t,e){const n=de(t),s=e.batch.batchId;try{const r=await N4(n.localStore,e);qE(n,s,null),KE(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await cc(n,r)}catch(r){await Go(r)}}async function w6(t,e,n){const s=de(t);try{const r=await function(o,l){const c=de(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,l).next(f=>(Ne(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(d,f))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(s.localStore,e);qE(s,e,n),KE(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await cc(s,r)}catch(r){await Go(r)}}function KE(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function qE(t,e,n){const s=de(t);let r=s.Ru[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Ru[s.currentUser.toKey()]=r}}function ap(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Tu.get(e))t.Pu.delete(s),n&&t.hu.pu(s,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(s=>{t.Au.containsKey(s)||XE(t,s)})}function XE(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(d0(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),v0(t))}function Iw(t,e,n){for(const s of n)s instanceof zE?(t.Au.addReference(s.key,e),_6(t,s)):s instanceof HE?(ee(x0,"Document no longer in limbo: "+s.key),t.Au.removeReference(s.key,e),t.Au.containsKey(s.key)||XE(t,s.key)):ae(19791,{yu:s})}function _6(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Iu.has(s)||(ee(x0,"New document in limbo: "+n),t.Iu.add(s),v0(t))}function v0(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new ie(Ue.fromString(e)),s=t.mu.next();t.Eu.set(s,new u6(n)),t.du=t.du.insert(n,s),LE(t.remoteStore,new dr(ss(t0(n.path)),s,"TargetPurposeLimboResolution",rh.ue))}}async function cc(t,e,n){const s=de(t),r=[],i=[],o=[];s.Pu.isEmpty()||(s.Pu.forEach((l,c)=>{o.push(s.gu(c,e,n).then(d=>{var h;if((d||n)&&s.isPrimaryClient){const f=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;s.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(d){r.push(d);const f=c0.Es(c.targetId,d);i.push(f)}}))}),await Promise.all(o),s.hu.J_(r),await async function(c,d){const h=de(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>H.forEach(d,m=>H.forEach(m.Is,y=>h.persistence.referenceDelegate.addReference(f,m.targetId,y)).next(()=>H.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(f,m.targetId,y)))))}catch(f){if(!Ko(f))throw f;ee(u0,"Failed to update sequence numbers: "+f)}for(const f of d){const m=f.targetId;if(!f.fromCache){const y=h.Fs.get(m),b=y.snapshotVersion,C=y.withLastLimboFreeSnapshotVersion(b);h.Fs=h.Fs.insert(m,C)}}}(s.localStore,i))}async function b6(t,e){const n=de(t);if(!n.currentUser.isEqual(e)){ee(x0,"User change. New user:",e.toKey());const s=await RE(n.localStore,e);n.currentUser=e,function(i,o){i.Vu.forEach(l=>{l.forEach(c=>{c.reject(new re(K.CANCELLED,o))})}),i.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await cc(n,s.Bs)}}function S6(t,e){const n=de(t),s=n.Eu.get(e);if(s&&s.lu)return ge().add(s.key);{let r=ge();const i=n.Tu.get(e);if(!i)return r;for(const o of i){const l=n.Pu.get(o);r=r.unionWith(l.view.tu)}return r}}function QE(t){const e=de(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=GE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=S6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=x6.bind(null,e),e.hu.J_=i6.bind(null,e.eventManager),e.hu.pu=o6.bind(null,e.eventManager),e}function T6(t){const e=de(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=v6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=w6.bind(null,e),e}class Cd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=fh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return E4(this.persistence,new b4,e.initialUser,this.serializer)}Du(e){return new AE(l0.Vi,this.serializer)}bu(e){return new A4}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Cd.provider={build:()=>new Cd};class E6 extends Cd{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Ne(this.persistence.referenceDelegate instanceof kd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new a4(s,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?qt.withCacheSize(this.cacheSizeBytes):qt.DEFAULT;return new AE(s=>kd.Vi(s,n),this.serializer)}}class lp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Cw(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=b6.bind(null,this.syncEngine),await e6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new n6}()}createDatastore(e){const n=fh(e.databaseInfo.databaseId),s=function(i){return new L4(i)}(e.databaseInfo);return function(i,o,l,c){return new $4(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,r,i,o,l){return new z4(s,r,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Cw(this.syncEngine,n,0),function(){return Sw.C()?new Sw:new R4}())}createSyncEngine(e,n){return function(r,i,o,l,c,d,h){const f=new d6(r,i,o,l,c,d);return h&&(f.fu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const i=de(r);ee(Ti,"RemoteStore shutting down."),i.Ia.add(5),await lc(i),i.Ea.shutdown(),i.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}lp.provider={build:()=>new lp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Vs("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr="FirestoreClient";class k6{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=Rt.UNAUTHENTICATED,this.clientId=qg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{ee(Mr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(ee(Mr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=g0(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Nf(t,e){t.asyncQueue.verifyOperationInProgress(),ee(Mr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await RE(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>{jr("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{ee("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(r=>{jr("Terminating Firestore due to IndexedDb database deletion failed",r)})}),t._offlineComponents=e}async function Pw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await j6(t);ee(Mr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>Ew(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>Ew(e.remoteStore,r)),t._onlineComponents=e}async function j6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ee(Mr,"Using user provided OfflineComponentProvider");try{await Nf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===K.FAILED_PRECONDITION||r.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;jr("Error using user provided cache. Falling back to memory cache: "+n),await Nf(t,new Cd)}}else ee(Mr,"Using default OfflineComponentProvider"),await Nf(t,new E6(void 0));return t._offlineComponents}async function YE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ee(Mr,"Using user provided OnlineComponentProvider"),await Pw(t,t._uninitializedComponentsProvider._online)):(ee(Mr,"Using default OnlineComponentProvider"),await Pw(t,new lp))),t._onlineComponents}function C6(t){return YE(t).then(e=>e.syncEngine)}async function I6(t){const e=await YE(t),n=e.eventManager;return n.onListen=h6.bind(null,e.syncEngine),n.onUnlisten=p6.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=f6.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=g6.bind(null,e.syncEngine),n}function P6(t,e,n={}){const s=new Tr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,d){const h=new N6({next:m=>{h.Ou(),o.enqueueAndForget(()=>r6(i,f));const y=m.docs.has(l);!y&&m.fromCache?d.reject(new re(K.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&c&&c.source==="server"?d.reject(new re(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),f=new a6(t0(l.path),h,{includeMetadataChanges:!0,ka:!0});return s6(i,f)}(await I6(t),t.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="firestore.googleapis.com",Rw=!0;class Dw{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new re(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ZE,this.ssl=Rw}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Rw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=PE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<i4)throw new re(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}H5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JE((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new re(K.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new re(K.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new re(K.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class w0{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Dw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new D5;switch(s.type){case"firstParty":return new O5(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new re(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=Aw.get(n);s&&(ee("ComponentProvider","Removing Datastore"),Aw.delete(n),s.terminate())}(this),Promise.resolve()}}function A6(t,e,n,s={}){var r;t=Cr(t,w0);const i=Bo(e),o=t._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;i&&(qS(`https://${c}`),XS("Firestore",!0)),o.host!==ZE&&o.host!==c&&jr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},o),{host:c,ssl:i,emulatorOptions:s});if(!vi(d,l)&&(t._setSettings(d),s.mockUserToken)){let h,f;if(typeof s.mockUserToken=="string")h=s.mockUserToken,f=Rt.MOCK_USER;else{h=zP(s.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const m=s.mockUserToken.sub||s.mockUserToken.user_id;if(!m)throw new re(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Rt(m)}t._authCredentials=new M5(new zT(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new _0(this.firestore,e,this._query)}}class ot{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ml(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ot(this.firestore,e,this._key)}toJSON(){return{type:ot._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(ic(n,ot._jsonSchema))return new ot(e,s||null,new ie(Ue.fromString(n.referencePath)))}}ot._jsonSchemaVersion="firestore/documentReference/1.0",ot._jsonSchema={type:nt("string",ot._jsonSchemaVersion),referencePath:nt("string")};class Ml extends _0{constructor(e,n,s){super(e,n,t0(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ot(this.firestore,null,new ie(e))}withConverter(e){return new Ml(this.firestore,e,this._path)}}function Ru(t,e,...n){if(t=Et(t),arguments.length===1&&(e=qg.newId()),z5("doc","path",e),t instanceof w0){const s=Ue.fromString(e,...n);return qv(s),new ot(t,null,new ie(s))}{if(!(t instanceof ot||t instanceof Ml))throw new re(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Ue.fromString(e,...n));return qv(s),new ot(t.firestore,t instanceof Ml?t.converter:null,new ie(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw="AsyncQueue";class Vw{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new ME(this,"async_queue_retry"),this.oc=()=>{const s=Ef();s&&ee(Mw,"Visibility state changed to "+s.visibilityState),this.F_.y_()},this._c=e;const n=Ef();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Ef();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Tr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Ko(e))throw e;ee(Mw,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(s=>{throw this.tc=s,this.nc=!1,Vs("INTERNAL UNHANDLED ERROR: ",Lw(s)),s}).then(s=>(this.nc=!1,s))));return this._c=n,n}enqueueAfterDelay(e,n,s){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const r=p0.createAndSchedule(this,e,n,s,i=>this.lc(i));return this.ec.push(r),r}ac(){this.tc&&ae(47125,{hc:Lw(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function Lw(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class uc extends w0{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new Vw,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Vw(e),this._firestoreClient=void 0,await e}}}function R6(t,e){const n=typeof t=="object"?t:ZS(),s=typeof t=="string"?t:e||wd,r=Lg(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=$P("firestore");i&&A6(r,...i)}return r}function eN(t){if(t._terminated)throw new re(K.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||D6(t),t._firestoreClient}function D6(t){var e,n,s;const r=t._freezeSettings(),i=function(l,c,d,h){return new t3(l,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,JE(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=r.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new k6(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wn(Nt.fromBase64String(e))}catch(n){throw new re(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new wn(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:wn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ic(e,wn._jsonSchema))return wn.fromBase64String(e.bytes)}}wn._jsonSchemaVersion="firestore/bytes/1.0",wn._jsonSchema={type:nt("string",wn._jsonSchemaVersion),bytes:nt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new re(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new re(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new re(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return fe(this._lat,e._lat)||fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:is._jsonSchemaVersion}}static fromJSON(e){if(ic(e,is._jsonSchema))return new is(e.latitude,e.longitude)}}is._jsonSchemaVersion="firestore/geoPoint/1.0",is._jsonSchema={type:nt("string",is._jsonSchemaVersion),latitude:nt("number"),longitude:nt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:os._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ic(e,os._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new os(e.vectorValues);throw new re(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}os._jsonSchemaVersion="firestore/vectorValue/1.0",os._jsonSchema={type:nt("string",os._jsonSchemaVersion),vectorValues:nt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M6=/^__.*__$/;class V6{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Hr(e,this.data,this.fieldMask,n,this.fieldTransforms):new oc(e,this.data,n,this.fieldTransforms)}}class tN{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Hr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function nN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae(40011,{Ec:t})}}class S0{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new S0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Rc({path:s,mc:!1});return r.fc(e),r}gc(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Rc({path:s,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Id(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(nN(this.Ec)&&M6.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class L6{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||fh(e)}Dc(e,n,s,r=!1){return new S0({Ec:e,methodName:n,bc:s,path:_t.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sN(t){const e=t._freezeSettings(),n=fh(t._databaseId);return new L6(t._databaseId,!!e.ignoreUndefinedProperties,n)}function O6(t,e,n,s,r,i={}){const o=t.Dc(i.merge||i.mergeFields?2:0,e,n,r);T0("Data must be an object, but it was:",o,s);const l=rN(s,o);let c,d;if(i.merge)c=new ln(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const m=cp(e,f,n);if(!o.contains(m))throw new re(K.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);oN(h,m)||h.push(m)}c=new ln(h),d=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,d=o.fieldTransforms;return new V6(new Qt(l),c,d)}class yh extends b0{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yh}}function F6(t,e,n,s){const r=t.Dc(1,e,n);T0("Data must be an object, but it was:",r,s);const i=[],o=Qt.empty();zr(s,(c,d)=>{const h=E0(e,c,n);d=Et(d);const f=r.gc(h);if(d instanceof yh)i.push(h);else{const m=xh(d,f);m!=null&&(i.push(h),o.set(h,m))}});const l=new ln(i);return new tN(o,l,r.fieldTransforms)}function U6(t,e,n,s,r,i){const o=t.Dc(1,e,n),l=[cp(e,s,n)],c=[r];if(i.length%2!=0)throw new re(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(cp(e,i[m])),c.push(i[m+1]);const d=[],h=Qt.empty();for(let m=l.length-1;m>=0;--m)if(!oN(d,l[m])){const y=l[m];let b=c[m];b=Et(b);const C=o.gc(y);if(b instanceof yh)d.push(y);else{const I=xh(b,C);I!=null&&(d.push(y),h.set(y,I))}}const f=new ln(d);return new tN(h,f,o.fieldTransforms)}function xh(t,e){if(iN(t=Et(t)))return T0("Unsupported field value:",e,t),rN(t,e);if(t instanceof b0)return function(s,r){if(!nN(r.Ec))throw r.wc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.wc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(s,r){const i=[];let o=0;for(const l of s){let c=xh(l,r.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(s,r){if((s=Et(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return T3(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=Re.fromDate(s);return{timestampValue:Nd(r.serializer,i)}}if(s instanceof Re){const i=new Re(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Nd(r.serializer,i)}}if(s instanceof is)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof wn)return{bytesValue:TE(r.serializer,s._byteString)};if(s instanceof ot){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:o0(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof os)return function(o,l){return{mapValue:{fields:{[ZT]:{stringValue:tE},[_d]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw l.wc("VectorValues must only contain numeric values.");return n0(l.serializer,d)})}}}}}}(s,r);throw r.wc(`Unsupported field value: ${Xg(s)}`)}(t,e)}function rN(t,e){const n={};return KT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zr(t,(s,r)=>{const i=xh(r,e.Vc(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function iN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Re||t instanceof is||t instanceof wn||t instanceof ot||t instanceof b0||t instanceof os)}function T0(t,e,n){if(!iN(n)||!WT(n)){const s=Xg(n);throw s==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+s)}}function cp(t,e,n){if((e=Et(e))instanceof gh)return e._internalPath;if(typeof e=="string")return E0(t,e);throw Id("Field path arguments must be of type string or ",t,!1,void 0,n)}const $6=new RegExp("[~\\*/\\[\\]]");function E0(t,e,n){if(e.search($6)>=0)throw Id(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new gh(...e.split("."))._internalPath}catch{throw Id(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Id(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${s}`),o&&(c+=` in document ${r}`),c+=")"),new re(K.INVALID_ARGUMENT,l+t+c)}function oN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new B6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(lN("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class B6 extends aN{data(){return super.data()}}function lN(t,e){return typeof e=="string"?E0(t,e):e instanceof gh?e._internalPath:e._delegate._internalPath}class z6{convertValue(e,n="none"){switch(Rr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ar(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ae(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return zr(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(e){var n,s,r;const i=(r=(s=(n=e.fields)===null||n===void 0?void 0:n[_d].arrayValue)===null||s===void 0?void 0:s.values)===null||r===void 0?void 0:r.map(o=>Xe(o.doubleValue));return new os(i)}convertGeoPoint(e){return new is(Xe(e.latitude),Xe(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=oh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Il(e));default:return null}}convertTimestamp(e){const n=Pr(e);return new Re(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Ue.fromString(e);Ne(IE(s),9688,{name:e});const r=new Pl(s.get(1),s.get(3)),i=new ie(s.popFirst(5));return r.isEqual(n)||Vs(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H6(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class Oa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class di extends aN{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Du(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(lN("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new re(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=di._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}di._jsonSchemaVersion="firestore/documentSnapshot/1.0",di._jsonSchema={type:nt("string",di._jsonSchemaVersion),bundleSource:nt("string","DocumentSnapshot"),bundleName:nt("string"),bundle:nt("string")};class Du extends di{data(e={}){return super.data(e)}}class tl{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Oa(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Du(this._firestore,this._userDataWriter,s.key,s,new Oa(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new re(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(l=>{const c=new Du(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Oa(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Du(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Oa(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let d=-1,h=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:W6(l.type),doc:c,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new re(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=tl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=qg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function W6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G6(t){t=Cr(t,ot);const e=Cr(t.firestore,uc);return P6(eN(e),t._key).then(n=>Y6(e,t,n))}tl._jsonSchemaVersion="firestore/querySnapshot/1.0",tl._jsonSchema={type:nt("string",tl._jsonSchemaVersion),bundleSource:nt("string","QuerySnapshot"),bundleName:nt("string"),bundle:nt("string")};class K6 extends z6{constructor(e){super(),this.firestore=e}convertBytes(e){return new wn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ot(this.firestore,null,n)}}function q6(t,e,n){t=Cr(t,ot);const s=Cr(t.firestore,uc),r=H6(t.converter,e,n);return N0(s,[O6(sN(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,$n.none())])}function X6(t,e,n,...s){t=Cr(t,ot);const r=Cr(t.firestore,uc),i=sN(r);let o;return o=typeof(e=Et(e))=="string"||e instanceof gh?U6(i,"updateDoc",t._key,e,n,s):F6(i,"updateDoc",t._key,e),N0(r,[o.toMutation(t._key,$n.exists(!0))])}function Q6(t){return N0(Cr(t.firestore,uc),[new s0(t._key,$n.none())])}function N0(t,e){return function(s,r){const i=new Tr;return s.asyncQueue.enqueueAndForget(async()=>y6(await C6(s),r,i)),i.promise}(eN(t),e)}function Y6(t,e,n){const s=n.docs.get(e._key),r=new K6(t);return new di(t,r,e._key,s,new Oa(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){Wo=r})(zo),Eo(new wi("firestore",(s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),l=new uc(new V5(s.getProvider("auth-internal")),new F5(o,s.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new re(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pl(d.options.projectId,h)}(o,r),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),br(zv,Hv,e),br(zv,Hv,"esm2017")})();const J6={apiKey:"AIzaSyCTr86LV8S196qTuVcVl9jwpTzYML4xRk4",authDomain:"studyahh-2ddd9.firebaseapp.com",projectId:"studyahh-2ddd9",storageBucket:"studyahh-2ddd9.firebasestorage.app",messagingSenderId:"618735598254",appId:"1:618735598254:web:f06a34ebb92632e01e4b3f"},cN=JS(J6),ru=A5(cN),Mu=R6(cN),uN=S.createContext(),dN=({children:t})=>{const[e,n]=S.useState(null),[s,r]=S.useState(null),[i,o]=S.useState(!0),l=async y=>{try{console.log("Fetching user profile for UID:",y);const b=await G6(Ru(Mu,"users",y));if(b.exists()){const C=b.data();console.log("User profile found:",C),r(C)}else console.log("No user profile found in Firestore"),r(null)}catch(b){console.error("Error fetching user profile:",b),r(null)}};S.useEffect(()=>{const y=vD(ru,async b=>{n(b),b?await l(b.uid):r(null),o(!1)});return()=>y()},[]);const c=(y,b)=>pD(ru,y,b),d=(y,b)=>gD(ru,y,b),h=()=>wD(ru),f=async y=>{if(!e)throw new Error("No user logged in");try{return await X6(Ru(Mu,"users",e.uid),{name:y,updatedAt:new Date}),r(b=>({...b,name:y,updatedAt:new Date})),!0}catch(b){throw console.error("Error updating user name:",b),b}},m=async()=>{if(!e)throw new Error("No user logged in");try{return await Q6(Ru(Mu,"users",e.uid)),await _D(e),n(null),r(null),!0}catch(y){throw console.error("Error deleting user account:",y),y}};return a.jsx(uN.Provider,{value:{user:e,userProfile:s,signup:c,login:d,logout:h,updateUserName:f,deleteUserAccount:m,fetchUserProfile:l},children:!i&&t})},Ii=()=>S.useContext(uN),hN=S.createContext(),k0=()=>{const t=S.useContext(hN);if(!t)throw new Error("useTimer must be used within a TimerProvider");return t},Z6=({children:t})=>{const[e,n]=S.useState({isRunning:!1,mode:"pomodoro",secondsLeft:1500,stopwatchSeconds:0,isPomodoroBreak:!1,pomodoroCount:0,subjectName:"",customMinutes:25,startTime:null,pausedTime:null,lastUpdateTime:null}),{isRunning:s,mode:r,secondsLeft:i,stopwatchSeconds:o,isPomodoroBreak:l,pomodoroCount:c,subjectName:d,startTime:h,pausedTime:f,lastUpdateTime:m,customMinutes:y}=e,b=S.useCallback(()=>h?s?Math.floor((Date.now()-h)/1e3):f!==null?f:0:0,[h,s,f]),C=()=>{if(r==="stopwatch"){const k=b();n(R=>({...R,stopwatchSeconds:k}))}else{const k=b(),R=I(r),M=Math.max(0,R-k);n(E=>({...E,secondsLeft:M}))}};S.useEffect(()=>{if(!s)return;const k=setInterval(()=>{if(C(),r!=="stopwatch"){const R=b(),M=I(r);R>=M&&T()}},100);return()=>clearInterval(k)},[s,r,h,f,y,l]),S.useEffect(()=>{const k=()=>{if(document.hidden){if(s){const R=b();n(M=>({...M,pausedTime:R,lastUpdateTime:Date.now()}))}}else if(s&&f!==null){const R=Date.now(),M=R-(m||R);n(E=>({...E,startTime:E.startTime?E.startTime+M:R,pausedTime:null}))}};return document.addEventListener("visibilitychange",k),()=>document.removeEventListener("visibilitychange",k)},[s,f,m]);const I=k=>{switch(k){case"pomodoro":return l?5*60:25*60;case"custom":return(y||25)*60;case"stopwatch":return 0;default:return 25*60}},x=S.useCallback(()=>{const k=Date.now();n(R=>({...R,isRunning:!0,startTime:R.pausedTime!==null?k-R.pausedTime*1e3:k,pausedTime:null,lastUpdateTime:k}))},[]),v=S.useCallback(()=>{const k=b();n(R=>({...R,isRunning:!1,pausedTime:k,lastUpdateTime:Date.now()}))},[b]),_=S.useCallback(()=>{const k=I(r);n(R=>({...R,isRunning:!1,secondsLeft:r==="stopwatch"?0:k,stopwatchSeconds:0,startTime:null,pausedTime:null,lastUpdateTime:null}))},[r]),P=S.useCallback(k=>{n(R=>{const M={...R,customMinutes:k};return!R.isRunning&&R.mode==="custom"&&(M.secondsLeft=(k||25)*60),M})},[]),D=S.useCallback(k=>{const R=I(k);n(M=>({...M,mode:k,secondsLeft:k==="stopwatch"?0:R,stopwatchSeconds:0,isPomodoroBreak:!1,pomodoroCount:0,startTime:null,pausedTime:null,lastUpdateTime:null}))},[]),A=S.useCallback(k=>{n(R=>({...R,subjectName:k}))},[]),T=()=>{r==="pomodoro"?n(l?k=>({...k,isPomodoroBreak:!1,pomodoroCount:k.pomodoroCount+1,startTime:Date.now(),pausedTime:null}):k=>({...k,isPomodoroBreak:!0,startTime:Date.now(),pausedTime:null})):v()},w=S.useCallback(k=>{const R=r==="stopwatch"?o:I(r)-i,M={...k,durationMinutes:Math.round(R/60*100)/100,timestamp:new Date().toISOString(),subjectName:d||k.subjectName},V=[...JSON.parse(localStorage.getItem("studySessions")||"[]"),M];localStorage.setItem("studySessions",JSON.stringify(V))},[r,o,i,d]),j={...e,startTimer:x,stopTimer:v,resetTimer:_,setCustomMinutes:P,setTimerMode:D,setTimerSubject:A,saveStudySession:w,getActualElapsedTime:b};return a.jsx(hN.Provider,{value:j,children:t})},fN=S.createContext(),jn=()=>{const t=S.useContext(fN);if(!t)throw new Error("useGamification must be used within a GamificationProvider");return t},eM=({children:t})=>{const[e,n]=S.useState(()=>{const E=localStorage.getItem("userStats"),V={xp:0,level:1,prestigeLevel:0,totalSessions:0,totalStudyTime:0,sessionHistory:[],currentStreak:0,longestStreak:0,lastStudyDate:null,streakSavers:3,badges:[],achievements:[],unlockedTitles:[],currentTitle:"Rookie Scholar",dailyQuests:[],weeklyQuests:[],completedQuestsToday:0,questStreak:0,weeklyXP:0,weeklyRank:0,friends:[],challenges:[],isPremium:!1,xpMultiplier:1,premiumSkins:[],currentSkin:"default",subjectMastery:{},weeklyGoal:0,weeklyProgress:0,totalXPEarned:0,lastRewardTime:null,rewardStreak:0,luckyStreak:0,jackpotCount:0};if(E){const $=JSON.parse(E);return{...V,...$,totalXPEarned:$.totalXPEarned??$.xp??0,totalSessions:$.totalSessions??0,totalStudyTime:$.totalStudyTime??0,subjectMastery:$.subjectMastery??{},achievements:$.achievements??[],dailyQuests:$.dailyQuests??[],weeklyQuests:$.weeklyQuests??[]}}return V}),[s,r]=S.useState([]),[i,o]=S.useState(!1);S.useState([]),S.useEffect(()=>{console.log(" Saving userStats to localStorage:",e),localStorage.setItem("userStats",JSON.stringify(e))},[e]);const l=(E,V,$=1)=>{const Q=Math.floor(E/.1),z=Math.min(3,1+E/120),F=Math.floor(e.currentStreak*(Math.log(e.currentStreak+1)*5)),W=e.subjectMastery[V]>=1e3?Q*.2:0,Y=1+e.prestigeLevel*.1,te=e.isPremium?e.xpMultiplier:1;let ce=Math.floor((Q*z+F+W)*Y*te);const ye=c(ce,E);return ce+=ye.bonusXP,{baseXP:Q,totalXP:ce,bonuses:{focus:Math.floor(Q*(z-1)),streak:F,mastery:Math.floor(W),prestige:Math.floor(ce*(Y-1)),premium:Math.floor(ce*(te-1)),variable:ye.bonusXP},reward:ye}},c=(E,V)=>{const $=Math.random(),Q=Math.min(2,V/60),z=e.sessionHistory.slice(0,10),F=z.length>0?z.reduce((Y,te)=>Y+te.durationMinutes,0)/z.length:V,W=V>F?1.5:1;return $<.1*W?{tier:"legendary",type:"XP_JACKPOT",bonusXP:Math.floor(E*5*Q),title:" LEGENDARY JACKPOT!",description:`+500% bonus XP for ${V}min session!`,animation:"jackpot",sound:"legendary",extras:{title:"Jackpot Hunter",badge:"legendary_jackpot"}}:$<.2*W?{tier:"epic",type:"XP_BONUS",bonusXP:Math.floor(E*2*Q),title:" EPIC BONUS!",description:"+200% bonus XP for great focus!",animation:"epic",sound:"epic"}:$<.3*W?{tier:"rare",type:"XP_BONUS",bonusXP:Math.floor(E*1.5*Q),title:" RARE BONUS!",description:"+150% bonus XP for consistency!",animation:"rare",sound:"rare"}:$<.4*W?{tier:"uncommon",type:"XP_BONUS",bonusXP:Math.floor(E*.5*Q),title:" Lucky Scholar!",description:"+50% bonus XP for good work!",animation:"uncommon",sound:"uncommon"}:{tier:"none",bonusXP:0}},d=E=>Math.floor(50*Math.pow(E,1.5)),h=E=>{let V=0;for(let $=1;$<=E;$++)V+=d($);return V},f=E=>{let V=1,$=0;for(;$<=E;)$+=d(V+1),$<=E&&V++;return V},m=()=>{const E=e.level,V=h(E),$=h(E+1),Q=Math.max(0,e.xp-V),z=$-V;return{current:Q,needed:z,percentage:Math.min(100,Math.max(0,Q/z*100))}},y=()=>{const E=new Date().toDateString(),V=e.lastStudyDate?new Date(e.lastStudyDate).toDateString():null;if(V===E)return{streak:e.currentStreak,isNewDay:!1,streakBroken:!1};const $=new Date;$.setDate($.getDate()-1);const Q=$.toDateString();let z,F=!1;if(V===Q)z=e.currentStreak+1;else{if(V&&e.streakSavers>0)return{streak:e.currentStreak,isNewDay:!0,streakBroken:!0,canUseSaver:!0};z=1,F=!0}return n(W=>({...W,currentStreak:z,longestStreak:Math.max(W.longestStreak,z),lastStudyDate:new Date().toISOString()})),C(z),{streak:z,isNewDay:!0,streakBroken:F}},b=()=>e.streakSavers>0?(n(E=>({...E,streakSavers:E.streakSavers-1,lastStudyDate:new Date().toISOString()})),_({type:"STREAK_SAVED",title:" Streak Protected!",description:`Used streak saver! ${e.streakSavers-1} remaining`,tier:"premium"}),!0):!1,C=E=>{[{days:3,title:"Getting Started",icon:"",xp:50},{days:7,title:"Week Warrior",icon:"",xp:100},{days:14,title:"Fortnight Fighter",icon:"",xp:200},{days:30,title:"Month Master",icon:"",xp:500},{days:50,title:"Unstoppable Force",icon:"",xp:750},{days:100,title:"Century Club",icon:"",xp:1500},{days:365,title:"Year Champion",icon:"",xp:5e3}].forEach($=>{E===$.days&&A({id:`streak_${$.days}`,name:$.title,description:`Maintained a ${$.days}-day study streak!`,icon:$.icon,xp:$.xp,type:"streak",tier:$.days>=100?"legendary":$.days>=30?"epic":"rare"})})},I=()=>{if(e.level<100)return!1;const E=e.prestigeLevel+1;return n(V=>({...V,level:1,xp:0,prestigeLevel:E,currentTitle:`Prestige ${E} Scholar`})),_({type:"PRESTIGE",title:` PRESTIGE ${E}!`,description:"Welcome to the elite! +10% permanent XP bonus",tier:"legendary",animation:"prestige"}),!0},x=(E,V,$=1)=>{const Q=l(E,V,$),z=e.level,F=e.xp+Q.totalXP,W=f(F);if(n(Y=>{const te={...Y,xp:F,level:W,totalSessions:(Y.totalSessions||0)+1,totalStudyTime:(Y.totalStudyTime||0)+E,totalXPEarned:(Y.totalXPEarned||Y.xp||0)+Q.totalXP,weeklyXP:(Y.weeklyXP||0)+Q.totalXP,subjectMastery:{...Y.subjectMastery,[V]:(Y.subjectMastery[V]||0)+E}};return console.log(" Awarding XP:",{sessionDuration:E,subjectName:V,oldXP:Y.xp,newXP:F,xpGained:Q.totalXP,oldTotalXPEarned:Y.totalXPEarned,newTotalXPEarned:te.totalXPEarned}),te}),_({type:"XP_EARNED",title:`+${Q.totalXP} XP`,description:"Great work!",tier:"common",details:Q.bonuses}),Q.reward.tier!=="none"&&_(Q.reward),W>z){const Y=W-z;for(let te=1;te<=Y;te++)v(z+te)}return y(),D(),Q},v=E=>{_({type:"LEVEL_UP",title:` LEVEL ${E}!`,description:"You're getting stronger!",tier:"epic",animation:"levelup",sound:"levelup"});const V={5:{title:"Rising Scholar",xp:100},10:{title:"Dedicated Learner",xp:250},25:{title:"Knowledge Seeker",xp:500},50:{title:"Academic Elite",xp:1e3},75:{title:"Master Scholar",xp:2e3},100:{title:"Academic Legend",xp:5e3,canPrestige:!0}};if(V[E]){const $=V[E];n(Q=>({...Q,currentTitle:$.title,xp:Q.xp+$.xp})),_({type:"MILESTONE",title:` ${$.title}`,description:`Level ${E} milestone! +${$.xp} bonus XP`,tier:E>=100?"legendary":E>=50?"epic":"rare"})}},_=E=>{const V={...E,id:Date.now()+Math.random(),timestamp:new Date().toISOString()};r($=>[...$,V]),o(!0),setTimeout(()=>{r($=>$.filter(Q=>Q.id!==V.id))},E.tier==="legendary"?5e3:3e3)},P={first_session:{id:"first_session",name:"First Steps",description:"Complete your first study session",icon:"",xp:25,condition:()=>e.totalSessions>=1,tier:"common"},session_marathon:{id:"session_marathon",name:"Marathon Master",description:"Study for 3+ hours in one session",icon:"",xp:200,condition:()=>e.sessionHistory.some(E=>E.durationMinutes>=180),tier:"rare"},level_10:{id:"level_10",name:"Rising Star",description:"Reach level 10",icon:"",xp:100,condition:()=>e.level>=10,tier:"uncommon"},level_50:{id:"level_50",name:"Academic Weapon",description:"Reach level 50",icon:"",xp:500,condition:()=>e.level>=50,tier:"epic"},hundred_hours:{id:"hundred_hours",name:"Century Scholar",description:"Study for 100+ total hours",icon:"",xp:300,condition:()=>e.totalStudyTime>=6e3,tier:"rare"},night_owl:{id:"night_owl",name:"Night Owl",description:"Study after 10 PM",icon:"",xp:50,condition:()=>e.sessionHistory.some(E=>new Date(E.timestamp).getHours()>=22),tier:"uncommon"},early_bird:{id:"early_bird",name:"Early Bird",description:"Study before 6 AM",icon:"",xp:75,condition:()=>e.sessionHistory.some(E=>new Date(E.timestamp).getHours()<6),tier:"uncommon"}},D=()=>{Object.values(P).forEach(E=>{!e.achievements.includes(E.id)&&E.condition()&&A(E)})},A=E=>{n(V=>({...V,achievements:[...V.achievements,E.id],xp:V.xp+E.xp})),_({type:"ACHIEVEMENT",title:` ${E.name}`,description:E.description,tier:E.tier,xp:E.xp,icon:E.icon,animation:"achievement"})},M={userStats:e,showRewards:i,rewardQueue:s,achievements:P,awardXP:x,updateStreak:y,useStreakSaver:b,addReward:_,addStudySession:E=>{const V={...E,timestamp:new Date().toISOString(),difficulty:E.difficulty||1,mood:E.mood||"neutral"},$=x(V.durationMinutes,V.subjectName,V.difficulty),Q={...V,xpEarned:$.totalXP,bonuses:$.bonuses};return n(z=>({...z,sessionHistory:[Q,...z.sessionHistory.slice(0,99)]})),Q},getUserRank:()=>e.prestigeLevel>0?`Prestige ${e.prestigeLevel} ${e.currentTitle}`:e.currentTitle,getXPProgress:m,getXPForLevel:d,generateDailyQuests:()=>{var F;const E=e.sessionHistory.length>0?Math.round(e.sessionHistory.reduce((W,Y)=>W+Y.durationMinutes,0)/e.sessionHistory.length):25,V=e.totalSessions>0&&e.sessionHistory.length>0?Math.max(1,Math.round(e.totalSessions/Math.max(1,Math.floor((Date.now()-new Date(((F=e.sessionHistory[e.sessionHistory.length-1])==null?void 0:F.timestamp)||Date.now()).getTime())/(1e3*60*60*24))))):1,$=Object.keys(e.subjectMastery||{}).length,z=[{id:"study_time",name:"Time Master",description:"Study for {target} minutes today",type:"time",targets:[Math.max(15,E-10),E,Math.min(120,E+15),Math.min(180,E+30)],xp:W=>Math.round(W*1.5),icon:""},{id:"session_count",name:"Session Warrior",description:"Complete {target} study sessions",type:"sessions",targets:[Math.max(1,V),Math.max(2,V+1),Math.max(3,V+2),Math.max(4,V+3)],xp:W=>W*25,icon:""},{id:"subject_variety",name:"Scholar's Variety",description:"Study {target} different subjects",type:"subjects",targets:$>0?[Math.min($,2),Math.min($,3),Math.min($+1,4)]:[2,3],xp:W=>W*30,icon:""},{id:"streak_maintain",name:"Streak Guardian",description:"Maintain your daily streak",type:"streak",targets:[1],xp:()=>50+Math.max(0,e.currentStreak)*5,icon:""}].sort(()=>Math.random()-.5).slice(0,3).map(W=>{const Y=W.targets[Math.floor(Math.random()*W.targets.length)];return{id:W.id+"_"+Date.now(),name:W.name,description:W.description.replace("{target}",Y),type:W.type,target:Y,progress:0,completed:!1,xp:W.xp(Y),icon:W.icon,deadline:new Date(Date.now()+24*60*60*1e3).toISOString()}});n(W=>({...W,dailyQuests:z}))},updateQuestProgress:(E,V=1,$=null)=>{n(Q=>{const z=Q.dailyQuests.map(F=>{if(F.completed||F.type!==E)return F;let W=F.progress;switch(E){case"time":W+=V;break;case"sessions":W+=1;break;case"subjects":const te=Q.sessionHistory.filter(ye=>new Date(ye.timestamp).toDateString()===new Date().toDateString());W=[...new Set(te.map(ye=>ye.subjectName))].length;break;case"streak":W=Q.currentStreak>0?1:0;break}const Y=W>=F.target;if(Y&&!F.completed){const te=F.xp||0;setTimeout(()=>{n(ce=>({...ce,xp:ce.xp+te,totalXPEarned:(ce.totalXPEarned||ce.xp||0)+te,weeklyXP:(ce.weeklyXP||0)+te,level:f(ce.xp+te)})),_({type:"QUEST_COMPLETE",title:` ${F.name}`,description:F.description,tier:"uncommon",xp:te})},100)}return{...F,progress:Math.min(W,F.target),completed:Y}});return{...Q,dailyQuests:z}})},checkAchievements:D,unlockAchievement:A,prestige:I,setShowRewards:o,calculateXP:l,getTotalXPForLevel:h,resetUserStats:()=>{localStorage.removeItem("userStats"),n({xp:0,level:1,prestigeLevel:0,totalSessions:0,totalStudyTime:0,sessionHistory:[],currentStreak:0,longestStreak:0,lastStudyDate:null,streakSavers:3,badges:[],achievements:[],unlockedTitles:[],currentTitle:"Rookie Scholar",dailyQuests:[],weeklyQuests:[],completedQuestsToday:0,questStreak:0,weeklyXP:0,weeklyRank:0,friends:[],challenges:[],isPremium:!1,xpMultiplier:1,premiumSkins:[],currentSkin:"default",subjectMastery:{},weeklyGoal:0,weeklyProgress:0,totalXPEarned:0,lastRewardTime:null,rewardStreak:0,luckyStreak:0,jackpotCount:0})}};return a.jsx(fN.Provider,{value:M,children:t})};function Js({children:t}){const{user:e}=Ii();return e?t:a.jsx(QI,{to:"/",replace:!0})}/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tM=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),nM=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),Ow=t=>{const e=nM(t);return e.charAt(0).toUpperCase()+e.slice(1)},mN=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),sM=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var rM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iM=S.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:r="",children:i,iconNode:o,...l},c)=>S.createElement("svg",{ref:c,...rM,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:mN("lucide",r),...!i&&!sM(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,h])=>S.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=(t,e)=>{const n=S.forwardRef(({className:s,...r},i)=>S.createElement(iM,{ref:i,iconNode:e,className:mN(`lucide-${tM(Ow(t))}`,`lucide-${t}`,s),...r}));return n.displayName=Ow(t),n};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oM=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],aM=se("activity",oM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Fw=se("arrow-right",lM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cM=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Po=se("award",cM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uM=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Wn=se("book-open",uM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dM=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Uw=se("book",dM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hM=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],Vl=se("brain",hM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fM=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],mM=se("calendar-days",fM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pM=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Er=se("calendar",pM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Ll=se("chart-column",gM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],xM=se("chart-pie",yM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],wM=se("check",vM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],j0=se("chevron-down",_M);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],$w=se("chevron-right",bM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],C0=se("chevron-up",SM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],EM=se("circle-alert",TM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],wt=se("circle-check-big",NM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],jM=se("circle-x",kM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],dn=se("clock",CM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],nn=se("crown",IM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],AM=se("download",PM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]],Wt=se("flame",RM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]],Bw=se("gem",DM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],VM=se("gift",MM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],kf=se("heart",LM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],zw=se("layout-dashboard",OM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],up=se("lightbulb",FM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],Hw=se("list-checks",UM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],BM=se("lock-open",$M);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],I0=se("lock",zM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],WM=se("log-out",HM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],Ww=se("medal",GM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Gw=se("message-square",KM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],Kw=se("pause",qM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],QM=se("pen-line",XM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],qw=se("pencil",YM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],yo=se("play",JM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],P0=se("plus",ZM);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eV=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],tV=se("refresh-cw",eV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nV=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Xw=se("rotate-ccw",nV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sV=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],rV=se("search",sV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iV=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],oV=se("settings-2",iV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aV=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],lV=se("settings",aV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cV=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],as=se("shield",cV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uV=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],dV=se("smartphone",uV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hV=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Sn=se("sparkles",hV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fV=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],mV=se("square-pen",fV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Qw=se("square",pV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gV=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Je=se("star",gV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Ye=se("target",yV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xV=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],vV=se("timer",xV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wV=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Ao=se("trash-2",wV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _V=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Tn=se("trending-up",_V);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bV=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],bt=se("trophy",bV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SV=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Yw=se("user",SV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ro=se("users",TV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EV=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Jw=se("volume-2",EV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NV=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],Zw=se("volume-x",NV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kV=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ol=se("x",kV);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jV=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],vh=se("zap",jV);function CV(){var w;const[t,e]=S.useState(!1),[n,s]=S.useState(!1),[r,i]=S.useState(""),[o,l]=S.useState(!1),[c,d]=S.useState(""),[h,f]=S.useState(!1),{user:m,userProfile:y,logout:b,updateUserName:C,deleteUserAccount:I}=Ii(),x=$s(),v=S.useRef(null);S.useEffect(()=>{console.log("ProfileDropdown - Current user:",m),console.log("ProfileDropdown - Current userProfile:",y)},[m,y]),S.useEffect(()=>{const j=k=>{v.current&&!v.current.contains(k.target)&&(e(!1),s(!1),f(!1))};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]);const _=async()=>{try{await b(),x("/")}catch(j){console.error("Error logging out:",j)}},P=()=>{i((y==null?void 0:y.name)||""),s(!0),d("")},D=async()=>{if(!r.trim()){d("Name cannot be empty");return}l(!0),d("");try{await C(r.trim()),s(!1)}catch{d("Failed to update name")}finally{l(!1)}},A=async()=>{l(!0);try{await I(),x("/")}catch{d("Failed to delete account"),l(!1)}},T=()=>{s(!1),i(""),d("")};return a.jsxs("div",{className:"relative",ref:v,children:[a.jsxs("button",{onClick:()=>e(!t),className:"flex items-center gap-2 bg-white/20 px-3 py-2 rounded-full text-white hover:bg-white/30 transition",children:[a.jsx(Yw,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:y!=null&&y.name?`Hey, ${y.name}`:`Hey, ${((w=m==null?void 0:m.email)==null?void 0:w.split("@")[0])||"there"}`})]}),t&&a.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-xl border z-50",children:[a.jsxs("div",{className:"p-4 border-b",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:a.jsx(Yw,{className:"w-5 h-5 text-purple-600"})}),a.jsx("div",{className:"flex-1",children:n?a.jsxs("div",{className:"space-y-2",children:[a.jsx("input",{type:"text",value:r,onChange:j=>i(j.target.value),className:"w-full px-2 py-1 border rounded text-sm",placeholder:"Enter your name",autoFocus:!0}),a.jsxs("div",{className:"flex gap-1",children:[a.jsxs("button",{onClick:D,disabled:o,className:"flex items-center gap-1 px-2 py-1 bg-green-500 text-white rounded text-xs hover:bg-green-600 disabled:opacity-50",children:[a.jsx(wM,{className:"w-3 h-3"}),"Save"]}),a.jsxs("button",{onClick:T,className:"flex items-center gap-1 px-2 py-1 bg-gray-500 text-white rounded text-xs hover:bg-gray-600",children:[a.jsx(Ol,{className:"w-3 h-3"}),"Cancel"]})]})]}):a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:(y==null?void 0:y.name)||"No name set"}),a.jsx("p",{className:"text-sm text-gray-600",children:m==null?void 0:m.email})]})})]}),c&&a.jsx("p",{className:"text-red-500 text-xs mt-2",children:c})]}),a.jsxs("div",{className:"p-2",children:[!n&&a.jsxs("button",{onClick:P,className:"flex items-center gap-2 w-full px-3 py-2 text-left hover:bg-gray-50 rounded text-sm",children:[a.jsx(QM,{className:"w-4 h-4"}),"Change Name"]}),a.jsxs("button",{onClick:_,className:"flex items-center gap-2 w-full px-3 py-2 text-left hover:bg-gray-50 rounded text-sm",children:[a.jsx(WM,{className:"w-4 h-4"}),"Log Out"]}),a.jsxs("button",{onClick:()=>f(!h),className:"flex items-center gap-2 w-full px-3 py-2 text-left hover:bg-red-50 rounded text-sm text-red-600",children:[a.jsx(Ao,{className:"w-4 h-4"}),"Delete Account"]}),h&&a.jsxs("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded",children:[a.jsx("p",{className:"text-sm text-red-800 mb-2",children:"Are you sure? This action cannot be undone."}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:A,disabled:o,className:"px-3 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700 disabled:opacity-50",children:o?"Deleting...":"Yes, Delete"}),a.jsx("button",{onClick:()=>f(!1),className:"px-3 py-1 bg-gray-300 text-gray-700 rounded text-xs hover:bg-gray-400",children:"Cancel"})]})]})]})]})]})}const Zs=()=>{var c,d;const[t,e]=S.useState(1),{user:n,logout:s}=Ii(),{userStats:r,showRewards:i,rewardQueue:o}=jn();$s();const l=ms();return S.useEffect(()=>{const h=()=>{const f=window.scrollY,m=Math.max(0,1-f/60);e(m)};return window.addEventListener("scroll",h),()=>window.removeEventListener("scroll",h)},[]),a.jsxs("nav",{className:"w-full flex items-center justify-between px-8 py-4 bg-[#6C5DD3] shadow-md fixed top-0 left-0 z-50 h-20 transition-opacity duration-300",style:{opacity:t},children:[a.jsx("div",{className:"flex-1 min-w-0",children:a.jsx(ft,{to:"/dashboard",className:"text-2xl font-extrabold text-white whitespace-nowrap",children:"Trackviso"})}),a.jsx("div",{className:"flex flex-col items-center flex-1 min-w-0",children:["/dashboard","/tasks","/schedule","/subjects","/study","/settings","/insights"].includes(l.pathname)&&a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:"text-2xl font-extrabold tracking-widest bg-[linear-gradient(135deg,_#E0BBE4,_white)] text-transparent bg-clip-text",children:[l.pathname==="/dashboard"&&"DASHBOARD",l.pathname==="/tasks"&&"TASKS",l.pathname==="/schedule"&&"SCHEDULE",l.pathname==="/subjects"&&"SUBJECTS",l.pathname==="/study"&&"STUDY",l.pathname==="/settings"&&"SETTINGS",l.pathname==="/insights"&&"INSIGHTS"]}),a.jsx("span",{className:"text-sm font-medium text-[#EDE9FE] mt-1",children:new Date().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})}),a.jsxs("div",{className:"flex-1 flex justify-end gap-4 min-w-0",children:[!n&&a.jsxs(a.Fragment,{children:[a.jsx(ft,{to:"/login",className:"px-4 py-2 rounded-lg text-[#6C5DD3] font-semibold hover:bg-[#EDE9FE] transition",children:"Login"}),a.jsx(ft,{to:"/signup",className:"px-4 py-2 rounded-lg text-[#6C5DD3] font-semibold hover:bg-[#7A6AD9] transition",children:"Sign Up"})]}),n&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-3 text-white",children:[a.jsxs("div",{className:"flex items-center gap-2 bg-white/20 px-3 py-1 rounded-full",children:[a.jsx(Je,{className:"w-4 h-4 text-yellow-300"}),a.jsx("span",{className:"text-sm font-medium",children:(r==null?void 0:r.level)||1})]}),a.jsxs("div",{className:"flex items-center gap-2 bg-white/20 px-3 py-1 rounded-full",children:[a.jsx(Wt,{className:"w-4 h-4 text-orange-300"}),a.jsx("span",{className:"text-sm font-medium",children:(r==null?void 0:r.currentStreak)||0})]})]}),a.jsx(CV,{})]})]}),i&&o&&Array.isArray(o)&&o.length>0&&a.jsx("div",{className:"fixed top-24 right-6 bg-gradient-to-r from-green-500 to-emerald-600 text-white p-4 rounded-2xl shadow-2xl z-50 max-w-sm",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"text-2xl",children:""}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-lg",children:((c=o[o.length-1])==null?void 0:c.title)||"Session Complete!"}),a.jsx("p",{className:"text-sm opacity-90",children:((d=o[o.length-1])==null?void 0:d.description)||"Great work!"})]})]})})]})};function Bt(){return a.jsxs("aside",{className:"fixed left-0 top-0 h-full w-16 hover:w-64 group bg-[#3F3D56] flex flex-col z-40 shadow-lg transition-all duration-300 ease-in-out",children:[a.jsxs("div",{className:"absolute left-0 w-16 z-50 pointer-events-none",children:[a.jsx("div",{className:"absolute w-16 h-12 flex items-center justify-center transition-opacity duration-300 group-hover:opacity-0",style:{top:"96px"},children:a.jsx(zw,{className:"w-5 h-5 text-white"})}),a.jsx("div",{className:"absolute w-16 h-12 flex items-center justify-center transition-opacity duration-300 group-hover:opacity-0",style:{top:"152px"},children:a.jsx(Er,{className:"w-5 h-5 text-white"})}),a.jsx("div",{className:"absolute w-16 h-12 flex items-center justify-center transition-opacity duration-300 group-hover:opacity-0",style:{top:"208px"},children:a.jsx(Uw,{className:"w-5 h-5 text-white"})}),a.jsx("div",{className:"absolute w-16 h-12 flex items-center justify-center transition-opacity duration-300 group-hover:opacity-0",style:{top:"264px"},children:a.jsx(Hw,{className:"w-5 h-5 text-white"})}),a.jsx("div",{className:"absolute w-16 h-12 flex items-center justify-center transition-opacity duration-300 group-hover:opacity-0",style:{top:"320px"},children:a.jsx(Vl,{className:"w-5 h-5 text-white"})}),a.jsx("div",{className:"absolute w-16 h-12 flex items-center justify-center transition-opacity duration-300 group-hover:opacity-0",style:{top:"376px"},children:a.jsx(Ll,{className:"w-5 h-5 text-white"})})]}),a.jsxs("div",{className:"flex flex-col gap-2 w-full pt-24 pb-4",children:[a.jsxs(ft,{to:"/dashboard",className:"flex items-center gap-3 px-6 py-3 focus:outline-none hover:bg-[#6C5DD3]/10 transition",title:"Dashboard",children:[a.jsx(zw,{className:"w-5 h-5 text-white opacity-1000"}),a.jsx("span",{className:"text-white font-medium opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap",children:"Dashboard"})]}),a.jsxs(ft,{to:"/schedule",className:"flex items-center gap-3 px-6 py-3 focus:outline-none hover:bg-[#6C5DD3]/10 transition",title:"Study Planner",children:[a.jsx(Er,{className:"w-5 h-5 text-white"}),a.jsx("span",{className:"text-white font-medium opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap",children:"Schedule"})]}),a.jsxs(ft,{to:"/subjects",className:"flex items-center gap-3 px-6 py-3 focus:outline-none hover:bg-[#6C5DD3]/10 transition",title:"Subjects",children:[a.jsx(Uw,{className:"w-5 h-5 text-white"}),a.jsx("span",{className:"text-white font-medium opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap",children:"Subjects"})]}),a.jsxs(ft,{to:"/tasks",className:"flex items-center gap-3 px-6 py-3 focus:outline-none hover:bg-[#6C5DD3]/10 transition",title:"Tasks",children:[a.jsx(Hw,{className:"w-5 h-5 text-white"}),a.jsx("span",{className:"text-white font-medium opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap",children:"Tasks"})]}),a.jsxs(ft,{to:"/study",className:"flex items-center gap-3 px-6 py-3 focus:outline-none hover:bg-[#6C5DD3]/10 transition",title:"Study",children:[a.jsx(Vl,{className:"w-5 h-5 text-white"}),a.jsx("span",{className:"text-white font-medium opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap",children:"Study"})]}),a.jsxs(ft,{to:"/insights",className:"flex items-center gap-3 px-6 py-3 focus:outline-none hover:bg-[#6C5DD3]/10 transition",title:"Insights",children:[a.jsx(Ll,{className:"w-5 h-5 text-white"}),a.jsx("span",{className:"text-white font-medium opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap",children:"Insights"})]})]}),a.jsxs(ft,{to:"/settings",className:"mt-auto flex items-center gap-3 px-6 py-3 focus:outline-none hover:bg-[#6C5DD3]/10 transition",title:"Settings",children:[a.jsx(oV,{className:"w-5 h-5 text-white"}),a.jsx("span",{className:"text-white font-medium opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap",children:"Settings"})]})]})}const A0=S.createContext({});function R0(t){const e=S.useRef(null);return e.current===null&&(e.current=t()),e.current}const D0=typeof window<"u",pN=D0?S.useLayoutEffect:S.useEffect,wh=S.createContext(null);function M0(t,e){t.indexOf(e)===-1&&t.push(e)}function V0(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Os=(t,e,n)=>n>e?e:n<t?t:n;let L0=()=>{};const Fs={},gN=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function yN(t){return typeof t=="object"&&t!==null}const xN=t=>/^0[^.\s]+$/u.test(t);function O0(t){let e;return()=>(e===void 0&&(e=t()),e)}const En=t=>t,IV=(t,e)=>n=>e(t(n)),dc=(...t)=>t.reduce(IV),Fl=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s};class F0{constructor(){this.subscriptions=[]}add(e){return M0(this.subscriptions,e),()=>V0(this.subscriptions,e)}notify(e,n,s){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,s);else for(let i=0;i<r;i++){const o=this.subscriptions[i];o&&o(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ls=t=>t*1e3,cs=t=>t/1e3;function vN(t,e){return e?t*(1e3/e):0}const wN=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,PV=1e-7,AV=12;function RV(t,e,n,s,r){let i,o,l=0;do o=e+(n-e)/2,i=wN(o,s,r)-t,i>0?n=o:e=o;while(Math.abs(i)>PV&&++l<AV);return o}function hc(t,e,n,s){if(t===e&&n===s)return En;const r=i=>RV(i,0,1,t,n);return i=>i===0||i===1?i:wN(r(i),e,s)}const _N=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,bN=t=>e=>1-t(1-e),SN=hc(.33,1.53,.69,.99),U0=bN(SN),TN=_N(U0),EN=t=>(t*=2)<1?.5*U0(t):.5*(2-Math.pow(2,-10*(t-1))),$0=t=>1-Math.sin(Math.acos(t)),NN=bN($0),kN=_N($0),DV=hc(.42,0,1,1),MV=hc(0,0,.58,1),jN=hc(.42,0,.58,1),VV=t=>Array.isArray(t)&&typeof t[0]!="number",CN=t=>Array.isArray(t)&&typeof t[0]=="number",LV={linear:En,easeIn:DV,easeInOut:jN,easeOut:MV,circIn:$0,circInOut:kN,circOut:NN,backIn:U0,backInOut:TN,backOut:SN,anticipate:EN},OV=t=>typeof t=="string",e1=t=>{if(CN(t)){L0(t.length===4);const[e,n,s,r]=t;return hc(e,n,s,r)}else if(OV(t))return LV[t];return t},iu=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],t1={value:null,addProjectionMetrics:null};function FV(t,e){let n=new Set,s=new Set,r=!1,i=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1},c=0;function d(f){o.has(f)&&(h.schedule(f),t()),c++,f(l)}const h={schedule:(f,m=!1,y=!1)=>{const C=y&&r?n:s;return m&&o.add(f),C.has(f)||C.add(f),f},cancel:f=>{s.delete(f),o.delete(f)},process:f=>{if(l=f,r){i=!0;return}r=!0,[n,s]=[s,n],n.forEach(d),e&&t1.value&&t1.value.frameloop[e].push(c),c=0,n.clear(),r=!1,i&&(i=!1,h.process(f))}};return h}const UV=40;function IN(t,e){let n=!1,s=!0;const r={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=iu.reduce((_,P)=>(_[P]=FV(i,e?P:void 0),_),{}),{setup:l,read:c,resolveKeyframes:d,preUpdate:h,update:f,preRender:m,render:y,postRender:b}=o,C=()=>{const _=Fs.useManualTiming?r.timestamp:performance.now();n=!1,Fs.useManualTiming||(r.delta=s?1e3/60:Math.max(Math.min(_-r.timestamp,UV),1)),r.timestamp=_,r.isProcessing=!0,l.process(r),c.process(r),d.process(r),h.process(r),f.process(r),m.process(r),y.process(r),b.process(r),r.isProcessing=!1,n&&e&&(s=!1,t(C))},I=()=>{n=!0,s=!0,r.isProcessing||t(C)};return{schedule:iu.reduce((_,P)=>{const D=o[P];return _[P]=(A,T=!1,w=!1)=>(n||I(),D.schedule(A,T,w)),_},{}),cancel:_=>{for(let P=0;P<iu.length;P++)o[iu[P]].cancel(_)},state:r,steps:o}}const{schedule:Le,cancel:Vr,state:xt,steps:jf}=IN(typeof requestAnimationFrame<"u"?requestAnimationFrame:En,!0);let Vu;function $V(){Vu=void 0}const Jt={now:()=>(Vu===void 0&&Jt.set(xt.isProcessing||Fs.useManualTiming?xt.timestamp:performance.now()),Vu),set:t=>{Vu=t,queueMicrotask($V)}},PN=t=>e=>typeof e=="string"&&e.startsWith(t),B0=PN("--"),BV=PN("var(--"),z0=t=>BV(t)?zV.test(t.split("/*")[0].trim()):!1,zV=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Xo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ul={...Xo,transform:t=>Os(0,1,t)},ou={...Xo,default:1},nl=t=>Math.round(t*1e5)/1e5,H0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function HV(t){return t==null}const WV=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,W0=(t,e)=>n=>!!(typeof n=="string"&&WV.test(n)&&n.startsWith(t)||e&&!HV(n)&&Object.prototype.hasOwnProperty.call(n,e)),AN=(t,e,n)=>s=>{if(typeof s!="string")return s;const[r,i,o,l]=s.match(H0);return{[t]:parseFloat(r),[e]:parseFloat(i),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},GV=t=>Os(0,255,t),Cf={...Xo,transform:t=>Math.round(GV(t))},ai={test:W0("rgb","red"),parse:AN("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+Cf.transform(t)+", "+Cf.transform(e)+", "+Cf.transform(n)+", "+nl(Ul.transform(s))+")"};function KV(t){let e="",n="",s="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,s+=s,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:r?parseInt(r,16)/255:1}}const dp={test:W0("#"),parse:KV,transform:ai.transform},fc=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),er=fc("deg"),us=fc("%"),le=fc("px"),qV=fc("vh"),XV=fc("vw"),n1=(()=>({...us,parse:t=>us.parse(t)/100,transform:t=>us.transform(t*100)}))(),to={test:W0("hsl","hue"),parse:AN("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+us.transform(nl(e))+", "+us.transform(nl(n))+", "+nl(Ul.transform(s))+")"},et={test:t=>ai.test(t)||dp.test(t)||to.test(t),parse:t=>ai.test(t)?ai.parse(t):to.test(t)?to.parse(t):dp.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ai.transform(t):to.transform(t),getAnimatableNone:t=>{const e=et.parse(t);return e.alpha=0,et.transform(e)}},QV=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function YV(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(H0))==null?void 0:e.length)||0)+(((n=t.match(QV))==null?void 0:n.length)||0)>0}const RN="number",DN="color",JV="var",ZV="var(",s1="${}",eL=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function $l(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},r=[];let i=0;const l=e.replace(eL,c=>(et.test(c)?(s.color.push(i),r.push(DN),n.push(et.parse(c))):c.startsWith(ZV)?(s.var.push(i),r.push(JV),n.push(c)):(s.number.push(i),r.push(RN),n.push(parseFloat(c))),++i,s1)).split(s1);return{values:n,split:l,indexes:s,types:r}}function MN(t){return $l(t).values}function VN(t){const{split:e,types:n}=$l(t),s=e.length;return r=>{let i="";for(let o=0;o<s;o++)if(i+=e[o],r[o]!==void 0){const l=n[o];l===RN?i+=nl(r[o]):l===DN?i+=et.transform(r[o]):i+=r[o]}return i}}const tL=t=>typeof t=="number"?0:et.test(t)?et.getAnimatableNone(t):t;function nL(t){const e=MN(t);return VN(t)(e.map(tL))}const Lr={test:YV,parse:MN,createTransformer:VN,getAnimatableNone:nL};function If(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function sL({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let r=0,i=0,o=0;if(!e)r=i=o=n;else{const l=n<.5?n*(1+e):n+e-n*e,c=2*n-l;r=If(c,l,t+1/3),i=If(c,l,t),o=If(c,l,t-1/3)}return{red:Math.round(r*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:s}}function Pd(t,e){return n=>n>0?e:t}const $e=(t,e,n)=>t+(e-t)*n,Pf=(t,e,n)=>{const s=t*t,r=n*(e*e-s)+s;return r<0?0:Math.sqrt(r)},rL=[dp,ai,to],iL=t=>rL.find(e=>e.test(t));function r1(t){const e=iL(t);if(!e)return!1;let n=e.parse(t);return e===to&&(n=sL(n)),n}const i1=(t,e)=>{const n=r1(t),s=r1(e);if(!n||!s)return Pd(t,e);const r={...n};return i=>(r.red=Pf(n.red,s.red,i),r.green=Pf(n.green,s.green,i),r.blue=Pf(n.blue,s.blue,i),r.alpha=$e(n.alpha,s.alpha,i),ai.transform(r))},hp=new Set(["none","hidden"]);function oL(t,e){return hp.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function aL(t,e){return n=>$e(t,e,n)}function G0(t){return typeof t=="number"?aL:typeof t=="string"?z0(t)?Pd:et.test(t)?i1:uL:Array.isArray(t)?LN:typeof t=="object"?et.test(t)?i1:lL:Pd}function LN(t,e){const n=[...t],s=n.length,r=t.map((i,o)=>G0(i)(i,e[o]));return i=>{for(let o=0;o<s;o++)n[o]=r[o](i);return n}}function lL(t,e){const n={...t,...e},s={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(s[r]=G0(t[r])(t[r],e[r]));return r=>{for(const i in s)n[i]=s[i](r);return n}}function cL(t,e){const n=[],s={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const i=e.types[r],o=t.indexes[i][s[i]],l=t.values[o]??0;n[r]=l,s[i]++}return n}const uL=(t,e)=>{const n=Lr.createTransformer(e),s=$l(t),r=$l(e);return s.indexes.var.length===r.indexes.var.length&&s.indexes.color.length===r.indexes.color.length&&s.indexes.number.length>=r.indexes.number.length?hp.has(t)&&!r.values.length||hp.has(e)&&!s.values.length?oL(t,e):dc(LN(cL(s,r),r.values),n):Pd(t,e)};function ON(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?$e(t,e,n):G0(t)(t,e)}const dL=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Le.update(e,n),stop:()=>Vr(e),now:()=>xt.isProcessing?xt.timestamp:Jt.now()}},FN=(t,e,n=10)=>{let s="";const r=Math.max(Math.round(e/n),2);for(let i=0;i<r;i++)s+=Math.round(t(i/(r-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},Ad=2e4;function K0(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<Ad;)e+=n,s=t.next(e);return e>=Ad?1/0:e}function hL(t,e=100,n){const s=n({...t,keyframes:[0,e]}),r=Math.min(K0(s),Ad);return{type:"keyframes",ease:i=>s.next(r*i).value/e,duration:cs(r)}}const fL=5;function UN(t,e,n){const s=Math.max(e-fL,0);return vN(n-t(s),e-s)}const Ge={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Af=.001;function mL({duration:t=Ge.duration,bounce:e=Ge.bounce,velocity:n=Ge.velocity,mass:s=Ge.mass}){let r,i,o=1-e;o=Os(Ge.minDamping,Ge.maxDamping,o),t=Os(Ge.minDuration,Ge.maxDuration,cs(t)),o<1?(r=d=>{const h=d*o,f=h*t,m=h-n,y=fp(d,o),b=Math.exp(-f);return Af-m/y*b},i=d=>{const f=d*o*t,m=f*n+n,y=Math.pow(o,2)*Math.pow(d,2)*t,b=Math.exp(-f),C=fp(Math.pow(d,2),o);return(-r(d)+Af>0?-1:1)*((m-y)*b)/C}):(r=d=>{const h=Math.exp(-d*t),f=(d-n)*t+1;return-Af+h*f},i=d=>{const h=Math.exp(-d*t),f=(n-d)*(t*t);return h*f});const l=5/t,c=gL(r,i,l);if(t=ls(t),isNaN(c))return{stiffness:Ge.stiffness,damping:Ge.damping,duration:t};{const d=Math.pow(c,2)*s;return{stiffness:d,damping:o*2*Math.sqrt(s*d),duration:t}}}const pL=12;function gL(t,e,n){let s=n;for(let r=1;r<pL;r++)s=s-t(s)/e(s);return s}function fp(t,e){return t*Math.sqrt(1-e*e)}const yL=["duration","bounce"],xL=["stiffness","damping","mass"];function o1(t,e){return e.some(n=>t[n]!==void 0)}function vL(t){let e={velocity:Ge.velocity,stiffness:Ge.stiffness,damping:Ge.damping,mass:Ge.mass,isResolvedFromDuration:!1,...t};if(!o1(t,xL)&&o1(t,yL))if(t.visualDuration){const n=t.visualDuration,s=2*Math.PI/(n*1.2),r=s*s,i=2*Os(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:Ge.mass,stiffness:r,damping:i}}else{const n=mL(t);e={...e,...n,mass:Ge.mass},e.isResolvedFromDuration=!0}return e}function Rd(t=Ge.visualDuration,e=Ge.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:r}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:d,mass:h,duration:f,velocity:m,isResolvedFromDuration:y}=vL({...n,velocity:-cs(n.velocity||0)}),b=m||0,C=d/(2*Math.sqrt(c*h)),I=o-i,x=cs(Math.sqrt(c/h)),v=Math.abs(I)<5;s||(s=v?Ge.restSpeed.granular:Ge.restSpeed.default),r||(r=v?Ge.restDelta.granular:Ge.restDelta.default);let _;if(C<1){const D=fp(x,C);_=A=>{const T=Math.exp(-C*x*A);return o-T*((b+C*x*I)/D*Math.sin(D*A)+I*Math.cos(D*A))}}else if(C===1)_=D=>o-Math.exp(-x*D)*(I+(b+x*I)*D);else{const D=x*Math.sqrt(C*C-1);_=A=>{const T=Math.exp(-C*x*A),w=Math.min(D*A,300);return o-T*((b+C*x*I)*Math.sinh(w)+D*I*Math.cosh(w))/D}}const P={calculatedDuration:y&&f||null,next:D=>{const A=_(D);if(y)l.done=D>=f;else{let T=D===0?b:0;C<1&&(T=D===0?ls(b):UN(_,D,A));const w=Math.abs(T)<=s,j=Math.abs(o-A)<=r;l.done=w&&j}return l.value=l.done?o:A,l},toString:()=>{const D=Math.min(K0(P),Ad),A=FN(T=>P.next(D*T).value,D,30);return D+"ms "+A},toTransition:()=>{}};return P}Rd.applyToOptions=t=>{const e=hL(t,100,Rd);return t.ease=e.ease,t.duration=ls(e.duration),t.type="keyframes",t};function mp({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:r=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:h}){const f=t[0],m={done:!1,value:f},y=w=>l!==void 0&&w<l||c!==void 0&&w>c,b=w=>l===void 0?c:c===void 0||Math.abs(l-w)<Math.abs(c-w)?l:c;let C=n*e;const I=f+C,x=o===void 0?I:o(I);x!==I&&(C=x-f);const v=w=>-C*Math.exp(-w/s),_=w=>x+v(w),P=w=>{const j=v(w),k=_(w);m.done=Math.abs(j)<=d,m.value=m.done?x:k};let D,A;const T=w=>{y(m.value)&&(D=w,A=Rd({keyframes:[m.value,b(m.value)],velocity:UN(_,w,m.value),damping:r,stiffness:i,restDelta:d,restSpeed:h}))};return T(0),{calculatedDuration:null,next:w=>{let j=!1;return!A&&D===void 0&&(j=!0,P(w),T(w)),D!==void 0&&w>=D?A.next(w-D):(!j&&P(w),m)}}}function wL(t,e,n){const s=[],r=n||Fs.mix||ON,i=t.length-1;for(let o=0;o<i;o++){let l=r(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||En:e;l=dc(c,l)}s.push(l)}return s}function _L(t,e,{clamp:n=!0,ease:s,mixer:r}={}){const i=t.length;if(L0(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=wL(e,s,r),c=l.length,d=h=>{if(o&&h<t[0])return e[0];let f=0;if(c>1)for(;f<t.length-2&&!(h<t[f+1]);f++);const m=Fl(t[f],t[f+1],h);return l[f](m)};return n?h=>d(Os(t[0],t[i-1],h)):d}function bL(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const r=Fl(0,e,s);t.push($e(n,1,r))}}function SL(t){const e=[0];return bL(e,t.length-1),e}function TL(t,e){return t.map(n=>n*e)}function EL(t,e){return t.map(()=>e||jN).splice(0,t.length-1)}function sl({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const r=VV(s)?s.map(e1):e1(s),i={done:!1,value:e[0]},o=TL(n&&n.length===e.length?n:SL(e),t),l=_L(o,e,{ease:Array.isArray(r)?r:EL(e,r)});return{calculatedDuration:t,next:c=>(i.value=l(c),i.done=c>=t,i)}}const NL=t=>t!==null;function q0(t,{repeat:e,repeatType:n="loop"},s,r=1){const i=t.filter(NL),l=r<0||e&&n!=="loop"&&e%2===1?0:i.length-1;return!l||s===void 0?i[l]:s}const kL={decay:mp,inertia:mp,tween:sl,keyframes:sl,spring:Rd};function $N(t){typeof t.type=="string"&&(t.type=kL[t.type])}class X0{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const jL=t=>t/100;class Q0 extends X0{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var s,r;const{motionValue:n}=this.options;n&&n.updatedAt!==Jt.now()&&this.tick(Jt.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(r=(s=this.options).onStop)==null||r.call(s))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;$N(e);const{type:n=sl,repeat:s=0,repeatDelay:r=0,repeatType:i,velocity:o=0}=e;let{keyframes:l}=e;const c=n||sl;c!==sl&&typeof l[0]!="number"&&(this.mixKeyframes=dc(jL,ON(l[0],l[1])),l=[0,100]);const d=c({...e,keyframes:l});i==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...l].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=K0(d));const{calculatedDuration:h}=d;this.calculatedDuration=h,this.resolvedDuration=h+r,this.totalDuration=this.resolvedDuration*(s+1)-r,this.generator=d}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:s,totalDuration:r,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return s.next(0);const{delay:d=0,keyframes:h,repeat:f,repeatType:m,repeatDelay:y,type:b,onUpdate:C,finalKeyframe:I}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const x=this.currentTime-d*(this.playbackSpeed>=0?1:-1),v=this.playbackSpeed>=0?x<0:x>r;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let _=this.currentTime,P=s;if(f){const w=Math.min(this.currentTime,r)/l;let j=Math.floor(w),k=w%1;!k&&w>=1&&(k=1),k===1&&j--,j=Math.min(j,f+1),!!(j%2)&&(m==="reverse"?(k=1-k,y&&(k-=y/l)):m==="mirror"&&(P=o)),_=Os(0,1,k)*l}const D=v?{done:!1,value:h[0]}:P.next(_);i&&(D.value=i(D.value));let{done:A}=D;!v&&c!==null&&(A=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&A);return T&&b!==mp&&(D.value=q0(h,this.options,I,this.speed)),C&&C(D.value),T&&this.finish(),D}then(e,n){return this.finished.then(e,n)}get duration(){return cs(this.calculatedDuration)}get time(){return cs(this.currentTime)}set time(e){var n;e=ls(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Jt.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=cs(this.currentTime))}play(){var r,i;if(this.isStopped)return;const{driver:e=dL,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(i=(r=this.options).onPlay)==null||i.call(r);const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=n??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Jt.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function CL(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const li=t=>t*180/Math.PI,pp=t=>{const e=li(Math.atan2(t[1],t[0]));return gp(e)},IL={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:pp,rotateZ:pp,skewX:t=>li(Math.atan(t[1])),skewY:t=>li(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},gp=t=>(t=t%360,t<0&&(t+=360),t),a1=pp,l1=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),c1=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),PL={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:l1,scaleY:c1,scale:t=>(l1(t)+c1(t))/2,rotateX:t=>gp(li(Math.atan2(t[6],t[5]))),rotateY:t=>gp(li(Math.atan2(-t[2],t[0]))),rotateZ:a1,rotate:a1,skewX:t=>li(Math.atan(t[4])),skewY:t=>li(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function yp(t){return t.includes("scale")?1:0}function xp(t,e){if(!t||t==="none")return yp(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,r;if(n)s=PL,r=n;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=IL,r=l}if(!r)return yp(e);const i=s[e],o=r[1].split(",").map(RL);return typeof i=="function"?i(o):o[i]}const AL=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return xp(n,e)};function RL(t){return parseFloat(t.trim())}const Qo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Yo=(()=>new Set(Qo))(),u1=t=>t===Xo||t===le,DL=new Set(["x","y","z"]),ML=Qo.filter(t=>!DL.has(t));function VL(t){const e=[];return ML.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e}const hi={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>xp(e,"x"),y:(t,{transform:e})=>xp(e,"y")};hi.translateX=hi.x;hi.translateY=hi.y;const fi=new Set;let vp=!1,wp=!1,_p=!1;function BN(){if(wp){const t=Array.from(fi).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),n=new Map;e.forEach(s=>{const r=VL(s);r.length&&(n.set(s,r),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const r=n.get(s);r&&r.forEach(([i,o])=>{var l;(l=s.getValue(i))==null||l.set(o)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}wp=!1,vp=!1,fi.forEach(t=>t.complete(_p)),fi.clear()}function zN(){fi.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(wp=!0)})}function LL(){_p=!0,zN(),BN(),_p=!1}class Y0{constructor(e,n,s,r,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=s,this.motionValue=r,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(fi.add(this),vp||(vp=!0,Le.read(zN),Le.resolveKeyframes(BN))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:s,motionValue:r}=this;if(e[0]===null){const i=r==null?void 0:r.get(),o=e[e.length-1];if(i!==void 0)e[0]=i;else if(s&&n){const l=s.readValue(n,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),r&&i===void 0&&r.set(e[0])}CL(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),fi.delete(this)}cancel(){this.state==="scheduled"&&(fi.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const OL=t=>t.startsWith("--");function FL(t,e,n){OL(e)?t.style.setProperty(e,n):t.style[e]=n}const UL=O0(()=>window.ScrollTimeline!==void 0),$L={};function BL(t,e){const n=O0(t);return()=>$L[e]??n()}const HN=BL(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Fa=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,d1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Fa([0,.65,.55,1]),circOut:Fa([.55,0,1,.45]),backIn:Fa([.31,.01,.66,-.59]),backOut:Fa([.33,1.53,.69,.99])};function WN(t,e){if(t)return typeof t=="function"?HN()?FN(t,e):"ease-out":CN(t)?Fa(t):Array.isArray(t)?t.map(n=>WN(n,e)||d1.easeOut):d1[t]}function zL(t,e,n,{delay:s=0,duration:r=300,repeat:i=0,repeatType:o="loop",ease:l="easeOut",times:c}={},d=void 0){const h={[e]:n};c&&(h.offset=c);const f=WN(l,r);Array.isArray(f)&&(h.easing=f);const m={delay:s,duration:r,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return d&&(m.pseudoElement=d),t.animate(h,m)}function GN(t){return typeof t=="function"&&"applyToOptions"in t}function HL({type:t,...e}){return GN(t)&&HN()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class WL extends X0{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:s,keyframes:r,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=e;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=e,L0(typeof e.type!="string");const d=HL(e);this.animation=zL(n,s,r,d,i),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const h=q0(r,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(h):FL(n,s,h),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,s;const e=((s=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:s.call(n).duration)||0;return cs(Number(e))}get time(){return cs(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=ls(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var s;return this.allowFlatten&&((s=this.animation.effect)==null||s.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&UL()?(this.animation.timeline=e,En):n(this)}}const KN={anticipate:EN,backInOut:TN,circInOut:kN};function GL(t){return t in KN}function KL(t){typeof t.ease=="string"&&GL(t.ease)&&(t.ease=KN[t.ease])}const h1=10;class qL extends WL{constructor(e){KL(e),$N(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:s,onComplete:r,element:i,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const l=new Q0({...o,autoplay:!1}),c=ls(this.finishedTime??this.time);n.setWithVelocity(l.sample(c-h1).value,l.sample(c).value,h1),l.stop()}}const f1=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Lr.test(t)||t==="0")&&!t.startsWith("url("));function XL(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function QL(t,e,n,s){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=f1(r,e),l=f1(i,e);return!o||!l?!1:XL(t)||(n==="spring"||GN(n))&&s}const YL=new Set(["opacity","clipPath","filter","transform"]),JL=O0(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function ZL(t){var h;const{motionValue:e,name:n,repeatDelay:s,repeatType:r,damping:i,type:o}=t;if(!(((h=e==null?void 0:e.owner)==null?void 0:h.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=e.owner.getProps();return JL()&&n&&YL.has(n)&&(n!=="transform"||!d)&&!c&&!s&&r!=="mirror"&&i!==0&&o!=="inertia"}const eO=40;class tO extends X0{constructor({autoplay:e=!0,delay:n=0,type:s="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:o="loop",keyframes:l,name:c,motionValue:d,element:h,...f}){var b;super(),this.stop=()=>{var C,I;this._animation&&(this._animation.stop(),(C=this.stopTimeline)==null||C.call(this)),(I=this.keyframeResolver)==null||I.cancel()},this.createdAt=Jt.now();const m={autoplay:e,delay:n,type:s,repeat:r,repeatDelay:i,repeatType:o,name:c,motionValue:d,element:h,...f},y=(h==null?void 0:h.KeyframeResolver)||Y0;this.keyframeResolver=new y(l,(C,I,x)=>this.onKeyframesResolved(C,I,m,!x),c,d,h),(b=this.keyframeResolver)==null||b.scheduleResolve()}onKeyframesResolved(e,n,s,r){this.keyframeResolver=void 0;const{name:i,type:o,velocity:l,delay:c,isHandoff:d,onUpdate:h}=s;this.resolvedAt=Jt.now(),QL(e,i,o,l)||((Fs.instantAnimations||!c)&&(h==null||h(q0(e,s,n))),e[0]=e[e.length-1],s.duration=0,s.repeat=0);const m={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>eO?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...s,keyframes:e},y=!d&&ZL(m)?new qL({...m,element:m.motionValue.owner.current}):new Q0(m);y.finished.then(()=>this.notifyFinished()).catch(En),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),LL()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const nO=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function sO(t){const e=nO.exec(t);if(!e)return[,];const[,n,s,r]=e;return[`--${n??s}`,r]}function qN(t,e,n=1){const[s,r]=sO(t);if(!s)return;const i=window.getComputedStyle(e).getPropertyValue(s);if(i){const o=i.trim();return gN(o)?parseFloat(o):o}return z0(r)?qN(r,e,n+1):r}function J0(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const XN=new Set(["width","height","top","left","right","bottom",...Qo]),rO={test:t=>t==="auto",parse:t=>t},QN=t=>e=>e.test(t),YN=[Xo,le,us,er,XV,qV,rO],m1=t=>YN.find(QN(t));function iO(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||xN(t):!0}const oO=new Set(["brightness","contrast","saturate","opacity"]);function aO(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(H0)||[];if(!s)return t;const r=n.replace(s,"");let i=oO.has(e)?1:0;return s!==n&&(i*=100),e+"("+i+r+")"}const lO=/\b([a-z-]*)\(.*?\)/gu,bp={...Lr,getAnimatableNone:t=>{const e=t.match(lO);return e?e.map(aO).join(" "):t}},p1={...Xo,transform:Math.round},cO={rotate:er,rotateX:er,rotateY:er,rotateZ:er,scale:ou,scaleX:ou,scaleY:ou,scaleZ:ou,skew:er,skewX:er,skewY:er,distance:le,translateX:le,translateY:le,translateZ:le,x:le,y:le,z:le,perspective:le,transformPerspective:le,opacity:Ul,originX:n1,originY:n1,originZ:le},Z0={borderWidth:le,borderTopWidth:le,borderRightWidth:le,borderBottomWidth:le,borderLeftWidth:le,borderRadius:le,radius:le,borderTopLeftRadius:le,borderTopRightRadius:le,borderBottomRightRadius:le,borderBottomLeftRadius:le,width:le,maxWidth:le,height:le,maxHeight:le,top:le,right:le,bottom:le,left:le,padding:le,paddingTop:le,paddingRight:le,paddingBottom:le,paddingLeft:le,margin:le,marginTop:le,marginRight:le,marginBottom:le,marginLeft:le,backgroundPositionX:le,backgroundPositionY:le,...cO,zIndex:p1,fillOpacity:Ul,strokeOpacity:Ul,numOctaves:p1},uO={...Z0,color:et,backgroundColor:et,outlineColor:et,fill:et,stroke:et,borderColor:et,borderTopColor:et,borderRightColor:et,borderBottomColor:et,borderLeftColor:et,filter:bp,WebkitFilter:bp},JN=t=>uO[t];function ZN(t,e){let n=JN(t);return n!==bp&&(n=Lr),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const dO=new Set(["auto","none","0"]);function hO(t,e,n){let s=0,r;for(;s<t.length&&!r;){const i=t[s];typeof i=="string"&&!dO.has(i)&&$l(i).values.length&&(r=t[s]),s++}if(r&&n)for(const i of e)t[i]=ZN(n,r)}class fO extends Y0{constructor(e,n,s,r,i){super(e,n,s,r,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let d=e[c];if(typeof d=="string"&&(d=d.trim(),z0(d))){const h=qN(d,n.current);h!==void 0&&(e[c]=h),c===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!XN.has(s)||e.length!==2)return;const[r,i]=e,o=m1(r),l=m1(i);if(o!==l)if(u1(o)&&u1(l))for(let c=0;c<e.length;c++){const d=e[c];typeof d=="string"&&(e[c]=parseFloat(d))}else hi[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,s=[];for(let r=0;r<e.length;r++)(e[r]===null||iO(e[r]))&&s.push(r);s.length&&hO(e,s,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=hi[s](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(s,r).jump(r,!1)}measureEndState(){var l;const{element:e,name:n,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const r=e.getValue(n);r&&r.jump(this.measuredOrigin,!1);const i=s.length-1,o=s[i];s[i]=hi[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,d])=>{e.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function mO(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let s=document;e&&(s=e.current);const r=(n==null?void 0:n[t])??s.querySelectorAll(t);return r?Array.from(r):[]}return Array.from(t)}const e2=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function t2(t){return yN(t)&&"offsetHeight"in t}const g1=30,pO=t=>!isNaN(parseFloat(t));class gO{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,r=!0)=>{var o,l;const i=Jt.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty();r&&((l=this.events.renderRequest)==null||l.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Jt.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=pO(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new F0);const s=this.events[e].add(n);return e==="change"?()=>{s(),Le.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Jt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>g1)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,g1);return vN(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Do(t,e){return new gO(t,e)}const{schedule:ey,cancel:gU}=IN(queueMicrotask,!1),Dn={x:!1,y:!1};function n2(){return Dn.x||Dn.y}function yO(t){return t==="x"||t==="y"?Dn[t]?null:(Dn[t]=!0,()=>{Dn[t]=!1}):Dn.x||Dn.y?null:(Dn.x=Dn.y=!0,()=>{Dn.x=Dn.y=!1})}function s2(t,e){const n=mO(t),s=new AbortController,r={passive:!0,...e,signal:s.signal};return[n,r,()=>s.abort()]}function y1(t){return!(t.pointerType==="touch"||n2())}function xO(t,e,n={}){const[s,r,i]=s2(t,n),o=l=>{if(!y1(l))return;const{target:c}=l,d=e(c,l);if(typeof d!="function"||!c)return;const h=f=>{y1(f)&&(d(f),c.removeEventListener("pointerleave",h))};c.addEventListener("pointerleave",h,r)};return s.forEach(l=>{l.addEventListener("pointerenter",o,r)}),i}const r2=(t,e)=>e?t===e?!0:r2(t,e.parentElement):!1,ty=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,vO=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function wO(t){return vO.has(t.tagName)||t.tabIndex!==-1}const Lu=new WeakSet;function x1(t){return e=>{e.key==="Enter"&&t(e)}}function Rf(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const _O=(t,e)=>{const n=t.currentTarget;if(!n)return;const s=x1(()=>{if(Lu.has(n))return;Rf(n,"down");const r=x1(()=>{Rf(n,"up")}),i=()=>Rf(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",s,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),e)};function v1(t){return ty(t)&&!n2()}function bO(t,e,n={}){const[s,r,i]=s2(t,n),o=l=>{const c=l.currentTarget;if(!v1(l))return;Lu.add(c);const d=e(c,l),h=(y,b)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",m),Lu.has(c)&&Lu.delete(c),v1(y)&&typeof d=="function"&&d(y,{success:b})},f=y=>{h(y,c===window||c===document||n.useGlobalTarget||r2(c,y.target))},m=y=>{h(y,!1)};window.addEventListener("pointerup",f,r),window.addEventListener("pointercancel",m,r)};return s.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",o,r),t2(l)&&(l.addEventListener("focus",d=>_O(d,r)),!wO(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),i}function i2(t){return yN(t)&&"ownerSVGElement"in t}function SO(t){return i2(t)&&t.tagName==="svg"}const Vt=t=>!!(t&&t.getVelocity),TO=[...YN,et,Lr],EO=t=>TO.find(QN(t)),ny=S.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class NO extends S.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const s=n.offsetParent,r=t2(s)&&s.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=r-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function kO({children:t,isPresent:e,anchorX:n,root:s}){const r=S.useId(),i=S.useRef(null),o=S.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=S.useContext(ny);return S.useInsertionEffect(()=>{const{width:c,height:d,top:h,left:f,right:m}=o.current;if(e||!i.current||!c||!d)return;const y=n==="left"?`left: ${f}`:`right: ${m}`;i.current.dataset.motionPopId=r;const b=document.createElement("style");l&&(b.nonce=l);const C=s??document.head;return C.appendChild(b),b.sheet&&b.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${d}px !important;
            ${y}px !important;
            top: ${h}px !important;
          }
        `),()=>{C.removeChild(b),C.contains(b)&&C.removeChild(b)}},[e]),a.jsx(NO,{isPresent:e,childRef:i,sizeRef:o,children:S.cloneElement(t,{ref:i})})}const jO=({children:t,initial:e,isPresent:n,onExitComplete:s,custom:r,presenceAffectsLayout:i,mode:o,anchorX:l,root:c})=>{const d=R0(CO),h=S.useId();let f=!0,m=S.useMemo(()=>(f=!1,{id:h,initial:e,isPresent:n,custom:r,onExitComplete:y=>{d.set(y,!0);for(const b of d.values())if(!b)return;s&&s()},register:y=>(d.set(y,!1),()=>d.delete(y))}),[n,d,s]);return i&&f&&(m={...m}),S.useMemo(()=>{d.forEach((y,b)=>d.set(b,!1))},[n]),S.useEffect(()=>{!n&&!d.size&&s&&s()},[n]),o==="popLayout"&&(t=a.jsx(kO,{isPresent:n,anchorX:l,root:c,children:t})),a.jsx(wh.Provider,{value:m,children:t})};function CO(){return new Map}function o2(t=!0){const e=S.useContext(wh);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:r}=e,i=S.useId();S.useEffect(()=>{if(t)return r(i)},[t]);const o=S.useCallback(()=>t&&s&&s(i),[i,s,t]);return!n&&s?[!1,o]:[!0]}const au=t=>t.key||"";function w1(t){const e=[];return S.Children.forEach(t,n=>{S.isValidElement(n)&&e.push(n)}),e}const zs=({children:t,custom:e,initial:n=!0,onExitComplete:s,presenceAffectsLayout:r=!0,mode:i="sync",propagate:o=!1,anchorX:l="left",root:c})=>{const[d,h]=o2(o),f=S.useMemo(()=>w1(t),[t]),m=o&&!d?[]:f.map(au),y=S.useRef(!0),b=S.useRef(f),C=R0(()=>new Map),[I,x]=S.useState(f),[v,_]=S.useState(f);pN(()=>{y.current=!1,b.current=f;for(let A=0;A<v.length;A++){const T=au(v[A]);m.includes(T)?C.delete(T):C.get(T)!==!0&&C.set(T,!1)}},[v,m.length,m.join("-")]);const P=[];if(f!==I){let A=[...f];for(let T=0;T<v.length;T++){const w=v[T],j=au(w);m.includes(j)||(A.splice(T,0,w),P.push(w))}return i==="wait"&&P.length&&(A=P),_(w1(A)),x(f),null}const{forceRender:D}=S.useContext(A0);return a.jsx(a.Fragment,{children:v.map(A=>{const T=au(A),w=o&&!d?!1:f===v||m.includes(T),j=()=>{if(C.has(T))C.set(T,!0);else return;let k=!0;C.forEach(R=>{R||(k=!1)}),k&&(D==null||D(),_(b.current),o&&(h==null||h()),s&&s())};return a.jsx(jO,{isPresent:w,initial:!y.current||n?void 0:!1,custom:e,presenceAffectsLayout:r,mode:i,root:c,onExitComplete:w?void 0:j,anchorX:l,children:A},T)})})},a2=S.createContext({strict:!1}),_1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Mo={};for(const t in _1)Mo[t]={isEnabled:e=>_1[t].some(n=>!!e[n])};function IO(t){for(const e in t)Mo[e]={...Mo[e],...t[e]}}const PO=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Dd(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||PO.has(t)}let l2=t=>!Dd(t);function AO(t){typeof t=="function"&&(l2=e=>e.startsWith("on")?!Dd(e):t(e))}try{AO(require("@emotion/is-prop-valid").default)}catch{}function RO(t,e,n){const s={};for(const r in t)r==="values"&&typeof t.values=="object"||(l2(r)||n===!0&&Dd(r)||!e&&!Dd(r)||t.draggable&&r.startsWith("onDrag"))&&(s[r]=t[r]);return s}const _h=S.createContext({});function bh(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Bl(t){return typeof t=="string"||Array.isArray(t)}const sy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ry=["initial",...sy];function Sh(t){return bh(t.animate)||ry.some(e=>Bl(t[e]))}function c2(t){return!!(Sh(t)||t.variants)}function DO(t,e){if(Sh(t)){const{initial:n,animate:s}=t;return{initial:n===!1||Bl(n)?n:void 0,animate:Bl(s)?s:void 0}}return t.inherit!==!1?e:{}}function MO(t){const{initial:e,animate:n}=DO(t,S.useContext(_h));return S.useMemo(()=>({initial:e,animate:n}),[b1(e),b1(n)])}function b1(t){return Array.isArray(t)?t.join(" "):t}const zl={};function VO(t){for(const e in t)zl[e]=t[e],B0(e)&&(zl[e].isCSSVariable=!0)}function u2(t,{layout:e,layoutId:n}){return Yo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!zl[t]||t==="opacity")}const LO={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},OO=Qo.length;function FO(t,e,n){let s="",r=!0;for(let i=0;i<OO;i++){const o=Qo[i],l=t[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const d=e2(l,Z0[o]);if(!c){r=!1;const h=LO[o]||o;s+=`${h}(${d}) `}n&&(e[o]=d)}}return s=s.trim(),n?s=n(e,r?"":s):r&&(s="none"),s}function iy(t,e,n){const{style:s,vars:r,transformOrigin:i}=t;let o=!1,l=!1;for(const c in e){const d=e[c];if(Yo.has(c)){o=!0;continue}else if(B0(c)){r[c]=d;continue}else{const h=e2(d,Z0[c]);c.startsWith("origin")?(l=!0,i[c]=h):s[c]=h}}if(e.transform||(o||n?s.transform=FO(e,t.transform,n):s.transform&&(s.transform="none")),l){const{originX:c="50%",originY:d="50%",originZ:h=0}=i;s.transformOrigin=`${c} ${d} ${h}`}}const oy=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function d2(t,e,n){for(const s in e)!Vt(e[s])&&!u2(s,n)&&(t[s]=e[s])}function UO({transformTemplate:t},e){return S.useMemo(()=>{const n=oy();return iy(n,e,t),Object.assign({},n.vars,n.style)},[e])}function $O(t,e){const n=t.style||{},s={};return d2(s,n,t),Object.assign(s,UO(t,e)),s}function BO(t,e){const n={},s=$O(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}const zO={offset:"stroke-dashoffset",array:"stroke-dasharray"},HO={offset:"strokeDashoffset",array:"strokeDasharray"};function WO(t,e,n=1,s=0,r=!0){t.pathLength=1;const i=r?zO:HO;t[i.offset]=le.transform(-s);const o=le.transform(e),l=le.transform(n);t[i.array]=`${o} ${l}`}function h2(t,{attrX:e,attrY:n,attrScale:s,pathLength:r,pathSpacing:i=1,pathOffset:o=0,...l},c,d,h){if(iy(t,l,d),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:m}=t;f.transform&&(m.transform=f.transform,delete f.transform),(m.transform||f.transformOrigin)&&(m.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),m.transform&&(m.transformBox=(h==null?void 0:h.transformBox)??"fill-box",delete f.transformBox),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),s!==void 0&&(f.scale=s),r!==void 0&&WO(f,r,i,o,!1)}const f2=()=>({...oy(),attrs:{}}),m2=t=>typeof t=="string"&&t.toLowerCase()==="svg";function GO(t,e,n,s){const r=S.useMemo(()=>{const i=f2();return h2(i,e,m2(s),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};d2(i,t.style,t),r.style={...i,...r.style}}return r}const KO=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ay(t){return typeof t!="string"||t.includes("-")?!1:!!(KO.indexOf(t)>-1||/[A-Z]/u.test(t))}function qO(t,e,n,{latestValues:s},r,i=!1){const l=(ay(t)?GO:BO)(e,s,r,t),c=RO(e,typeof t=="string",i),d=t!==S.Fragment?{...c,...l,ref:n}:{},{children:h}=e,f=S.useMemo(()=>Vt(h)?h.get():h,[h]);return S.createElement(t,{...d,children:f})}function S1(t){const e=[{},{}];return t==null||t.values.forEach((n,s)=>{e[0][s]=n.get(),e[1][s]=n.getVelocity()}),e}function ly(t,e,n,s){if(typeof e=="function"){const[r,i]=S1(s);e=e(n!==void 0?n:t.custom,r,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,i]=S1(s);e=e(n!==void 0?n:t.custom,r,i)}return e}function Ou(t){return Vt(t)?t.get():t}function XO({scrapeMotionValuesFromProps:t,createRenderState:e},n,s,r){return{latestValues:QO(n,s,r,t),renderState:e()}}function QO(t,e,n,s){const r={},i=s(t,{});for(const m in i)r[m]=Ou(i[m]);let{initial:o,animate:l}=t;const c=Sh(t),d=c2(t);e&&d&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const f=h?l:o;if(f&&typeof f!="boolean"&&!bh(f)){const m=Array.isArray(f)?f:[f];for(let y=0;y<m.length;y++){const b=ly(t,m[y]);if(b){const{transitionEnd:C,transition:I,...x}=b;for(const v in x){let _=x[v];if(Array.isArray(_)){const P=h?_.length-1:0;_=_[P]}_!==null&&(r[v]=_)}for(const v in C)r[v]=C[v]}}}return r}const p2=t=>(e,n)=>{const s=S.useContext(_h),r=S.useContext(wh),i=()=>XO(t,e,s,r);return n?i():R0(i)};function cy(t,e,n){var i;const{style:s}=t,r={};for(const o in s)(Vt(s[o])||e.style&&Vt(e.style[o])||u2(o,t)||((i=n==null?void 0:n.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(r[o]=s[o]);return r}const YO=p2({scrapeMotionValuesFromProps:cy,createRenderState:oy});function g2(t,e,n){const s=cy(t,e,n);for(const r in t)if(Vt(t[r])||Vt(e[r])){const i=Qo.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;s[i]=t[r]}return s}const JO=p2({scrapeMotionValuesFromProps:g2,createRenderState:f2}),ZO=Symbol.for("motionComponentSymbol");function no(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function eF(t,e,n){return S.useCallback(s=>{s&&t.onMount&&t.onMount(s),e&&(s?e.mount(s):e.unmount()),n&&(typeof n=="function"?n(s):no(n)&&(n.current=s))},[e])}const uy=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),tF="framerAppearId",y2="data-"+uy(tF),x2=S.createContext({});function nF(t,e,n,s,r){var C,I;const{visualElement:i}=S.useContext(_h),o=S.useContext(a2),l=S.useContext(wh),c=S.useContext(ny).reducedMotion,d=S.useRef(null);s=s||o.renderer,!d.current&&s&&(d.current=s(t,{visualState:e,parent:i,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const h=d.current,f=S.useContext(x2);h&&!h.projection&&r&&(h.type==="html"||h.type==="svg")&&sF(d.current,n,r,f);const m=S.useRef(!1);S.useInsertionEffect(()=>{h&&m.current&&h.update(n,l)});const y=n[y2],b=S.useRef(!!y&&!((C=window.MotionHandoffIsComplete)!=null&&C.call(window,y))&&((I=window.MotionHasOptimisedAnimation)==null?void 0:I.call(window,y)));return pN(()=>{h&&(m.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),b.current&&h.animationState&&h.animationState.animateChanges())}),S.useEffect(()=>{h&&(!b.current&&h.animationState&&h.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)==null||x.call(window,y)}),b.current=!1))}),h}function sF(t,e,n,s){const{layoutId:r,layout:i,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:d,layoutCrossfade:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:v2(t.parent)),t.projection.setOptions({layoutId:r,layout:i,alwaysMeasureLayout:!!o||l&&no(l),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:s,crossfade:h,layoutScroll:c,layoutRoot:d})}function v2(t){if(t)return t.options.allowProjection!==!1?t.projection:v2(t.parent)}function Df(t,{forwardMotionProps:e=!1}={},n,s){n&&IO(n);const r=ay(t)?JO:YO;function i(l,c){let d;const h={...S.useContext(ny),...l,layoutId:rF(l)},{isStatic:f}=h,m=MO(l),y=r(l,f);if(!f&&D0){iF();const b=oF(h);d=b.MeasureLayout,m.visualElement=nF(t,y,h,s,b.ProjectionNode)}return a.jsxs(_h.Provider,{value:m,children:[d&&m.visualElement?a.jsx(d,{visualElement:m.visualElement,...h}):null,qO(t,l,eF(y,m.visualElement,c),y,f,e)]})}i.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=S.forwardRef(i);return o[ZO]=t,o}function rF({layoutId:t}){const e=S.useContext(A0).id;return e&&t!==void 0?e+"-"+t:t}function iF(t,e){S.useContext(a2).strict}function oF(t){const{drag:e,layout:n}=Mo;if(!e&&!n)return{};const s={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function aF(t,e){if(typeof Proxy>"u")return Df;const n=new Map,s=(i,o)=>Df(i,o,t,e),r=(i,o)=>s(i,o);return new Proxy(r,{get:(i,o)=>o==="create"?s:(n.has(o)||n.set(o,Df(o,void 0,t,e)),n.get(o))})}function w2({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function lF({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function cF(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function Mf(t){return t===void 0||t===1}function Sp({scale:t,scaleX:e,scaleY:n}){return!Mf(t)||!Mf(e)||!Mf(n)}function ni(t){return Sp(t)||_2(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function _2(t){return T1(t.x)||T1(t.y)}function T1(t){return t&&t!=="0%"}function Md(t,e,n){const s=t-n,r=e*s;return n+r}function E1(t,e,n,s,r){return r!==void 0&&(t=Md(t,r,s)),Md(t,n,s)+e}function Tp(t,e=0,n=1,s,r){t.min=E1(t.min,e,n,s,r),t.max=E1(t.max,e,n,s,r)}function b2(t,{x:e,y:n}){Tp(t.x,e.translate,e.scale,e.originPoint),Tp(t.y,n.translate,n.scale,n.originPoint)}const N1=.999999999999,k1=1.0000000000001;function uF(t,e,n,s=!1){const r=n.length;if(!r)return;e.x=e.y=1;let i,o;for(let l=0;l<r;l++){i=n[l],o=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(s&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ro(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,b2(t,o)),s&&ni(i.latestValues)&&ro(t,i.latestValues))}e.x<k1&&e.x>N1&&(e.x=1),e.y<k1&&e.y>N1&&(e.y=1)}function so(t,e){t.min=t.min+e,t.max=t.max+e}function j1(t,e,n,s,r=.5){const i=$e(t.min,t.max,r);Tp(t,e,n,i,s)}function ro(t,e){j1(t.x,e.x,e.scaleX,e.scale,e.originX),j1(t.y,e.y,e.scaleY,e.scale,e.originY)}function S2(t,e){return w2(cF(t.getBoundingClientRect(),e))}function dF(t,e,n){const s=S2(t,n),{scroll:r}=e;return r&&(so(s.x,r.offset.x),so(s.y,r.offset.y)),s}const C1=()=>({translate:0,scale:1,origin:0,originPoint:0}),io=()=>({x:C1(),y:C1()}),I1=()=>({min:0,max:0}),qe=()=>({x:I1(),y:I1()}),Ep={current:null},T2={current:!1};function hF(){if(T2.current=!0,!!D0)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Ep.current=t.matches;t.addEventListener("change",e),e()}else Ep.current=!1}const fF=new WeakMap;function mF(t,e,n){for(const s in e){const r=e[s],i=n[s];if(Vt(r))t.addValue(s,r);else if(Vt(i))t.addValue(s,Do(r,{owner:t}));else if(i!==r)if(t.hasValue(s)){const o=t.getValue(s);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=t.getStaticValue(s);t.addValue(s,Do(o!==void 0?o:r,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const P1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class pF{scrapeMotionValuesFromProps(e,n,s){return{}}constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:r,blockInitialAnimation:i,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Y0,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Jt.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Le.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=Sh(n),this.isVariantNode=c2(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in f){const y=f[m];c[m]!==void 0&&Vt(y)&&y.set(c[m],!1)}}mount(e){this.current=e,fF.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),T2.current||hF(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ep.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Vr(this.notifyUpdate),Vr(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=Yo.has(e);s&&this.onBindTransform&&this.onBindTransform();const r=n.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&Le.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),i(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Mo){const n=Mo[e];if(!n)continue;const{isEnabled:s,Feature:r}=n;if(!this.features[e]&&r&&s(this.props)&&(this.features[e]=new r(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):qe()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<P1.length;s++){const r=P1[s];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const i="on"+r,o=e[i];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=mF(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const s=this.values.get(e);n!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=Do(n===null?void 0:n,{owner:this}),this.addValue(e,s)),s}readValue(e,n){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(gN(s)||xN(s))?s=parseFloat(s):!EO(s)&&Lr.test(n)&&(s=ZN(e,n)),this.setBaseTarget(e,Vt(s)?s.get():s)),Vt(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var i;const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const o=ly(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);o&&(s=o[e])}if(n&&s!==void 0)return s;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!Vt(r)?r:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new F0),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){ey.render(this.render)}}class E2 extends pF{constructor(){super(...arguments),this.KeyframeResolver=fO}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Vt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function N2(t,{style:e,vars:n},s,r){const i=t.style;let o;for(o in e)i[o]=e[o];r==null||r.applyProjectionStyles(i,s);for(o in n)i.setProperty(o,n[o])}function gF(t){return window.getComputedStyle(t)}class yF extends E2{constructor(){super(...arguments),this.type="html",this.renderInstance=N2}readValueFromInstance(e,n){var s;if(Yo.has(n))return(s=this.projection)!=null&&s.isProjecting?yp(n):AL(e,n);{const r=gF(e),i=(B0(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return S2(e,n)}build(e,n,s){iy(e,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,n,s){return cy(e,n,s)}}const k2=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function xF(t,e,n,s){N2(t,e,void 0,s);for(const r in e.attrs)t.setAttribute(k2.has(r)?r:uy(r),e.attrs[r])}class vF extends E2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=qe}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Yo.has(n)){const s=JN(n);return s&&s.default||0}return n=k2.has(n)?n:uy(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,s){return g2(e,n,s)}build(e,n,s){h2(e,n,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,n,s,r){xF(e,n,s,r)}mount(e){this.isSVGTag=m2(e.tagName),super.mount(e)}}const wF=(t,e)=>ay(t)?new vF(e):new yF(e,{allowProjection:t!==S.Fragment});function Hl(t,e,n){const s=t.getProps();return ly(s,e,n!==void 0?n:s.custom,t)}const Np=t=>Array.isArray(t);function _F(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Do(n))}function bF(t){return Np(t)?t[t.length-1]||0:t}function SF(t,e){const n=Hl(t,e);let{transitionEnd:s={},transition:r={},...i}=n||{};i={...i,...s};for(const o in i){const l=bF(i[o]);_F(t,o,l)}}function TF(t){return!!(Vt(t)&&t.add)}function kp(t,e){const n=t.getValue("willChange");if(TF(n))return n.add(e);if(!n&&Fs.WillChange){const s=new Fs.WillChange("auto");t.addValue("willChange",s),s.add(e)}}function j2(t){return t.props[y2]}const EF=t=>t!==null;function NF(t,{repeat:e,repeatType:n="loop"},s){const r=t.filter(EF),i=e&&n!=="loop"&&e%2===1?0:r.length-1;return!i||s===void 0?r[i]:s}const kF={type:"spring",stiffness:500,damping:25,restSpeed:10},jF=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),CF={type:"keyframes",duration:.8},IF={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},PF=(t,{keyframes:e})=>e.length>2?CF:Yo.has(t)?t.startsWith("scale")?jF(e[1]):kF:IF;function AF({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:r,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:d,...h}){return!!Object.keys(h).length}const dy=(t,e,n,s={},r,i)=>o=>{const l=J0(s,t)||{},c=l.delay||s.delay||0;let{elapsed:d=0}=s;d=d-ls(c);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-d,onUpdate:m=>{e.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:i?void 0:r};AF(l)||Object.assign(h,PF(t,h)),h.duration&&(h.duration=ls(h.duration)),h.repeatDelay&&(h.repeatDelay=ls(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let f=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(f=!0)),(Fs.instantAnimations||Fs.skipAnimations)&&(f=!0,h.duration=0,h.delay=0),h.allowFlatten=!l.type&&!l.ease,f&&!i&&e.get()!==void 0){const m=NF(h.keyframes,l);if(m!==void 0){Le.update(()=>{h.onUpdate(m),h.onComplete()});return}}return l.isSync?new Q0(h):new tO(h)};function RF({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function C2(t,e,{delay:n=0,transitionOverride:s,type:r}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...l}=e;s&&(i=s);const c=[],d=r&&t.animationState&&t.animationState.getState()[r];for(const h in l){const f=t.getValue(h,t.latestValues[h]??null),m=l[h];if(m===void 0||d&&RF(d,h))continue;const y={delay:n,...J0(i||{},h)},b=f.get();if(b!==void 0&&!f.isAnimating&&!Array.isArray(m)&&m===b&&!y.velocity)continue;let C=!1;if(window.MotionHandoffAnimation){const x=j2(t);if(x){const v=window.MotionHandoffAnimation(x,h,Le);v!==null&&(y.startTime=v,C=!0)}}kp(t,h),f.start(dy(h,f,m,t.shouldReduceMotion&&XN.has(h)?{type:!1}:y,t,C));const I=f.animation;I&&c.push(I)}return o&&Promise.all(c).then(()=>{Le.update(()=>{o&&SF(t,o)})}),c}function jp(t,e,n={}){var c;const s=Hl(t,e,n.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:r=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(r=n.transitionOverride);const i=s?()=>Promise.all(C2(t,s,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:m}=r;return DF(t,e,d,h,f,m,n)}:()=>Promise.resolve(),{when:l}=r;if(l){const[d,h]=l==="beforeChildren"?[i,o]:[o,i];return d().then(()=>h())}else return Promise.all([i(),o(n.delay)])}function DF(t,e,n=0,s=0,r=0,i=1,o){const l=[],c=t.variantChildren.size,d=(c-1)*r,h=typeof s=="function",f=h?m=>s(m,c):i===1?(m=0)=>m*r:(m=0)=>d-m*r;return Array.from(t.variantChildren).sort(MF).forEach((m,y)=>{m.notify("AnimationStart",e),l.push(jp(m,e,{...o,delay:n+(h?0:s)+f(y)}).then(()=>m.notify("AnimationComplete",e)))}),Promise.all(l)}function MF(t,e){return t.sortNodePosition(e)}function VF(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const r=e.map(i=>jp(t,i,n));s=Promise.all(r)}else if(typeof e=="string")s=jp(t,e,n);else{const r=typeof e=="function"?Hl(t,e,n.custom):e;s=Promise.all(C2(t,r,n))}return s.then(()=>{t.notify("AnimationComplete",e)})}function I2(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}const LF=ry.length;function P2(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?P2(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<LF;n++){const s=ry[n],r=t.props[s];(Bl(r)||r===!1)&&(e[s]=r)}return e}const OF=[...sy].reverse(),FF=sy.length;function UF(t){return e=>Promise.all(e.map(({animation:n,options:s})=>VF(t,n,s)))}function $F(t){let e=UF(t),n=A1(),s=!0;const r=c=>(d,h)=>{var m;const f=Hl(t,h,c==="exit"?(m=t.presenceContext)==null?void 0:m.custom:void 0);if(f){const{transition:y,transitionEnd:b,...C}=f;d={...d,...C,...b}}return d};function i(c){e=c(t)}function o(c){const{props:d}=t,h=P2(t.parent)||{},f=[],m=new Set;let y={},b=1/0;for(let I=0;I<FF;I++){const x=OF[I],v=n[x],_=d[x]!==void 0?d[x]:h[x],P=Bl(_),D=x===c?v.isActive:null;D===!1&&(b=I);let A=_===h[x]&&_!==d[x]&&P;if(A&&s&&t.manuallyAnimateOnMount&&(A=!1),v.protectedKeys={...y},!v.isActive&&D===null||!_&&!v.prevProp||bh(_)||typeof _=="boolean")continue;const T=BF(v.prevProp,_);let w=T||x===c&&v.isActive&&!A&&P||I>b&&P,j=!1;const k=Array.isArray(_)?_:[_];let R=k.reduce(r(x),{});D===!1&&(R={});const{prevResolvedValues:M={}}=v,E={...M,...R},V=z=>{w=!0,m.has(z)&&(j=!0,m.delete(z)),v.needsAnimating[z]=!0;const F=t.getValue(z);F&&(F.liveStyle=!1)};for(const z in E){const F=R[z],W=M[z];if(y.hasOwnProperty(z))continue;let Y=!1;Np(F)&&Np(W)?Y=!I2(F,W):Y=F!==W,Y?F!=null?V(z):m.add(z):F!==void 0&&m.has(z)?V(z):v.protectedKeys[z]=!0}v.prevProp=_,v.prevResolvedValues=R,v.isActive&&(y={...y,...R}),s&&t.blockInitialAnimation&&(w=!1),w&&(!(A&&T)||j)&&f.push(...k.map(z=>({animation:z,options:{type:x}})))}if(m.size){const I={};if(typeof d.initial!="boolean"){const x=Hl(t,Array.isArray(d.initial)?d.initial[0]:d.initial);x&&x.transition&&(I.transition=x.transition)}m.forEach(x=>{const v=t.getBaseTarget(x),_=t.getValue(x);_&&(_.liveStyle=!0),I[x]=v??null}),f.push({animation:I})}let C=!!f.length;return s&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(C=!1),s=!1,C?e(f):Promise.resolve()}function l(c,d){var f;if(n[c].isActive===d)return Promise.resolve();(f=t.variantChildren)==null||f.forEach(m=>{var y;return(y=m.animationState)==null?void 0:y.setActive(c,d)}),n[c].isActive=d;const h=o(c);for(const m in n)n[m].protectedKeys={};return h}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>n,reset:()=>{n=A1(),s=!0}}}function BF(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!I2(e,t):!1}function Jr(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function A1(){return{animate:Jr(!0),whileInView:Jr(),whileHover:Jr(),whileTap:Jr(),whileDrag:Jr(),whileFocus:Jr(),exit:Jr()}}class Wr{constructor(e){this.isMounted=!1,this.node=e}update(){}}class zF extends Wr{constructor(e){super(e),e.animationState||(e.animationState=$F(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();bh(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let HF=0;class WF extends Wr{constructor(){super(...arguments),this.id=HF++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const GF={animation:{Feature:zF},exit:{Feature:WF}};function Wl(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}function mc(t){return{point:{x:t.pageX,y:t.pageY}}}const KF=t=>e=>ty(e)&&t(e,mc(e));function rl(t,e,n,s){return Wl(t,e,KF(n),s)}const A2=1e-4,qF=1-A2,XF=1+A2,R2=.01,QF=0-R2,YF=0+R2;function zt(t){return t.max-t.min}function JF(t,e,n){return Math.abs(t-e)<=n}function R1(t,e,n,s=.5){t.origin=s,t.originPoint=$e(e.min,e.max,t.origin),t.scale=zt(n)/zt(e),t.translate=$e(n.min,n.max,t.origin)-t.originPoint,(t.scale>=qF&&t.scale<=XF||isNaN(t.scale))&&(t.scale=1),(t.translate>=QF&&t.translate<=YF||isNaN(t.translate))&&(t.translate=0)}function il(t,e,n,s){R1(t.x,e.x,n.x,s?s.originX:void 0),R1(t.y,e.y,n.y,s?s.originY:void 0)}function D1(t,e,n){t.min=n.min+e.min,t.max=t.min+zt(e)}function ZF(t,e,n){D1(t.x,e.x,n.x),D1(t.y,e.y,n.y)}function M1(t,e,n){t.min=e.min-n.min,t.max=t.min+zt(e)}function ol(t,e,n){M1(t.x,e.x,n.x),M1(t.y,e.y,n.y)}function gn(t){return[t("x"),t("y")]}const D2=({current:t})=>t?t.ownerDocument.defaultView:null,V1=(t,e)=>Math.abs(t-e);function e9(t,e){const n=V1(t.x,e.x),s=V1(t.y,e.y);return Math.sqrt(n**2+s**2)}class M2{constructor(e,n,{transformPagePoint:s,contextWindow:r=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Lf(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,b=e9(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!b)return;const{point:C}=m,{timestamp:I}=xt;this.history.push({...C,timestamp:I});const{onStart:x,onMove:v}=this.handlers;y||(x&&x(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,m)},this.handlePointerMove=(m,y)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Vf(y,this.transformPagePoint),Le.update(this.updatePoint,!0)},this.handlePointerUp=(m,y)=>{this.end();const{onEnd:b,onSessionEnd:C,resumeAnimation:I}=this.handlers;if(this.dragSnapToOrigin&&I&&I(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=Lf(m.type==="pointercancel"?this.lastMoveEventInfo:Vf(y,this.transformPagePoint),this.history);this.startEvent&&b&&b(m,x),C&&C(m,x)},!ty(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=s,this.distanceThreshold=o,this.contextWindow=r||window;const l=mc(e),c=Vf(l,this.transformPagePoint),{point:d}=c,{timestamp:h}=xt;this.history=[{...d,timestamp:h}];const{onSessionStart:f}=n;f&&f(e,Lf(c,this.history)),this.removeListeners=dc(rl(this.contextWindow,"pointermove",this.handlePointerMove),rl(this.contextWindow,"pointerup",this.handlePointerUp),rl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Vr(this.updatePoint)}}function Vf(t,e){return e?{point:e(t.point)}:t}function L1(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Lf({point:t},e){return{point:t,delta:L1(t,V2(e)),offset:L1(t,t9(e)),velocity:n9(e,.1)}}function t9(t){return t[0]}function V2(t){return t[t.length-1]}function n9(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const r=V2(t);for(;n>=0&&(s=t[n],!(r.timestamp-s.timestamp>ls(e)));)n--;if(!s)return{x:0,y:0};const i=cs(r.timestamp-s.timestamp);if(i===0)return{x:0,y:0};const o={x:(r.x-s.x)/i,y:(r.y-s.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function s9(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?$e(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?$e(n,t,s.max):Math.min(t,n)),t}function O1(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function r9(t,{top:e,left:n,bottom:s,right:r}){return{x:O1(t.x,n,r),y:O1(t.y,e,s)}}function F1(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function i9(t,e){return{x:F1(t.x,e.x),y:F1(t.y,e.y)}}function o9(t,e){let n=.5;const s=zt(t),r=zt(e);return r>s?n=Fl(e.min,e.max-s,t.min):s>r&&(n=Fl(t.min,t.max-r,e.min)),Os(0,1,n)}function a9(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Cp=.35;function l9(t=Cp){return t===!1?t=0:t===!0&&(t=Cp),{x:U1(t,"left","right"),y:U1(t,"top","bottom")}}function U1(t,e,n){return{min:$1(t,e),max:$1(t,n)}}function $1(t,e){return typeof t=="number"?t:t[e]||0}const c9=new WeakMap;class u9{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=qe(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:s}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=f=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(mc(f).point)},o=(f,m)=>{const{drag:y,dragPropagation:b,onDragStart:C}=this.getProps();if(y&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=yO(y),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),gn(x=>{let v=this.getAxisMotionValue(x).get()||0;if(us.test(v)){const{projection:_}=this.visualElement;if(_&&_.layout){const P=_.layout.layoutBox[x];P&&(v=zt(P)*(parseFloat(v)/100))}}this.originPoint[x]=v}),C&&Le.postRender(()=>C(f,m)),kp(this.visualElement,"transform");const{animationState:I}=this.visualElement;I&&I.setActive("whileDrag",!0)},l=(f,m)=>{this.latestPointerEvent=f,this.latestPanInfo=m;const{dragPropagation:y,dragDirectionLock:b,onDirectionLock:C,onDrag:I}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:x}=m;if(b&&this.currentDirection===null){this.currentDirection=d9(x),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",m.point,x),this.updateAxis("y",m.point,x),this.visualElement.render(),I&&I(f,m)},c=(f,m)=>{this.latestPointerEvent=f,this.latestPanInfo=m,this.stop(f,m),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>gn(f=>{var m;return this.getAnimationState(f)==="paused"&&((m=this.getAxisMotionValue(f).animation)==null?void 0:m.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new M2(e,{onSessionStart:i,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:s,contextWindow:D2(this.visualElement)})}stop(e,n){const s=e||this.latestPointerEvent,r=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!r||!s)return;const{velocity:o}=r;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&Le.postRender(()=>l(s,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,s){const{drag:r}=this.getProps();if(!s||!lu(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(o=s9(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:e,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,r=this.constraints;e&&no(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=r9(s.layoutBox,e):this.constraints=!1,this.elastic=l9(n),r!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&gn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=a9(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!no(e))return!1;const s=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=dF(s,r.root,this.visualElement.getTransformPagePoint());let o=i9(r.layout.layoutBox,i);if(n){const l=n(lF(o));this.hasMutatedConstraints=!!l,l&&(o=w2(l))}return o}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:r,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=gn(h=>{if(!lu(h,n,this.currentDirection))return;let f=c&&c[h]||{};o&&(f={min:0,max:0});const m=r?200:1e6,y=r?40:1e7,b={type:"inertia",velocity:s?e[h]:0,bounceStiffness:m,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(h,b)});return Promise.all(d).then(l)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return kp(this.visualElement,e),s.start(dy(e,s,0,n,this.visualElement,!1))}stopAnimation(){gn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){gn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),r=s[n];return r||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){gn(n=>{const{drag:s}=this.getProps();if(!lu(n,s,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(n);if(r&&r.layout){const{min:o,max:l}=r.layout.layoutBox[n];i.set(e[n]-$e(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!no(n)||!s||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};gn(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();r[o]=o9({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),gn(o=>{if(!lu(o,e,null))return;const l=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];l.set($e(c,d,r[o]))})}addListeners(){if(!this.visualElement.current)return;c9.set(this.visualElement,this);const e=this.visualElement.current,n=rl(e,"pointerdown",c=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(c)}),s=()=>{const{dragConstraints:c}=this.getProps();no(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,i=r.addEventListener("measure",s);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Le.read(s);const o=Wl(window,"resize",()=>this.scalePositionWithinConstraints()),l=r.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(gn(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=c[h].translate,f.set(f.get()+c[h].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:o=Cp,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:r,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function lu(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function d9(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class h9 extends Wr{constructor(e){super(e),this.removeGroupControls=En,this.removeListeners=En,this.controls=new u9(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||En}unmount(){this.removeGroupControls(),this.removeListeners()}}const B1=t=>(e,n)=>{t&&Le.postRender(()=>t(e,n))};class f9 extends Wr{constructor(){super(...arguments),this.removePointerDownListener=En}onPointerDown(e){this.session=new M2(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:D2(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:r}=this.node.getProps();return{onSessionStart:B1(e),onStart:B1(n),onMove:s,onEnd:(i,o)=>{delete this.session,r&&Le.postRender(()=>r(i,o))}}}mount(){this.removePointerDownListener=rl(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Fu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function z1(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Na={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(le.test(t))t=parseFloat(t);else return t;const n=z1(t,e.target.x),s=z1(t,e.target.y);return`${n}% ${s}%`}},m9={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,r=Lr.parse(t);if(r.length>5)return s;const i=Lr.createTransformer(t),o=typeof r[0]!="number"?1:0,l=n.x.scale*e.x,c=n.y.scale*e.y;r[0+o]/=l,r[1+o]/=c;const d=$e(l,c,.5);return typeof r[2+o]=="number"&&(r[2+o]/=d),typeof r[3+o]=="number"&&(r[3+o]/=d),i(r)}};let H1=!1;class p9 extends S.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:r}=this.props,{projection:i}=e;VO(g9),i&&(n.group&&n.group.add(i),s&&s.register&&r&&s.register(i),H1&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Fu.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:r,isPresent:i}=this.props,{projection:o}=s;return o&&(o.isPresent=i,H1=!0,r||e.layoutDependency!==n||n===void 0||e.isPresent!==i?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||Le.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),ey.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),s&&s.deregister&&s.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function L2(t){const[e,n]=o2(),s=S.useContext(A0);return a.jsx(p9,{...t,layoutGroup:s,switchLayoutGroup:S.useContext(x2),isPresent:e,safeToRemove:n})}const g9={borderRadius:{...Na,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Na,borderTopRightRadius:Na,borderBottomLeftRadius:Na,borderBottomRightRadius:Na,boxShadow:m9};function y9(t,e,n){const s=Vt(t)?t:Do(t);return s.start(dy("",s,e,n)),s.animation}const x9=(t,e)=>t.depth-e.depth;class v9{constructor(){this.children=[],this.isDirty=!1}add(e){M0(this.children,e),this.isDirty=!0}remove(e){V0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(x9),this.isDirty=!1,this.children.forEach(e)}}function w9(t,e){const n=Jt.now(),s=({timestamp:r})=>{const i=r-n;i>=e&&(Vr(s),t(i-e))};return Le.setup(s,!0),()=>Vr(s)}const O2=["TopLeft","TopRight","BottomLeft","BottomRight"],_9=O2.length,W1=t=>typeof t=="string"?parseFloat(t):t,G1=t=>typeof t=="number"||le.test(t);function b9(t,e,n,s,r,i){r?(t.opacity=$e(0,n.opacity??1,S9(s)),t.opacityExit=$e(e.opacity??1,0,T9(s))):i&&(t.opacity=$e(e.opacity??1,n.opacity??1,s));for(let o=0;o<_9;o++){const l=`border${O2[o]}Radius`;let c=K1(e,l),d=K1(n,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||G1(c)===G1(d)?(t[l]=Math.max($e(W1(c),W1(d),s),0),(us.test(d)||us.test(c))&&(t[l]+="%")):t[l]=d}(e.rotate||n.rotate)&&(t.rotate=$e(e.rotate||0,n.rotate||0,s))}function K1(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const S9=F2(0,.5,NN),T9=F2(.5,.95,En);function F2(t,e,n){return s=>s<t?0:s>e?1:n(Fl(t,e,s))}function q1(t,e){t.min=e.min,t.max=e.max}function mn(t,e){q1(t.x,e.x),q1(t.y,e.y)}function X1(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Q1(t,e,n,s,r){return t-=e,t=Md(t,1/n,s),r!==void 0&&(t=Md(t,1/r,s)),t}function E9(t,e=0,n=1,s=.5,r,i=t,o=t){if(us.test(e)&&(e=parseFloat(e),e=$e(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=$e(i.min,i.max,s);t===i&&(l-=e),t.min=Q1(t.min,e,n,l,r),t.max=Q1(t.max,e,n,l,r)}function Y1(t,e,[n,s,r],i,o){E9(t,e[n],e[s],e[r],e.scale,i,o)}const N9=["x","scaleX","originX"],k9=["y","scaleY","originY"];function J1(t,e,n,s){Y1(t.x,e,N9,n?n.x:void 0,s?s.x:void 0),Y1(t.y,e,k9,n?n.y:void 0,s?s.y:void 0)}function Z1(t){return t.translate===0&&t.scale===1}function U2(t){return Z1(t.x)&&Z1(t.y)}function e_(t,e){return t.min===e.min&&t.max===e.max}function j9(t,e){return e_(t.x,e.x)&&e_(t.y,e.y)}function t_(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function $2(t,e){return t_(t.x,e.x)&&t_(t.y,e.y)}function n_(t){return zt(t.x)/zt(t.y)}function s_(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class C9{constructor(){this.members=[]}add(e){M0(this.members,e),e.scheduleRender()}remove(e){if(V0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let s;for(let r=n;r>=0;r--){const i=this.members[r];if(i.isPresent!==!1){s=i;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function I9(t,e,n){let s="";const r=t.x.translate/e.x,i=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((r||i||o)&&(s=`translate3d(${r}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:h,rotateX:f,rotateY:m,skewX:y,skewY:b}=n;d&&(s=`perspective(${d}px) ${s}`),h&&(s+=`rotate(${h}deg) `),f&&(s+=`rotateX(${f}deg) `),m&&(s+=`rotateY(${m}deg) `),y&&(s+=`skewX(${y}deg) `),b&&(s+=`skewY(${b}deg) `)}const l=t.x.scale*e.x,c=t.y.scale*e.y;return(l!==1||c!==1)&&(s+=`scale(${l}, ${c})`),s||"none"}const Of=["","X","Y","Z"],P9=1e3;let A9=0;function Ff(t,e,n,s){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),s&&(s[t]=0))}function B2(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=j2(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Le,!(r||i))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&B2(s)}function z2({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:r}){return class{constructor(o={},l=e==null?void 0:e()){this.id=A9++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(M9),this.nodes.forEach(F9),this.nodes.forEach(U9),this.nodes.forEach(V9)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new v9)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new F0),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=i2(o)&&!SO(o),this.instance=o;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),t){let h,f=0;const m=()=>this.root.updateBlockedByResize=!1;Le.read(()=>{f=window.innerWidth}),t(o,()=>{const y=window.innerWidth;y!==f&&(f=y,this.root.updateBlockedByResize=!0,h&&h(),h=w9(m,250),Fu.hasAnimatedSinceResize&&(Fu.hasAnimatedSinceResize=!1,this.nodes.forEach(o_)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeLayoutChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||d.getDefaultTransition()||W9,{onLayoutAnimationStart:C,onLayoutAnimationComplete:I}=d.getProps(),x=!this.targetLayout||!$2(this.targetLayout,y),v=!f&&m;if(this.options.layoutRoot||this.resumeFrom||v||f&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const _={...J0(b,"layout"),onPlay:C,onComplete:I};(d.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_),this.setAnimationOrigin(h,v)}else f||o_(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Vr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach($9),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&B2(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const f=this.path[h];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(r_);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(i_);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(O9),this.nodes.forEach(R9),this.nodes.forEach(D9)):this.nodes.forEach(i_),this.clearAllSnapshots();const l=Jt.now();xt.delta=Os(0,1e3/60,l-xt.timestamp),xt.timestamp=l,xt.isProcessing=!0,jf.update.process(xt),jf.preRender.process(xt),jf.render.process(xt),xt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ey.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(L9),this.sharedNodes.forEach(B9)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Le.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Le.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!zt(this.snapshot.measuredBox.x)&&!zt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=qe(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=s(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!U2(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;o&&this.instance&&(l||ni(this.latestValues)||h)&&(r(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),G9(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var d;const{visualElement:o}=this.options;if(!o)return qe();const l=o.measureViewportBox();if(!(((d=this.scroll)==null?void 0:d.wasRoot)||this.path.some(K9))){const{scroll:h}=this.root;h&&(so(l.x,h.offset.x),so(l.y,h.offset.y))}return l}removeElementScroll(o){var c;const l=qe();if(mn(l,o),(c=this.scroll)!=null&&c.wasRoot)return l;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:f,options:m}=h;h!==this.root&&f&&m.layoutScroll&&(f.wasRoot&&mn(l,o),so(l.x,f.offset.x),so(l.y,f.offset.y))}return l}applyTransform(o,l=!1){const c=qe();mn(c,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&ro(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),ni(h.latestValues)&&ro(c,h.latestValues)}return ni(this.latestValues)&&ro(c,this.latestValues),c}removeTransform(o){const l=qe();mn(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!ni(d.latestValues))continue;Sp(d.latestValues)&&d.updateSnapshot();const h=qe(),f=d.measurePageBox();mn(h,f),J1(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return ni(this.latestValues)&&J1(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==xt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var m;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=xt.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qe(),this.relativeTargetOrigin=qe(),ol(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),mn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=qe(),this.targetWithTransforms=qe()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),ZF(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):mn(this.target,this.layout.layoutBox),b2(this.target,this.targetDelta)):mn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qe(),this.relativeTargetOrigin=qe(),ol(this.relativeTargetOrigin,this.target,y.target),mn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Sp(this.parent.latestValues)||_2(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var b;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(b=this.parent)!=null&&b.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===xt.timestamp&&(c=!1),c)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;mn(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;uF(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=qe());const{target:y}=o;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(X1(this.prevProjectionDelta.x,this.projectionDelta.x),X1(this.prevProjectionDelta.y,this.projectionDelta.y)),il(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==m||!s_(this.projectionDelta.x,this.prevProjectionDelta.x)||!s_(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=io(),this.projectionDelta=io(),this.projectionDeltaWithTransform=io()}setAnimationOrigin(o,l=!1){const c=this.snapshot,d=c?c.latestValues:{},h={...this.latestValues},f=io();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=qe(),y=c?c.source:void 0,b=this.layout?this.layout.source:void 0,C=y!==b,I=this.getStack(),x=!I||I.members.length<=1,v=!!(C&&!x&&this.options.crossfade===!0&&!this.path.some(H9));this.animationProgress=0;let _;this.mixTargetDelta=P=>{const D=P/1e3;a_(f.x,o.x,D),a_(f.y,o.y,D),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ol(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),z9(this.relativeTarget,this.relativeTargetOrigin,m,D),_&&j9(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=qe()),mn(_,this.relativeTarget)),C&&(this.animationValues=h,b9(h,d,this.latestValues,D,v,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,c,d;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(d=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||d.stop(),this.pendingAnimation&&(Vr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Le.update(()=>{Fu.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Do(0)),this.currentAnimation=y9(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),o.onUpdate&&o.onUpdate(h)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(P9),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:h}=o;if(!(!l||!c||!d)){if(this!==o&&this.layout&&d&&H2(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||qe();const f=zt(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+f;const m=zt(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+m}mn(l,c),ro(l,h),il(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new C9),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const d={};c.z&&Ff("z",o,d,this.animationValues);for(let h=0;h<Of.length;h++)Ff(`rotate${Of[h]}`,o,d,this.animationValues),Ff(`skew${Of[h]}`,o,d,this.animationValues);o.render();for(const h in d)o.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Ou(l==null?void 0:l.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Ou(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!ni(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=d.animationValues||d.latestValues;this.applyTransformsToTarget();let f=I9(this.projectionDeltaWithTransform,this.treeScale,h);c&&(f=c(h,f)),o.transform=f;const{x:m,y}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,d.animationValues?o.opacity=d===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const b in zl){if(h[b]===void 0)continue;const{correct:C,applyTo:I,isCSSVariable:x}=zl[b],v=f==="none"?h[b]:C(h[b],d);if(I){const _=I.length;for(let P=0;P<_;P++)o[I[P]]=v}else x?this.options.visualElement.renderState.vars[b]=v:o[b]=v}this.options.layoutId&&(o.pointerEvents=d===this?Ou(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(r_),this.root.sharedNodes.clear()}}}function R9(t){t.updateLayout()}function D9(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:r}=t.layout,{animationType:i}=t.options,o=e.source!==t.layout.source;i==="size"?gn(f=>{const m=o?e.measuredBox[f]:e.layoutBox[f],y=zt(m);m.min=s[f].min,m.max=m.min+y}):H2(i,e.layoutBox,s)&&gn(f=>{const m=o?e.measuredBox[f]:e.layoutBox[f],y=zt(s[f]);m.max=m.min+y,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+y)});const l=io();il(l,s,e.layoutBox);const c=io();o?il(c,t.applyTransform(r,!0),e.measuredBox):il(c,s,e.layoutBox);const d=!U2(l);let h=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:m,layout:y}=f;if(m&&y){const b=qe();ol(b,e.layoutBox,m.layoutBox);const C=qe();ol(C,s,y.layoutBox),$2(b,C)||(h=!0),f.options.layoutRoot&&(t.relativeTarget=C,t.relativeTargetOrigin=b,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function M9(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function V9(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function L9(t){t.clearSnapshot()}function r_(t){t.clearMeasurements()}function i_(t){t.isLayoutDirty=!1}function O9(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function o_(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function F9(t){t.resolveTargetDelta()}function U9(t){t.calcProjection()}function $9(t){t.resetSkewAndRotation()}function B9(t){t.removeLeadSnapshot()}function a_(t,e,n){t.translate=$e(e.translate,0,n),t.scale=$e(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function l_(t,e,n,s){t.min=$e(e.min,n.min,s),t.max=$e(e.max,n.max,s)}function z9(t,e,n,s){l_(t.x,e.x,n.x,s),l_(t.y,e.y,n.y,s)}function H9(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const W9={duration:.45,ease:[.4,0,.1,1]},c_=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),u_=c_("applewebkit/")&&!c_("chrome/")?Math.round:En;function d_(t){t.min=u_(t.min),t.max=u_(t.max)}function G9(t){d_(t.x),d_(t.y)}function H2(t,e,n){return t==="position"||t==="preserve-aspect"&&!JF(n_(e),n_(n),.2)}function K9(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const q9=z2({attachResizeListener:(t,e)=>Wl(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Uf={current:void 0},W2=z2({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Uf.current){const t=new q9({});t.mount(window),t.setOptions({layoutScroll:!0}),Uf.current=t}return Uf.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),X9={pan:{Feature:f9},drag:{Feature:h9,ProjectionNode:W2,MeasureLayout:L2}};function h_(t,e,n){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,i=s[r];i&&Le.postRender(()=>i(e,mc(e)))}class Q9 extends Wr{mount(){const{current:e}=this.node;e&&(this.unmount=xO(e,(n,s)=>(h_(this.node,s,"Start"),r=>h_(this.node,r,"End"))))}unmount(){}}class Y9 extends Wr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=dc(Wl(this.node.current,"focus",()=>this.onFocus()),Wl(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function f_(t,e,n){const{props:s}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),i=s[r];i&&Le.postRender(()=>i(e,mc(e)))}class J9 extends Wr{mount(){const{current:e}=this.node;e&&(this.unmount=bO(e,(n,s)=>(f_(this.node,s,"Start"),(r,{success:i})=>f_(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ip=new WeakMap,$f=new WeakMap,Z9=t=>{const e=Ip.get(t.target);e&&e(t)},e8=t=>{t.forEach(Z9)};function t8({root:t,...e}){const n=t||document;$f.has(n)||$f.set(n,{});const s=$f.get(n),r=JSON.stringify(e);return s[r]||(s[r]=new IntersectionObserver(e8,{root:t,...e})),s[r]}function n8(t,e,n){const s=t8(e);return Ip.set(t,n),s.observe(t),()=>{Ip.delete(t),s.unobserve(t)}}const s8={some:0,all:1};class r8 extends Wr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:r="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:s,threshold:typeof r=="number"?r:s8[r]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,i&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),m=d?h:f;m&&m(c)};return n8(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(i8(e,n))&&this.startObserver()}unmount(){}}function i8({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const o8={inView:{Feature:r8},tap:{Feature:J9},focus:{Feature:Y9},hover:{Feature:Q9}},a8={layout:{ProjectionNode:W2,MeasureLayout:L2}},l8={...GF,...o8,...X9,...a8},G=aF(l8,wF),c8=({variant:t="full",className:e=""})=>{const[n,s]=S.useState([]),[r,i]=S.useState("25"),[o,l]=S.useState(!1),{secondsLeft:c,isRunning:d,subjectName:h,mode:f,stopwatchSeconds:m,isPomodoroBreak:y,pomodoroCount:b,startTimer:C,stopTimer:I,resetTimer:x,setTimerMode:v,setTimerSubject:_,setCustomMinutes:P,getActualElapsedTime:D}=k0(),{addStudySession:A,updateQuestProgress:T,addReward:w}=jn(),j=[{key:"pomodoro",label:"Pomodoro",duration:25*60},{key:"custom",label:"Custom",duration:null},{key:"stopwatch",label:"Stopwatch",duration:0}];S.useEffect(()=>{const z=localStorage.getItem("subjects");z&&s(JSON.parse(z))},[]);const k=z=>{_(z.target.value)},R=()=>{const z=parseInt(r);z>0&&(P(z),v("custom"),l(!1))},M=()=>{if(!h){w({type:"XP_EARNED",title:"Session Complete!",description:"Don't forget to select a subject next time for full XP!",tier:"common"});return}const z=f==="stopwatch"?m:D(),F=Math.max(1,Math.round(z/60));A({subjectName:h,durationMinutes:F,mode:f,difficulty:1,mood:"neutral"}),T("time",F),T("sessions",1),T("subjects",1,h),w({type:"XP_EARNED",title:` ${F} min session complete!`,description:`Great work studying ${h}!`,tier:F>=60?"rare":F>=30?"uncommon":"common"})},E=()=>{d&&M(),I()},V=z=>{z==="custom"?l(!0):(l(!1),v(z))},$=()=>{if(f==="stopwatch"){const z=Math.floor(m/60),F=m%60;return`${String(z).padStart(2,"0")}:${String(F).padStart(2,"0")}`}else{const z=Math.floor(c/60),F=c%60;return`${String(z).padStart(2,"0")}:${String(F).padStart(2,"0")}`}},Q=()=>{if(f==="stopwatch")return 0;const z=f==="pomodoro"?y?5*60:25*60:f==="custom"?parseInt(r)*60:25*60,F=z-c;return z>0?F/z*100:0};return t==="compact"?a.jsx("div",{className:`bg-white/10 rounded-lg p-3 backdrop-blur ${e}`,children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("span",{className:"text-xs text-white/80 mb-1",children:h}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-lg font-mono text-white drop-shadow",children:$()}),d?a.jsx("button",{className:"px-3 py-1 rounded bg-[#FEC260] text-[#23234a] font-bold shadow hover:bg-[#FFD580] transition text-xs",onClick:E,children:"Stop"}):a.jsx("button",{className:"px-3 py-1 rounded bg-[#6C5DD3] text-white font-bold shadow hover:bg-[#7A6AD9] transition text-xs",onClick:C,disabled:f!=="stopwatch"&&c===0,children:"Start"})]})]})}):a.jsxs("div",{className:`bg-white/10 rounded-2xl p-6 backdrop-blur border border-white/10 ${e}`,children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs("select",{className:"w-full p-2 rounded bg-[#1a1a2e] text-white border border-[#6C5DD3] text-sm",value:h,onChange:k,disabled:d,children:[a.jsx("option",{value:"",children:"Select subject"}),n.map(z=>a.jsx("option",{value:z.name,children:z.name},z.id))]})}),a.jsx("div",{className:"flex gap-2 mb-4",children:j.map(z=>a.jsx("button",{className:`px-4 py-2 rounded-full font-semibold transition-all ${f===z.key?"bg-[#6C5DD3] text-white shadow":"bg-white/10 text-white/70 hover:bg-[#6C5DD3]/70"}`,onClick:()=>V(z.key),disabled:d,children:z.label},z.key))}),o&&a.jsxs("div",{className:"mb-4 flex gap-2",children:[a.jsx("input",{type:"number",min:"1",max:"480",value:r,onChange:z=>i(z.target.value),className:"flex-1 p-2 rounded bg-[#1a1a2e] text-white border border-[#6C5DD3] text-sm",placeholder:"25"}),a.jsx("button",{onClick:R,className:"px-4 py-2 rounded bg-[#6C5DD3] text-white font-semibold hover:bg-[#7A6AD9] transition text-sm",children:"Set"})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"relative inline-block mb-4",children:[a.jsx("svg",{width:"160",height:"160",className:"absolute top-0 left-0",children:a.jsx("circle",{cx:"80",cy:"80",r:"72",stroke:"#6C5DD3",strokeWidth:"8",fill:"none",strokeDasharray:2*Math.PI*72,strokeDashoffset:2*Math.PI*72*(1-Q()/100)})}),a.jsx("div",{className:"w-[130px] h-[130px] rounded-full bg-white/10 flex items-center justify-center mx-auto",children:a.jsx("span",{className:"text-4xl font-mono text-white drop-shadow-lg",children:$()})})]}),a.jsxs("div",{className:"flex justify-center gap-3",children:[d?a.jsx("button",{onClick:E,className:"px-6 py-2 rounded-xl bg-[#FEC260] text-[#23234a] font-bold shadow hover:bg-[#FFD580] transition",children:"Complete Session"}):a.jsx("button",{onClick:C,disabled:f!=="stopwatch"&&c===0,className:"px-6 py-2 rounded-xl bg-[#6C5DD3] text-white font-bold shadow hover:bg-[#7A6AD9] transition",children:"Start"}),a.jsx("button",{onClick:x,className:"px-6 py-2 rounded-xl bg-white/10 text-white font-bold shadow hover:bg-white/20 transition",children:"Reset"})]})]})]})};function u8(t){const e=new Date(t),n=e.getDay(),s=e.getDate()-n+(n===0?-6:1);return new Date(e.setDate(s))}function cu(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate())}function d8(t){if(!t||t.length===0)return 0;const e=[...new Set(t.map(l=>cu(new Date(l.timestamp)).toISOString().split("T")[0]))].sort();if(e.length===0)return 0;const n=cu(new Date).toISOString().split("T")[0],s=cu(new Date(Date.now()-24*60*60*1e3)).toISOString().split("T")[0];if(!(e.includes(n)||e.includes(s)))return 0;let i=0,o=new Date;for(;;){const l=cu(o).toISOString().split("T")[0];if(e.includes(l))i++,o.setDate(o.getDate()-1);else break}return i}function h8(t){if(t.done)return a.jsx(wt,{className:"w-4 h-4 text-[#B6E4CF]"});if(t.scheduledDate){const e=new Date().toISOString().split("T")[0],n=new Date(t.scheduledDate).toISOString().split("T")[0];if(n<e)return a.jsx(jM,{className:"w-4 h-4 text-red-500"});if(n===e)return a.jsx(dn,{className:"w-4 h-4 text-[#FEC260]"})}return a.jsx(dn,{className:"w-4 h-4 text-gray-400"})}function f8(t){const n=Date.now()-7*24*60*60*1e3;return t.filter(s=>s.done&&s.doneAt&&s.doneAt>=n)}function m8(){Ii();const t=$s(),[e,n]=S.useState([]),[s,r]=S.useState([]),[i,o]=S.useState([]),[l,c]=S.useState({hoursThisWeek:0,totalGoal:0,progress:0}),[d,h]=S.useState(0),[f,m]=S.useState(0);new Date().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),S.useEffect(()=>{const D=localStorage.getItem("subjects"),A=localStorage.getItem("studySessions"),T=localStorage.getItem("tasks");D&&n(JSON.parse(D)),A&&r(JSON.parse(A)),T&&o(JSON.parse(T))},[]),S.useEffect(()=>{const A=u8(new Date),T=e.reduce((M,E)=>M+(E.goalHours||0),0);s.filter(M=>new Date(M.timestamp)>=A).reduce((M,E)=>M+(E.durationMinutes||0),0);const j=P(),k=d8(s),R=f8(i);c({hoursThisWeek:j.hoursThisWeek,totalGoal:T,progress:j.progress}),h(k),m(R.length)},[e,s,i]);const C=(()=>{const D=new Date().toISOString().split("T")[0];return i.filter(A=>A.scheduledDate?new Date(A.scheduledDate).toISOString().split("T")[0]===D:!1).slice(0,5)})(),I=D=>{const A=s.filter((T,w)=>w!==D);r(A),localStorage.setItem("studySessions",JSON.stringify(A))},x=({title:D,icon:A,children:T,className:w=""})=>a.jsxs(G.div,{whileHover:{scale:1.015},className:`rounded-xl bg-white/5 p-5 border border-white/10 backdrop-blur shadow-xl ${w}`,children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[A&&a.jsx("div",{className:"text-purple-400 text-2xl",children:A}),a.jsx("h2",{className:"text-lg font-semibold text-white",children:D})]}),T]}),v=D=>D===0?"Start your streak today!":D===1?"Great start! Keep it up!":D<7?"You're building momentum!":D<30?"Impressive consistency!":"You're on fire! ",_=D=>D===0?"No tasks completed yet this week":D===1?"Great start! Keep going!":D<5?"You're making progress!":D<10?"Excellent productivity!":"Outstanding work this week!",P=()=>{const D=new Date;D.setDate(D.getDate()-7);const A=s.filter(w=>new Date(w.timestamp)>D),T=A.reduce((w,j)=>w+(j.durationMinutes||0),0);return{sessionsThisWeek:A.length,hoursThisWeek:T/60,progress:totalGoal>0?Math.min(T/60/totalGoal*100,100):0}};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#1a1a2e] to-[#16213e] mt-20 flex",children:[a.jsx(Bt,{}),a.jsxs("div",{className:"flex-1 ml-16 transition-all duration-300 ease-in-out [body>div>aside:hover_+_div&]:ml-64",children:[a.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 px-6 py-8 bg-#F8F9FC",children:[a.jsxs(x,{title:"This Week's Study",children:[a.jsxs("span",{className:"text-3xl font-bold text-white",children:[l.hoursThisWeek.toFixed(1)," ",a.jsx("small",{className:"text-base font-normal text-gray-300",children:"hrs"})]}),a.jsx("div",{className:"w-full bg-white/10 rounded-full h-3 my-3 overflow-hidden",children:a.jsx("div",{className:"bg-[#6C5DD3] h-3 rounded-full transition-all duration-300",style:{width:`${l.progress}%`}})}),a.jsxs("small",{className:"block text-gray-300 mb-2",children:[Math.round(l.progress),"% of your ",l.totalGoal.toFixed(1)," hr goal"]}),l.progress>=100?a.jsx("p",{className:"text-[#B6E4CF] mt-2",children:" Goal met!"}):l.progress>=75?a.jsx("p",{className:"text-[#FEC260] mt-2",children:"Almost there!"}):a.jsx("p",{className:"text-[#FEC260] mt-2",children:"Keep going!"})]}),a.jsx(x,{title:"Streak",icon:null,children:a.jsxs("div",{className:"flex flex-col",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(Wt,{className:`w-7 h-7 ${d>0?"text-orange-400":"text-gray-400"}`}),a.jsxs("span",{className:"text-3xl font-bold text-orange-400",children:[d," ",a.jsx("small",{className:"text-base font-normal text-gray-300",children:"days in a row"})]})]})}),a.jsx("div",{className:"flex-1"}),a.jsx("p",{className:"text-sm text-gray-300 mt-4",children:v(d)})]})}),a.jsxs(x,{title:"Tasks completed this week!",icon:null,children:[a.jsx("div",{className:"mb-6",children:a.jsx("span",{className:"block text-4xl font-extrabold text-white mb-2",children:f})}),a.jsx("p",{className:"text-sm text-gray-300 mb-4",children:_(f)}),a.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[#6C5DD3] text-white font-semibold shadow hover:bg-[#7A6AD9] transition",onClick:()=>t("/tasks"),children:[a.jsx("span",{className:"text-xl",children:""})," Go to Tasks"]})]})]}),a.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 px-6 py-8",children:[a.jsx(x,{title:"Today's Tasks",icon:"",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-white mb-3",children:"Today's Tasks"}),C.length>0?a.jsx("div",{className:"space-y-2",children:C.map(D=>a.jsx("div",{className:"flex items-center justify-between p-2 rounded-lg bg-white/5",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs font-medium text-white",children:D.name}),h8(D)]}),a.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[D.subject,"  ",D.time," min"]})]})},D.id))}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"No tasks scheduled"}),a.jsx("p",{className:"text-gray-500 text-xs",children:"Great job staying on top!"})]}),a.jsx("button",{className:"w-full mt-3 px-3 py-2 rounded-lg bg-[#6C5DD3] text-white font-semibold shadow hover:bg-[#7A6AD9] transition text-sm",onClick:()=>t("/tasks"),children:"+ Add Task"})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-white mb-3",children:"Recent Study Logs"}),a.jsx("div",{className:"max-h-[150px] overflow-y-auto",children:s.length>0?a.jsxs("div",{className:"space-y-2",children:[s.slice(0,5).map((D,A)=>a.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-white/5",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Wn,{className:"w-3 h-3 text-[#6C5DD3]"}),a.jsx("span",{className:"text-xs font-medium text-white",children:D.subjectName})]}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx(dn,{className:"w-3 h-3 text-gray-400"}),a.jsxs("span",{className:"text-xs text-gray-300",children:[D.durationMinutes.toFixed(1)," min"]}),a.jsx("span",{className:"text-xs text-gray-500",children:""}),a.jsx("span",{className:"text-xs text-gray-300",children:new Date(D.timestamp).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]})]}),a.jsx("button",{onClick:()=>I(A),className:"p-1 rounded hover:bg-red-600/20 transition text-red-400 hover:text-red-300",title:"Delete session",children:a.jsx(Ao,{className:"w-3 h-3"})})]},A)),s.length>5&&a.jsx("div",{className:"text-center py-2",children:a.jsxs("span",{className:"text-xs text-gray-400",children:["+",s.length-5," more sessions"]})})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx(Wn,{className:"w-6 h-6 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"No study logs yet"}),a.jsx("p",{className:"text-gray-500 text-xs",children:"Start studying with the timer!"})]})}),s.length>0&&a.jsx("div",{className:"mt-3 pt-2 border-t border-white/10",children:a.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-400",children:[a.jsxs("span",{children:["Total: ",s.length," sessions"]}),a.jsxs("span",{children:[(s.reduce((D,A)=>D+A.durationMinutes,0)/60).toFixed(1),"h"]})]})})]})]})}),a.jsx(x,{title:"Smart Timer",icon:"",children:a.jsx(c8,{})})]}),a.jsxs("section",{className:"px-6 py-8 flex flex-wrap gap-4",children:[a.jsx("button",{className:"flex-1 min-w-[200px] px-6 py-4 rounded-2xl bg-[#6C5DD3] text-white font-semibold shadow hover:bg-[#7A6AD9] transition",children:"+ Add Subject"}),a.jsx("button",{className:"flex-1 min-w-[200px] px-6 py-4 rounded-2xl bg-[#6C5DD3] text-white font-semibold shadow hover:bg-[#7A6AD9] transition",children:"+ Add Task"}),a.jsx("button",{className:"flex-1 min-w-[200px] px-6 py-4 rounded-2xl bg-[#6C5DD3] text-white font-semibold shadow hover:bg-[#7A6AD9] transition",children:"+ Schedule tasks"}),a.jsx("button",{className:"flex-1 min-w-[200px] px-6 py-4 rounded-2xl bg-[#6C5DD3] text-white font-semibold shadow hover:bg-[#7A6AD9] transition",children:" Study"})]}),a.jsx("footer",{className:"py-6 text-center bg-[#3F3D56] text-white mt-10",children:a.jsx("p",{children:" 2025 Trackviso. Keep learning, keep growing!"})})]})]})}const Jo=t=>()=>{console.log(`Playing sound: ${t}`)},p8=({x:t,y:e,color:n,shape:s,delay:r=0})=>{const i={circle:"rounded-full",square:"rounded-sm",star:"clip-star"};return a.jsx(G.div,{initial:{x:t+"%",y:e+"%",opacity:1,scale:1,rotate:0},animate:{x:t+(Math.random()-.5)*100+"%",y:e+150+Math.random()*50+"%",opacity:0,scale:[1,1.2,.8,0],rotate:[0,180,360]},transition:{duration:3+Math.random()*2,ease:"easeOut",delay:r},className:`absolute w-3 h-3 ${i[s]} pointer-events-none`,style:{backgroundColor:n}})},Th=({intensity:t="medium",colors:e=null,duration:n=3e3})=>{const[s,r]=S.useState([]),i={low:{count:30,spread:60},medium:{count:60,spread:80},high:{count:100,spread:100},extreme:{count:200,spread:120}},l=e||["#FFD700","#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9","#F8C471"],{count:c,spread:d}=i[t];return S.useEffect(()=>{const h=Array.from({length:c},(m,y)=>({id:y,x:50+(Math.random()-.5)*d,y:45+Math.random()*20,color:l[Math.floor(Math.random()*l.length)],shape:["circle","square","star"][Math.floor(Math.random()*3)],delay:Math.random()*.5}));r(h);const f=setTimeout(()=>{r([])},n);return()=>clearTimeout(f)},[t,n]),a.jsx("div",{className:"fixed inset-0 pointer-events-none z-50",children:s.map(h=>a.jsx(p8,{x:h.x,y:h.y,color:h.color,shape:h.shape,delay:h.delay},h.id))})},G2=({amount:t,bonuses:e={},onComplete:n})=>{const[s,r]=S.useState(0),i=Jo("xp_gain");return S.useEffect(()=>{i();const o=1e3,l=30,c=t/l;let d=0;const h=setInterval(()=>{d++,r(Math.floor(c*d)),d>=l&&(clearInterval(h),r(t),setTimeout(()=>{n==null||n()},1500))},o/l);return()=>clearInterval(h)},[t,n]),a.jsxs(G.div,{initial:{scale:0,opacity:0,y:50},animate:{scale:1,opacity:1,y:0},exit:{scale:0,opacity:0,y:-50},className:"fixed top-1/3 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50",children:[a.jsx(G.div,{animate:{scale:[1,1.1,1],rotate:[0,5,-5,0]},transition:{duration:.6,repeat:2,ease:"easeInOut"},className:"bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500 text-white px-8 py-6 rounded-3xl shadow-2xl border-4 border-yellow-300",children:a.jsxs("div",{className:"text-center",children:[a.jsx(G.div,{animate:{rotate:[0,360]},transition:{duration:2,repeat:1/0,ease:"linear"},className:"inline-block mb-3",children:a.jsx(Je,{className:"w-12 h-12 text-yellow-200"})}),a.jsxs("div",{className:"text-5xl font-bold mb-2",children:["+",s.toLocaleString()]}),a.jsx("div",{className:"text-xl font-semibold",children:"XP GAINED!"}),Object.keys(e).length>0&&a.jsx(G.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:"mt-3 text-sm bg-black/20 rounded-lg p-2",children:Object.entries(e).map(([o,l])=>l>0&&a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{className:"capitalize",children:[o," Bonus:"]}),a.jsxs("span",{children:["+",l]})]},o))})]})}),a.jsx(Th,{intensity:"medium"})]})},K2=({newLevel:t,isPrestige:e=!1,onComplete:n})=>{const s=Jo(e?"prestige":"level_up");return S.useEffect(()=>{s();const r=setTimeout(()=>{n==null||n()},4e3);return()=>clearTimeout(r)},[n]),a.jsxs(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:[a.jsxs(G.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200,damping:20,duration:1},className:`${e?"bg-gradient-to-br from-purple-800 via-pink-600 to-yellow-500":"bg-gradient-to-br from-purple-600 via-blue-600 to-indigo-700"} text-white p-8 rounded-3xl shadow-2xl text-center max-w-md mx-4 border-4 border-yellow-400`,children:[a.jsx(G.div,{animate:{rotate:[0,10,-10,0],scale:[1,1.1,1]},transition:{duration:.8,repeat:1/0,repeatDelay:1},children:e?a.jsx(Sn,{className:"w-24 h-24 mx-auto mb-4 text-yellow-300"}):a.jsx(nn,{className:"w-20 h-20 mx-auto mb-4 text-yellow-400"})}),a.jsx(G.h2,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:"text-4xl font-bold mb-2",children:e?"PRESTIGE UP!":"LEVEL UP!"}),a.jsx(G.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},className:"text-xl mb-4",children:e?"Welcome to the Elite!":"Congratulations!"}),a.jsx(G.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.7,type:"spring",stiffness:300},className:"text-8xl font-bold text-yellow-300 mb-4",children:e?`P${t}`:t}),a.jsx(G.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.9},className:"text-lg opacity-90",children:e?"You've transcended!":"Keep pushing your limits!"})]}),a.jsx(Th,{intensity:e?"extreme":"high",colors:e?["#FFD700","#FF1493","#9370DB","#FF6347"]:null})]})},g8=({reward:t,onComplete:e})=>{const n=Jo(`reward_${t.tier}`),s={legendary:{bg:"from-yellow-400 via-orange-500 to-red-600",border:"border-yellow-300",glow:"shadow-yellow-500/50",confetti:"extreme",duration:4e3},epic:{bg:"from-purple-500 via-pink-500 to-red-500",border:"border-purple-300",glow:"shadow-purple-500/40",confetti:"high",duration:3500},rare:{bg:"from-blue-500 via-cyan-500 to-teal-500",border:"border-blue-300",glow:"shadow-blue-500/40",confetti:"medium",duration:3e3},uncommon:{bg:"from-green-500 via-emerald-500 to-teal-500",border:"border-green-300",glow:"shadow-green-500/30",confetti:"medium",duration:2500},common:{bg:"from-gray-500 via-slate-500 to-gray-600",border:"border-gray-300",glow:"shadow-gray-500/20",confetti:"low",duration:2e3}},r=s[t.tier]||s.common;return S.useEffect(()=>{n();const i=setTimeout(()=>{e==null||e()},r.duration);return()=>clearTimeout(i)},[e,r.duration]),a.jsxs(G.div,{initial:{scale:0,opacity:0,rotate:-90},animate:{scale:1,opacity:1,rotate:0},exit:{scale:0,opacity:0,rotate:90},className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50",children:[a.jsx(G.div,{animate:{scale:[1,1.05,1],boxShadow:["0 0 20px rgba(255,255,255,0.3)","0 0 40px rgba(255,255,255,0.6)","0 0 20px rgba(255,255,255,0.3)"]},transition:{duration:1,repeat:1/0,ease:"easeInOut"},className:`bg-gradient-to-br ${r.bg} text-white px-8 py-6 rounded-3xl shadow-2xl border-4 ${r.border} ${r.glow} max-w-sm`,children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:`inline-block px-3 py-1 rounded-full bg-white/20 text-sm font-bold mb-3 ${t.tier==="legendary"?"animate-pulse":""}`,children:[t.tier.toUpperCase()," REWARD!"]}),a.jsx(G.div,{animate:{rotate:t.tier==="legendary"?[0,360]:[0,10,-10,0],scale:[1,1.2,1]},transition:{duration:t.tier==="legendary"?2:.6,repeat:1/0,ease:"easeInOut"},className:"text-6xl mb-4",children:t.tier==="legendary"?"":t.tier==="epic"?"":t.tier==="rare"?"":t.tier==="uncommon"?"":""}),a.jsx("h2",{className:"text-2xl font-bold mb-2",children:t.title}),a.jsx("p",{className:"text-lg opacity-90 mb-4",children:t.description}),t.bonusXP>0&&a.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[a.jsx(Je,{className:"w-6 h-6 text-yellow-300"}),a.jsxs("span",{className:"text-2xl font-bold",children:["+",t.bonusXP," XP"]})]}),t.extras&&a.jsxs("div",{className:"text-sm bg-black/20 rounded-lg p-3",children:[t.extras.title&&a.jsxs("div",{className:"mb-1",children:[" Title: ",t.extras.title]}),t.extras.badge&&a.jsxs("div",{children:[" Badge: ",t.extras.badge]})]})]})}),a.jsx(Th,{intensity:r.confetti})]})},q2=({achievement:t,onComplete:e})=>{var s;const n=Jo("achievement");return S.useEffect(()=>{n();const r=setTimeout(()=>{e==null||e()},4e3);return()=>clearTimeout(r)},[e]),a.jsxs(G.div,{initial:{x:400,opacity:0,scale:.8},animate:{x:0,opacity:1,scale:1},exit:{x:400,opacity:0,scale:.8},className:"fixed top-4 right-4 bg-gradient-to-r from-green-500 to-emerald-600 text-white p-6 rounded-3xl shadow-2xl z-50 max-w-sm border-4 border-yellow-400",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(G.div,{animate:{rotate:[0,360],scale:[1,1.2,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"text-4xl",children:t.icon}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(bt,{className:"w-5 h-5 text-yellow-300"}),a.jsx("span",{className:"font-bold text-lg",children:"Achievement Unlocked!"})]}),a.jsx("h3",{className:"font-bold text-xl mb-1",children:t.name}),a.jsx("p",{className:"text-sm opacity-90 mb-2",children:t.description}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Je,{className:"w-4 h-4 text-yellow-300"}),a.jsxs("span",{className:"text-sm font-semibold",children:["+",t.xp," XP"]}),a.jsx("span",{className:"px-2 py-1 rounded-full bg-white/20 text-xs font-bold ml-auto",children:(s=t.tier)==null?void 0:s.toUpperCase()})]})]})]}),a.jsx(G.div,{initial:{width:0},animate:{width:"100%"},transition:{duration:3.5,ease:"linear"},className:"h-1 bg-yellow-400 rounded-full mt-4"})]})},X2=({streak:t,onComplete:e})=>{const n=Jo("streak_milestone");return S.useEffect(()=>{n();const s=setTimeout(()=>{e==null||e()},3500);return()=>clearTimeout(s)},[e]),a.jsxs(G.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50",children:[a.jsxs(G.div,{animate:{scale:[1,1.05,1],rotate:[0,2,-2,0]},transition:{duration:.8,repeat:1/0,ease:"easeInOut"},className:"bg-gradient-to-r from-orange-500 via-red-500 to-pink-600 text-white px-10 py-8 rounded-3xl shadow-2xl text-center border-4 border-yellow-400",children:[a.jsx(G.div,{animate:{rotate:[0,15,-15,0],scale:[1,1.2,1]},transition:{duration:.6,repeat:1/0,repeatDelay:1},children:a.jsx(Wt,{className:"w-20 h-20 mx-auto mb-4 text-yellow-300"})}),a.jsx("h2",{className:"text-3xl font-bold mb-2",children:" STREAK MILESTONE! "}),a.jsx(G.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.3,type:"spring",stiffness:300},className:"text-7xl font-bold text-yellow-300 mb-3",children:t}),a.jsx("p",{className:"text-xl mb-2",children:"Days of consistent studying!"}),a.jsx("p",{className:"text-lg opacity-80",children:"Keep the fire burning! "})]}),a.jsx(Th,{intensity:"high",colors:["#FF4500","#FF6347","#FFD700","#FFA500"]})]})},Q2=({quest:t,onComplete:e})=>{const n=Jo("quest_complete");return S.useEffect(()=>{n();const s=setTimeout(()=>{e==null||e()},3e3);return()=>clearTimeout(s)},[e]),a.jsxs(G.div,{initial:{y:-100,opacity:0,scale:.8},animate:{y:0,opacity:1,scale:1},exit:{y:-100,opacity:0,scale:.8},className:"fixed top-4 left-1/2 transform -translate-x-1/2 bg-gradient-to-r from-blue-500 to-indigo-600 text-white p-6 rounded-3xl shadow-2xl z-50 max-w-sm text-center border-4 border-cyan-300",children:[a.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[a.jsx(G.div,{animate:{scale:[1,1.3,1]},transition:{duration:.6,repeat:2},children:a.jsx(wt,{className:"w-8 h-8 text-green-300"})}),a.jsx("span",{className:"font-bold text-xl",children:"Quest Complete!"})]}),a.jsx("p",{className:"text-lg mb-3",children:t.name}),a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(Je,{className:"w-5 h-5 text-yellow-300"}),a.jsxs("span",{className:"text-lg font-semibold",children:["+",t.xp," XP"]})]})]})},y8=({notifications:t,onRemove:e})=>a.jsx("div",{className:"fixed top-4 right-4 z-40 space-y-3 max-w-sm",children:a.jsx(zs,{mode:"popLayout",children:t.map(n=>a.jsx(G.div,{layout:!0,initial:{x:400,opacity:0},animate:{x:0,opacity:1},exit:{x:400,opacity:0},className:"bg-white rounded-xl shadow-lg p-4 border-l-4 border-purple-500",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-gray-800",children:n.title}),a.jsx("p",{className:"text-sm text-gray-600",children:n.message})]}),a.jsx("button",{onClick:()=>e(n.id),className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(Ol,{className:"w-4 h-4"})})]})},n.id))})}),Eh=({progress:t,label:e,color:n="blue",showPercentage:s=!0,height:r="h-3",animated:i=!0})=>{const o={blue:"from-blue-500 to-blue-600",green:"from-green-500 to-green-600",purple:"from-purple-500 to-purple-600",orange:"from-orange-500 to-orange-600",red:"from-red-500 to-red-600",yellow:"from-yellow-500 to-yellow-600",pink:"from-pink-500 to-pink-600"};return a.jsxs("div",{className:"w-full",children:[e&&a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:e}),s&&a.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[Math.round(t),"%"]})]}),a.jsx("div",{className:`w-full bg-gray-200 rounded-full ${r} overflow-hidden`,children:a.jsx(G.div,{initial:{width:0},animate:{width:`${Math.min(100,Math.max(0,t))}%`},transition:{duration:i?1:0,ease:"easeOut"},className:`${r} bg-gradient-to-r ${o[n]} rounded-full shadow-sm relative overflow-hidden`,children:i&&t>0&&a.jsx(G.div,{animate:{x:["-100%","100%"]},transition:{duration:2,repeat:1/0,ease:"linear"},className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent"})})})]})},ut={ACTIVE:"active",WARNING:"warning",DANGER:"danger",BROKEN:"broken",PROTECTED:"protected"},Pp={beginner:{name:"Beginner",days:[1,2],color:"from-gray-400 to-gray-600",icon:"",multiplier:1,description:"Just getting started!"},growing:{name:"Growing",days:[3,6],color:"from-green-400 to-green-600",icon:"",multiplier:1.1,description:"Building momentum!"},strong:{name:"Strong",days:[7,13],color:"from-blue-400 to-blue-600",icon:"",multiplier:1.2,description:"Getting stronger!"},blazing:{name:"Blazing",days:[14,29],color:"from-orange-400 to-red-500",icon:"",multiplier:1.3,description:"On fire!"},legendary:{name:"Legendary",days:[30,99],color:"from-purple-400 to-pink-500",icon:"",multiplier:1.5,description:"Unstoppable force!"},godlike:{name:"God-like",days:[100,1/0],color:"from-yellow-400 to-orange-500",icon:"",multiplier:2,description:"Transcended mortal limits!"}},x8=t=>Object.values(Pp).find(e=>t>=e.days[0]&&t<=e.days[1])||Pp.beginner,Ap=()=>{const t=new Date,e=new Date(t);e.setDate(e.getDate()+1),e.setHours(0,0,0,0);const n=e.getTime()-t.getTime(),s=Math.floor(n/(1e3*60*60)),r=Math.floor(n%(1e3*60*60)/(1e3*60));return{hours:s,minutes:r,totalMinutes:Math.floor(n/(1e3*60))}},v8=t=>{const e=new Date().toDateString(),n=t.lastStudyDate?new Date(t.lastStudyDate).toDateString():null;if(n===e)return{status:ut.ACTIVE,message:"Great job! You've studied today!",color:"text-green-600",bgColor:"bg-green-50",borderColor:"border-green-200"};const s=new Date;s.setDate(s.getDate()-1);const r=s.toDateString();if(n===r){const i=Ap();return i.totalMinutes<=60?{status:ut.DANGER,message:`Danger! Streak expires in ${i.minutes}m`,color:"text-red-600",bgColor:"bg-red-50",borderColor:"border-red-200",timeLeft:i}:i.totalMinutes<=180?{status:ut.WARNING,message:`Warning! Streak expires in ${i.hours}h ${i.minutes}m`,color:"text-orange-600",bgColor:"bg-orange-50",borderColor:"border-orange-200",timeLeft:i}:{status:ut.WARNING,message:"Study today to maintain your streak!",color:"text-orange-600",bgColor:"bg-orange-50",borderColor:"border-orange-200",timeLeft:i}}return{status:ut.BROKEN,message:"Streak broken. Start a new one today!",color:"text-red-600",bgColor:"bg-red-50",borderColor:"border-red-200"}},w8=({isOpen:t,onClose:e,onUseSaver:n,saversLeft:s,streakDays:r})=>t?a.jsx(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",onClick:e,children:a.jsxs(G.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},onClick:i=>i.stopPropagation(),className:"bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full text-center",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx(G.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:.6,repeat:1/0},children:a.jsx(as,{className:"w-20 h-20 mx-auto text-blue-500 mb-4"})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Streak Protection!"}),a.jsxs("p",{className:"text-gray-600",children:["Your ",r,"-day streak is about to be lost!"]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl p-6 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[a.jsx(Wt,{className:"w-8 h-8 text-orange-500"}),a.jsx("span",{className:"text-3xl font-bold text-gray-800",children:r}),a.jsx("span",{className:"text-lg font-medium text-gray-600",children:"day streak"})]}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Use a Streak Saver to protect your progress?"}),a.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[a.jsx(as,{className:"w-5 h-5 text-blue-500"}),a.jsxs("span",{className:"font-semibold text-gray-800",children:[s," Streak Savers remaining"]})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:e,className:"flex-1 px-6 py-3 rounded-xl bg-gray-100 text-gray-700 font-semibold hover:bg-gray-200 transition-all",children:"Let it break"}),a.jsx("button",{onClick:n,disabled:s<=0,className:`flex-1 px-6 py-3 rounded-xl font-semibold transition-all ${s>0?"bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700 shadow-lg":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:s>0?"Use Saver":"No Savers Left"})]}),s<=0&&a.jsx("p",{className:"text-sm text-gray-500 mt-3",children:"Get more streak savers with premium!"})]})}):null,_8=({sessionHistory:t,currentStreak:e})=>{const[n,s]=S.useState(!1),i=(()=>{const l=[],c=new Date;for(let d=29;d>=0;d--){const h=new Date(c);h.setDate(h.getDate()-d);const f=h.toDateString(),m=t.some(C=>new Date(C.timestamp).toDateString()===f),b=t.filter(C=>new Date(C.timestamp).toDateString()===f).reduce((C,I)=>C+I.durationMinutes,0);l.push({date:h,dateStr:f,hasSession:m,totalMinutes:b,intensity:b>120?"high":b>60?"medium":b>0?"low":"none"})}return l})(),o={none:"bg-gray-200",low:"bg-green-200",medium:"bg-green-400",high:"bg-green-600"};return a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(Er,{className:"w-5 h-5 text-purple-500"}),"Study Calendar"]}),a.jsx("button",{onClick:()=>s(!n),className:"text-gray-500 hover:text-gray-700 transition-colors",children:n?a.jsx(C0,{className:"w-5 h-5"}):a.jsx(j0,{className:"w-5 h-5"})})]}),a.jsx(zs,{children:n&&a.jsxs(G.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:[a.jsx("div",{className:"grid grid-cols-7 gap-1 mb-4",children:["S","M","T","W","T","F","S"].map(l=>a.jsx("div",{className:"text-center text-xs font-medium text-gray-500 p-2",children:l},l))}),a.jsx("div",{className:"grid grid-cols-7 gap-1",children:i.map((l,c)=>a.jsxs(G.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:c*.02},className:`aspect-square rounded-lg ${o[l.intensity]} border-2 ${l.hasSession?"border-green-500":"border-transparent"} flex items-center justify-center text-xs font-medium ${l.intensity==="none"?"text-gray-500":"text-white"} relative group cursor-pointer`,title:`${l.date.toLocaleDateString()}: ${l.totalMinutes}min`,children:[l.date.getDate(),l.dateStr===new Date().toDateString()&&a.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-blue-500 rounded-full border-2 border-white"})]},l.dateStr))}),a.jsxs("div",{className:"flex items-center justify-between mt-4 text-xs text-gray-600",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{children:"Less"}),a.jsx("div",{className:"flex gap-1",children:Object.entries(o).map(([l,c])=>a.jsx("div",{className:`w-3 h-3 rounded ${c}`},l))}),a.jsx("span",{children:"More"})]}),a.jsxs("span",{className:"font-medium",children:[i.filter(l=>l.hasSession).length," active days"]})]})]})})]})},b8=()=>{const{userStats:t,updateStreak:e,useStreakSaver:n,addReward:s}=jn(),[r,i]=S.useState(!1),[o,l]=S.useState(Ap()),[c,d]=S.useState(!1),[h,f]=S.useState(0),m=v8(t),y=x8(t.currentStreak),b=Object.values(Pp).find(v=>v.days[0]>t.currentStreak);S.useEffect(()=>{const v=setInterval(()=>{l(Ap())},6e4);return()=>clearInterval(v)},[]),S.useEffect(()=>{[7,14,30,50,100,365].includes(t.currentStreak)&&t.currentStreak>0&&(f(t.currentStreak),d(!0))},[t.currentStreak]);const C=()=>{m.status===ut.DANGER&&t.streakSavers>0&&i(!0)},I=()=>{n()&&(i(!1),s({type:"STREAK_SAVED",title:" Streak Protected!",description:`Your ${t.currentStreak}-day streak is safe!`,tier:"premium"}))},x=()=>{if(!b)return 100;const v=y.days[0],_=b.days[0],P=(t.currentStreak-v)/(_-v)*100;return Math.min(100,Math.max(0,P))};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:`rounded-3xl shadow-xl p-8 border-2 ${m.borderColor} ${m.bgColor} transition-all`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(G.div,{animate:{scale:m.status===ut.DANGER?[1,1.1,1]:1,rotate:t.currentStreak>0?[0,5,-5,0]:0},transition:{duration:m.status===ut.DANGER?.5:2,repeat:m.status===ut.DANGER?1/0:0},className:`w-20 h-20 rounded-full bg-gradient-to-r ${y.color} flex items-center justify-center text-4xl shadow-lg`,children:y.icon}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-3xl font-bold text-gray-800 flex items-center gap-2",children:[t.currentStreak,a.jsx("span",{className:"text-lg font-normal text-gray-600",children:"day streak"})]}),a.jsxs("p",{className:`text-lg font-medium ${m.color}`,children:[y.name,"  ",y.description]}),a.jsx("p",{className:`text-sm ${m.color}`,children:m.message})]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-2",children:[m.status===ut.DANGER&&t.streakSavers>0&&a.jsxs(G.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:C,className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-xl font-semibold shadow-lg hover:bg-blue-600 transition-all",children:[a.jsx(as,{className:"w-4 h-4"}),"Protect Streak"]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(as,{className:"w-4 h-4"}),a.jsxs("span",{children:[t.streakSavers," streak savers"]})]})]})]}),b&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Progress to ",b.name]}),a.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[t.currentStreak," / ",b.days[0]]})]}),a.jsx(Eh,{progress:x(),color:"orange",height:"h-4"})]}),(m.status===ut.WARNING||m.status===ut.DANGER)&&o&&a.jsx(G.div,{animate:{scale:m.status===ut.DANGER?[1,1.02,1]:1},transition:{duration:1,repeat:1/0},className:`p-4 rounded-2xl ${m.status===ut.DANGER?"bg-red-100":"bg-orange-100"} border-2 ${m.status===ut.DANGER?"border-red-200":"border-orange-200"}`,children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(vV,{className:`w-6 h-6 ${m.status===ut.DANGER?"text-red-600":"text-orange-600"}`}),a.jsxs("div",{children:[a.jsxs("p",{className:`font-semibold ${m.status===ut.DANGER?"text-red-800":"text-orange-800"}`,children:["Time Remaining: ",o.hours,"h ",o.minutes,"m"]}),a.jsx("p",{className:`text-sm ${m.status===ut.DANGER?"text-red-600":"text-orange-600"}`,children:"Study now to maintain your streak!"})]})]})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-6",children:[a.jsxs("div",{className:"bg-white/50 rounded-xl p-4 text-center",children:[a.jsx(Je,{className:"w-8 h-8 text-yellow-500 mx-auto mb-2"}),a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"XP Multiplier"}),a.jsxs("p",{className:"text-2xl font-bold text-gray-800",children:[y.multiplier,"x"]})]}),a.jsxs("div",{className:"bg-white/50 rounded-xl p-4 text-center",children:[a.jsx(nn,{className:"w-8 h-8 text-purple-500 mx-auto mb-2"}),a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Longest Streak"}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:t.longestStreak})]})]})]}),a.jsx(_8,{sessionHistory:t.sessionHistory,currentStreak:t.currentStreak}),a.jsx(w8,{isOpen:r,onClose:()=>i(!1),onUseSaver:I,saversLeft:t.streakSavers,streakDays:t.currentStreak}),a.jsx(zs,{children:c&&a.jsx(X2,{streak:h,onComplete:()=>d(!1)})})]})},ka={daily:{name:"Daily Challenges",icon:Er,color:"blue",resetInterval:24*60*60*1e3,maxQuests:3},weekly:{name:"Weekly Goals",icon:Tn,color:"purple",resetInterval:7*24*60*60*1e3,maxQuests:2},special:{name:"Special Events",icon:Sn,color:"gold",resetInterval:null,maxQuests:1}},S8={study_time_short:{id:"study_time_short",name:"Quick Learner",description:"Study for {minutes} minutes today",type:"time",category:"daily",baseXP:40,icon:"",difficulty:"easy",parameters:{minutes:[15,20,25,30]},condition:(t,e)=>t>=e,tips:["Use the Pomodoro technique","Find a quiet study space","Remove distractions"]},study_time_medium:{id:"study_time_medium",name:"Focused Scholar",description:"Study for {minutes} minutes today",type:"time",category:"daily",baseXP:80,icon:"",difficulty:"medium",parameters:{minutes:[45,60,75,90]},condition:(t,e)=>t>=e,tips:["Take breaks every 25 minutes","Stay hydrated","Use active recall"]},study_time_long:{id:"study_time_long",name:"Endurance Master",description:"Study for {hours} hours today",type:"time",category:"daily",baseXP:150,icon:"",difficulty:"hard",parameters:{hours:[2,3,4,5]},condition:(t,e)=>t>=e*60,tips:["Plan regular breaks","Vary your subjects","Stay motivated with goals"]},multiple_sessions:{id:"multiple_sessions",name:"Session Warrior",description:"Complete {count} study sessions today",type:"sessions",category:"daily",baseXP:60,icon:"",difficulty:"medium",parameters:{count:[2,3,4,5]},condition:(t,e)=>t>=e,tips:["Space out your sessions","Use different techniques","Track your progress"]},subject_variety:{id:"subject_variety",name:"Knowledge Explorer",description:"Study {count} different subjects today",type:"subjects",category:"daily",baseXP:70,icon:"",difficulty:"medium",parameters:{count:[2,3,4]},condition:(t,e)=>t>=e,tips:["Mix different types of subjects","Use varied study methods","Keep it interesting"]},streak_guardian:{id:"streak_guardian",name:"Streak Guardian",description:"Maintain your daily study streak",type:"streak",category:"daily",baseXP:50,icon:"",difficulty:"easy",parameters:{streakBonus:[5,10,15,20]},condition:(t,e)=>t>=1,tips:["Study every day","Use streak savers wisely","Start with small sessions"]},weekly_hours:{id:"weekly_hours",name:"Weekly Champion",description:"Study for {hours} hours this week",type:"weekly_time",category:"weekly",baseXP:300,icon:"",difficulty:"hard",parameters:{hours:[10,15,20,25]},condition:(t,e)=>t>=e*60,tips:["Plan your week","Set daily targets","Stay consistent"]},weekly_consistency:{id:"weekly_consistency",name:"Consistency King",description:"Study every day for {days} days",type:"weekly_streak",category:"weekly",baseXP:250,icon:"",difficulty:"hard",parameters:{days:[5,6,7]},condition:(t,e)=>t>=e,tips:["Plan ahead","Set reminders","Start small each day"]},weekend_warrior:{id:"weekend_warrior",name:"Weekend Warrior",description:"Study for {hours} hours during the weekend",type:"weekend",category:"special",baseXP:200,icon:"",difficulty:"medium",parameters:{hours:[3,4,5,6]},condition:(t,e)=>t>=e*60,tips:["Use weekends for deep work","Catch up on difficult topics","Review the week"]},night_owl_challenge:{id:"night_owl_challenge",name:"Night Owl Challenge",description:"Study after 9 PM for {minutes} minutes",type:"night_study",category:"special",baseXP:100,icon:"",difficulty:"medium",parameters:{minutes:[30,45,60]},condition:(t,e)=>t>=e,tips:["Avoid caffeine late","Use blue light filters","Keep sessions shorter"]},early_bird_challenge:{id:"early_bird_challenge",name:"Early Bird Challenge",description:"Study before 7 AM for {minutes} minutes",type:"morning_study",category:"special",baseXP:120,icon:"",difficulty:"hard",parameters:{minutes:[30,45,60]},condition:(t,e)=>t>=e,tips:["Go to bed early","Prepare materials the night before","Start with lighter topics"]},perfectionist:{id:"perfectionist",name:"Perfectionist",description:"Complete all daily quests for {days} consecutive days",type:"quest_streak",category:"special",baseXP:500,icon:"",difficulty:"legendary",parameters:{days:[3,5,7]},condition:(t,e)=>t>=e,tips:["Plan your quests","Start early each day","Track your progress"]}},T8={easy:1,medium:1.2,hard:1.5,legendary:2},E8=({quest:t,onComplete:e})=>{if(!t||typeof t!="object")return null;const n=Math.min(t.progress||0,t.target||1),s=n/(t.target||1)*100,r=t.completed||!1,i={easy:"from-green-400 to-green-600",medium:"from-blue-400 to-blue-600",hard:"from-purple-400 to-purple-600",legendary:"from-yellow-400 to-orange-500"};return a.jsxs(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.02,y:-5},className:`p-6 rounded-2xl border-2 transition-all ${r?"bg-gradient-to-r from-green-50 to-emerald-50 border-green-200 shadow-green-100/50":"bg-white border-gray-200 hover:border-purple-300"} shadow-lg`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-12 h-12 rounded-full bg-gradient-to-r ${i[t.difficulty||"medium"]} flex items-center justify-center text-2xl shadow-lg`,children:t.icon||""}),a.jsxs("div",{children:[a.jsx("h3",{className:`font-bold text-lg ${r?"text-green-800":"text-gray-800"}`,children:t.name||"Unknown Quest"}),a.jsx("p",{className:`text-sm ${r?"text-green-600":"text-gray-600"}`,children:t.description||"No description available"})]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-2",children:[r?a.jsxs(G.div,{initial:{scale:0},animate:{scale:1},className:"flex items-center gap-1 text-green-600",children:[a.jsx(wt,{className:"w-6 h-6"}),a.jsx("span",{className:"font-semibold",children:"Complete!"})]}):a.jsxs("div",{className:"text-right",children:[a.jsxs("span",{className:"text-sm font-medium text-gray-600",children:[n," / ",t.target||1]}),a.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-bold ${t.difficulty==="easy"?"bg-green-100 text-green-700":t.difficulty==="medium"?"bg-blue-100 text-blue-700":t.difficulty==="hard"?"bg-purple-100 text-purple-700":"bg-yellow-100 text-yellow-700"}`,children:(t.difficulty||"medium").toUpperCase()})]}),a.jsxs("div",{className:"flex items-center gap-1 text-yellow-600",children:[a.jsx(Je,{className:"w-4 h-4"}),a.jsxs("span",{className:"font-semibold",children:["+",t.xp||0," XP"]})]})]})]}),a.jsx("div",{className:"mb-4",children:a.jsx(Eh,{progress:s,color:r?"green":"purple",height:"h-3",showPercentage:!1})}),t.tips&&Array.isArray(t.tips)&&t.tips.length>0&&!r&&a.jsxs(G.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"bg-gray-50 rounded-lg p-3",children:[a.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-1",children:[a.jsx(Vl,{className:"w-4 h-4"}),"Tips:"]}),a.jsx("ul",{className:"text-xs text-gray-600 space-y-1",children:t.tips.slice(0,2).map((o,l)=>a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-500",children:""}),o]},l))})]}),r&&a.jsx(G.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2},className:"bg-green-100 rounded-lg p-3 border border-green-200",children:a.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-800",children:[a.jsx(bt,{className:"w-5 h-5"}),a.jsx("span",{className:"font-semibold",children:"Quest Complete!"})]})})]})},N8=(t,e)=>{const n=`${t.id}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,s={};Object.entries(t.parameters).forEach(([m,y])=>{s[m]=y[Math.floor(Math.random()*y.length)]});let r=t.description;Object.entries(s).forEach(([m,y])=>{r=r.replace(`{${m}}`,y)});const i=t.baseXP,o=T8[t.difficulty],l=Math.floor(i*o),c=Object.keys(s)[0],d=s[c],h=new Date;let f;return e==="daily"?(f=new Date(h),f.setDate(f.getDate()+1),f.setHours(0,0,0,0)):e==="weekly"?(f=new Date(h),f.setDate(f.getDate()+7),f.setHours(0,0,0,0)):(f=new Date(h),f.setDate(f.getDate()+3)),{id:n,templateId:t.id,name:t.name,description:r,type:t.type,category:e,xp:l,icon:t.icon,difficulty:t.difficulty,target:d,progress:0,completed:!1,deadline:f.toISOString(),tips:t.tips,parameters:s,createdAt:h.toISOString()}},k8=()=>{const{userStats:t,updateQuestProgress:e,addReward:n,generateDailyQuests:s}=jn(),[r,i]=S.useState("daily"),[o,l]=S.useState(!1),[c,d]=S.useState([]);S.useEffect(()=>{const _=new Date,P=localStorage.getItem("lastDailyQuestReset");(!P||_.getTime()-parseInt(P)>ka.daily.resetInterval||t.dailyQuests.length===0)&&(h("daily"),localStorage.setItem("lastDailyQuestReset",_.getTime().toString()));const A=localStorage.getItem("lastWeeklyQuestReset");(!A||_.getTime()-parseInt(A)>ka.weekly.resetInterval||t.weeklyQuests.length===0)&&(h("weekly"),localStorage.setItem("lastWeeklyQuestReset",_.getTime().toString()))},[]);const h=_=>{const P=ka[_],T=Object.values(S8).filter(w=>w.category===_).sort(()=>Math.random()-.5).slice(0,P.maxQuests).map(w=>N8(w,_));console.log(`Generated ${T.length} new ${_} quests:`,T)},f=_=>{let P=[];switch(_){case"daily":P=t.dailyQuests||[];break;case"weekly":P=t.weeklyQuests||[];break;case"special":P=t.specialQuests||[];break;default:P=[]}return P.filter(D=>D&&typeof D=="object"&&typeof D.name=="string")},m=f(r),y=m.filter(_=>_.completed),b=m.filter(_=>!_.completed),C=o?y:b,I=m.length>0?y.length/m.length*100:0,x=m.reduce((_,P)=>_+(P.xp||0),0),v=y.reduce((_,P)=>_+(P.xp||0),0);return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("h1",{className:"text-3xl font-bold text-gray-800 mb-2 flex items-center gap-3",children:[a.jsx(Ye,{className:"w-8 h-8 text-purple-500"}),"Quest Center"]}),a.jsx("p",{className:"text-gray-600",children:"Complete challenges to earn XP and unlock achievements!"})]}),a.jsx("div",{className:"flex gap-4 mb-6",children:Object.entries(ka).map(([_,P])=>{const D=P.icon,A=f(_),T=A.filter(j=>j.completed).length,w=A.length;return a.jsxs(G.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>i(_),className:`flex items-center gap-3 px-6 py-4 rounded-2xl font-semibold transition-all ${r===_?"bg-gradient-to-r from-purple-600 to-blue-600 text-white shadow-lg":"bg-white text-gray-600 hover:bg-gray-50 shadow"}`,children:[a.jsx(D,{className:"w-5 h-5"}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{children:P.name}),a.jsxs("div",{className:"text-xs opacity-75",children:[T,"/",w," completed"]})]})]},_)})}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-800",children:[ka[r].name," Overview"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>l(!1),className:`px-4 py-2 rounded-lg font-medium transition-all ${o?"text-gray-500 hover:bg-gray-100":"bg-purple-100 text-purple-700"}`,children:["Active (",b.length,")"]}),a.jsxs("button",{onClick:()=>l(!0),className:`px-4 py-2 rounded-lg font-medium transition-all ${o?"bg-purple-100 text-purple-700":"text-gray-500 hover:bg-gray-100"}`,children:["Completed (",y.length,")"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-3xl font-bold text-purple-600",children:[I.toFixed(0),"%"]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Complete"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-green-600",children:v}),a.jsx("div",{className:"text-sm text-gray-600",children:"XP Earned"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-blue-600",children:x-v}),a.jsx("div",{className:"text-sm text-gray-600",children:"XP Available"})]})]}),a.jsx(Eh,{progress:I,label:`Quest Progress (${y.length}/${m.length})`,color:"purple"})]}),a.jsx("div",{className:"space-y-6",children:C.length>0?C.map(_=>a.jsx(E8,{quest:_,onComplete:P=>{d(D=>[...D,P])}},_.id)):a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-gray-400 mb-4",children:o?a.jsx(wt,{className:"w-16 h-16 mx-auto"}):a.jsx(Ye,{className:"w-16 h-16 mx-auto"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:o?"No completed quests yet":"No active quests"}),a.jsx("p",{className:"text-gray-500",children:o?"Complete some quests to see them here!":"New quests will appear soon!"})]})}),a.jsx(zs,{children:c.map(_=>{const P=m.find(D=>D.id===_);return P?a.jsx(Q2,{quest:P,onComplete:()=>{d(D=>D.filter(A=>A!==_))}},_):null})})]})},Y2={common:{name:"Common",color:"from-gray-400 to-gray-600",borderColor:"border-gray-400",textColor:"text-gray-600",glowColor:"shadow-gray-500/20",probability:70},uncommon:{name:"Uncommon",color:"from-green-400 to-green-600",borderColor:"border-green-400",textColor:"text-green-600",glowColor:"shadow-green-500/30",probability:20},rare:{name:"Rare",color:"from-blue-400 to-blue-600",borderColor:"border-blue-400",textColor:"text-blue-600",glowColor:"shadow-blue-500/40",probability:7},epic:{name:"Epic",color:"from-purple-400 to-purple-600",borderColor:"border-purple-400",textColor:"text-purple-600",glowColor:"shadow-purple-500/50",probability:2.5},legendary:{name:"Legendary",color:"from-yellow-400 to-orange-500",borderColor:"border-yellow-400",textColor:"text-yellow-600",glowColor:"shadow-yellow-500/60",probability:.5}},j8={getting_started:{name:"Getting Started",icon:Ye,color:"blue",achievements:[{id:"first_session",name:"First Steps",description:"Complete your first study session",icon:"",xp:25,tier:"common",condition:t=>t.totalSessions>=1},{id:"first_hour",name:"Hour Scholar",description:"Study for 1 total hour",icon:"",xp:50,tier:"common",condition:t=>t.totalStudyTime>=60},{id:"first_week",name:"Week Warrior",description:"Study for 7 consecutive days",icon:"",xp:100,tier:"uncommon",condition:t=>t.currentStreak>=7}]},session_mastery:{name:"Session Mastery",icon:dn,color:"green",achievements:[{id:"short_burst",name:"Quick Learner",description:"Complete a 15-minute focused session",icon:"",xp:30,tier:"common",condition:t=>t.sessionHistory.some(e=>e.durationMinutes>=15)},{id:"pomodoro_master",name:"Pomodoro Pro",description:"Complete 4 Pomodoro sessions in one day",icon:"",xp:75,tier:"uncommon",condition:t=>{const e=new Date().toDateString();return t.sessionHistory.filter(s=>new Date(s.timestamp).toDateString()===e&&s.durationMinutes>=25).length>=4}},{id:"marathon_session",name:"Marathon Master",description:"Study for 3+ hours in one session",icon:"",xp:200,tier:"rare",condition:t=>t.sessionHistory.some(e=>e.durationMinutes>=180)},{id:"endurance_beast",name:"Endurance Beast",description:"Study for 6+ hours in one session",icon:"",xp:500,tier:"epic",condition:t=>t.sessionHistory.some(e=>e.durationMinutes>=360)},{id:"legendary_focus",name:"Legendary Focus",description:"Study for 12+ hours in one session",icon:"",xp:1e3,tier:"legendary",condition:t=>t.sessionHistory.some(e=>e.durationMinutes>=720)}]},streak_achievements:{name:"Streak Master",icon:Wt,color:"orange",achievements:[{id:"streak_3",name:"Getting Warmed Up",description:"Maintain a 3-day study streak",icon:"",xp:50,tier:"common",condition:t=>t.currentStreak>=3||t.longestStreak>=3},{id:"streak_7",name:"Week Warrior",description:"Maintain a 7-day study streak",icon:"",xp:100,tier:"uncommon",condition:t=>t.currentStreak>=7||t.longestStreak>=7},{id:"streak_30",name:"Month Master",description:"Maintain a 30-day study streak",icon:"",xp:300,tier:"rare",condition:t=>t.currentStreak>=30||t.longestStreak>=30},{id:"streak_100",name:"Century Club",description:"Maintain a 100-day study streak",icon:"",xp:1e3,tier:"epic",condition:t=>t.currentStreak>=100||t.longestStreak>=100},{id:"streak_365",name:"Year Champion",description:"Maintain a 365-day study streak",icon:"",xp:5e3,tier:"legendary",condition:t=>t.currentStreak>=365||t.longestStreak>=365}]},level_progression:{name:"Level Progression",icon:Tn,color:"purple",achievements:[{id:"level_5",name:"Rising Scholar",description:"Reach level 5",icon:"",xp:75,tier:"common",condition:t=>t.level>=5},{id:"level_10",name:"Dedicated Learner",description:"Reach level 10",icon:"",xp:150,tier:"uncommon",condition:t=>t.level>=10},{id:"level_25",name:"Knowledge Seeker",description:"Reach level 25",icon:"",xp:300,tier:"rare",condition:t=>t.level>=25},{id:"level_50",name:"Academic Weapon",description:"Reach level 50",icon:"",xp:750,tier:"epic",condition:t=>t.level>=50},{id:"level_100",name:"Legend Ascended",description:"Reach level 100",icon:"",xp:2e3,tier:"legendary",condition:t=>t.level>=100}]},time_dedication:{name:"Time Dedication",icon:Wn,color:"indigo",achievements:[{id:"hours_10",name:"Ten Hour Scholar",description:"Study for 10 total hours",icon:"",xp:100,tier:"common",condition:t=>t.totalStudyTime>=600},{id:"hours_50",name:"Fifty Hour Hero",description:"Study for 50 total hours",icon:"",xp:250,tier:"uncommon",condition:t=>t.totalStudyTime>=3e3},{id:"hours_100",name:"Century Scholar",description:"Study for 100 total hours",icon:"",xp:500,tier:"rare",condition:t=>t.totalStudyTime>=6e3},{id:"hours_500",name:"Dedication Master",description:"Study for 500 total hours",icon:"",xp:1500,tier:"epic",condition:t=>t.totalStudyTime>=3e4},{id:"hours_1000",name:"Time Lord",description:"Study for 1000 total hours",icon:"",xp:5e3,tier:"legendary",condition:t=>t.totalStudyTime>=6e4}]},special_occasions:{name:"Special Occasions",icon:Sn,color:"pink",achievements:[{id:"night_owl",name:"Night Owl",description:"Study after 10 PM",icon:"",xp:50,tier:"uncommon",condition:t=>t.sessionHistory.some(e=>new Date(e.timestamp).getHours()>=22)},{id:"early_bird",name:"Early Bird",description:"Study before 6 AM",icon:"",xp:75,tier:"uncommon",condition:t=>t.sessionHistory.some(e=>new Date(e.timestamp).getHours()<6)},{id:"weekend_warrior",name:"Weekend Warrior",description:"Study on both Saturday and Sunday",icon:"",xp:100,tier:"rare",condition:t=>{const e=t.sessionHistory.filter(s=>{const r=new Date(s.timestamp).getDay();return r===0||r===6});return e.some(s=>new Date(s.timestamp).getDay()===0)&&e.some(s=>new Date(s.timestamp).getDay()===6)}},{id:"midnight_scholar",name:"Midnight Scholar",description:"Study during midnight hour (12-1 AM)",icon:"",xp:150,tier:"epic",condition:t=>t.sessionHistory.some(e=>new Date(e.timestamp).getHours()===0)}]},social_achievements:{name:"Social & Competition",icon:Ro,color:"cyan",achievements:[{id:"quest_master",name:"Quest Master",description:"Complete 10 daily quests",icon:"",xp:200,tier:"uncommon",condition:t=>t.completedQuestsToday>=10},{id:"perfectionist",name:"Perfectionist",description:"Complete all daily quests for 7 days straight",icon:"",xp:500,tier:"rare",condition:t=>t.questStreak>=7}]},mastery_achievements:{name:"Subject Mastery",icon:Vl,color:"emerald",achievements:[{id:"subject_explorer",name:"Subject Explorer",description:"Study 5 different subjects",icon:"",xp:100,tier:"common",condition:t=>Object.keys(t.subjectMastery).length>=5},{id:"subject_master",name:"Subject Master",description:"Study one subject for 50+ hours",icon:"",xp:300,tier:"rare",condition:t=>Object.values(t.subjectMastery).some(e=>e>=3e3)},{id:"polymath",name:"Polymath",description:"Study 10+ different subjects",icon:"",xp:500,tier:"epic",condition:t=>Object.keys(t.subjectMastery).length>=10}]},legendary_feats:{name:"Legendary Feats",icon:nn,color:"yellow",achievements:[{id:"prestige_master",name:"Prestige Master",description:"Reach Prestige Level 1",icon:"",xp:2500,tier:"legendary",condition:t=>t.prestigeLevel>=1},{id:"jackpot_hunter",name:"Jackpot Hunter",description:"Hit 5 legendary XP jackpots",icon:"",xp:1e3,tier:"epic",condition:t=>t.jackpotCount>=5},{id:"ultimate_scholar",name:"Ultimate Scholar",description:"Reach 1 million total XP",icon:"",xp:1e4,tier:"legendary",condition:t=>t.totalXPEarned>=1e6}]}},C8=({achievement:t,unlocked:e,onClick:n,showLocked:s=!0})=>{const r=Y2[t.tier];return!e&&!s?null:a.jsxs(G.div,{whileHover:{scale:1.05,y:-5},whileTap:{scale:.95},onClick:()=>n==null?void 0:n(t),className:`relative cursor-pointer p-4 rounded-2xl border-2 ${e?`bg-gradient-to-br ${r.color} ${r.borderColor} ${r.glowColor} shadow-lg`:"bg-gray-100 border-gray-300 opacity-60"} transition-all duration-300`,children:[e&&a.jsx("div",{className:`absolute -top-1 -right-1 px-2 py-1 rounded-full text-xs font-bold ${r.textColor} bg-white shadow-md`,children:r.name}),a.jsxs("div",{className:"text-center mb-3",children:[a.jsx("div",{className:`text-4xl mb-2 ${e?"":"filter grayscale"}`,children:t.icon}),!e&&a.jsx(I0,{className:"w-6 h-6 mx-auto text-gray-400"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:`font-bold text-sm mb-1 ${e?"text-white":"text-gray-600"}`,children:t.name}),a.jsx("p",{className:`text-xs ${e?"text-white/90":"text-gray-500"}`,children:t.description}),a.jsxs("div",{className:`flex items-center justify-center gap-1 mt-2 ${e?"text-yellow-200":"text-gray-400"}`,children:[a.jsx(Je,{className:"w-3 h-3"}),a.jsxs("span",{className:"text-xs font-medium",children:["+",t.xp," XP"]})]})]}),e&&t.tier==="legendary"&&a.jsx(G.div,{animate:{rotate:[0,180,360]},transition:{duration:4,repeat:1/0,ease:"linear"},className:"absolute -top-2 -right-2",children:a.jsx(Sn,{className:"w-6 h-6 text-yellow-300"})})]})},I8=({achievement:t,isOpen:e,onClose:n})=>{if(!e||!t)return null;const s=Y2[t.tier];return a.jsx(zs,{children:a.jsx(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",onClick:n,children:a.jsxs(G.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},onClick:r=>r.stopPropagation(),className:`bg-gradient-to-br ${s.color} p-8 rounded-3xl shadow-2xl text-white max-w-md w-full text-center`,children:[a.jsx("div",{className:"text-6xl mb-4",children:t.icon}),a.jsxs("div",{className:"inline-block px-4 py-2 rounded-full bg-white/20 text-sm font-bold mb-4",children:[s.name," Achievement"]}),a.jsx("h2",{className:"text-2xl font-bold mb-3",children:t.name}),a.jsx("p",{className:"text-lg opacity-90 mb-6",children:t.description}),a.jsxs("div",{className:"flex items-center justify-center gap-2 mb-6",children:[a.jsx(Je,{className:"w-6 h-6 text-yellow-300"}),a.jsxs("span",{className:"text-xl font-bold",children:["+",t.xp," XP"]})]}),a.jsx("button",{onClick:n,className:"bg-white/20 hover:bg-white/30 px-6 py-3 rounded-xl font-semibold transition-all",children:"Awesome!"})]})})})},P8=()=>{const{userStats:t}=jn();S.useState("getting_started");const[e,n]=S.useState(null),[s,r]=S.useState(!1),[i,o]=S.useState("all"),c=(()=>{const y=[];return Object.entries(j8).forEach(([b,C])=>{C.achievements.forEach(I=>{const x=t.achievements.includes(I.id)||I.condition(t);y.push({...I,category:b,unlocked:x})})}),y})(),d=c.filter(y=>y.unlocked).length,h=c.length,f=c.filter(y=>i==="unlocked"?y.unlocked:i==="locked"?!y.unlocked:i!=="all"?y.tier===i:!0),m=y=>{n(y),r(!0)};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("h1",{className:"text-3xl font-bold text-gray-800 mb-4 flex items-center gap-3",children:[a.jsx(bt,{className:"w-8 h-8 text-yellow-500"}),"Achievement Gallery"]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Your Progress"}),a.jsxs("p",{className:"text-gray-600",children:[d," of ",h," achievements unlocked"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-3xl font-bold text-purple-600",children:[Math.round(d/h*100),"%"]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Complete"})]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 overflow-hidden",children:a.jsx(G.div,{initial:{width:0},animate:{width:`${d/h*100}%`},transition:{duration:1,ease:"easeOut"},className:"h-full bg-gradient-to-r from-purple-500 to-blue-600 rounded-full"})})]}),a.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:["all","unlocked","locked","common","uncommon","rare","epic","legendary"].map(y=>a.jsxs("button",{onClick:()=>o(y),className:`px-4 py-2 rounded-full font-medium transition-all ${i===y?"bg-purple-600 text-white shadow-lg":"bg-white text-gray-600 hover:bg-gray-50 shadow"}`,children:[y.charAt(0).toUpperCase()+y.slice(1),y==="unlocked"&&` (${d})`,y==="locked"&&` (${h-d})`]},y))})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:f.map(y=>a.jsx(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:a.jsx(C8,{achievement:y,unlocked:y.unlocked,onClick:m})},y.id))}),a.jsx(I8,{achievement:e,isOpen:s,onClose:()=>r(!1)})]})},A8=(t,e,n)=>{const s={id:"current_user",rank:1,name:"You",avatar:"",score:R8(t,e),change:0,isCurrentUser:!0,prestige:t.prestigeLevel||0,country:"",level:t.level,title:t.currentTitle||"Student"},r=[],i=s.score,o=t.level,l=Math.min(15,Math.max(5,o*2));for(let d=0;d<l;d++){const h=Math.random()>.7,f=Math.floor((Math.random()-.5)*10),m=Math.max(1,o+f);let y;e==="xp"?y=Math.floor(h?i*(1+Math.random()*.5):i*(.5+Math.random()*.5)):e==="streak"?y=h?i+Math.floor(Math.random()*50):Math.max(0,i-Math.floor(Math.random()*i)):e==="time"?y=Math.floor(h?i*(1+Math.random()*.3):i*(.7+Math.random()*.3)):y=m,r.push({id:`user_${d}`,rank:d+1,name:D8(),avatar:M8(),score:y,change:Math.floor((Math.random()-.5)*6),isCurrentUser:!1,prestige:Math.floor(m/50),country:V8(),level:m,title:L8(m)})}const c=[s,...r];return c.sort((d,h)=>h.score-d.score),c.forEach((d,h)=>{d.rank=h+1}),c},R8=(t,e)=>{switch(e){case"xp":return t.xp||0;case"streak":return t.currentStreak||0;case"time":return Math.floor((t.totalStudyTime||0)/60);case"level":return t.level||1;default:return 0}},D8=()=>{const t=["Alex","Sam","Jordan","Casey","Riley","Taylor","Morgan","Jamie","Avery","Quinn","Sage","River","Phoenix","Blake","Charlie"],e=["StudyMaster","Scholar","Learner","Academic","Student","Achiever","Focused","Dedicated","Motivated","Persistent","Brilliant","Smart"],n=t[Math.floor(Math.random()*t.length)],s=e[Math.floor(Math.random()*e.length)];return`${n}${s}`},M8=()=>{const t=["","","","","","","",""];return t[Math.floor(Math.random()*t.length)]},V8=()=>{const t=["","","","","","","",""];return t[Math.floor(Math.random()*t.length)]},L8=t=>t>=50?"Academic Elite":t>=30?"Study Master":t>=20?"Knowledge Seeker":t>=10?"Dedicated Scholar":t>=5?"Rising Student":"New Learner",al={xp:{name:"Total XP",icon:Je,color:"yellow",description:"Experience points from study sessions",unit:"XP",formatter:t=>t.toLocaleString()},streak:{name:"Study Streak",icon:Wt,color:"orange",description:"Current consecutive study days",unit:"days",formatter:t=>t.toString()},time:{name:"Study Time",icon:dn,color:"blue",description:"Total hours studied",unit:"hours",formatter:t=>`${t}h`},level:{name:"Level",icon:Tn,color:"purple",description:"Current level achieved",unit:"level",formatter:t=>`Level ${t}`}},O8={daily:{name:"Today",icon:Er},weekly:{name:"This Week",icon:Er},monthly:{name:"This Month",icon:Er},alltime:{name:"All Time",icon:bt}},F8=({user:t,category:e,isCurrentUser:n,rank:s})=>{const r=al[e],i=c=>c===1?a.jsx(nn,{className:"w-6 h-6 text-yellow-500"}):c===2?a.jsx(Ww,{className:"w-6 h-6 text-gray-400"}):c===3?a.jsx(Ww,{className:"w-6 h-6 text-yellow-600"}):a.jsx("span",{className:"w-6 h-6 flex items-center justify-center text-sm font-bold text-gray-600",children:c}),o=c=>c===1?"from-yellow-400 to-yellow-600":c===2?"from-gray-300 to-gray-500":c===3?"from-yellow-600 to-orange-600":c<=10?"from-purple-400 to-purple-600":"from-gray-400 to-gray-600",l=c=>c>0?a.jsx(C0,{className:"w-4 h-4 text-green-500"}):c<0?a.jsx(j0,{className:"w-4 h-4 text-red-500"}):a.jsx("span",{className:"w-4 h-4 text-gray-400",children:"-"});return a.jsx(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.02,y:-2},className:`p-4 rounded-2xl border-2 transition-all ${n?"bg-gradient-to-r from-purple-50 to-blue-50 border-purple-300 shadow-purple-100/50":"bg-white border-gray-200 hover:border-gray-300"} shadow-lg`,children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:`w-12 h-12 rounded-full bg-gradient-to-r ${o(s)} flex items-center justify-center shadow-lg`,children:i(s)})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-2xl",children:t.avatar}),a.jsx("h3",{className:`font-bold truncate ${n?"text-purple-800":"text-gray-800"}`,children:t.name}),t.prestige>0&&a.jsxs("div",{className:"px-2 py-1 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs font-bold",children:["P",t.prestige]}),a.jsx("span",{className:"text-lg",children:t.country}),n&&a.jsx("span",{className:"px-2 py-1 rounded-full bg-purple-600 text-white text-xs font-bold",children:"YOU"})]}),a.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[a.jsx("span",{children:t.title}),a.jsx("span",{children:""}),a.jsxs("span",{children:["Level ",t.level]})]})]}),a.jsxs("div",{className:"flex-shrink-0 text-right",children:[a.jsx("div",{className:`text-2xl font-bold ${n?"text-purple-700":"text-gray-800"}`,children:r.formatter(t.score)}),a.jsxs("div",{className:"flex items-center justify-end gap-1 text-sm",children:[l(t.change),a.jsx("span",{className:`font-medium ${t.change>0?"text-green-600":t.change<0?"text-red-600":"text-gray-500"}`,children:t.change!==0?Math.abs(t.change):"-"})]})]})]})})},U8=({topThree:t,category:e})=>{const n=al[e],s={1:"h-32",2:"h-24",3:"h-20"},r={1:"from-yellow-400 to-yellow-600",2:"from-gray-300 to-gray-500",3:"from-yellow-600 to-orange-600"},i=[t[1],t[0],t[2]].filter(Boolean),o=[2,1,3];return t.length===0?null:a.jsxs("div",{className:"bg-gradient-to-br from-purple-600 to-blue-600 rounded-3xl shadow-2xl p-8 text-white mb-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsxs("h2",{className:"text-3xl font-bold mb-2 flex items-center justify-center gap-2",children:[a.jsx(bt,{className:"w-8 h-8 text-yellow-300"}),"Top Performers"]}),a.jsxs("p",{className:"text-purple-100",children:["Leading the ",n.name.toLowerCase()," leaderboard"]})]}),a.jsx("div",{className:"flex items-end justify-center gap-4 max-w-3xl mx-auto",children:i.map((l,c)=>{if(!l)return null;const d=o[c];return a.jsxs(G.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{delay:c*.2},className:"flex flex-col items-center",children:[a.jsxs(G.div,{whileHover:{scale:1.05},className:"text-center mb-4",children:[a.jsx("div",{className:"text-4xl mb-2",children:l.avatar}),a.jsx("div",{className:"font-bold text-lg",children:l.name}),a.jsx("div",{className:"text-sm opacity-90",children:l.title}),a.jsx("div",{className:"text-2xl font-bold text-yellow-300 mt-2",children:n.formatter(l.score)})]}),a.jsxs(G.div,{initial:{height:0},animate:{height:"auto"},transition:{delay:c*.2+.5,duration:.5},className:`w-24 ${s[d]} bg-gradient-to-t ${r[d]} rounded-t-lg flex items-end justify-center pb-2 shadow-lg relative`,children:[a.jsx("div",{className:"text-white font-bold text-2xl",children:d}),d===1&&a.jsx(G.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0},className:"absolute -top-6",children:a.jsx(nn,{className:"w-8 h-8 text-yellow-300"})})]})]},l.id)})})]})},$8=({userStats:t})=>{const e=Math.max(50,Math.min(500,t.level*10)),n=[{id:1,name:"Weekend Study Marathon",description:"Study for 10+ hours this weekend",participants:Math.floor(e*.8),timeLeft:"2 days",reward:"500 XP + Marathon Badge",difficulty:"Medium",icon:"",userProgress:Math.min(10,Math.floor((t.totalStudyTime||0)/60)%10),maxProgress:10},{id:2,name:"Streak Champions",description:"Maintain a 7-day streak",participants:Math.floor(e*1.2),timeLeft:"5 days",reward:"750 XP + Streak Master Title",difficulty:"Hard",icon:"",userProgress:Math.min(7,t.currentStreak||0),maxProgress:7},{id:3,name:"Knowledge Explorer",description:"Study 5 different subjects this week",participants:Math.floor(e*.6),timeLeft:"3 days",reward:"300 XP + Explorer Achievement",difficulty:"Easy",icon:"",userProgress:Math.min(5,Object.keys(t.subjectMastery||{}).length),maxProgress:5}];return a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-8",children:[a.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(Ye,{className:"w-6 h-6 text-purple-500"}),"Active Challenges"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:n.map(s=>a.jsxs(G.div,{whileHover:{scale:1.02,y:-5},className:"p-4 rounded-xl bg-gradient-to-br from-gray-50 to-gray-100 border border-gray-200 hover:border-purple-300 transition-all",children:[a.jsxs("div",{className:"text-center mb-3",children:[a.jsx("div",{className:"text-3xl mb-2",children:s.icon}),a.jsx("h4",{className:"font-bold text-gray-800",children:s.name}),a.jsx("p",{className:"text-sm text-gray-600",children:s.description})]}),a.jsxs("div",{className:"space-y-2 text-sm mb-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Participants:"}),a.jsx("span",{className:"font-medium",children:s.participants.toLocaleString()})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Time left:"}),a.jsx("span",{className:"font-medium text-orange-600",children:s.timeLeft})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Reward:"}),a.jsx("span",{className:"font-medium text-green-600",children:s.reward})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Your Progress:"}),a.jsxs("span",{className:"font-medium text-blue-600",children:[s.userProgress,"/",s.maxProgress]})]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-3",children:a.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${s.userProgress/s.maxProgress*100}%`}})}),a.jsx("button",{className:`w-full px-4 py-2 rounded-lg font-semibold transition-colors ${s.userProgress>=s.maxProgress?"bg-green-600 text-white cursor-default":"bg-purple-600 text-white hover:bg-purple-700"}`,disabled:s.userProgress>=s.maxProgress,children:s.userProgress>=s.maxProgress?"Completed!":"Join Challenge"})]},s.id))})]})},B8=({userStats:t})=>{const e=Object.keys(t.subjectMastery||{}),n=t.level||1,s=[{id:1,name:`${e[0]||"General"} Study Circle`,subject:e[0]||"General Studies",members:Math.floor(n/2)+Math.floor(Math.random()*10)+15,online:Math.floor(Math.random()*8)+2,description:`Collaborative ${e[0]||"general"} study sessions`,level:n<10?"Beginner":n<30?"Intermediate":"Advanced",icon:e[0]?"":""},{id:2,name:`Level ${Math.floor(n/10)*10}+ Achievers`,subject:"Multi-Subject",members:Math.floor(n/3)+Math.floor(Math.random()*15)+10,online:Math.floor(Math.random()*6)+3,description:"High-level students working together",level:"Advanced",icon:""},{id:3,name:"Daily Streak Warriors",subject:"Motivation & Accountability",members:Math.max(20,t.currentStreak+Math.floor(Math.random()*20)),online:Math.floor(Math.random()*12)+5,description:"Maintaining study streaks together",level:"All Levels",icon:""}];return a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[a.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(Ro,{className:"w-6 h-6 text-blue-500"}),"Study Groups"]}),a.jsx("div",{className:"space-y-4",children:s.map(r=>a.jsx(G.div,{whileHover:{scale:1.01},className:"p-4 rounded-xl bg-gray-50 border border-gray-200 hover:border-blue-300 transition-all",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"text-2xl",children:r.icon}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-gray-800",children:r.name}),a.jsx("p",{className:"text-sm text-gray-600",children:r.description}),a.jsxs("div",{className:"flex items-center gap-4 mt-1 text-xs text-gray-500",children:[a.jsxs("span",{children:[r.members," members"]}),a.jsxs("span",{className:"text-green-600",children:[r.online," online"]}),a.jsx("span",{children:r.level})]})]})]}),a.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"Join"})]})},r.id))}),a.jsxs("button",{className:"w-full mt-4 px-4 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-xl font-semibold hover:from-blue-600 hover:to-purple-700 transition-all flex items-center justify-center gap-2",children:[a.jsx(P0,{className:"w-4 h-4"}),"Create Study Group"]})]})},z8=()=>{const{userStats:t}=jn(),[e,n]=S.useState("xp"),[s,r]=S.useState("weekly"),[i,o]=S.useState(""),[l,c]=S.useState([]),[d,h]=S.useState(!1);S.useEffect(()=>{h(!0),setTimeout(()=>{const I=A8(t,e);c(I),h(!1)},300)},[e,s,t]);const f=l.filter(I=>I.name.toLowerCase().includes(i.toLowerCase())),m=f.slice(0,3),y=f.slice(3),b=f.findIndex(I=>I.isCurrentUser),C=f[b];return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("h1",{className:"text-3xl font-bold text-gray-800 mb-2 flex items-center gap-3",children:[a.jsx(bt,{className:"w-8 h-8 text-yellow-500"}),"Leaderboards & Competition"]}),a.jsx("p",{className:"text-gray-600",children:"See how you rank among fellow students!"})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-8",children:[a.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between mb-4",children:[a.jsx("div",{className:"flex gap-2",children:Object.entries(al).map(([I,x])=>{const v=x.icon;return a.jsxs("button",{onClick:()=>n(I),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition-all ${e===I?"bg-purple-600 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[a.jsx(v,{className:"w-4 h-4"}),x.name]},I)})}),a.jsx("button",{onClick:()=>{h(!0),setTimeout(()=>h(!1),300)},className:"p-2 rounded-lg bg-gray-100 hover:bg-gray-200 transition-colors",disabled:d,children:a.jsx(tV,{className:`w-5 h-5 text-gray-600 ${d?"animate-spin":""}`})})]}),a.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[a.jsx("div",{className:"flex gap-2",children:Object.entries(O8).map(([I,x])=>a.jsx("button",{onClick:()=>r(I),className:`px-3 py-2 rounded-lg font-medium transition-all ${s===I?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:x.name},I))}),a.jsx("div",{className:"flex-1 max-w-md",children:a.jsxs("div",{className:"relative",children:[a.jsx(rV,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search users...",value:i,onChange:I=>o(I.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg border border-gray-200 focus:border-purple-500 focus:outline-none"})]})})]})]}),C&&a.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 rounded-2xl shadow-xl p-6 text-white mb-8",children:[a.jsx("h3",{className:"text-lg font-bold mb-4",children:"Your Current Ranking"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold",children:b+1}),a.jsx("div",{className:"text-sm opacity-90",children:"Rank"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold",children:al[e].formatter(C.score)}),a.jsx("div",{className:"text-sm opacity-90",children:al[e].name})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-3xl font-bold",children:["Level ",C.level]}),a.jsx("div",{className:"text-sm opacity-90",children:"Current Level"})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-3xl font-bold",children:[C.change>=0?"+":"",C.change]}),a.jsx("div",{className:"text-sm opacity-90",children:"Rank Change"})]})]})]}),m.length>0&&a.jsx(U8,{topThree:m,category:e}),a.jsx($8,{userStats:t}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[a.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center gap-2",children:[a.jsx(Tn,{className:"w-6 h-6 text-purple-500"}),"Rankings"]}),d?a.jsx("div",{className:"space-y-4",children:Array.from({length:10},(I,x)=>a.jsx("div",{className:"animate-pulse",children:a.jsx("div",{className:"h-20 bg-gray-200 rounded-2xl"})},x))}):a.jsxs("div",{className:"space-y-4",children:[y.map((I,x)=>a.jsx(F8,{user:I,category:e,isCurrentUser:I.isCurrentUser,rank:x+4},I.id)),y.length===0&&a.jsxs("div",{className:"text-center py-12 text-gray-500",children:[a.jsx(bt,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),a.jsx("p",{className:"text-lg font-medium",children:"No results found"}),a.jsx("p",{className:"text-sm",children:"Try adjusting your search or category"})]})]})]})}),a.jsx("div",{className:"lg:col-span-1",children:a.jsx(B8,{userStats:t})})]})]})},vs={scholar:{id:"scholar",name:"Scholar Premium",price:4.99,period:"month",color:"from-blue-500 to-purple-600",icon:Wn,badge:"",description:"Perfect for dedicated students",features:[{id:"xp_multiplier",name:"1.5x XP Multiplier",icon:Je,premium:!0},{id:"streak_savers",name:"5 Streak Savers/month",icon:as,premium:!0},{id:"exclusive_themes",name:"3 Exclusive Themes",icon:Sn,premium:!0},{id:"priority_support",name:"Priority Support",icon:kf,premium:!0},{id:"advanced_stats",name:"Advanced Analytics",icon:Tn,premium:!0}],limits:{xpMultiplier:1.5,streakSavers:5,themes:3,questSlots:5,studyGroups:5}},elite:{id:"elite",name:"Elite Premium",price:9.99,period:"month",color:"from-purple-500 to-pink-600",icon:nn,badge:"",description:"For serious academic achievers",popular:!0,features:[{id:"xp_multiplier",name:"2x XP Multiplier",icon:Je,premium:!0},{id:"streak_savers",name:"10 Streak Savers/month",icon:as,premium:!0},{id:"exclusive_themes",name:"10 Exclusive Themes",icon:Sn,premium:!0},{id:"priority_support",name:"Priority Support",icon:kf,premium:!0},{id:"advanced_stats",name:"Advanced Analytics",icon:Tn,premium:!0},{id:"exclusive_quests",name:"Elite Quests",icon:Ye,premium:!0},{id:"custom_titles",name:"Custom Titles",icon:Po,premium:!0},{id:"leaderboard_badge",name:"Elite Badge",icon:Bw,premium:!0}],limits:{xpMultiplier:2,streakSavers:10,themes:10,questSlots:10,studyGroups:15}},legend:{id:"legend",name:"Legend Premium",price:19.99,period:"month",color:"from-yellow-400 to-orange-500",icon:bt,badge:"",description:"Ultimate experience for legends",features:[{id:"xp_multiplier",name:"3x XP Multiplier",icon:Je,premium:!0},{id:"streak_savers",name:"Unlimited Streak Savers",icon:as,premium:!0},{id:"exclusive_themes",name:"All Exclusive Themes",icon:Sn,premium:!0},{id:"priority_support",name:"24/7 VIP Support",icon:kf,premium:!0},{id:"advanced_stats",name:"Advanced Analytics",icon:Tn,premium:!0},{id:"exclusive_quests",name:"Legend Quests",icon:Ye,premium:!0},{id:"custom_titles",name:"Custom Titles",icon:Po,premium:!0},{id:"leaderboard_badge",name:"Legend Badge",icon:Bw,premium:!0},{id:"private_coaching",name:"Private Study Coach",icon:Ro,premium:!0},{id:"unlimited_groups",name:"Unlimited Study Groups",icon:Ro,premium:!0}],limits:{xpMultiplier:3,streakSavers:-1,themes:-1,questSlots:-1,studyGroups:-1}}},H8={galaxy:{id:"galaxy",name:"Galaxy Explorer",description:"Study among the stars",preview:"from-purple-900 via-blue-900 to-indigo-900",icon:"",tier:"scholar"},forest:{id:"forest",name:"Mystic Forest",description:"Focus in nature's embrace",preview:"from-green-800 via-emerald-700 to-teal-800",icon:"",tier:"scholar"},ocean:{id:"ocean",name:"Deep Ocean",description:"Dive into knowledge",preview:"from-blue-900 via-cyan-800 to-teal-900",icon:"",tier:"scholar"},sunset:{id:"sunset",name:"Golden Sunset",description:"Study in golden hour",preview:"from-orange-600 via-pink-500 to-purple-600",icon:"",tier:"elite"},cyberpunk:{id:"cyberpunk",name:"Cyberpunk City",description:"Futuristic study vibes",preview:"from-pink-600 via-purple-600 to-cyan-500",icon:"",tier:"elite"},aurora:{id:"aurora",name:"Aurora Borealis",description:"Northern lights magic",preview:"from-green-400 via-blue-500 to-purple-600",icon:"",tier:"legend"}},W8=({feature:t,isUnlocked:e,plan:n})=>{const s=t.icon;return a.jsxs(G.div,{whileHover:{scale:1.02},className:`p-4 rounded-xl border-2 transition-all ${e?"bg-gradient-to-r from-green-50 to-emerald-50 border-green-200":"bg-gray-50 border-gray-200 opacity-60"}`,children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e?a.jsx(BM,{className:"w-5 h-5 text-green-600"}):a.jsx(I0,{className:"w-5 h-5 text-gray-400"}),a.jsx(s,{className:`w-5 h-5 ${e?"text-green-600":"text-gray-400"}`}),a.jsx("h3",{className:`font-semibold ${e?"text-green-800":"text-gray-600"}`,children:t.name})]}),!e&&a.jsxs("p",{className:"text-sm text-gray-500",children:["Upgrade to ",n," to unlock this feature"]})]})},G8=({userPlan:t,currentTheme:e,onThemeChange:n})=>{const[s,r]=S.useState(e),i=o=>{if(!t)return!1;const l={scholar:1,elite:2,legend:3},c={scholar:1,elite:2,legend:3};return l[t]>=c[o.tier]};return a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[a.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(Sn,{className:"w-6 h-6 text-purple-500"}),"Premium Themes"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(H8).map(([o,l])=>{const c=i(l),d=s===o;return a.jsxs(G.div,{whileHover:{scale:c?1.02:1},whileTap:{scale:c?.98:1},onClick:()=>{c&&(r(o),n==null||n(o))},className:`relative p-4 rounded-xl border-2 cursor-pointer transition-all ${d&&c?"border-purple-500 shadow-purple-200/50":c?"border-gray-200 hover:border-gray-300":"border-gray-200 opacity-50 cursor-not-allowed"}`,children:[a.jsxs("div",{className:`w-full h-20 rounded-lg bg-gradient-to-r ${l.preview} mb-3 relative overflow-hidden`,children:[a.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-4xl",children:l.icon}),!c&&a.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center",children:a.jsx(I0,{className:"w-6 h-6 text-white"})}),d&&c&&a.jsx("div",{className:"absolute top-2 right-2",children:a.jsx(wt,{className:"w-5 h-5 text-white"})})]}),a.jsx("h4",{className:`font-bold ${c?"text-gray-800":"text-gray-500"}`,children:l.name}),a.jsx("p",{className:`text-sm ${c?"text-gray-600":"text-gray-400"}`,children:l.description}),!c&&a.jsxs("div",{className:"mt-2 px-2 py-1 rounded-full bg-purple-100 text-purple-700 text-xs font-bold text-center",children:[l.tier.toUpperCase()," ONLY"]})]},o)})})]})},K8=({userStats:t,userPlan:e})=>{const n=vs[e];if(!n)return null;const s=[{name:"XP Multiplier Active",current:"2.5x",icon:Je,color:"yellow"},{name:"Streak Savers Used",current:t.streakSavers||0,max:n.limits.streakSavers===-1?"":n.limits.streakSavers,icon:as,color:"blue"},{name:"Elite Quests Completed",current:5,max:10,icon:Ye,color:"purple"},{name:"Study Groups Joined",current:3,max:n.limits.studyGroups===-1?"":n.limits.studyGroups,icon:Ro,color:"green"}];return a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[a.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(Tn,{className:"w-6 h-6 text-purple-500"}),"Premium Usage"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map((r,i)=>{const o=r.icon,l=r.max&&r.max!==""?r.current/r.max*100:100;return a.jsxs("div",{className:"p-4 rounded-xl bg-gray-50",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx(o,{className:`w-5 h-5 text-${r.color}-500`}),a.jsx("h4",{className:"font-semibold text-gray-800",children:r.name})]}),a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-2xl font-bold text-gray-800",children:r.current}),r.max&&a.jsxs("span",{className:"text-sm text-gray-600",children:["/ ",r.max]})]}),r.max&&r.max!==""&&a.jsx(Eh,{progress:l,color:r.color,height:"h-2",showPercentage:!1})]},i)})})]})},q8=({plan:t,isCurrentPlan:e,onSelect:n})=>{const s=t.icon;return a.jsxs(G.div,{whileHover:{scale:1.02,y:-5},className:`relative p-6 rounded-3xl border-2 transition-all ${t.popular?"border-purple-500 shadow-purple-200/50 bg-gradient-to-br from-purple-50 to-pink-50":"border-gray-200 bg-white hover:border-gray-300"} ${e?"ring-4 ring-green-200":""}`,children:[t.popular&&a.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:a.jsx("div",{className:"px-4 py-1 bg-gradient-to-r from-purple-600 to-pink-600 text-white text-sm font-bold rounded-full",children:"Most Popular"})}),e&&a.jsx("div",{className:"absolute -top-3 right-4",children:a.jsx("div",{className:"px-3 py-1 bg-green-500 text-white text-sm font-bold rounded-full",children:"Current Plan"})}),a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:`w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-r ${t.color} flex items-center justify-center text-white shadow-lg`,children:a.jsx(s,{className:"w-8 h-8"})}),a.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:t.name}),a.jsx("p",{className:"text-gray-600 mb-4",children:t.description}),a.jsxs("div",{className:"flex items-baseline justify-center gap-1",children:[a.jsxs("span",{className:"text-4xl font-bold text-gray-800",children:["$",t.price]}),a.jsxs("span",{className:"text-gray-600",children:["/",t.period]})]})]}),a.jsx("div",{className:"space-y-3 mb-6",children:t.features.map((r,i)=>a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(wt,{className:"w-5 h-5 text-green-500 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700",children:r.name})]},i))}),a.jsx("button",{onClick:()=>n(t.id),disabled:e,className:`w-full py-3 rounded-xl font-semibold transition-all ${e?"bg-gray-100 text-gray-500 cursor-not-allowed":t.popular?"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:from-purple-700 hover:to-pink-700 shadow-lg":"bg-gray-800 text-white hover:bg-gray-900"}`,children:e?"Current Plan":`Upgrade to ${t.name}`})]})},X8=()=>{const{userStats:t}=jn(),[e,n]=S.useState("plans"),[s,r]=S.useState(()=>t.isPremium?t.premiumPlan||"scholar":null),[i,o]=S.useState("galaxy"),l=[{id:"plans",name:"Premium Plans",icon:nn},{id:"features",name:"Features",icon:Je},{id:"themes",name:"Themes",icon:Sn},{id:"usage",name:"Usage Stats",icon:Tn}],c=h=>{console.log("Selected plan:",h),r(h)},d=h=>{o(h),console.log("Changed theme to:",h)};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("h1",{className:"text-3xl font-bold text-gray-800 mb-2 flex items-center gap-3",children:[a.jsx(nn,{className:"w-8 h-8 text-yellow-500"}),"Premium Experience"]}),a.jsx("p",{className:"text-gray-600",children:"Unlock exclusive features and supercharge your learning journey!"})]}),s&&a.jsx("div",{className:`bg-gradient-to-r ${vs[s].color} rounded-3xl shadow-xl p-6 text-white mb-8`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold mb-2 flex items-center gap-2",children:[vs[s].badge,vs[s].name," Active"]}),a.jsx("p",{className:"opacity-90",children:"Enjoying premium benefits  Next billing: January 15, 2025"})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-3xl font-bold",children:[vs[s].limits.xpMultiplier,"x"]}),a.jsx("div",{className:"opacity-90",children:"XP Multiplier"})]})]})}),a.jsx("div",{className:"flex gap-2 mb-8",children:l.map(h=>{const f=h.icon;return a.jsxs(G.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n(h.id),className:`flex items-center gap-2 px-6 py-3 rounded-2xl font-semibold transition-all ${e===h.id?"bg-gradient-to-r from-purple-600 to-blue-600 text-white shadow-lg":"bg-white text-gray-600 hover:bg-gray-50 shadow"}`,children:[a.jsx(f,{className:"w-5 h-5"}),h.name]},h.id)})}),a.jsxs("div",{className:"space-y-8",children:[e==="plans"&&a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:Object.values(vs).map(h=>a.jsx(q8,{plan:h,isCurrentPlan:s===h.id,onSelect:c},h.id))}),e==="features"&&a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.values(vs).flatMap(h=>h.features.map(f=>a.jsx(W8,{feature:f,isUnlocked:s&&vs[s]&&vs[s].features.some(m=>m.id===f.id),plan:h.name},`${h.id}-${f.id}`)))}),e==="themes"&&a.jsx(G8,{userPlan:s,currentTheme:i,onThemeChange:d}),e==="usage"&&a.jsx(K8,{userStats:t,userPlan:s})]}),a.jsxs("div",{className:"mt-12 bg-gradient-to-r from-purple-600 to-blue-600 rounded-3xl shadow-2xl p-8 text-white",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Why Go Premium?"}),a.jsx("p",{className:"text-xl opacity-90",children:"Join thousands of successful students who've unlocked their potential"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx(vh,{className:"w-12 h-12 mx-auto mb-4 text-yellow-300"}),a.jsx("h3",{className:"text-xl font-bold mb-2",children:"3x Faster Progress"}),a.jsx("p",{className:"opacity-90",children:"Accelerate your learning with premium XP multipliers"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx(as,{className:"w-12 h-12 mx-auto mb-4 text-blue-300"}),a.jsx("h3",{className:"text-xl font-bold mb-2",children:"Never Lose Progress"}),a.jsx("p",{className:"opacity-90",children:"Protect your streaks with unlimited streak savers"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx(nn,{className:"w-12 h-12 mx-auto mb-4 text-purple-300"}),a.jsx("h3",{className:"text-xl font-bold mb-2",children:"Exclusive Access"}),a.jsx("p",{className:"opacity-90",children:"Unlock exclusive themes, quests, and features"})]})]})]})]})},Q8=({userStats:t})=>{const{rewardQueue:e,showRewards:n,setShowRewards:s}=jn();return a.jsx(zs,{mode:"wait",children:e&&e.length>0&&e.map((r,i)=>{switch(r.type){case"XP_EARNED":return a.jsx(G2,{amount:r.xp||r.amount||0,bonuses:r.bonuses||{},onComplete:()=>s(!1)},r.id);case"LEVEL_UP":return a.jsx(K2,{newLevel:r.level||t.level,isPrestige:r.isPrestige||!1,onComplete:()=>s(!1)},r.id);case"ACHIEVEMENT":return a.jsx(q2,{achievement:r,onComplete:()=>s(!1)},r.id);case"STREAK_MILESTONE":return a.jsx(X2,{streak:r.streak||t.currentStreak,onComplete:()=>s(!1)},r.id);case"QUEST_COMPLETE":return a.jsx(Q2,{quest:r,onComplete:()=>s(!1)},r.id);case"VARIABLE_REWARD":case"MYSTERY_BOX":return a.jsx(g8,{reward:r,onComplete:()=>s(!1)},r.id);default:return a.jsx(y8,{notifications:[{id:r.id,title:r.title,message:r.description}],onRemove:()=>s(!1)},r.id)}})})},m_={xp_small:{id:"xp_small",name:"XP Boost",description:"Bonus experience points!",icon:"",type:"xp",value:{min:50,max:150},probability:40,tier:"common",color:"from-blue-400 to-blue-600"},xp_medium:{id:"xp_medium",name:"XP Surge",description:"Major experience boost!",icon:"",type:"xp",value:{min:200,max:400},probability:25,tier:"uncommon",color:"from-green-400 to-green-600"},xp_large:{id:"xp_large",name:"XP Explosion",description:"Massive experience reward!",icon:"",type:"xp",value:{min:500,max:1e3},probability:15,tier:"rare",color:"from-purple-400 to-purple-600"},streak_saver:{id:"streak_saver",name:"Streak Saver",description:"Protect your study streak!",icon:"",type:"streak_saver",value:1,probability:10,tier:"rare",color:"from-orange-400 to-orange-600"},title_unlock:{id:"title_unlock",name:"Special Title",description:"Unlock a unique title!",icon:"",type:"title",value:["Mystery Master","Lucky Scholar","Box Opener","Surprise Seeker"],probability:5,tier:"epic",color:"from-yellow-400 to-orange-500"},multiplier_boost:{id:"multiplier_boost",name:"XP Multiplier",description:"2x XP for 1 hour!",icon:"",type:"multiplier",value:{multiplier:2,duration:36e5},probability:3,tier:"epic",color:"from-purple-500 to-pink-500"},jackpot:{id:"jackpot",name:"JACKPOT!",description:"Ultimate mystery reward!",icon:"",type:"jackpot",value:{xp:2e3,title:"Jackpot Winner",streakSavers:3},probability:2,tier:"legendary",color:"from-yellow-400 via-orange-500 to-red-500"}},Y8=({intensity:t=50})=>{const[e,n]=S.useState([]);return S.useEffect(()=>{const s=Array.from({length:t},(i,o)=>({id:o,x:Math.random()*100,y:Math.random()*100,color:["#FFD700","#FF6B6B","#4ECDC4","#45B7D1","#96CEB4"][Math.floor(Math.random()*5)],size:Math.random()*4+2,speedX:(Math.random()-.5)*4,speedY:Math.random()*2+1}));n(s);const r=setTimeout(()=>n([]),3e3);return()=>clearTimeout(r)},[t]),a.jsx("div",{className:"fixed inset-0 pointer-events-none z-40",children:e.map(s=>a.jsx(G.div,{initial:{x:s.x+"%",y:s.y+"%",opacity:1,scale:1},animate:{x:s.x+s.speedX*10+"%",y:s.y+s.speedY*20+"%",opacity:0,scale:0},transition:{duration:3,ease:"easeOut"},className:"absolute w-2 h-2 rounded-full",style:{backgroundColor:s.color,width:s.size,height:s.size}},s.id))})},J8=({onRewardGenerated:t,onClose:e})=>{const[n,s]=S.useState(!1),[r,i]=S.useState(null),[o,l]=S.useState(!1),c=()=>{const f=Math.random()*100;let m=0;for(const y of Object.values(m_))if(m+=y.probability,f<=m){let b=y.value;return y.type==="xp"&&typeof y.value=="object"?b=Math.floor(Math.random()*(y.value.max-y.value.min+1))+y.value.min:y.type==="title"&&Array.isArray(y.value)&&(b=y.value[Math.floor(Math.random()*y.value.length)]),{...y,actualValue:b}}return{...m_.xp_small,actualValue:75}},d=()=>{s(!0),setTimeout(()=>{const f=c();i(f),l(!0),t(f)},2e3)},h=()=>{l(!1),setTimeout(()=>{e()},300)};return a.jsxs(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:[a.jsx(G.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-gradient-to-br from-purple-600 to-indigo-700 p-8 rounded-3xl shadow-2xl text-white text-center max-w-md mx-4",children:o?a.jsxs(a.Fragment,{children:[a.jsx(G.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3,type:"spring",stiffness:200},className:`w-24 h-24 mx-auto mb-6 rounded-full bg-gradient-to-r ${r.color} flex items-center justify-center text-4xl shadow-lg`,children:r.icon}),a.jsxs("div",{className:`inline-block px-4 py-2 rounded-full bg-white/20 text-sm font-bold mb-4 ${r.tier==="legendary"?"animate-pulse":""}`,children:[r.tier.toUpperCase()," REWARD!"]}),a.jsx("h2",{className:"text-3xl font-bold mb-2",children:r.name}),a.jsx("p",{className:"text-lg opacity-90 mb-4",children:r.description}),a.jsxs("div",{className:"bg-black/20 rounded-lg p-4 mb-6",children:[r.type==="xp"&&a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(Je,{className:"w-6 h-6 text-yellow-300"}),a.jsxs("span",{className:"text-2xl font-bold",children:["+",r.actualValue," XP"]})]}),r.type==="streak_saver"&&a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(Wt,{className:"w-6 h-6 text-orange-300"}),a.jsx("span",{className:"text-xl font-bold",children:"+1 Streak Saver"})]}),r.type==="title"&&a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(nn,{className:"w-6 h-6 text-yellow-300"}),a.jsxs("span",{className:"text-xl font-bold",children:['"',r.actualValue,'"']})]}),r.type==="multiplier"&&a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(vh,{className:"w-6 h-6 text-purple-300"}),a.jsx("span",{className:"text-xl font-bold",children:"2x XP for 1 hour!"})]}),r.type==="jackpot"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(Je,{className:"w-6 h-6 text-yellow-300"}),a.jsxs("span",{className:"text-xl font-bold",children:["+",r.value.xp," XP"]})]}),a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(nn,{className:"w-5 h-5 text-yellow-300"}),a.jsxs("span",{className:"font-bold",children:['"',r.value.title,'"']})]}),a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(Wt,{className:"w-5 h-5 text-orange-300"}),a.jsxs("span",{className:"font-bold",children:["+",r.value.streakSavers," Streak Savers"]})]})]})]}),a.jsx("button",{onClick:h,className:"w-full bg-yellow-500 hover:bg-yellow-600 text-black px-6 py-3 rounded-xl font-bold transition-all",children:"Awesome!"})]}):a.jsxs(a.Fragment,{children:[a.jsx(G.div,{animate:n?{rotateY:[0,180,360],scale:[1,1.2,1],rotateX:[0,15,-15,0]}:{y:[0,-10,0],rotateZ:[0,5,-5,0]},transition:{duration:n?2:1.5,repeat:n?0:1/0,ease:"easeInOut"},className:"text-8xl mb-6",children:""}),a.jsx("h2",{className:"text-3xl font-bold mb-4",children:n?"Opening...":"Mystery Box"}),a.jsx("p",{className:"text-lg opacity-90 mb-6",children:n?"Something amazing is coming!":"Click to reveal your surprise reward!"}),!n&&a.jsxs("div",{className:"flex gap-4",children:[a.jsx("button",{onClick:d,className:"flex-1 bg-yellow-500 hover:bg-yellow-600 text-black px-6 py-3 rounded-xl font-bold transition-all transform hover:scale-105",children:"Open Box!"}),a.jsx("button",{onClick:e,className:"px-4 py-3 bg-white/20 hover:bg-white/30 rounded-xl transition-all",children:a.jsx(Ol,{className:"w-6 h-6"})})]}),n&&a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(G.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full"}),a.jsx("span",{children:"Opening mystery box..."})]})]})}),o&&a.jsx(Y8,{intensity:r.tier==="legendary"?100:50})]})},Z8=({available:t=!0,onOpen:e,className:n=""})=>{const[s,r]=S.useState(!1),{addReward:i,userStats:o,setUserStats:l}=jn(),c=()=>{t&&(r(!0),e==null||e())},d=h=>{if(h.type==="xp")l(f=>({...f,xp:f.xp+h.actualValue,totalXPEarned:(f.totalXPEarned||f.xp)+h.actualValue}));else if(h.type==="streak_saver")l(f=>({...f,streakSavers:f.streakSavers+1}));else if(h.type==="title")l(f=>({...f,unlockedTitles:[...f.unlockedTitles||[],h.actualValue],currentTitle:h.actualValue}));else if(h.type==="multiplier"){const f=Date.now()+h.value.duration;l(m=>({...m,xpMultiplier:h.value.multiplier,multiplierEndTime:f}))}else h.type==="jackpot"&&l(f=>({...f,xp:f.xp+h.value.xp,totalXPEarned:(f.totalXPEarned||f.xp)+h.value.xp,streakSavers:f.streakSavers+h.value.streakSavers,unlockedTitles:[...f.unlockedTitles||[],h.value.title],currentTitle:h.value.title,jackpotCount:(f.jackpotCount||0)+1}));i({type:"MYSTERY_BOX",title:` ${h.name}`,description:h.description,tier:h.tier,xp:h.type==="xp"?h.actualValue:h.type==="jackpot"?h.value.xp:0})};return a.jsxs(a.Fragment,{children:[a.jsxs(G.div,{whileHover:t?{scale:1.05,y:-5}:{},whileTap:t?{scale:.95}:{},onClick:c,className:`relative ${n} ${t?"cursor-pointer":"cursor-not-allowed opacity-50"}`,children:[a.jsx("div",{className:`p-6 rounded-2xl border-2 transition-all ${t?"bg-gradient-to-br from-purple-600 to-indigo-700 border-purple-400 shadow-lg hover:shadow-purple-500/30":"bg-gray-400 border-gray-300"}`,children:a.jsxs(G.div,{animate:t?{rotateY:[0,10,-10,0],y:[0,-5,0]}:{},transition:{duration:2,repeat:t?1/0:0,repeatDelay:3},className:"text-center",children:[a.jsx("div",{className:"text-6xl mb-4",children:""}),a.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Mystery Box"}),a.jsx("p",{className:"text-purple-100 text-sm mb-4",children:t?"Click to open and get a surprise reward!":"Complete more sessions to unlock"}),t&&a.jsx("div",{className:"bg-yellow-500 text-black px-4 py-2 rounded-lg font-bold text-sm",children:"Open Now!"})]})}),t&&a.jsx(G.div,{animate:{rotate:360},transition:{duration:4,repeat:1/0,ease:"linear"},className:"absolute -top-2 -right-2",children:a.jsx(Sn,{className:"w-6 h-6 text-yellow-400"})})]}),a.jsx(zs,{children:s&&a.jsx(J8,{onRewardGenerated:d,onClose:()=>r(!1)})})]})},eU=()=>{const{userStats:t,getUserRank:e,getXPProgress:n,getXPForLevel:s,addReward:r,generateDailyQuests:i}=jn(),[o,l]=S.useState("overview"),[c,d]=S.useState(!1);S.useEffect(()=>{t.dailyQuests.length===0&&i()},[]);const h=[{id:"overview",label:"Overview",icon:Ll},{id:"quests",label:"Quests",icon:Ye},{id:"achievements",label:"Achievements",icon:bt},{id:"streaks",label:"Streaks",icon:Wt},{id:"leaderboards",label:"Leaderboards",icon:Ro},{id:"premium",label:"Premium",icon:nn}],f=e(),m=n(),y=s(t.level+1),b=x=>x>=100?"from-yellow-400 to-orange-500":x>=50?"from-purple-600 to-pink-600":x>=25?"from-blue-600 to-purple-600":x>=10?"from-green-600 to-blue-600":"from-gray-600 to-gray-700",C=x=>x>=365?"":x>=100?"":x>=50?"":x>=30?"":x>=7?"":"",I=x=>{r({type:"XP_EARNED",title:`Timer set for ${x} minutes`,description:"Focus mode activated! Start studying to earn XP.",tier:"common"})};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 mt-20 pl-10",children:[a.jsx(Q8,{userStats:t}),a.jsxs("div",{className:"bg-gradient-to-r from-purple-600 via-blue-600 to-indigo-700 text-white",children:[a.jsxs("div",{className:"container mx-auto px-6 py-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsx(G.div,{whileHover:{scale:1.05,rotate:5},className:`w-24 h-24 rounded-full bg-gradient-to-r ${b(t.level)} flex items-center justify-center text-white text-3xl font-bold shadow-2xl border-4 border-white/20`,children:t.level}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold mb-2",children:f}),a.jsxs("p",{className:"text-blue-100 mb-1",children:["Level ",t.level,t.prestigeLevel>0&&a.jsxs("span",{className:"ml-2 px-2 py-1 rounded-full bg-yellow-500/20 text-yellow-200 text-sm",children:["Prestige ",t.prestigeLevel]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Je,{className:"w-4 h-4 text-yellow-300"}),a.jsxs("span",{className:"text-sm font-medium",children:[t.xp.toLocaleString()," / ",y.toLocaleString()," XP"]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:()=>d(!c),className:"flex items-center gap-2 px-4 py-2 bg-white/20 hover:bg-white/30 rounded-xl font-semibold transition-all",children:[a.jsx(P0,{className:"w-4 h-4"}),"Quick Start"]}),a.jsx("button",{className:"p-2 bg-white/20 hover:bg-white/30 rounded-xl transition-all",children:a.jsx(lV,{className:"w-5 h-5"})})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsxs("span",{className:"text-sm font-medium text-blue-100",children:["Progress to Level ",t.level+1]}),a.jsxs("span",{className:"text-sm font-bold",children:[m.percentage.toFixed(1),"%"]})]}),a.jsx("div",{className:"w-full bg-white/20 rounded-full h-4 overflow-hidden",children:a.jsx(G.div,{initial:{width:0},animate:{width:`${m.percentage}%`},transition:{duration:1,ease:"easeOut"},className:"h-full bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full shadow-sm relative overflow-hidden",children:a.jsx(G.div,{animate:{x:["-100%","100%"]},transition:{duration:2,repeat:1/0,ease:"linear"},className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent"})})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsxs("div",{className:"bg-white/10 rounded-2xl p-4 backdrop-blur",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(Wt,{className:"w-6 h-6 text-orange-300"}),a.jsx("span",{className:"font-semibold",children:"Current Streak"})]}),a.jsxs("div",{className:"text-2xl font-bold",children:[C(t.currentStreak)," ",t.currentStreak]})]}),a.jsxs("div",{className:"bg-white/10 rounded-2xl p-4 backdrop-blur",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(dn,{className:"w-6 h-6 text-blue-300"}),a.jsx("span",{className:"font-semibold",children:"Study Time"})]}),a.jsxs("div",{className:"text-2xl font-bold",children:[Math.round(t.totalStudyTime/60),"h"]})]}),a.jsxs("div",{className:"bg-white/10 rounded-2xl p-4 backdrop-blur",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(bt,{className:"w-6 h-6 text-yellow-300"}),a.jsx("span",{className:"font-semibold",children:"Achievements"})]}),a.jsx("div",{className:"text-2xl font-bold",children:t.achievements.length})]}),a.jsxs("div",{className:"bg-white/10 rounded-2xl p-4 backdrop-blur",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(Ye,{className:"w-6 h-6 text-green-300"}),a.jsx("span",{className:"font-semibold",children:"Quests Done"})]}),a.jsx("div",{className:"text-2xl font-bold",children:t.dailyQuests.filter(x=>x.completed).length})]})]})]}),a.jsx(zs,{children:c&&a.jsx(G.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white/10 backdrop-blur border-t border-white/20 px-6 py-4",children:a.jsx("div",{className:"container mx-auto",children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[a.jsxs("button",{onClick:()=>I(25),className:"flex items-center gap-2 px-4 py-3 bg-white/20 hover:bg-white/30 rounded-xl font-medium transition-all",children:[a.jsx(dn,{className:"w-4 h-4"}),"25min Focus"]}),a.jsxs("button",{onClick:()=>I(15),className:"flex items-center gap-2 px-4 py-3 bg-white/20 hover:bg-white/30 rounded-xl font-medium transition-all",children:[a.jsx(vh,{className:"w-4 h-4"}),"15min Quick"]}),a.jsxs("button",{className:"flex items-center gap-2 px-4 py-3 bg-white/20 hover:bg-white/30 rounded-xl font-medium transition-all",children:[a.jsx(Wn,{className:"w-4 h-4"}),"Review Notes"]}),a.jsxs("button",{className:"flex items-center gap-2 px-4 py-3 bg-white/20 hover:bg-white/30 rounded-xl font-medium transition-all",children:[a.jsx(Ye,{className:"w-4 h-4"}),"View Quests"]})]})})})})]}),a.jsxs("div",{className:"container mx-auto px-6 py-6",children:[a.jsx("div",{className:"flex gap-2 mb-8 overflow-x-auto",children:h.map(x=>{const v=x.icon;return a.jsxs(G.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>l(x.id),className:`flex items-center gap-2 px-6 py-3 rounded-2xl font-semibold transition-all whitespace-nowrap ${o===x.id?"bg-gradient-to-r from-purple-600 to-blue-600 text-white shadow-lg":"bg-white text-gray-600 hover:bg-gray-50 shadow"}`,children:[a.jsx(v,{className:"w-4 h-4"}),x.label,x.id==="premium"&&a.jsx(nn,{className:"w-4 h-4 text-yellow-500"})]},x.id)})}),a.jsxs("div",{className:"space-y-8",children:[o==="overview"&&a.jsx(tU,{userStats:t}),o==="quests"&&a.jsx(k8,{}),o==="achievements"&&a.jsx(P8,{}),o==="streaks"&&a.jsx(b8,{}),o==="leaderboards"&&a.jsx(z8,{}),o==="premium"&&a.jsx(X8,{})]})]})]})},tU=({userStats:t})=>{var o;const n=(()=>{var f;const l=new Date;l.setDate(l.getDate()-7);const c=((f=t.sessionHistory)==null?void 0:f.filter(m=>new Date(m.timestamp)>l))||[],d=c.reduce((m,y)=>m+(y.xpEarned||0),0),h=c.reduce((m,y)=>m+(y.durationMinutes||0),0);return{sessionsThisWeek:c.length,xpThisWeek:d,timeThisWeek:Math.round(h/60)}})(),s=[{label:"Total XP Earned",value:(t.totalXPEarned||t.xp||0).toLocaleString(),icon:Je,color:"from-yellow-500 to-orange-500",change:n.xpThisWeek>0?`+${n.xpThisWeek.toLocaleString()} this week`:"No XP this week"},{label:"Study Sessions",value:t.totalSessions,icon:Wn,color:"from-green-500 to-teal-500",change:n.sessionsThisWeek>0?`+${n.sessionsThisWeek} this week`:"No sessions this week"},{label:"Longest Streak",value:`${t.longestStreak} days`,icon:Wt,color:"from-orange-500 to-red-500",change:t.currentStreak===t.longestStreak?"Current record!":"Personal best"},{label:"Total Study Time",value:`${Math.round(t.totalStudyTime/60)}h`,icon:dn,color:"from-blue-500 to-indigo-500",change:n.timeThisWeek>0?`+${n.timeThisWeek}h this week`:"No study time this week"}],r=t.achievements.slice(-3),i=((o=t.dailyQuests)==null?void 0:o.filter(l=>!l.completed))||[];return a.jsxs("div",{className:"space-y-8",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:s.map((l,c)=>{const d=l.icon;return a.jsxs(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:c*.1},whileHover:{scale:1.02,y:-5},className:"bg-white rounded-2xl shadow-lg p-6 hover:shadow-xl transition-all",children:[a.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-r ${l.color} flex items-center justify-center mb-4`,children:a.jsx(d,{className:"w-6 h-6 text-white"})}),a.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-1",children:l.value}),a.jsx("p",{className:"text-gray-600 text-sm mb-2",children:l.label}),a.jsx("span",{className:"text-xs text-green-600 font-medium",children:l.change})]},l.label)})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(Ye,{className:"w-5 h-5 text-blue-500"}),"Active Quests"]}),a.jsxs(G.button,{whileHover:{scale:1.05},onClick:()=>setActiveTab("quests"),className:"text-blue-600 hover:text-blue-700 font-medium text-sm flex items-center gap-1",children:["View All ",a.jsx($w,{className:"w-4 h-4"})]})]}),a.jsxs("div",{className:"space-y-3",children:[i.slice(0,3).map((l,c)=>a.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"font-medium text-gray-800",children:l.name}),a.jsxs("span",{className:"text-sm text-blue-600",children:["+",l.xp," XP"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${l.progress/l.target*100}%`}})}),a.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[l.progress," / ",l.target]})]},c)),i.length===0&&a.jsxs("div",{className:"text-center py-6 text-gray-500",children:[a.jsx(Ye,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),a.jsx("p",{children:"No active quests"}),a.jsx("p",{className:"text-sm",children:"New quests will appear daily!"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(bt,{className:"w-5 h-5 text-yellow-500"}),"Recent Achievements"]}),a.jsxs(G.button,{whileHover:{scale:1.05},onClick:()=>setActiveTab("achievements"),className:"text-yellow-600 hover:text-yellow-700 font-medium text-sm flex items-center gap-1",children:["View All ",a.jsx($w,{className:"w-4 h-4"})]})]}),a.jsxs("div",{className:"space-y-3",children:[r.map((l,c)=>a.jsxs(G.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:c*.1},className:"flex items-center gap-3 p-3 bg-yellow-50 rounded-lg",children:[a.jsx("div",{className:"w-10 h-10 bg-yellow-500 rounded-full flex items-center justify-center",children:a.jsx(bt,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-800",children:"Achievement Unlocked"}),a.jsx("p",{className:"text-sm text-gray-600",children:l})]})]},c)),r.length===0&&a.jsxs("div",{className:"text-center py-6 text-gray-500",children:[a.jsx(Po,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),a.jsx("p",{children:"No achievements yet"}),a.jsx("p",{className:"text-sm",children:"Complete quests to unlock achievements!"})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(VM,{className:"w-5 h-5 text-purple-500"}),"Mystery Rewards"]}),a.jsxs("div",{className:"bg-gradient-to-r from-purple-100 to-indigo-100 rounded-2xl p-6",children:[a.jsx("p",{className:"text-gray-700 mb-4",children:"Complete study sessions to earn mystery boxes with surprise rewards! Get bonus XP, streak savers, special titles, and more!"}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-purple-600",children:[a.jsx(Sn,{className:"w-4 h-4"}),a.jsx("span",{children:"Next box available after 3 more sessions"})]})]})]}),a.jsx("div",{className:"flex items-center justify-center",children:a.jsx(Z8,{available:t.totalSessions>=3&&t.totalSessions%3===0,onOpen:()=>console.log("Mystery box opened!")})})]}),a.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl shadow-xl p-8 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-2xl font-bold mb-2 flex items-center gap-2",children:[a.jsx(nn,{className:"w-7 h-7 text-yellow-300"}),"Unlock Premium Power"]}),a.jsx("p",{className:"text-purple-100 mb-4",children:"Get 3x XP multiplier, unlimited streak savers, and exclusive themes!"}),a.jsxs("ul",{className:"space-y-1 text-sm text-purple-100",children:[a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(wt,{className:"w-4 h-4 text-green-300"}),"3x Faster Progress"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(wt,{className:"w-4 h-4 text-green-300"}),"Never Lose Your Streak"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(wt,{className:"w-4 h-4 text-green-300"}),"Exclusive Content & Themes"]})]})]}),a.jsx(G.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-white text-purple-600 px-8 py-4 rounded-xl font-bold shadow-lg hover:shadow-xl transition-all",children:"Upgrade Now"})]})})]})},nU=()=>{const[t,e]=S.useState([]),[n,s]=S.useState(!1),[r,i]=S.useState(null),[o,l]=S.useState({name:"",color:"#6C5DD3",goalHours:0}),c=$s(),{setTimerSubject:d}=k0();jn(),S.useEffect(()=>{const P=JSON.parse(localStorage.getItem("subjects")||"[]");e(P)},[]);const h=P=>{d(P),c(`/study?subject=${encodeURIComponent(P)}`)},f=()=>{if(o.name.trim()){const P=[...t,{...o,id:Date.now()}];e(P),localStorage.setItem("subjects",JSON.stringify(P)),l({name:"",color:"#6C5DD3",goalHours:0}),s(!1)}},m=()=>{if(r&&r.name.trim()){const P=t.map(D=>D.id===r.id?r:D);e(P),localStorage.setItem("subjects",JSON.stringify(P)),i(null),s(!1)}},y=P=>{const D=t.filter(A=>A.id!==P);e(D),localStorage.setItem("subjects",JSON.stringify(D))},b=P=>JSON.parse(localStorage.getItem("studySessions")||"[]").filter(A=>A.subjectName===P).reduce((A,T)=>A+T.durationMinutes,0),C=P=>{const A=JSON.parse(localStorage.getItem("studySessions")||"[]").filter(T=>T.subjectName===P).sort((T,w)=>new Date(w.timestamp)-new Date(T.timestamp));return A.length>0?A[0].timestamp:null},I=P=>Math.floor(P/120)+1,x=(P,D)=>{const A=D*60;return A>0?Math.min(100,P/A*100):0},v=P=>P>=600?{icon:"",name:"Master",color:"text-yellow-500"}:P>=300?{icon:"",name:"Expert",color:"text-purple-500"}:P>=120?{icon:"",name:"Intermediate",color:"text-blue-500"}:P>=60?{icon:"",name:"Beginner",color:"text-green-500"}:{icon:"",name:"New",color:"text-gray-500"},_=P=>{const D=P.match(/[A-Za-z0-9]{2}/g).map(A=>parseInt(A,16));return(.299*D[0]+.587*D[1]+.114*D[2])/255};return a.jsxs("div",{className:"bg-gradient-to-br from-[#1a1a2e] to-[#16213e] min-h-screen mt-20 pl-[100px] pr-6 py-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-white",children:"Subjects"}),a.jsx("p",{className:"text-gray-600",children:"Manage your study subjects and track progress"})]}),a.jsxs(G.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>s(!0),className:"flex items-center space-x-2 px-6 py-3 bg-[#6C5DD3] text-white rounded-xl font-semibold shadow-lg hover:bg-[#7A6AD9] transition-colors",children:[a.jsx(P0,{className:"w-5 h-5"}),a.jsx("span",{children:"Add Subject"})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(P=>{const D=b(P.name),A=C(P.name),T=I(D),w=x(D,P.goalHours),j=v(D),k=_(P.color)>.5?"text-gray-800":"text-white";return a.jsxs(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.02},className:"relative overflow-hidden rounded-2xl shadow-lg",style:{backgroundColor:P.color},children:[a.jsx("div",{className:"absolute top-3 right-3",children:a.jsx("div",{className:`${j.color} text-2xl`,children:j.icon})}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:`text-xl font-bold ${k} mb-1`,children:P.name}),a.jsxs("p",{className:`text-sm ${k} opacity-80`,children:[j.name," Level ",T]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx(G.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>{i(P),s(!0)},className:`p-2 rounded-lg ${k} opacity-70 hover:opacity-100 transition-opacity`,children:a.jsx(mV,{className:"w-4 h-4"})}),a.jsx(G.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>y(P.id),className:`p-2 rounded-lg ${k} opacity-70 hover:opacity-100 transition-opacity`,children:a.jsx(Ao,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"space-y-3 mb-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:`text-sm ${k} opacity-80`,children:"Total Studied"}),a.jsxs("span",{className:`font-semibold ${k}`,children:[Math.round(D/60),"h ",Math.round(D%60),"m"]})]}),P.goalHours>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-1",children:[a.jsx("span",{className:`text-sm ${k} opacity-80`,children:"Weekly Goal"}),a.jsxs("span",{className:`text-sm ${k} opacity-80`,children:[Math.round(w),"%"]})]}),a.jsx("div",{className:"w-full bg-black bg-opacity-20 rounded-full h-2",children:a.jsx(G.div,{initial:{width:0},animate:{width:`${w}%`},transition:{duration:1,ease:"easeOut"},className:"bg-white bg-opacity-80 h-2 rounded-full"})})]}),A&&a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:`text-sm ${k} opacity-80`,children:"Last Studied"}),a.jsx("span",{className:`text-sm ${k} opacity-80`,children:new Date(A).toLocaleDateString()})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs(G.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>h(P.name),className:`flex-1 flex items-center justify-center space-x-2 py-2 px-4 rounded-lg font-semibold transition-colors ${k==="text-white"?"bg-white bg-opacity-20 text-white hover:bg-opacity-30":"bg-black bg-opacity-10 text-gray-800 hover:bg-opacity-20"}`,children:[a.jsx(yo,{className:"w-4 h-4"}),a.jsx("span",{children:"Start Timer"})]}),a.jsx(G.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:`flex items-center justify-center p-2 rounded-lg transition-colors ${k==="text-white"?"bg-white bg-opacity-20 text-white hover:bg-opacity-30":"bg-black bg-opacity-10 text-gray-800 hover:bg-opacity-20"}`,children:a.jsx(Wn,{className:"w-4 h-4"})})]})]})]},P.id)})}),t.length===0&&a.jsxs(G.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[a.jsx(Wn,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No subjects yet"}),a.jsx("p",{className:"text-gray-500 mb-6",children:"Add your first subject to start tracking your study progress"}),a.jsx(G.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>s(!0),className:"px-6 py-3 bg-[#6C5DD3] text-white rounded-xl font-semibold shadow-lg hover:bg-[#7A6AD9] transition-colors",children:"Add Your First Subject"})]}),n&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs(G.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl p-6 w-full max-w-md mx-4",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:r?"Edit Subject":"Add New Subject"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject Name"}),a.jsx("input",{type:"text",value:r?r.name:o.name,onChange:P=>{r?i({...r,name:P.target.value}):l({...o,name:P.target.value})},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#6C5DD3] focus:border-transparent",placeholder:"Enter subject name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color"}),a.jsx("input",{type:"color",value:r?r.color:o.color,onChange:P=>{r?i({...r,color:P.target.value}):l({...o,color:P.target.value})},className:"w-full h-12 border border-gray-300 rounded-lg cursor-pointer"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Weekly Goal (hours)"}),a.jsx("input",{type:"number",value:r?r.goalHours:o.goalHours,onChange:P=>{r?i({...r,goalHours:parseFloat(P.target.value)||0}):l({...o,goalHours:parseFloat(P.target.value)||0})},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#6C5DD3] focus:border-transparent",placeholder:"0",min:"0",step:"0.5"})]})]}),a.jsxs("div",{className:"flex space-x-3 mt-6",children:[a.jsx(G.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{s(!1),i(null),l({name:"",color:"#6C5DD3",goalHours:0})},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx(G.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:r?m:f,className:"flex-1 px-4 py-2 bg-[#6C5DD3] text-white rounded-lg font-semibold hover:bg-[#7A6AD9] transition-colors",children:r?"Save Changes":"Add Subject"})]})]})})]})},sU=()=>{const t=ms(),e=$s(),[n,s]=S.useState(""),[r,i]=S.useState(""),[o,l]=S.useState(!1),[c,d]=S.useState(!1),[h,f]=S.useState(""),[m,y]=S.useState(""),[b,C]=S.useState(2);S.useState(!1);const[I,x]=S.useState(!1),[v,_]=S.useState([]),[P,D]=S.useState([]),[A,T]=S.useState([]),[w,j]=S.useState(!1),[k,R]=S.useState(!1),[M,E]=S.useState("25"),[V,$]=S.useState(0),Q=S.useRef(null),z=S.useRef(null),F=S.useRef(0),W=S.useRef("work"),{isRunning:Y,mode:te,secondsLeft:ce,stopwatchSeconds:ye,isPomodoroBreak:Ft,pomodoroCount:B,startTimer:q,stopTimer:Z,resetTimer:he,setTimerMode:lt,setTimerSubject:Me,setCustomMinutes:sn,customMinutes:Ut,getActualElapsedTime:Gr}=k0(),{userStats:ps,addStudySession:Ee,updateQuestProgress:Cn,awardXP:pc,addReward:Nh,rewardQueue:Pi,showRewards:kh,setShowRewards:Kn}=jn();S.useEffect(()=>{Ut&&E(String(Ut))},[Ut]),S.useEffect(()=>()=>{z.current&&clearInterval(z.current)},[]);const In=()=>te==="pomodoro"?(W.current==="break"?5:25)*60:te==="custom"?(Ut||25)*60:0,gc=()=>{te==="pomodoro"?W.current=Ft?"break":"work":W.current="";const U=Date.now();Q.current=U-F.current*1e3,z.current&&clearInterval(z.current),z.current=setInterval(()=>{const be=Date.now()-Q.current;$(Math.floor(be/1e3))},100)},Kr=()=>{z.current&&clearInterval(z.current),F.current=V},gs=()=>{z.current&&clearInterval(z.current),Q.current=null,F.current=0,$(0)},Zo=U=>{const be=new Date(U),we=be.getDay(),je=be.getDate()-we+(we===0?-6:1);return new Date(be.setDate(je))},xe=(()=>new URLSearchParams(t.search).get("subject"))();S.useEffect(()=>{const U=localStorage.getItem("subjects"),be=localStorage.getItem("studySessions"),we=localStorage.getItem("tasks");U&&_(JSON.parse(U)),be&&T(JSON.parse(be)),we&&D(JSON.parse(we))},[]),S.useEffect(()=>{xe&&Me(xe)},[xe,Me]);const ta=(()=>P.filter(U=>U.subject===xe))(),na=()=>{const U=parseInt(M);U>0&&U<=480&&(sn(U),lt("custom"),gs(),j(!1))},yc=U=>{U==="custom"?j(!0):(j(!1),lt(U),gs())},Hs=()=>{if(te==="stopwatch"){const U=Math.floor(V/60),be=V%60;return`${String(U).padStart(2,"0")}:${String(be).padStart(2,"0")}`}else{const U=In(),be=Math.max(0,V-U);if(te==="pomodoro"&&W.current==="work"&&be>0){const kt=Math.floor(be/60),ct=be%60;return`${String(kt).padStart(2,"0")}:${String(ct).padStart(2,"0")}`}const we=Math.max(0,U-V),je=Math.floor(we/60),Te=we%60;return`${String(je).padStart(2,"0")}:${String(Te).padStart(2,"0")}`}},sa=()=>{if(te==="stopwatch")return 0;const U=In();return U>0?Math.min(100,V/U*100):0},xc=()=>{const U=new Date,be=new Date(U.getFullYear(),U.getMonth(),U.getDate()),we=A.filter(Te=>new Date(Te.timestamp)>=be&&Te.subjectName===xe),je=we.reduce((Te,kt)=>Te+kt.durationMinutes,0);return{sessions:we.length,minutes:je}},ra=()=>{if(A.length===0)return 0;const U=[...new Set(A.filter(je=>je.subjectName===xe).map(je=>new Date(je.timestamp).toDateString()))].sort();let be=0;const we=new Date;for(let je=0;je<30;je++){const Te=new Date(we);Te.setDate(we.getDate()-je);const kt=Te.toDateString();if(U.includes(kt))be++;else break}return be},jh=()=>{const be=Zo(new Date),je=A.filter(ct=>new Date(ct.timestamp)>=be&&ct.subjectName===xe).reduce((ct,Gs)=>ct+Gs.durationMinutes,0),Te=v.find(ct=>ct.name===xe),kt=Te?Te.goalHours*60:0;return{studied:je,goal:kt,percentage:kt>0?je/kt*100:0}},Ai=xc(),Ws=ra(),Pn=jh();if(!xe)return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#0f0f23] via-[#1a1a2e] to-[#16213e] mt-20 flex",children:[a.jsx(Bt,{}),a.jsx("div",{className:"flex-1 ml-16 transition-all duration-300 ease-in-out [body>div>aside:hover_+_div&]:ml-64",children:a.jsxs("div",{className:"max-w-4xl mx-auto p-8",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Ready to Study?"}),a.jsx("p",{className:"text-xl text-gray-300",children:"Choose a subject to begin your study session"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(U=>a.jsxs(G.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-white/5 backdrop-blur rounded-2xl p-6 border border-white/10 cursor-pointer hover:border-[#6C5DD3]/50 transition-all duration-300",onClick:()=>e(`/study?subject=${encodeURIComponent(U.name)}`),children:[a.jsx("div",{className:"w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center text-2xl font-bold text-white",style:{backgroundColor:U.color},children:U.name.charAt(0).toUpperCase()}),a.jsx("h3",{className:"text-xl font-bold text-white text-center mb-2",children:U.name}),a.jsxs("p",{className:"text-gray-300 text-center text-sm",children:["Goal: ",U.goalHours,"h/week"]})]},U.id))}),v.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx("p",{className:"text-gray-400 text-lg mb-4",children:"No subjects added yet!"}),a.jsx("button",{onClick:()=>e("/subjects"),className:"px-6 py-3 bg-[#6C5DD3] text-white rounded-lg hover:bg-[#7A6AD9] transition",children:"Add Your First Subject"})]})]})})]});const ia=()=>{Kr(),Z(),d(!0)},qr=()=>{const U=Math.max(1,Math.round(V/60*100)/100),be={subjectName:xe,durationMinutes:U,timestamp:new Date().toISOString(),notes:n,task:r,mood:h,reflection:m,difficulty:b,isTaskComplete:o},we=pc(U,xe,b),je={...be,xpEarned:we.totalXP,bonuses:we.bonuses};Ee(je);const Te=[...A,je];if(localStorage.setItem("studySessions",JSON.stringify(Te)),T(Te),o&&r){const kt=P.map(ct=>ct.name===r?{...ct,done:!0,doneAt:Date.now()}:ct);localStorage.setItem("tasks",JSON.stringify(kt)),D(kt)}Cn("time",U),Cn("sessions",1),Cn("subjects",1,xe),Cn("streak",1),Nh({type:"SESSION_COMPLETE",title:" Session Complete!",description:`You studied ${xe} for ${U.toFixed(1)} minutes and earned ${we.totalXP} XP!`,tier:"uncommon",xp:we.totalXP,bonuses:we.bonuses}),s(""),i(""),l(!1),d(!1),f(""),y(""),C(2),gs(),he(),Kn(!0)},oa=U=>{const be=A.filter((we,je)=>je!==U);localStorage.setItem("studySessions",JSON.stringify(be)),T(be)},aa=U=>{i(U),U&&l(!0)},qn=[{key:"pomodoro",label:"Pomodoro",duration:25*60},{key:"custom",label:"Custom",duration:null},{key:"stopwatch",label:"Stopwatch",duration:0}],vc=[{emoji:"",label:"Great",value:"great"},{emoji:"",label:"Good",value:"good"},{emoji:"",label:"Okay",value:"okay"},{emoji:"",label:"Struggled",value:"struggled"}];return c?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#0f0f23] via-[#1a1a2e] to-[#16213e] flex items-center justify-center p-4 mt-20",children:a.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-8 max-w-md w-full border border-white/20",children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-6 text-center",children:"Session Complete! "}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-white text-sm font-medium mb-3",children:"How did it go?"}),a.jsx("div",{className:"flex justify-center gap-4",children:vc.map(U=>a.jsxs("button",{onClick:()=>f(U.value),className:`p-3 rounded-xl transition-all ${h===U.value?"bg-[#6C5DD3] text-white shadow-lg scale-110":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:[a.jsx("div",{className:"text-2xl mb-1",children:U.emoji}),a.jsx("div",{className:"text-xs",children:U.label})]},U.value))})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"What did you work on?"}),a.jsx("textarea",{value:m,onChange:U=>y(U.target.value),className:"w-full p-3 rounded-lg bg-[#1a1a2e] text-white border border-[#6C5DD3] resize-none",rows:"3",placeholder:"Briefly describe what you studied..."})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Difficulty Level"}),a.jsx("div",{className:"flex gap-2",children:[1,2,3,4].map(U=>a.jsx("button",{onClick:()=>C(U),className:`flex-1 py-2 rounded-lg transition-all ${b===U?"bg-[#FEC260] text-[#23234a] font-bold":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:U},U))})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>d(!1),className:"flex-1 px-4 py-3 rounded-lg bg-white/10 text-white font-semibold hover:bg-white/20 transition",children:"Continue Studying"}),a.jsx("button",{onClick:qr,className:"flex-1 px-4 py-3 rounded-lg bg-[#6C5DD3] text-white font-semibold hover:bg-[#7A6AD9] transition",children:"Save & Finish"})]})]})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#0f0f23] via-[#1a1a2e] to-[#16213e] mt-20 flex",children:[a.jsx(Bt,{}),a.jsxs("div",{className:"flex-1 ml-16 transition-all duration-300 ease-in-out [body>div>aside:hover_+_div&]:ml-64",children:[k&&a.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-[#0f0f23] via-[#1a1a2e] to-[#16213e] z-50 flex items-center justify-center p-8",children:a.jsx("div",{className:"w-full max-w-2xl",children:a.jsx("div",{className:"bg-white/5 backdrop-blur rounded-3xl p-12 border border-white/10 shadow-2xl",children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:xe}),r&&a.jsx("p",{className:"text-gray-300 text-lg",children:r})]}),w&&a.jsxs("div",{className:"w-full mb-8 p-6 bg-white/5 rounded-xl border border-[#6C5DD3]/30",children:[a.jsx("label",{className:"block text-white text-lg font-medium mb-3",children:"Custom Duration (minutes)"}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("input",{type:"number",min:"1",max:"480",value:M,onChange:U=>E(U.target.value),className:"flex-1 p-3 rounded-lg bg-[#1a1a2e] text-white border border-[#6C5DD3] text-lg",placeholder:"25"}),a.jsx("button",{onClick:na,className:"px-6 py-3 rounded-lg bg-[#6C5DD3] text-white font-semibold hover:bg-[#7A6AD9] transition text-lg",children:"Set"})]})]}),a.jsx("div",{className:"flex gap-3 mb-8",children:qn.map(U=>a.jsx("button",{className:`px-6 py-3 rounded-full font-semibold transition-all text-lg ${te===U.key?"bg-[#6C5DD3] text-white shadow-lg":"bg-white/10 text-white/70 hover:bg-[#6C5DD3]/70"}`,onClick:()=>yc(U.key),disabled:Y,children:U.label},U.key))}),te==="pomodoro"&&a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"text-xl text-white font-medium",children:Ft?"Break Time":"Work Time"}),a.jsxs("div",{className:"text-gray-300 text-lg",children:[B," pomodoros completed"]})]}),a.jsxs("div",{className:"relative mb-12 w-[320px] h-[320px]",children:[te!=="stopwatch"&&a.jsxs("svg",{width:"320",height:"320",className:"absolute inset-0",children:[a.jsx("circle",{cx:"160",cy:"160",r:"144",stroke:"rgba(255,255,255,0.15)",strokeWidth:"12",fill:"none"}),a.jsx("circle",{cx:"160",cy:"160",r:"144",stroke:te==="pomodoro"&&V>In()&&W.current==="work"?"#EF4444":"#6C5DD3",strokeWidth:"12",fill:"none",strokeDasharray:2*Math.PI*144,strokeDashoffset:2*Math.PI*144*(1-sa()/100),style:{transition:"stroke-dashoffset 0.5s, stroke 0.2s"}})]}),a.jsx("div",{className:`absolute inset-0 rounded-full bg-white/10 flex items-center justify-center ${te==="pomodoro"&&V>In()&&W.current==="work"?"text-red-400":"text-white"}`,children:a.jsx("span",{className:"text-8xl font-mono drop-shadow-2xl",children:Hs()})})]}),a.jsxs("div",{className:"flex gap-6 mb-8",children:[Y?a.jsxs("button",{onClick:()=>{Kr(),Z()},className:"px-12 py-4 rounded-xl bg-[#FEC260] text-[#23234a] font-bold shadow-lg hover:bg-[#FFD580] transition flex items-center gap-3 text-xl",children:[a.jsx(Kw,{className:"w-6 h-6"}),"Pause"]}):a.jsxs("button",{onClick:()=>{gc(),q()},disabled:te!=="stopwatch"&&In()===0,className:"px-12 py-4 rounded-xl bg-[#6C5DD3] text-white font-bold shadow-lg hover:bg-[#7A6AD9] transition flex items-center gap-3 text-xl",children:[a.jsx(yo,{className:"w-6 h-6"}),"Start"]}),a.jsxs("button",{onClick:()=>{gs(),he()},className:"px-8 py-4 rounded-xl bg-white/10 text-white font-bold shadow-lg hover:bg-white/20 transition flex items-center gap-3 text-xl",children:[a.jsx(Xw,{className:"w-6 h-6"}),"Reset"]}),a.jsxs("button",{onClick:ia,className:"px-8 py-4 rounded-xl bg-red-600 text-white font-bold shadow-lg hover:bg-red-700 transition flex items-center gap-3 text-xl",children:[a.jsx(Qw,{className:"w-6 h-6"}),"End"]})]}),a.jsxs("div",{className:"text-sm text-gray-400 mb-6 text-center",children:[a.jsxs("div",{children:["Mode: ",te]}),a.jsxs("div",{children:["Running: ",Y?"Yes":"No"]}),a.jsxs("div",{children:["Seconds Left: ",ce]}),a.jsxs("div",{children:["Stopwatch: ",ye]})]}),a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsxs("button",{onClick:()=>R(!1),className:"px-6 py-3 rounded-lg bg-white/10 text-white font-semibold hover:bg-white/20 transition flex items-center gap-2",children:[a.jsx(Ye,{className:"w-5 h-5"}),"Exit Focus Mode"]}),a.jsxs("button",{onClick:()=>e("/subjects"),className:"px-6 py-3 rounded-lg bg-red-600 text-white font-semibold hover:bg-red-700 transition flex items-center gap-2",children:[a.jsx(Ol,{className:"w-5 h-5"}),"Cancel Study"]}),a.jsxs("button",{onClick:()=>x(!I),className:`px-6 py-3 rounded-lg transition flex items-center gap-2 ${I?"bg-[#6C5DD3] text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:[I?a.jsx(Jw,{className:"w-5 h-5"}):a.jsx(Zw,{className:"w-5 h-5"}),"Ambient Sound"]})]})]})})})}),a.jsxs("div",{className:`transition-opacity duration-500 ${k?"opacity-0 pointer-events-none":"opacity-100"}`,children:[a.jsx("div",{className:"bg-white/5 backdrop-blur border-b border-white/10 p-4",children:a.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-white",children:xe||"Select Subject"}),r&&a.jsx("p",{className:"text-sm text-gray-300",children:r})]}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-300",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(dn,{className:"w-4 h-4"}),a.jsxs("span",{children:[Ai.minutes.toFixed(1),"min today"]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Wt,{className:"w-4 h-4 text-[#FEC260]"}),a.jsxs("span",{children:[Ws," day streak"]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"text-right mr-4",children:[a.jsx("div",{className:"text-sm text-gray-300",children:"Weekly Progress"}),a.jsxs("div",{className:"text-lg font-bold text-white",children:[Math.round(Pn.studied/60),"h / ",Math.round(Pn.goal/60),"h"]}),a.jsxs("div",{className:"text-xs text-gray-400",children:[Pn.percentage,"% complete"]})]}),a.jsxs("button",{onClick:()=>e("/subjects"),className:"px-6 py-3 rounded-xl bg-red-600 text-white font-semibold shadow hover:bg-red-700 transition flex items-center gap-2",children:[a.jsx(Ol,{className:"w-4 h-4"}),"Cancel Study"]})]})]})}),a.jsx("div",{className:"max-w-7xl mx-auto p-6",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-white/5 backdrop-blur rounded-2xl p-8 border border-white/10",children:a.jsxs("div",{className:"flex flex-col items-center",children:[w&&a.jsxs("div",{className:"w-full mb-6 p-4 bg-white/5 rounded-lg border border-[#6C5DD3]/30",children:[a.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Custom Duration (minutes)"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"number",min:"1",max:"480",value:M,onChange:U=>E(U.target.value),className:"flex-1 p-2 rounded bg-[#1a1a2e] text-white border border-[#6C5DD3] text-sm",placeholder:"25"}),a.jsx("button",{onClick:na,className:"px-4 py-2 rounded bg-[#6C5DD3] text-white font-semibold hover:bg-[#7A6AD9] transition text-sm",children:"Set"})]})]}),a.jsx("div",{className:"flex gap-2 mb-6",children:qn.map(U=>a.jsx("button",{className:`px-4 py-2 rounded-full font-semibold transition-all ${te===U.key?"bg-[#6C5DD3] text-white shadow":"bg-white/10 text-white/70 hover:bg-[#6C5DD3]/70"}`,onClick:()=>yc(U.key),disabled:Y,children:U.label},U.key))}),te==="pomodoro"&&a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"text-sm text-white font-medium",children:Ft?"Break Time":"Work Time"}),a.jsxs("div",{className:"text-xs text-gray-300",children:[B," pomodoros completed"]})]}),a.jsxs("div",{className:"relative mb-8 w-[160px] h-[160px]",children:[te!=="stopwatch"&&a.jsxs("svg",{width:"160",height:"160",className:"absolute inset-0",children:[a.jsx("circle",{cx:"80",cy:"80",r:"64",stroke:"rgba(255,255,255,0.15)",strokeWidth:"8",fill:"none"}),a.jsx("circle",{cx:"80",cy:"80",r:"64",stroke:te==="pomodoro"&&V>In()&&W.current==="work"?"#EF4444":"#6C5DD3",strokeWidth:"8",fill:"none",strokeDasharray:2*Math.PI*64,strokeDashoffset:2*Math.PI*64*(1-sa()/100),style:{transition:"stroke-dashoffset 0.5s, stroke 0.2s"}})]}),a.jsx("div",{className:`absolute inset-0 rounded-full bg-white/10 flex items-center justify-center ${te==="pomodoro"&&V>In()&&W.current==="work"?"text-red-400":"text-white"}`,children:a.jsx("span",{className:"text-6xl font-mono drop-shadow-lg",children:Hs()})})]}),a.jsxs("div",{className:"flex gap-4 mb-6",children:[Y?a.jsxs("button",{onClick:()=>{Kr(),Z()},className:"px-8 py-3 rounded-xl bg-[#FEC260] text-[#23234a] font-bold shadow hover:bg-[#FFD580] transition flex items-center gap-2",children:[a.jsx(Kw,{className:"w-5 h-5"}),"Pause"]}):a.jsxs("button",{onClick:()=>{gc(),q()},disabled:te!=="stopwatch"&&In()===0,className:"px-8 py-3 rounded-xl bg-[#6C5DD3] text-white font-bold shadow hover:bg-[#7A6AD9] transition flex items-center gap-2",children:[a.jsx(yo,{className:"w-5 h-5"}),"Start"]}),a.jsxs("button",{onClick:()=>{gs(),he()},className:"px-6 py-3 rounded-xl bg-white/10 text-white font-bold shadow hover:bg-white/20 transition flex items-center gap-2",children:[a.jsx(Xw,{className:"w-5 h-5"}),"Reset"]}),a.jsxs("button",{onClick:ia,className:"px-6 py-3 rounded-xl bg-red-600 text-white font-bold shadow hover:bg-red-700 transition flex items-center gap-2",children:[a.jsx(Qw,{className:"w-5 h-5"}),"End"]})]}),a.jsxs("div",{className:"text-xs text-gray-400 mb-4",children:[a.jsxs("div",{children:["Mode: ",te]}),a.jsxs("div",{children:["Running: ",Y?"Yes":"No"]}),a.jsxs("div",{children:["Seconds Left: ",ce]}),a.jsxs("div",{children:["Stopwatch: ",ye]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("button",{onClick:()=>R(!k),className:`px-4 py-2 rounded-lg transition flex items-center gap-2 ${k?"bg-[#6C5DD3] text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:[a.jsx(Ye,{className:"w-4 h-4"}),k?"Exit Focus":"Focus Mode"]}),a.jsxs("button",{onClick:()=>x(!I),className:`px-4 py-2 rounded-lg transition flex items-center gap-2 ${I?"bg-[#6C5DD3] text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:[I?a.jsx(Jw,{className:"w-4 h-4"}):a.jsx(Zw,{className:"w-4 h-4"}),"Ambient Sound"]})]})]})}),a.jsxs("div",{className:"bg-white/5 backdrop-blur rounded-2xl p-6 border border-white/10",children:[a.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[a.jsx(Ye,{className:"w-5 h-5"}),"Current Task/Topic"]}),a.jsx("div",{className:"mb-4",children:a.jsxs("select",{value:r,onChange:U=>aa(U.target.value),className:"w-full p-3 rounded-lg bg-[#1a1a2e] text-white border border-[#6C5DD3]",disabled:Y,children:[a.jsx("option",{value:"",children:"Select a task or enter custom topic"}),ta.length>0?ta.map(U=>a.jsxs("option",{value:U.name,children:[U.name," (",U.time," min - ",U.priority,")"]},U.id)):a.jsxs("option",{value:"",disabled:!0,children:["No tasks available for ",xe]})]})}),a.jsx("div",{className:"mb-4",children:a.jsx("input",{type:"text",value:r,onChange:U=>i(U.target.value),className:"w-full p-3 rounded-lg bg-[#1a1a2e] text-white border border-[#6C5DD3]",placeholder:"Or type a custom topic..."})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:"taskComplete",checked:o,onChange:U=>l(U.target.checked),className:"rounded"}),a.jsx("label",{htmlFor:"taskComplete",className:"text-white text-sm",children:"Mark task as complete"})]})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white/5 backdrop-blur rounded-2xl p-6 border border-white/10",children:[a.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[a.jsx(Tn,{className:"w-5 h-5"}),"Today's Progress"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-300",children:"Sessions"}),a.jsx("span",{className:"text-white font-bold",children:Ai.sessions})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-300",children:"Time Studied"}),a.jsxs("span",{className:"text-white font-bold",children:[Math.round(Ai.minutes)," min"]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-300",children:"Current Streak"}),a.jsxs("span",{className:"text-white font-bold flex items-center gap-1",children:[a.jsx(Wt,{className:"w-4 h-4 text-[#FEC260]"}),Ws," days"]})]})]})]}),a.jsxs("div",{className:"bg-white/5 backdrop-blur rounded-2xl p-6 border border-white/10",children:[a.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[a.jsx(Er,{className:"w-5 h-5"}),"Weekly Goal"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-300",children:"Studied"}),a.jsxs("span",{className:"text-white font-bold",children:[Math.round(Pn.studied/60),"h"]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-300",children:"Goal"}),a.jsxs("span",{className:"text-white font-bold",children:[Math.round(Pn.goal/60),"h"]})]}),a.jsx("div",{className:"w-full bg-white/10 rounded-full h-2",children:a.jsx("div",{className:"bg-[#6C5DD3] h-2 rounded-full transition-all duration-500",style:{width:`${Math.min(Pn.percentage,100)}%`}})}),a.jsxs("div",{className:"text-center text-sm text-gray-300",children:[Pn.percentage,"% complete"]})]})]}),a.jsxs("div",{className:"bg-white/5 backdrop-blur rounded-2xl p-6 border border-white/10",children:[a.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[a.jsx(Wn,{className:"w-5 h-5"}),"Recent Study Logs"]}),a.jsx("div",{className:"max-h-[300px] overflow-y-auto",children:A.filter(U=>U.subjectName===xe).length>0?a.jsx("div",{className:"space-y-3",children:A.filter(U=>U.subjectName===xe).slice(0,5).map((U,be)=>{const we={great:"",good:"",okay:"",struggled:""}[U.mood]||"";return a.jsxs("div",{className:"p-3 rounded-lg bg-white/5 border border-white/10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(dn,{className:"w-4 h-4 text-[#6C5DD3]"}),a.jsxs("span",{className:"text-sm font-medium text-white",children:[U.durationMinutes.toFixed(1)," min"]})]}),a.jsx("span",{className:"text-xs text-gray-400",children:new Date(U.timestamp).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),U.task&&a.jsxs("div",{className:"text-xs text-gray-300 mb-1",children:[a.jsx("span",{className:"font-medium",children:"Task:"})," ",U.task]}),U.reflection&&a.jsxs("div",{className:"text-xs text-gray-300 mb-2 italic",children:['"',U.reflection,'"']}),a.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[U.mood&&a.jsxs("span",{className:"text-gray-400 flex items-center gap-1",children:[a.jsx("span",{children:we}),a.jsx("span",{className:"capitalize",children:U.mood})]}),U.difficulty&&a.jsxs("span",{className:"text-gray-400",children:["Difficulty: ",U.difficulty,"/4"]})]}),a.jsx("button",{onClick:()=>oa(A.indexOf(U)),className:"mt-2 p-1 rounded hover:bg-red-600/20 transition text-red-400 hover:text-red-300",title:"Delete session",children:a.jsx(Ao,{className:"w-3 h-3"})})]},be)})}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Wn,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"No study logs yet for this subject"}),a.jsx("p",{className:"text-gray-500 text-xs",children:"Complete a session to see your logs here!"})]})})]}),a.jsxs("div",{className:"bg-white/5 backdrop-blur rounded-2xl p-6 border border-white/10",children:[a.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[a.jsx(Po,{className:"w-5 h-5"}),"Recent Achievements"]}),a.jsxs("div",{className:"space-y-3",children:[Ws>=3&&a.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-[#6C5DD3]/20 border border-[#6C5DD3]/30",children:[a.jsx(Wt,{className:"w-5 h-5 text-[#FEC260]"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-white text-sm font-medium",children:"Streak Master"}),a.jsxs("div",{className:"text-gray-300 text-xs",children:[Ws," day streak!"]})]})]}),Ai.minutes>=120&&a.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-[#6C5DD3]/20 border border-[#6C5DD3]/30",children:[a.jsx(vh,{className:"w-5 h-5 text-[#FEC260]"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-white text-sm font-medium",children:"Study Warrior"}),a.jsx("div",{className:"text-gray-300 text-xs",children:"2+ hours today!"})]})]}),Pn.percentage>=80&&a.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-[#6C5DD3]/20 border border-[#6C5DD3]/30",children:[a.jsx(Ye,{className:"w-5 h-5 text-[#FEC260]"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-white text-sm font-medium",children:"Goal Crusher"}),a.jsx("div",{className:"text-gray-300 text-xs",children:"80%+ weekly goal!"})]})]}),A.length===0&&a.jsxs("div",{className:"text-center py-4",children:[a.jsx(Po,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Complete your first session to unlock achievements!"})]})]})]})]})]})})]})]}),a.jsx(zs,{children:Pi&&Pi.length>0&&Pi.map((U,be)=>U.type==="SESSION_COMPLETE"?a.jsx(G.div,{initial:{opacity:0,scale:.8,y:50},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:-50},className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:a.jsxs(G.div,{initial:{scale:.8},animate:{scale:1},className:"bg-gradient-to-br from-green-500 to-emerald-600 text-white p-8 rounded-3xl shadow-2xl text-center max-w-md mx-4 border-4 border-yellow-400",children:[a.jsx("div",{className:"text-6xl mb-4",children:""}),a.jsx("h2",{className:"text-3xl font-bold mb-4",children:U.title}),a.jsx("p",{className:"text-lg mb-6",children:U.description}),U.bonuses&&Object.keys(U.bonuses).length>0&&a.jsxs("div",{className:"bg-black/20 rounded-lg p-4 mb-6",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"XP Breakdown:"}),Object.entries(U.bonuses).map(([we,je])=>je>0&&a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsxs("span",{className:"capitalize",children:[we," Bonus:"]}),a.jsxs("span",{children:["+",je," XP"]})]},we))]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("button",{onClick:()=>{Kn(!1),e("/dashboard")},className:"flex-1 bg-white/20 hover:bg-white/30 px-6 py-3 rounded-xl font-semibold transition-all",children:"View Dashboard"}),a.jsx("button",{onClick:()=>Kn(!1),className:"flex-1 bg-yellow-500 hover:bg-yellow-600 text-black px-6 py-3 rounded-xl font-semibold transition-all",children:"Continue Studying"})]})]})},U.id):U.type==="XP_EARNED"?a.jsx(G2,{amount:U.xp||0,bonuses:U.bonuses||{},onComplete:()=>Kn(!1)},U.id):U.type==="LEVEL_UP"?a.jsx(K2,{newLevel:ps.level,onComplete:()=>Kn(!1)},U.id):U.type==="ACHIEVEMENT"?a.jsx(q2,{achievement:U,onComplete:()=>Kn(!1)},U.id):null)})]})},p_=[{label:"Low",color:"border-blue-500"},{label:"Medium",color:"border-yellow-500"},{label:"High",color:"border-red-500"}];function rU(){const[t,e]=S.useState([]),[n,s]=S.useState([]),[r,i]=S.useState({name:"",subject:"",time:"",priority:"Low",scheduledDate:""}),[o,l]=S.useState(""),[c,d]=S.useState(!1),[h,f]=S.useState("todo"),[m,y]=S.useState(null),[b,C]=S.useState("subject"),[I,x]=S.useState(null);S.useEffect(()=>{const V=localStorage.getItem("tasks");V&&e(JSON.parse(V))},[]),S.useEffect(()=>{const V=localStorage.getItem("subjects");if(V)s(JSON.parse(V));else{const $=[{id:1,name:"Math",color:"#6C5DD3",goalHours:5},{id:2,name:"English",color:"#B6E4CF",goalHours:4},{id:3,name:"Biology",color:"#FEC260",goalHours:6},{id:4,name:"History",color:"#FF6B6B",goalHours:3}];s($),localStorage.setItem("subjects",JSON.stringify($))}},[]),S.useEffect(()=>{localStorage.setItem("tasks",JSON.stringify(t))},[t]);const v=()=>{if(!r.name.trim()||!r.subject.trim()||!r.time.trim()){l("Please enter a task name, subject, and duration.");return}e(I?t.map(V=>V.id===I?{...V,...r}:V):[...t,{...r,id:Date.now(),done:!1}]),i({name:"",subject:"",time:"",priority:"Low",scheduledDate:""}),l(""),d(!1),x(null)},_=V=>{e(t.map($=>$.id===V?$.done?{...$,done:!1,doneAt:void 0}:{...$,done:!0,doneAt:Date.now()}:$)),y(V),setTimeout(()=>y(null),350)},P=V=>{var $;return(($=p_.find(Q=>Q.label===V))==null?void 0:$.color)||"border-gray-300"},D=V=>{if(!V)return null;const $=new Date,Q=new Date(V),z=Q.toDateString()===$.toDateString(),F=new Date($.getFullYear(),$.getMonth(),$.getDate()+1),W=Q.toDateString()===F.toDateString();return z?"Today":W?"Tomorrow":Q<$.setHours(0,0,0,0)?"Overdue":Q.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},A=V=>{let $=[...V];if(b==="subject")$.sort((Q,z)=>(Q.subject||"").localeCompare(z.subject||""));else if(b==="difficulty"){const Q={High:0,Medium:1,Low:2};$.sort((z,F)=>(Q[z.priority]??3)-(Q[F.priority]??3))}else b==="schedule"&&$.sort((Q,z)=>!Q.scheduledDate&&!z.scheduledDate?0:Q.scheduledDate?z.scheduledDate?new Date(Q.scheduledDate)-new Date(z.scheduledDate):-1:1);return $},T=new Date,w=new Date(T.getFullYear(),T.getMonth(),T.getDate());new Date(T.getFullYear(),T.getMonth(),T.getDate()-6);const j=t.filter(V=>!V.done).length,k=t.filter(V=>V.done).length,R=t.filter(V=>{if(!V.time)return!1;const $=new Date(`${T.toISOString().slice(0,10)}T${V.time}`);return $>=w&&$<new Date(w.getTime()+24*60*60*1e3)}).length;Lk.useEffect(()=>{const V=Date.now(),$=7*24*60*60*1e3,Q=t.filter(z=>!z.done||!z.doneAt||V-z.doneAt<$);Q.length!==t.length&&e(Q)},[t]);const M=V=>{i({name:V.name,subject:V.subject,time:V.time,priority:V.priority,scheduledDate:V.scheduledDate||""}),x(V.id),d(!0)},E=V=>{e(t.filter($=>$.id!==V))};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#1a1a2e] to-[#16213e] mt-20 flex",children:[a.jsx(Bt,{}),a.jsx("div",{className:"flex-1 ml-16 transition-all duration-300 ease-in-out [body>div>aside:hover_+_div&]:ml-64",children:a.jsx("div",{className:"p-8",children:a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h1",{className:"text-2xl font-bold text-white",children:"Your Tasks"}),a.jsx("div",{className:"flex gap-2",children:a.jsx("button",{className:"rounded-2xl bg-[#6C5DD3] text-white px-4 py-2 font-semibold shadow hover:bg-[#7A6AD9] transition",onClick:()=>d(!0),children:"+ Add Task"})})]}),a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx("label",{className:"text-white font-semibold",children:"Sort by:"}),a.jsxs("select",{className:"rounded bg-[#23234a] text-white px-3 py-1 border border-[#6C5DD3]",value:b,onChange:V=>C(V.target.value),children:[a.jsx("option",{value:"subject",children:"Subject"}),a.jsx("option",{value:"difficulty",children:"Hardest"}),a.jsx("option",{value:"schedule",children:"Earliest Due"})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-4 mb-4",children:[a.jsxs("div",{className:"bg-[#23234a] rounded-xl px-4 py-2 text-white text-sm font-semibold shadow",children:["To Do: ",a.jsx("span",{className:"text-[#FEC260] font-bold",children:j})]}),a.jsxs("div",{className:"bg-[#23234a] rounded-xl px-4 py-2 text-white text-sm font-semibold shadow",children:["Done: ",a.jsx("span",{className:"text-[#B6E4CF] font-bold",children:k})]}),a.jsxs("div",{className:"bg-[#23234a] rounded-xl px-4 py-2 text-white text-sm font-semibold shadow",children:["Scheduled Today: ",a.jsx("span",{className:"text-[#6C5DD3] font-bold",children:R})]})]}),c&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:a.jsxs("div",{className:"bg-[#23234a] p-6 rounded-2xl shadow-xl w-full max-w-md space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-lg font-bold text-white",children:"Add Task"}),a.jsx("button",{className:"text-white text-xl",onClick:()=>{d(!1),l("")},children:""})]}),o&&a.jsx("div",{className:"bg-red-500/80 text-white text-sm rounded px-3 py-2 mb-2",children:o}),a.jsx("label",{className:"block text-white mb-1",children:"Task Name"}),a.jsx("input",{className:"w-full p-2 rounded bg-[#1a1a2e] text-white border border-[#6C5DD3] mb-2",value:r.name,onChange:V=>i({...r,name:V.target.value})}),a.jsx("label",{className:"block text-white mb-1",children:"Subject"}),a.jsxs("select",{className:"w-full p-2 rounded bg-[#1a1a2e] text-white border border-[#6C5DD3] mb-2",value:r.subject,onChange:V=>i({...r,subject:V.target.value}),children:[a.jsx("option",{value:"",children:"Select Subject"}),n.map(V=>a.jsx("option",{value:V.name,children:V.name},V.id))]}),a.jsx("label",{className:"block text-white mb-1",children:"Duration (minutes)"}),a.jsx("input",{type:"number",min:"1",className:"w-full p-2 rounded bg-[#1a1a2e] text-white border border-[#6C5DD3] mb-2",value:r.time,onChange:V=>i({...r,time:V.target.value.replace(/[^0-9]/g,"")}),placeholder:"e.g. 25"}),a.jsx("label",{className:"block text-white mb-1",children:"Importance"}),a.jsx("select",{className:"w-full p-2 rounded bg-[#1a1a2e] text-white border border-[#6C5DD3] mb-4",value:r.priority,onChange:V=>i({...r,priority:V.target.value}),children:p_.map(V=>a.jsx("option",{value:V.label,children:V.label},V.label))}),a.jsx("label",{className:"block text-white mb-1",children:"Scheduled Date (optional)"}),a.jsx("input",{type:"date",className:"w-full p-2 rounded bg-[#1a1a2e] text-white border border-[#6C5DD3] mb-4",value:r.scheduledDate,onChange:V=>i({...r,scheduledDate:V.target.value})}),a.jsx("button",{className:"w-full rounded-2xl bg-[#6C5DD3] text-white px-4 py-2 font-semibold shadow hover:bg-[#7A6AD9] transition",onClick:v,children:"Save Task"})]})}),a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"grid grid-cols-2 w-1/2 mx-auto bg-[#23234a] rounded-xl overflow-hidden",children:[a.jsx("button",{className:`py-2 font-semibold transition ${h==="todo"?"bg-[#6C5DD3] text-white":"text-white/70"}`,onClick:()=>f("todo"),children:"To Do"}),a.jsx("button",{className:`py-2 font-semibold transition ${h==="done"?"bg-[#6C5DD3] text-white":"text-white/70"}`,onClick:()=>f("done"),children:"Done"})]})}),h==="todo"&&a.jsxs("div",{className:"space-y-4",children:[A(t.filter(V=>!V.done)).map(V=>a.jsxs("div",{className:`flex items-center justify-between p-4 rounded-xl bg-[#23234a] border-l-8 ${P(V.priority)} transition-transform duration-200 hover:scale-105 ${m===V.id?"animate-pop":""}`,children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"font-semibold text-lg text-white",children:V.name}),a.jsxs("p",{className:"text-sm text-gray-400",children:[V.subject,V.time?` | ${V.time} min`:""]})]}),a.jsx("div",{className:"flex flex-col items-center mx-4",children:V.scheduledDate?(()=>{const $=D(V.scheduledDate);let Q="bg-[#23234a] text-white/80";return $==="Overdue"?Q="bg-red-600 text-white border border-red-600":$==="Today"?Q="bg-orange-500 text-white border border-orange-500":$==="Tomorrow"&&(Q="bg-green-500 text-white border border-green-500"),a.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded ${Q}`,children:$})})():a.jsx("a",{href:"/schedule",className:"inline-block text-xs font-semibold px-2 py-1 rounded bg-[#6C5DD3] text-white hover:bg-[#7A6AD9] transition",children:"Schedule"})}),a.jsxs("div",{className:"flex flex-col items-center gap-2 mx-2",children:[a.jsx("button",{onClick:()=>M(V),className:"p-1 rounded hover:bg-[#6C5DD3] transition",title:"Edit",children:a.jsx(qw,{className:"w-4 h-4 text-white"})}),a.jsx("button",{onClick:()=>E(V.id),className:"p-1 rounded hover:bg-red-600 transition",title:"Delete",children:a.jsx(Ao,{className:"w-4 h-4 text-white"})})]}),a.jsx("input",{type:"checkbox",checked:V.done,onChange:()=>_(V.id),className:"w-5 h-5 accent-[#6C5DD3]"})]},V.id)),t.filter(V=>!V.done).length===0&&a.jsx("div",{className:"text-center text-gray-400",children:"No tasks to do!"})]}),h==="done"&&a.jsxs("div",{className:"space-y-4",children:[A(t.filter(V=>V.done)).map(V=>a.jsxs("div",{className:`flex items-center justify-between p-4 rounded-xl bg-[#23234a] border-l-8 ${P(V.priority)} opacity-60 transition-transform duration-200 hover:scale-105`,children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"line-through font-medium text-white",children:V.name}),a.jsxs("p",{className:"text-sm text-gray-400",children:[V.subject,V.time?` | ${V.time} min`:""]})]}),a.jsx("div",{className:"flex flex-col items-center mx-4",children:V.scheduledDate?(()=>{const $=D(V.scheduledDate);let Q="bg-[#23234a] text-white/80";return $==="Overdue"?Q="bg-red-600 text-white border border-red-600":$==="Today"?Q="bg-orange-500 text-white border border-orange-500":$==="Tomorrow"&&(Q="bg-green-500 text-white border border-green-500"),a.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded ${Q}`,children:$})})():a.jsx("a",{href:"/schedule",className:"inline-block text-xs font-semibold px-2 py-1 rounded bg-[#6C5DD3] text-white hover:bg-[#7A6AD9] transition",children:"Schedule"})}),a.jsxs("div",{className:"flex flex-col items-center gap-2 mx-2",children:[a.jsx("button",{onClick:()=>M(V),className:"p-1 rounded hover:bg-[#6C5DD3] transition",title:"Edit",children:a.jsx(qw,{className:"w-4 h-4 text-white"})}),a.jsx("button",{onClick:()=>E(V.id),className:"p-1 rounded hover:bg-red-600 transition",title:"Delete",children:a.jsx(Ao,{className:"w-4 h-4 text-white"})})]}),a.jsx("input",{type:"checkbox",checked:V.done,onChange:()=>_(V.id),className:"w-5 h-5 accent-[#6C5DD3]"})]},V.id)),t.filter(V=>V.done).length===0&&a.jsx("div",{className:"text-center text-gray-400",children:"No completed tasks yet!"})]})]})})})]})}function iU(){const[t,e]=S.useState([]);S.useEffect(()=>{const A=localStorage.getItem("tasks");A&&e(JSON.parse(A))},[]);const n=new Date,s=n.toISOString().slice(0,10),r=t.filter(A=>A.scheduledDate===s),[i,o]=S.useState(n.getMonth()),[l,c]=S.useState(n.getFullYear()),d=new Date(l,i,1),f=new Date(l,i+1,0).getDate(),m=d.getDay(),y=[];for(let A=0;A<m;A++)y.push(null);for(let A=1;A<=f;A++)y.push(A);const b=["January","February","March","April","May","June","July","August","September","October","November","December"];Array.from({length:11},(A,T)=>n.getFullYear()-5+T);const C=()=>{i===0?(o(11),c(l-1)):o(i-1)},I=()=>{i===11?(o(0),c(l+1)):o(i+1)},[x,v]=S.useState(null),_=t.filter(A=>!A.scheduledDate),P=A=>{if(!x)return;const T=t.map(w=>w.id===x?{...w,scheduledDate:A}:w);e(T),v(null),localStorage.setItem("tasks",JSON.stringify(T))},D=A=>A==="High"?"bg-red-500":A==="Medium"?"bg-yellow-400":A==="Low"?"bg-blue-500":"bg-gray-400";return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#1a1a2e] to-[#16213e] mt-20 flex",children:[a.jsx(Bt,{}),a.jsx("div",{className:"flex-1 ml-16 transition-all duration-300 ease-in-out [body>div>aside:hover_+_div&]:ml-64",children:a.jsxs("div",{className:"p-8",children:[a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"bg-[#23234a] rounded-xl p-6 shadow-md",children:[a.jsx("h2",{className:"text-lg font-bold text-white mb-2",children:"Today's Scheduled Tasks"}),r.length===0?a.jsx("div",{className:"text-gray-400",children:"No tasks scheduled for today."}):a.jsx("ul",{className:"space-y-2",children:r.map(A=>a.jsxs("li",{className:"text-white flex flex-col md:flex-row md:items-center md:gap-4",children:[a.jsx("span",{className:"font-semibold",children:A.name}),a.jsxs("span",{className:"text-sm text-gray-400",children:[A.subject,A.time?` | ${A.time} min`:""]})]},A.id))})]})}),a.jsxs("div",{className:"flex gap-6",children:[a.jsxs("div",{className:"bg-[#23234a] rounded-xl p-3 shadow-md mb-6 w-2/3 h-[calc(100vh-5rem-4rem)] flex flex-col flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2 justify-center",children:[a.jsx("button",{onClick:C,className:"text-white px-1 py-0.5 rounded hover:bg-[#35357a] transition text-base",children:""}),a.jsxs("span",{className:"text-base font-bold text-white select-none",children:[b[i]," ",l]}),a.jsx("button",{onClick:I,className:"text-white px-1 py-0.5 rounded hover:bg-[#35357a] transition text-base",children:""})]}),a.jsxs("div",{className:"grid grid-cols-7 gap-1 text-center text-white/80 h-full w-full items-stretch",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(A=>a.jsx("div",{className:"font-semibold text-[10px] pb-0.5",children:A},A)),y.map((A,T)=>{const w=A?`${l}-${String(i+1).padStart(2,"0")}-${String(A).padStart(2,"0")}`:null,j=A?t.filter(k=>k.scheduledDate===w):[];return a.jsxs("div",{className:`w-full h-full min-h-[2.2rem] flex flex-col items-center justify-start rounded text-xs pt-1 transition-transform duration-200
                        ${l===n.getFullYear()&&i===n.getMonth()&&A===n.getDate()?"bg-[#6C5DD3] text-white font-bold":A?"hover:bg-[#35357a] hover:scale-110 transition":""}
                        ${A?"cursor-pointer":""}`,onDragOver:k=>A&&k.preventDefault(),onDrop:A?()=>P(w):void 0,children:[a.jsx("div",{children:A||""}),a.jsx("div",{className:"flex flex-col gap-0.5 mt-0.5 w-full items-start",children:j.map(k=>a.jsxs("div",{className:"flex items-center gap-0.5 w-full truncate",children:[a.jsx("span",{className:`inline-block w-2 h-2 rounded-full ${D(k.priority)} border border-white flex-shrink-0`}),a.jsx("span",{className:"text-[10px] text-white truncate font-semibold max-w-[4.5rem]",children:k.name}),a.jsxs("span",{className:"text-[10px] text-gray-400 truncate max-w-[4.5rem]",children:[k.subject,k.time?` | ${k.time} min`:""]})]},k.id))})]},T)})]})]}),a.jsxs("div",{className:"bg-[#23234a] rounded-xl p-4 shadow-md mb-6 w-1/3 h-[calc(100vh-5rem-4rem)] flex flex-col",children:[a.jsx("h2",{className:"text-lg font-bold text-white mb-4",children:"Schedule Tasks"}),_.length===0?a.jsx("div",{className:"text-gray-400",children:"No unscheduled tasks."}):a.jsx("ul",{className:"space-y-2 flex-1 overflow-y-auto",children:_.map(A=>a.jsxs("li",{className:"bg-[#1a1a2e] rounded px-3 py-2 text-white flex items-center justify-between cursor-grab hover:bg-[#35357a] transition",draggable:!0,onDragStart:()=>v(A.id),onDragEnd:()=>v(null),children:[a.jsx("span",{className:"font-semibold",children:A.name}),a.jsxs("span",{className:"text-xs text-gray-400 ml-2",children:[A.subject,A.time?` | ${A.time} min`:""]})]},A.id))}),a.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"Drag a task onto a calendar day to schedule it."})]})]})]})})]})}function ja(t){const e=new Date(t),n=e.getDay(),s=e.getDate()-n+(n===0?-6:1);return new Date(e.setDate(s))}function Bf(t){return new Date(t.getFullYear(),t.getMonth(),1)}function oU(t,e){const n=e==="week"?7:e==="month"?30:365,s=new Date(t);s.setDate(s.getDate()-1);const r=new Date(t);return r.setDate(r.getDate()-n),{startDate:r,endDate:s}}function aU(){const[t,e]=S.useState([]),[n,s]=S.useState([]),[r,i]=S.useState([]),[o,l]=S.useState("week");S.useEffect(()=>{const B=localStorage.getItem("subjects"),q=localStorage.getItem("studySessions"),Z=localStorage.getItem("tasks");B&&e(JSON.parse(B)),q&&s(JSON.parse(q)),Z&&i(JSON.parse(Z))},[]);const d=(()=>{const B=new Date;let q;switch(o){case"week":q=ja(B);break;case"month":q=Bf(B);break;case"all":return n;default:q=ja(B)}return n.filter(Z=>new Date(Z.timestamp)>=q)})(),h=d.reduce((B,q)=>B+q.durationMinutes,0),f=d.length,m=f>0?h/f:0,y=d.length>0?d.reduce((B,q)=>q.durationMinutes>B.durationMinutes?q:B):null,C=(()=>{const B={};return d.forEach(q=>{B[q.subjectName]||(B[q.subjectName]=0),B[q.subjectName]+=q.durationMinutes}),B})(),x=(()=>{const B={};return n.forEach(q=>{B[q.subjectName]||(B[q.subjectName]=0),B[q.subjectName]+=q.durationMinutes}),Object.entries(B).map(([q,Z])=>({subjectName:q,totalMinutes:Z,totalHours:Math.round(Z/60),totalMinutesRemaining:Math.round(Z%60)})).sort((q,Z)=>Z.totalMinutes-q.totalMinutes)})(),_=(()=>{const B=new Date;let q;switch(o){case"week":q=ja(B);break;case"month":q=Bf(B);break;case"all":return{total:r.length,completed:r.filter(he=>he.done).length,rate:r.length>0?r.filter(he=>he.done).length/r.length*100:0};default:q=ja(B)}const Z=r.filter(he=>he.doneAt?new Date(he.doneAt)>=q:new Date(he.id)>=q);return{total:Z.length,completed:Z.filter(he=>he.done).length,rate:Z.length>0?Z.filter(he=>he.done).length/Z.length*100:0}})(),D=(()=>{if(d.length===0)return 0;const B=[...new Set(d.map(Z=>new Date(Z.timestamp).toDateString()))];let q;switch(o){case"week":q=7;break;case"month":q=30;break;case"all":q=Math.max(B.length,1);break;default:q=7}return B.length/q*100})(),T=(()=>{const B=[...new Set(n.map(Me=>new Date(Me.timestamp).toDateString()))].sort();let q=0,Z=0,he=0;const lt=new Date;for(let Me=0;Me<30;Me++){const sn=new Date(lt);sn.setDate(lt.getDate()-Me);const Ut=sn.toDateString();if(B.includes(Ut))q++;else break}for(let Me=0;Me<B.length;Me++)if(Me===0)he=1;else{const sn=new Date(B[Me-1]);(new Date(B[Me])-sn)/(1e3*60*60*24)===1?he++:(Z=Math.max(Z,he),he=1)}return Z=Math.max(Z,he),{currentStreak:q,longestStreak:Z}})(),j=(()=>{const B=Array(24).fill(0);return d.forEach(q=>{const Z=new Date(q.timestamp).getHours();B[Z]++}),B})(),R=(()=>{const B=Array(7).fill(0);return d.forEach(q=>{const Z=new Date(q.timestamp).getDay();B[Z]+=q.durationMinutes}),B})(),E=(()=>{const B=new Date,q=new Date(B);return q.setDate(B.getDate()+7),r.filter(Z=>!Z.done&&Z.scheduledDate&&new Date(Z.scheduledDate)>=B&&new Date(Z.scheduledDate)<=q).sort((Z,he)=>new Date(Z.scheduledDate)-new Date(he.scheduledDate))})(),$=(()=>{const B=new Date;let q;switch(o){case"week":q=ja(B);break;case"month":q=Bf(B);break;default:return{studyTimeChange:0,sessionsChange:0,tasksChange:0}}const{startDate:Z,endDate:he}=oU(q,o),lt=n.filter(Ee=>new Date(Ee.timestamp)>=q),Me=n.filter(Ee=>new Date(Ee.timestamp)>=Z&&new Date(Ee.timestamp)<=he),sn=lt.reduce((Ee,Cn)=>Ee+Cn.durationMinutes,0),Ut=Me.reduce((Ee,Cn)=>Ee+Cn.durationMinutes,0),Gr=r.filter(Ee=>Ee.doneAt?new Date(Ee.doneAt)>=q:new Date(Ee.id)>=q),ps=r.filter(Ee=>Ee.doneAt?new Date(Ee.doneAt)>=Z&&new Date(Ee.doneAt)<=he:new Date(Ee.id)>=Z&&new Date(Ee.id)<=he);return{studyTimeChange:Ut>0?(sn-Ut)/Ut*100:0,sessionsChange:Me.length>0?(lt.length-Me.length)/Me.length*100:0,tasksChange:ps.length>0?(Gr.filter(Ee=>Ee.done).length-ps.filter(Ee=>Ee.done).length)/ps.filter(Ee=>Ee.done).length*100:0}})(),z=(()=>{const B=d.filter(Z=>Z.mood);if(B.length===0)return null;const q={great:0,good:0,okay:0,struggled:0};return B.forEach(Z=>{q[Z.mood]++}),q})(),W=(()=>{const B=t.reduce((q,Z)=>q+Z.goalHours*60,0);return{current:h,goal:B,percentage:B>0?h/B*100:0}})(),te=(()=>d.filter(B=>B.reflection).sort((B,q)=>new Date(q.timestamp)-new Date(B.timestamp)).slice(0,3))(),ye=(()=>{const B=[];return D<50&&B.push("Try to study at least 4 days a week to build consistency"),m<25&&B.push("Consider longer study sessions for better focus and retention"),_.rate<70&&B.push("Break down large tasks into smaller, manageable chunks"),T.currentStreak<3&&B.push("Start with shorter daily sessions to build your study habit"),B.length===0&&B.push("Great job! Keep up the excellent study habits"),B})(),Ft=()=>{const B={timeRange:o,totalStudyTime:h,totalSessions:f,averageSessionLength:m,consistencyScore:D,taskStats:_,goalProgress:W,streakHistory:T,subjectTimeDistribution:C,date:new Date().toISOString()},q=JSON.stringify(B,null,2),Z=new Blob([q],{type:"application/json"}),he=URL.createObjectURL(Z),lt=document.createElement("a");lt.href=he,lt.download=`study-insights-${o}-${new Date().toISOString().split("T")[0]}.json`,lt.click(),URL.revokeObjectURL(he)};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#0f0f23] via-[#1a1a2e] to-[#16213e] mt-20 flex",children:[a.jsx(Bt,{}),a.jsx("div",{className:"flex-1 ml-16 transition-all duration-300 ease-in-out [body>div>aside:hover_+_div&]:ml-64",children:a.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[a.jsxs("div",{className:"mb-8 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"Study Insights"}),a.jsx("p",{className:"text-gray-300",children:"Track your progress and discover your study patterns"})]}),a.jsxs("button",{onClick:Ft,className:"flex items-center gap-2 px-4 py-2 bg-[#6C5DD3] text-white rounded-lg hover:bg-[#7A6AD9] transition",children:[a.jsx(AM,{className:"w-4 h-4"}),"Export Data"]})]}),a.jsx("div",{className:"mb-6",children:a.jsx("div",{className:"flex gap-2 bg-white/5 rounded-lg p-1 w-fit",children:[{key:"week",label:"This Week"},{key:"month",label:"This Month"},{key:"all",label:"All Time"}].map(B=>a.jsx("button",{onClick:()=>l(B.key),className:`px-4 py-2 rounded-md text-sm font-medium transition ${o===B.key?"bg-[#6C5DD3] text-white":"text-gray-300 hover:text-white"}`,children:B.label},B.key))})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[a.jsxs("div",{className:"bg-white/5 backdrop-blur rounded-2xl p-6 border border-white/10",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(dn,{className:"w-6 h-6 text-[#6C5DD3]"}),a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Total Study Time"})]}),a.jsxs("div",{className:"text-3xl font-bold text-white mb-2",children:[Math.round(h/60),"h ",Math.round(h%60),"m"]}),a.jsxs("p",{className:"text-gray-400 text-sm",children:[f," sessions"]}),$.studyTimeChange!==0&&a.jsxs("div",{className:`flex items-center gap-1 text-xs mt-2 ${$.studyTimeChange>0?"text-green-400":"text-red-400"}`,children:[$.studyTimeChange>0?a.jsx(C0,{className:"w-3 h-3"}):a.jsx(j0,{className:"w-3 h-3"}),Math.abs($.studyTimeChange).toFixed(1),"% vs previous"]})]}),a.jsxs("div",{className:"bg-white/5 backdrop-blur rounded-2xl p-6 border border-white/10",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(Ye,{className:"w-6 h-6 text-[#FEC260]"}),a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Avg Session"})]}),a.jsxs("div",{className:"text-3xl font-bold text-white mb-2",children:[Math.round(m),"m"]}),a.jsx("p",{className:"text-gray-400 text-sm",children:"per session"})]}),a.jsxs("div",{className:"bg-white/5 backdrop-blur rounded-2xl p-6 border border-white/10",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(Wt,{className:"w-6 h-6 text-[#FF6B6B]"}),a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Current Streak"})]}),a.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:T.currentStreak}),a.jsxs("p",{className:"text-gray-400 text-sm",children:["days (best: ",T.longestStreak,")"]})]}),a.jsxs("div",{className:"bg-white/5 backdrop-blur rounded-2xl p-6 border border-white/10",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(wt,{className:"w-6 h-6 text-[#B6E4CF]"}),a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Task Completion"})]}),a.jsxs("div",{className:"text-3xl font-bold text-white mb-2",children:[_.rate.toFixed(1),"%"]}),a.jsxs("p",{className:"text-gray-400 text-sm",children:[_.completed,"/",_.total," tasks"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[a.jsxs("div",{className:"bg-white/5 backdrop-blur rounded-2xl p-6 border border-white/10",children:[a.jsxs("h3",{className:"text-xl font-semibold text-white mb-6 flex items-center gap-2",children:[a.jsx(bt,{className:"w-5 h-5"}),"Longest Session"]}),y?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-3xl font-bold text-white",children:[Math.round(y.durationMinutes)," minutes"]}),a.jsxs("div",{className:"text-gray-300",children:[a.jsxs("div",{children:["Subject: ",y.subjectName]}),a.jsxs("div",{children:["Date: ",new Date(y.timestamp).toLocaleDateString()]}),y.task&&a.jsxs("div",{children:["Task: ",y.task]})]})]}):a.jsx("div",{className:"text-gray-400",children:"No sessions recorded yet"})]}),a.jsxs("div",{className:"bg-white/5 backdrop-blur rounded-2xl p-6 border border-white/10",children:[a.jsxs("h3",{className:"text-xl font-semibold text-white mb-6 flex items-center gap-2",children:[a.jsx(Je,{className:"w-5 h-5"}),"Study Consistency"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-3xl font-bold text-white",children:[D.toFixed(1),"%"]}),a.jsx("div",{className:"w-full bg-white/10 rounded-full h-3",children:a.jsx("div",{className:"bg-[#6C5DD3] h-3 rounded-full transition-all duration-500",style:{width:`${Math.min(D,100)}%`}})}),a.jsxs("div",{className:"text-gray-300 text-sm",children:["Studied ",Math.round(D/100*(o==="week"?7:o==="month"?30:365))," out of ",o==="week"?7:o==="month"?30:365," days"]})]})]})]}),a.jsxs("div",{className:"bg-white/5 backdrop-blur rounded-2xl p-6 border border-white/10 mb-8",children:[a.jsxs("h3",{className:"text-xl font-semibold text-white mb-6 flex items-center gap-2",children:[a.jsx(xM,{className:"w-5 h-5"}),"Subject Time Distribution"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(C).map(([B,q])=>{const Z=h>0?q/h*100:0,he=t.find(lt=>lt.name===B);return a.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-white/5",children:[a.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:(he==null?void 0:he.color)||"#6C5DD3"}}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-white font-medium",children:B}),a.jsxs("div",{className:"text-gray-300 text-sm",children:[Math.round(q/60),"h (",Z.toFixed(1),"%)"]})]})]},B)})})]}),a.jsxs("div",{className:"bg-white/5 backdrop-blur rounded-2xl p-6 border border-white/10 mb-8",children:[a.jsxs("h3",{className:"text-xl font-semibold text-white mb-6 flex items-center gap-2",children:[a.jsx(bt,{className:"w-5 h-5"}),"Subject Leaderboard (All Time)"]}),x.length>0?a.jsx("div",{className:"space-y-4",children:x.map((B,q)=>a.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-white/5 border border-white/10",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-[#6C5DD3] flex items-center justify-center text-white font-bold text-sm",children:q+1}),a.jsxs("div",{children:[a.jsx("div",{className:"text-white font-semibold text-lg",children:B.subjectName}),a.jsxs("div",{className:"text-gray-300 text-sm",children:[B.totalHours,"h ",B.totalMinutesRemaining,"m total"]})]})]}),a.jsxs("div",{className:"text-right",children:[q===0&&a.jsxs("div",{className:"flex items-center gap-2 text-[#FEC260] mb-1",children:[a.jsx(bt,{className:"w-5 h-5"}),a.jsx("span",{className:"text-sm font-medium",children:"Top Studier"})]}),a.jsxs("div",{className:"text-2xl font-bold text-white",children:[B.totalHours,"h ",B.totalMinutesRemaining,"m"]})]})]},B.subjectName))}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(bt,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-400 text-lg",children:"No study data yet!"}),a.jsx("p",{className:"text-gray-500 text-sm",children:"Complete your first study session to see the leaderboard"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[a.jsxs("div",{className:"bg-white/5 backdrop-blur rounded-2xl p-6 border border-white/10",children:[a.jsxs("h3",{className:"text-xl font-semibold text-white mb-6 flex items-center gap-2",children:[a.jsx(aM,{className:"w-5 h-5"}),"Time of Day Heatmap"]}),a.jsx("div",{className:"grid grid-cols-12 gap-1",children:j.map((B,q)=>{const Z=Math.max(...j),he=Z>0?B/Z:0;return a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-xs text-gray-400 mb-1",children:q}),a.jsx("div",{className:"w-full rounded transition-all duration-300",style:{height:"20px",backgroundColor:`rgba(108, 93, 211, ${he})`}})]},q)})})]}),a.jsxs("div",{className:"bg-white/5 backdrop-blur rounded-2xl p-6 border border-white/10",children:[a.jsxs("h3",{className:"text-xl font-semibold text-white mb-6 flex items-center gap-2",children:[a.jsx(mM,{className:"w-5 h-5"}),"Day of Week Breakdown"]}),a.jsx("div",{className:"space-y-3",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((B,q)=>{const Z=R[q],he=Math.max(...R),lt=he>0?Z/he*100:0;return a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 text-sm text-gray-300",children:B}),a.jsx("div",{className:"flex-1 bg-white/10 rounded-full h-3",children:a.jsx("div",{className:"bg-[#6C5DD3] h-3 rounded-full transition-all duration-300",style:{width:`${lt}%`}})}),a.jsxs("div",{className:"w-12 text-sm text-gray-300 text-right",children:[Math.round(Z/60),"h"]})]},B)})})]})]}),z&&a.jsxs("div",{className:"bg-white/5 backdrop-blur rounded-2xl p-6 border border-white/10 mb-8",children:[a.jsxs("h3",{className:"text-xl font-semibold text-white mb-6 flex items-center gap-2",children:[a.jsx(Gw,{className:"w-5 h-5"}),"Mood Trends"]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(z).map(([B,q])=>{const Z={great:"",good:"",okay:"",struggled:""}[B];return a.jsxs("div",{className:"text-center p-4 rounded-lg bg-white/5",children:[a.jsx("div",{className:"text-2xl mb-2",children:Z}),a.jsx("div",{className:"text-white font-medium capitalize",children:B}),a.jsxs("div",{className:"text-gray-300 text-sm",children:[q," sessions"]})]},B)})})]}),a.jsxs("div",{className:"bg-white/5 backdrop-blur rounded-2xl p-6 border border-white/10 mb-8",children:[a.jsxs("h3",{className:"text-xl font-semibold text-white mb-6 flex items-center gap-2",children:[a.jsx(Ye,{className:"w-5 h-5"}),"Goal Progress"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-white",children:"Weekly Goal Progress"}),a.jsxs("span",{className:"text-white font-bold",children:[W.percentage.toFixed(1),"%"]})]}),a.jsx("div",{className:"w-full bg-white/10 rounded-full h-3",children:a.jsx("div",{className:"bg-[#6C5DD3] h-3 rounded-full transition-all duration-500",style:{width:`${Math.min(W.percentage,100)}%`}})}),a.jsxs("div",{className:"text-gray-300 text-sm",children:[Math.round(W.current/60),"h / ",Math.round(W.goal/60),"h"]})]})]}),te.length>0&&a.jsxs("div",{className:"bg-white/5 backdrop-blur rounded-2xl p-6 border border-white/10 mb-8",children:[a.jsxs("h3",{className:"text-xl font-semibold text-white mb-6 flex items-center gap-2",children:[a.jsx(Gw,{className:"w-5 h-5"}),"Recent Reflections"]}),a.jsx("div",{className:"space-y-4",children:te.map((B,q)=>a.jsxs("div",{className:"p-4 rounded-lg bg-white/5",children:[a.jsxs("div",{className:"text-gray-300 text-sm mb-2",children:[new Date(B.timestamp).toLocaleDateString()," - ",B.subjectName]}),a.jsxs("div",{className:"text-white italic",children:['"',B.reflection,'"']})]},q))})]}),E.length>0&&a.jsxs("div",{className:"bg-white/5 backdrop-blur rounded-2xl p-6 border border-white/10 mb-8",children:[a.jsxs("h3",{className:"text-xl font-semibold text-white mb-6 flex items-center gap-2",children:[a.jsx(EM,{className:"w-5 h-5"}),"Upcoming Deadlines"]}),a.jsx("div",{className:"space-y-3",children:E.map((B,q)=>a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/5",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-white font-medium",children:B.name}),a.jsx("div",{className:"text-gray-300 text-sm",children:B.subject})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-white text-sm",children:new Date(B.scheduledDate).toLocaleDateString()}),a.jsxs("div",{className:"text-gray-300 text-xs",children:[B.time," min"]})]})]},q))})]}),a.jsxs("div",{className:"bg-white/5 backdrop-blur rounded-2xl p-6 border border-white/10 mb-8",children:[a.jsxs("h3",{className:"text-xl font-semibold text-white mb-6 flex items-center gap-2",children:[a.jsx(up,{className:"w-5 h-5"}),"Personalized Suggestions"]}),a.jsx("div",{className:"space-y-3",children:ye.map((B,q)=>a.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-[#6C5DD3]/10 border border-[#6C5DD3]/20",children:[a.jsx(up,{className:"w-5 h-5 text-[#FEC260] mt-0.5"}),a.jsx("div",{className:"text-white",children:B})]},q))})]})]})})]})}function lU(){return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#1a1a2e] to-[#16213e] mt-20 flex",children:[a.jsx(Bt,{}),a.jsx("div",{className:"flex-1 ml-16 transition-all duration-300 ease-in-out [body>div>aside:hover_+_div&]:ml-64",children:a.jsxs("div",{className:"p-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-white mb-6",children:"Privacy policy"}),a.jsx("p",{className:"text-white/80 mb-4",children:" Privacy Policy for Trackademic Last updated: [Date] Trackademic (we, our, or us) respects your privacy and is committed to protecting the personal information you share with us. This Privacy Policy explains how we collect, use, and safeguard your information when you use our website and app. 1. Information We Collect We may collect the following types of information when you use Trackademic: Personal Information: such as your name, email address, or account details when you sign up. Usage Data: information about how you use Trackademic (study sessions, tasks completed, device type, browser type, etc.). Cookies and Tracking Data: to improve your experience, track analytics, and serve ads (including Google AdSense, if enabled). 2. How We Use Your Information We use the information we collect to: Provide and improve our services. Personalize your study dashboard and insights. Communicate with you about updates, features, or support. Show relevant ads (if AdSense or other ad networks are enabled). Ensure the security and functionality of Trackademic. 3. Cookies and Third-Party Services We use cookies to enhance your experience. You can control cookies through your browser settings. If Google AdSense is active, Google may use cookies to serve ads based on your prior visits to Trackademic or other websites. You can opt out of personalized advertising by visiting Google Ads Settings . 4. Data Sharing and Disclosure We do not sell or rent your personal data to third parties. We may share information only in the following cases: With service providers that help us run the site (e.g., hosting, analytics). If required by law, regulation, or legal request. To protect our rights, safety, or property. 5. Data Retention and Security We retain your data only as long as necessary to provide our services or as required by law. We use reasonable security measures to protect your information, but no online system is 100% secure. 6. Your Rights Depending on your location, you may have rights to: Access, correct, or delete your personal data. Opt out of marketing communications. Manage cookies and ad preferences. To exercise these rights, contact us at [your email address]. 7. Childrens Privacy Trackademic is not directed at children under 13 (or the age of digital consent in your country). We do not knowingly collect personal information from children. 8. Changes to This Policy We may update this Privacy Policy from time to time. If we make significant changes, well notify you through the site or by email. 9. Contact Us If you have any questions about this Privacy Policy, you can contact us at:  [your email here]  Trackademic"})]})})]})}const cU=()=>{const[t,e]=S.useState(!1),n={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},s={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.6}}},r=i=>{const o=document.getElementById(i);o&&o.scrollIntoView({behavior:"smooth"})};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-cyan-50",children:[a.jsx("nav",{className:"fixed top-0 w-full bg-white/90 backdrop-blur-md z-50 border-b border-gray-100",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex justify-between items-center h-16",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-emerald-500 to-blue-600 rounded-lg flex items-center justify-center",children:a.jsx(Ye,{className:"w-5 h-5 text-white"})}),a.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-emerald-600 to-blue-600 bg-clip-text text-transparent",children:"Trackviso"})]}),a.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[a.jsx("button",{onClick:()=>r("features"),className:"text-gray-600 hover:text-gray-900 transition-colors cursor-pointer",children:"Features"}),a.jsx("button",{onClick:()=>r("how-it-works"),className:"text-gray-600 hover:text-gray-900 transition-colors cursor-pointer",children:"How It Works"}),a.jsx("button",{onClick:()=>r("pricing"),className:"text-gray-600 hover:text-gray-900 transition-colors cursor-pointer",children:"Pricing"}),a.jsx("button",{onClick:()=>r("testimonials"),className:"text-gray-600 hover:text-gray-900 transition-colors cursor-pointer",children:"Reviews"}),a.jsx(ft,{to:"/login",className:"text-emerald-600 hover:text-emerald-700 font-medium",children:"Login"}),a.jsx(ft,{to:"/signup",className:"bg-gradient-to-r from-emerald-600 to-blue-600 text-white px-4 py-2 rounded-lg hover:shadow-lg transition-all duration-300 transform hover:scale-105",children:"Let's go!"})]})]})})}),a.jsx("section",{className:"pt-24 pb-16 px-4",children:a.jsxs(G.div,{className:"max-w-7xl mx-auto text-center",variants:n,initial:"hidden",animate:"visible",children:[a.jsx(G.div,{variants:s,className:"mb-8",children:a.jsxs("div",{className:"inline-flex items-center bg-emerald-100 text-emerald-800 px-4 py-2 rounded-full text-sm font-medium mb-6",children:[a.jsx(Sn,{className:"w-4 h-4 mr-2"}),"Track your academic journey like never before"]})}),a.jsxs(G.h1,{className:"text-5xl lg:text-7xl font-bold leading-tight mb-8",variants:s,children:["Make every"," ",a.jsx("span",{className:"bg-gradient-to-r from-emerald-500 to-blue-600 bg-clip-text text-transparent",children:"Study Session"})," ","Count."]}),a.jsx(G.p,{className:"text-xl lg:text-2xl text-gray-600 mb-12 max-w-4xl mx-auto",variants:s,children:"Your revision dashboard: study tracker, analytics, calendar, and XP system in one."}),a.jsxs(G.div,{className:"flex flex-col sm:flex-row gap-4 justify-center max-w-md mx-auto",variants:s,children:[a.jsxs(ft,{to:"/signup",className:"bg-gradient-to-r from-emerald-600 to-blue-600 text-white px-8 py-4 rounded-xl font-semibold text-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 flex items-center justify-center",children:["It's 100% Free",a.jsx(Fw,{className:"ml-2 w-5 h-5"})]}),a.jsxs("button",{onClick:()=>r("demo"),className:"border-2 border-gray-300 text-gray-700 px-8 py-4 rounded-xl font-semibold text-lg hover:border-emerald-500 hover:text-emerald-600 transition-all duration-300 flex items-center justify-center",children:[a.jsx(yo,{className:"mr-2 w-5 h-5"}),"Watch Demo"]})]}),a.jsx(G.div,{className:"mt-16 relative",variants:s,children:a.jsx("div",{className:"bg-white rounded-3xl shadow-2xl p-8 max-w-4xl mx-auto",children:a.jsx("div",{className:"bg-gradient-to-br from-emerald-50 to-blue-50 rounded-2xl p-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx(dn,{className:"w-6 h-6 text-emerald-500"}),a.jsx("span",{className:"text-sm text-gray-500",children:"This Week"})]}),a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"32.5h"}),a.jsx("div",{className:"text-sm text-emerald-600",children:"+18% from last week"})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx(bt,{className:"w-6 h-6 text-blue-500"}),a.jsx("span",{className:"text-sm text-gray-500",children:"Goals"})]}),a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"8/10"}),a.jsx("div",{className:"text-sm text-blue-600",children:"Completed"})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx(Tn,{className:"w-6 h-6 text-purple-500"}),a.jsx("span",{className:"text-sm text-gray-500",children:"Progress"})]}),a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"94%"}),a.jsx("div",{className:"text-sm text-purple-600",children:"On track"})]})]})})})})]})}),a.jsx("section",{id:"features",className:"py-20 px-4 bg-white",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsxs("h2",{className:"text-4xl lg:text-5xl font-bold mb-6",children:["Powerful Features for"," ",a.jsx("span",{className:"bg-gradient-to-r from-emerald-500 to-blue-600 bg-clip-text text-transparent",children:"Academic Excellence"})]}),a.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Everything you need to track, analyze, and improve your academic performance"})]}),a.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[a.jsxs(G.div,{className:"bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-3xl p-8 text-white",initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},children:[a.jsx(Ll,{className:"w-12 h-12 mb-6"}),a.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Track every session"}),a.jsx("p",{className:"text-emerald-100 text-lg mb-6",children:"Smart revision timer with inbuilt pomodoro mode, custom, and stopwatch features. Log every session you do."}),a.jsxs("div",{className:"bg-white/20 rounded-xl p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm",children:"Time left"}),a.jsx("span",{className:"text-sm font-semibold",children:"2 minutes"})]}),a.jsx("div",{className:"w-full bg-white/30 rounded-full h-2",children:a.jsx("div",{className:"bg-white h-2 rounded-full",style:{width:"96%"}})})]})]}),a.jsxs(G.div,{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-3xl p-8 text-white",initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.1},viewport:{once:!0},children:[a.jsx(Ye,{className:"w-12 h-12 mb-6"}),a.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Gamified experience"}),a.jsx("p",{className:"text-blue-100 text-lg mb-6",children:"Become addicted to studying with streaks, xp, levels, achievements, quests, and more!"}),a.jsxs("div",{className:"bg-white/20 rounded-xl p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm",children:"Level 3 - 234 XP needed"}),a.jsx("span",{className:"text-sm font-semibold",children:"87%"})]}),a.jsx("div",{className:"w-full bg-white/30 rounded-full h-2",children:a.jsx("div",{className:"bg-white h-2 rounded-full",style:{width:"87%"}})})]})]}),a.jsxs(G.div,{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-3xl p-8 text-white",initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.2},viewport:{once:!0},children:[a.jsx(Vl,{className:"w-12 h-12 mb-6"}),a.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Get the best Insights"}),a.jsx("p",{className:"text-purple-100 text-lg mb-6",children:"Get personalized recommendations and insights to optimize your study schedule and improve performance."}),a.jsxs("div",{className:"bg-white/20 rounded-xl p-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(up,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:"Smart Tip"})]}),a.jsx("p",{className:"text-sm text-purple-100",children:"Study math between 2-4 PM for 23% better retention"})]})]})]}),a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6 mt-16",children:[{icon:dn,title:"Time Tracking",desc:"Log your study sessions"},{icon:Po,title:"Achievement System",desc:"Gamified progress rewards"},{icon:as,title:"Privacy First",desc:"Your data stays secure"},{icon:dV,title:"Cross-Platform",desc:"Works on all devices"}].map((i,o)=>a.jsxs(G.div,{className:"bg-gray-50 rounded-2xl p-6 hover:bg-white hover:shadow-lg transition-all duration-300",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:o*.1},viewport:{once:!0},children:[a.jsx(i.icon,{className:"w-8 h-8 text-emerald-500 mb-4"}),a.jsx("h4",{className:"text-lg font-semibold mb-2",children:i.title}),a.jsx("p",{className:"text-gray-600 text-sm",children:i.desc})]},o))})]})}),a.jsx("section",{id:"how-it-works",className:"py-20 px-4 bg-gradient-to-br from-gray-50 to-blue-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsxs("h2",{className:"text-4xl lg:text-5xl font-bold mb-6",children:["How Trackviso"," ",a.jsx("span",{className:"bg-gradient-to-r from-emerald-500 to-blue-600 bg-clip-text text-transparent",children:"Works"})]}),a.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Get started in minutes and see immediate improvements in your academic tracking"})]}),a.jsx("div",{className:"grid lg:grid-cols-3 gap-12",children:[{step:"01",title:"Connect Your Courses",desc:"Add your own subjects and tasks to create your own study experience.",icon:Wn,color:"emerald"},{step:"02",title:"Track Your Progress",desc:"Log study sessions, assignments, and achievements. Earn XP and level up.",icon:Ll,color:"blue"},{step:"03",title:"Optimize & Improve",desc:"Get personalized insights and recommendations to maximize your academic performance.",icon:Tn,color:"purple"}].map((i,o)=>a.jsxs(G.div,{className:"text-center",initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:o*.2},viewport:{once:!0},children:[a.jsx("div",{className:`w-20 h-20 mx-auto mb-6 rounded-full bg-gradient-to-br from-${i.color}-500 to-${i.color}-600 flex items-center justify-center text-white shadow-lg`,children:a.jsx(i.icon,{className:"w-10 h-10"})}),a.jsx("div",{className:`text-4xl font-bold text-${i.color}-500 mb-4`,children:i.step}),a.jsx("h3",{className:"text-2xl font-bold mb-4",children:i.title}),a.jsx("p",{className:"text-gray-600 text-lg leading-relaxed",children:i.desc})]},o))})]})}),a.jsx("section",{id:"demo",className:"py-20 px-4 bg-white",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[a.jsxs(G.div,{initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},transition:{duration:.6},viewport:{once:!0},children:[a.jsxs("h2",{className:"text-4xl lg:text-5xl font-bold mb-6",children:["See Trackviso in"," ",a.jsx("span",{className:"bg-gradient-to-r from-emerald-500 to-blue-600 bg-clip-text text-transparent",children:"Action"})]}),a.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Watch how students are transforming their academic journey with intelligent tracking and insights."}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(wt,{className:"w-6 h-6 text-emerald-500"}),a.jsx("span",{className:"text-lg",children:"Real-time progress tracking"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(wt,{className:"w-6 h-6 text-emerald-500"}),a.jsx("span",{className:"text-lg",children:"Personalized study insights"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(wt,{className:"w-6 h-6 text-emerald-500"}),a.jsx("span",{className:"text-lg",children:"Goal achievement system"})]})]})]}),a.jsx(G.div,{className:"relative",initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{duration:.6},viewport:{once:!0},children:a.jsx("div",{className:"relative bg-gradient-to-br from-emerald-600 to-blue-700 rounded-3xl overflow-hidden group cursor-pointer aspect-video flex items-center justify-center",onClick:()=>e(!t),children:t?a.jsxs("div",{className:"text-white text-center",children:[a.jsx("p",{className:"text-xl",children:"If the video does not play, feel free to contact us"}),a.jsx("button",{className:"mt-4 bg-white/20 px-4 py-2 rounded-lg",onClick:i=>{i.stopPropagation(),e(!1)},children:"Close"})]}):a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform",children:a.jsx(yo,{className:"w-10 h-10 text-white ml-1"})}),a.jsx("p",{className:"text-white text-xl font-semibold",children:"Watch 2-minute demo"})]})})})]})})}),a.jsx("section",{id:"pricing",className:"py-20 px-4 bg-gradient-to-br from-gray-50 to-purple-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsxs("h2",{className:"text-4xl lg:text-5xl font-bold mb-6",children:["Simple"," ",a.jsx("span",{className:"bg-gradient-to-r from-emerald-500 to-blue-600 bg-clip-text text-transparent",children:"Pricing"})]}),a.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Start free, Stay free. No hidden fees, No Paywalls."})]}),a.jsxs("div",{className:"bg-gradient-to-br from-emerald-500 to-blue-600 rounded-3xl shadow-xl text-white relative px-48 py-8",children:[a.jsx("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2",children:a.jsx("div",{className:"bg-yellow-400 text-yellow-900 px-4 py-1 rounded-full text-sm font-semibold",children:"Most Popular"})}),a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h3",{className:"text-2xl font-bold mb-2",children:"The Scholar"}),a.jsxs("div",{className:"text-4xl font-bold mb-4",children:["$0",a.jsx("span",{className:"text-lg text-emerald-100",children:"/month"})]}),a.jsx("p",{className:"text-emerald-100",children:"It's all free"})]}),a.jsxs("ul",{className:"space-y-4 mb-8",children:[a.jsxs("li",{className:"flex items-center space-x-3",children:[a.jsx(wt,{className:"w-5 h-5 text-emerald-200"}),a.jsx("span",{children:"Unlimited subjects"})]}),a.jsxs("li",{className:"flex items-center space-x-3",children:[a.jsx(wt,{className:"w-5 h-5 text-emerald-200"}),a.jsx("span",{children:"Unlimited logging"})]}),a.jsxs("li",{className:"flex items-center space-x-3",children:[a.jsx(wt,{className:"w-5 h-5 text-emerald-200"}),a.jsx("span",{children:"Full insight access"})]}),a.jsxs("li",{className:"flex items-center space-x-3",children:[a.jsx(wt,{className:"w-5 h-5 text-emerald-200"}),a.jsx("span",{children:"Full gamification access"})]})]}),a.jsx(ft,{to:"/signup",className:"w-full bg-white text-emerald-600 py-3 rounded-xl font-semibold text-center block hover:bg-gray-50 transition-colors",children:"Start for free"})]}),a.jsx("div",{className:"grid lg:grid-cols-3 gap-8 max-w-5xl mx-auto"})]})}),a.jsx("section",{id:"testimonials",className:"py-20 px-4 bg-white",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsxs("h2",{className:"text-4xl lg:text-5xl font-bold mb-6",children:["What Students"," ",a.jsx("span",{className:"bg-gradient-to-r from-emerald-500 to-blue-600 bg-clip-text text-transparent",children:"Say"})]}),a.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Join thousands of students who have transformed their academic journey"})]}),a.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{name:"Sara_672",role:"Computer Science Major",text:"Trackviso saved my junior year, I used to journal all of my sessions but I became so burnt out, now this keeps me going!",rating:5},{name:"IDK875_9",role:"Secondary school student",text:"It actually helped me study a fair bit, I wasn't getting lost anymore and I could keep track while having fun.",rating:5},{name:"Emma_GOAT_",role:"Engineering Student",text:"Finally, a tool that actually helps me stay organized. The gamification feature keeps me motivated every day.",rating:5}].map((i,o)=>a.jsxs(G.div,{className:"bg-gray-50 p-8 rounded-2xl hover:shadow-lg transition-all duration-300",initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:o*.1},viewport:{once:!0},children:[a.jsx("div",{className:"flex justify-center mb-4",children:[...Array(i.rating)].map((l,c)=>a.jsx(Je,{className:"w-5 h-5 text-yellow-400 fill-current"},c))}),a.jsxs("p",{className:"text-gray-700 mb-6 text-lg leading-relaxed",children:['"',i.text,'"']}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"font-semibold text-lg",children:i.name}),a.jsx("div",{className:"text-gray-500",children:i.role})]})]},o))})]})}),a.jsx("section",{className:"py-20 px-4 bg-gradient-to-r from-emerald-600 to-blue-700",children:a.jsxs(G.div,{className:"max-w-4xl mx-auto text-center text-white",initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},children:[a.jsx("h2",{className:"text-4xl lg:text-5xl font-bold mb-6",children:"Ready to Transform Your Academic Journey?"}),a.jsx("p",{className:"text-xl text-emerald-100 mb-10",children:"Join thousands of students who are already achieving better results with Trackviso"}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center max-w-md mx-auto",children:[a.jsxs(ft,{to:"/signup",className:"bg-white text-emerald-600 px-8 py-4 rounded-xl font-semibold text-lg hover:bg-gray-50 transition-all duration-300 transform hover:scale-105 flex items-center justify-center",children:["Start Now",a.jsx(Fw,{className:"ml-2 w-5 h-5"})]}),a.jsxs("button",{onClick:()=>r("demo"),className:"border-2 border-white text-white px-8 py-4 rounded-xl font-semibold text-lg hover:bg-white hover:text-emerald-600 transition-all duration-300 flex items-center justify-center",children:[a.jsx(yo,{className:"mr-2 w-5 h-5"}),"Watch Demo"]})]})]})}),a.jsx("footer",{className:"bg-gray-900 text-white py-16 px-4",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"grid md:grid-cols-4 gap-8 mb-12",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-emerald-500 to-blue-600 rounded-lg flex items-center justify-center",children:a.jsx(Ye,{className:"w-5 h-5 text-white"})}),a.jsx("span",{className:"text-xl font-bold",children:"Trackviso"})]}),a.jsx("p",{className:"text-gray-400 mb-6",children:"Empowering students to achieve academic excellence through intelligent tracking and insights."})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-4",children:"Product"}),a.jsxs("div",{className:"space-y-3 text-gray-400",children:[a.jsx("button",{onClick:()=>r("features"),className:"block hover:text-white transition-colors",children:"Features"}),a.jsx("button",{onClick:()=>r("pricing"),className:"block hover:text-white transition-colors",children:"Pricing"}),a.jsx("button",{onClick:()=>r("demo"),className:"block hover:text-white transition-colors",children:"Demo"})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-4",children:"Company"}),a.jsxs("div",{className:"space-y-3 text-gray-400",children:[a.jsx("div",{className:"hover:text-white transition-colors cursor-pointer",children:"Privacy"}),a.jsx("div",{className:"hover:text-white transition-colors cursor-pointer",children:"Terms"})]})]})]}),a.jsx("div",{className:"border-t border-gray-800 pt-8 text-center text-gray-400",children:a.jsx("p",{children:" 2025 Trackviso. All rights reserved. Built with  for students."})})]})})]})};function uU(){const{login:t}=Ii(),[e,n]=S.useState(""),[s,r]=S.useState(""),[i,o]=S.useState(""),l=$s(),c=async d=>{d.preventDefault(),o("");try{await t(e,s),l("/dashboard")}catch{o("Failed to log in. Check your credentials.")}};return a.jsxs("div",{className:"min-h-screen flex flex-col justify-center items-center bg-gradient-to-br from-blue-100 via-purple-100 to-green-100",children:[a.jsxs("form",{onSubmit:c,className:"max-w-md w-full mx-auto bg-white rounded-2xl shadow-lg p-8",children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Login"}),i&&a.jsx("p",{className:"text-red-500",children:i}),a.jsx("input",{className:"block w-full border p-2 mb-3",type:"email",placeholder:"Email",onChange:d=>n(d.target.value)}),a.jsx("input",{className:"block w-full border p-2 mb-4",type:"password",placeholder:"Password",onChange:d=>r(d.target.value)}),a.jsx("button",{className:"w-full bg-blue-600 text-white py-2 rounded",children:"Log In"})]}),a.jsxs("div",{className:"text-center mt-4",children:[a.jsx("span",{children:"Don't have an account? "}),a.jsx(ft,{to:"/signup",className:"text-blue-500 underline",children:"Sign Up"})]})]})}function dU({onComplete:t}){const[e,n]=S.useState(""),[s,r]=S.useState(!1),[i,o]=S.useState(""),{user:l,fetchUserProfile:c}=Ii(),d=async h=>{if(h.preventDefault(),!e.trim()){o("Please enter your name");return}r(!0),o("");try{console.log("Saving name to Firestore:",e.trim(),"for user:",l.uid),await q6(Ru(Mu,"users",l.uid),{name:e.trim(),email:l.email,createdAt:new Date,updatedAt:new Date}),console.log("Name saved successfully, refreshing profile..."),await c(l.uid),t()}catch(f){o("Failed to save your name. Please try again."),console.error("Error saving name:",f)}finally{r(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full mx-4",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Welcome to Trackviso!"}),a.jsx("p",{className:"text-gray-600",children:"What should we call you?"})]}),a.jsxs("form",{onSubmit:d,children:[i&&a.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:i}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Name"}),a.jsx("input",{id:"name",type:"text",value:e,onChange:h=>n(h.target.value),placeholder:"Enter your full name",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",disabled:s,autoFocus:!0})]}),a.jsx("button",{type:"submit",disabled:s||!e.trim(),className:"w-full bg-purple-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition",children:s?"Saving...":"Continue"})]})]})})}function hU(){const{signup:t}=Ii(),[e,n]=S.useState(""),[s,r]=S.useState(""),[i,o]=S.useState(""),[l,c]=S.useState(!1),d=$s(),h=async m=>{m.preventDefault(),o("");try{await t(e,s),c(!0)}catch(y){o("Failed to sign up. "+y.message)}},f=()=>{d("/dashboard")};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"min-h-screen flex flex-col justify-center items-center bg-gradient-to-br from-blue-100 via-purple-100 to-green-100",children:[a.jsxs("form",{onSubmit:h,className:"max-w-md w-full mx-auto bg-white rounded-2xl shadow-lg p-8",children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Sign Up"}),i&&a.jsx("p",{className:"text-red-500",children:i}),a.jsx("input",{className:"block w-full border p-2 mb-3",type:"email",placeholder:"Email",onChange:m=>n(m.target.value)}),a.jsx("input",{className:"block w-full border p-2 mb-4",type:"password",placeholder:"Password",onChange:m=>r(m.target.value)}),a.jsx("button",{className:"w-full bg-green-600 text-white py-2 rounded",children:"Sign Up"})]}),a.jsxs("div",{className:"text-center mt-4",children:[a.jsx("span",{children:"Have an account? "}),a.jsx("a",{href:"/login",className:"text-blue-500 underline",children:"Log in"})]})]}),l&&a.jsx(dU,{onComplete:f})]})}function fU(){return a.jsx(dN,{children:a.jsx(eM,{children:a.jsx(Z6,{children:a.jsx(SP,{children:a.jsxs(JI,{children:[a.jsx(pn,{path:"/",element:a.jsx(cU,{})}),a.jsx(pn,{path:"/login",element:a.jsx(uU,{})}),a.jsx(pn,{path:"/signup",element:a.jsx(hU,{})}),a.jsx(pn,{path:"/dashboard",element:a.jsx(Js,{children:a.jsxs("div",{className:"flex h-screen bg-gray-50",children:[a.jsx(Bt,{}),a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsx(Zs,{}),a.jsx("main",{className:"flex-1 overflow-auto",children:a.jsx(eU,{})})]})]})})}),a.jsx(pn,{path:"/classic-dashboard",element:a.jsx(Js,{children:a.jsxs("div",{className:"flex h-screen bg-gray-50",children:[a.jsx(Bt,{}),a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsx(Zs,{}),a.jsx("main",{className:"flex-1 overflow-auto",children:a.jsx(m8,{})})]})]})})}),a.jsx(pn,{path:"/subjects",element:a.jsx(Js,{children:a.jsxs("div",{className:"flex h-screen bg-gray-50",children:[a.jsx(Bt,{}),a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsx(Zs,{}),a.jsx("main",{className:"flex-1 overflow-auto",children:a.jsx(nU,{})})]})]})})}),a.jsx(pn,{path:"/study",element:a.jsx(Js,{children:a.jsxs("div",{className:"flex h-screen bg-gray-50",children:[a.jsx(Bt,{}),a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsx(Zs,{}),a.jsx("main",{className:"flex-1 overflow-auto",children:a.jsx(sU,{})})]})]})})}),a.jsx(pn,{path:"/tasks",element:a.jsx(Js,{children:a.jsxs("div",{className:"flex h-screen bg-gray-50",children:[a.jsx(Bt,{}),a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsx(Zs,{}),a.jsx("main",{className:"flex-1 overflow-auto",children:a.jsx(rU,{})})]})]})})}),a.jsx(pn,{path:"/schedule",element:a.jsx(Js,{children:a.jsxs("div",{className:"flex h-screen bg-gray-50",children:[a.jsx(Bt,{}),a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsx(Zs,{}),a.jsx("main",{className:"flex-1 overflow-auto",children:a.jsx(iU,{})})]})]})})}),a.jsx(pn,{path:"/insights",element:a.jsx(Js,{children:a.jsxs("div",{className:"flex h-screen bg-gray-50",children:[a.jsx(Bt,{}),a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsx(Zs,{}),a.jsx("main",{className:"flex-1 overflow-auto",children:a.jsx(aU,{})})]})]})})}),a.jsx(pn,{path:"/privacy",element:a.jsx(Js,{children:a.jsxs("div",{className:"flex h-screen bg-gray-50",children:[a.jsx(Bt,{}),a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsx(Zs,{}),a.jsx("main",{className:"flex-1 overflow-auto",children:a.jsx(lU,{})})]})]})})})]})})})})})}zf.createRoot(document.getElementById("root")).render(a.jsx(dN,{children:a.jsx(fU,{})}));
